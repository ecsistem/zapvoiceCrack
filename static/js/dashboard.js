var ov=Object.defineProperty;var av=(e,t,n)=>t in e?ov(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var pe=(e,t,n)=>av(e,typeof t!="symbol"?t+"":t,n);import { b as Ce, a as J, u as Qt, B as X, q as cv, f as dv, S as iv, d as lv, j as o, e as pr, c as ze } from "./chunk-B5T44RpL.js";
import { c as Bm, u as Hd, a as fv, d as gv, E as hv, b as mn, s as mv, $ as pv, g as uc, p as uv, R as x, r as y } from "./chunk-BqDfMDXV.js";
import { m as $e, aV as $n, bg as $s, al as $v, aY as Aa, O as As, H as Av, C as Bn, ao as Bv, bN as C8, aQ as Ca, bJ as Cr, N as Cv, aZ as Da, h as De, bK as Do, J as Dv, bL as E8, aO as Ea, bi as El, v as Ev, b2 as Fa, ah as Ft, ad as Fv, aa as Gd, bs as Gm, av as Gv, af as Hm, a5 as Ht, ar as Hv, bO as I8, aW as Ia, G as Iv, aJ as Jv, ay as Kd, i as Kr, bk as Kt, az as Kv, aj as Ln, a1 as Lr, aM as Ls, ak as Lv, a_ as Ma, K as Mv, bI as N8, aN as Na, bf as Nl, V as Nv, b0 as Oa, X as On, x as Or, a8 as Ov, b4 as Pa, W as Pr, ag as Pv, aK as Qv, am as Rv, bM as S8, aP as Sa, U as Sv, b1 as Ta, ab as Tv, k as Ud, b6 as Um, at as Uv, n as Vn, an as Vv, a9 as Wd, bq as Wm, au as Wv, ai as Xe, z as Xr, aC as Xv, R as Yo, o as Yr, aB as Yv, j as Zd, aF as Zm, as as Zv, b3 as _a, aT as _t, ae as _v, bn as a8, a2 as ao, bF as b8, aU as bc, P as be, B as bv, br as c8, L as ce, aH as co, bt as d8, bc as dn, b7 as e8, w as en, bw as f8, r as fc, q as fe, bB as g8, aG as gc, Y as gr, S as gt, bz as h8, aE as hc, d as he, E as hr, bo as i8, t as ie, ac as io, b9 as ir, bH as j8, Q as ja, bd as jc, u as jv, a$ as ka, a7 as kv, bp as l8, l as le, aA as lo, bx as m8, aq as mc, a3 as mt, bh as n8, a6 as nt, bm as o8, y as oo, by as p8, aD as pc, aX as pn, bb as pt, aw as qd, bv as qm, _ as qr, ax as qv, bj as r8, bl as s8, g as so, aI as st, ba as t8, p as tn, bA as tr, bu as u8, b5 as uo, bE as v8, aS as vc, c as ve, be as vn, a0 as vr, s as vv, bG as w8, A as wa, b8 as wc, M as we, F as wv, bC as x8, aL as xc, T as xe, Z as xr, I as xt, D as xv, bD as y8, aR as yc, b as ye, f as yn, $ as yr, e as yt, a as yv, a4 as zm, ap as zv } from "./chunk-C2h31Y-B.js";
import { C as br, u as op } from "./chunk-CmRzbtSy.js";
import { g as L8, Z as La, c as Pe, C as Sl, a as sp } from "./chunk-Co4l0zX2.js";
import { D as A8, z as Ar, a as D8, f as F8, h as Jm, E as Km, b as M8, U as Me, d as O8, B as P8, i as Qm, e as T8, v as Tn, T as Xm, A as Ym, n as Zt, g as _8, M as ep, c as k8, k as np, l as rp, j as tp } from "./chunk-Da8Krtva.js";
import { F as $8, e as He, C as Jr, b as Ot, a as Qe, p as R8, g as Ue, S as V8, i as Yd, f as Ze, c as ae, d as rt, h as zt } from "./chunk-frpNZGJs.js";
const B8={awaitAfter:0},z8=e=>{const t={},n=Object.keys(e);for(const r of n)t[r]=H8(e[r]);return t},H8=(e,t=0)=>JSON.stringify({state:e,version:t}),Z8=e=>({...B8,...e}),U8={"ZV:audioStore":A8,"ZV:backupDataStore":xv,"ZV:documentStore":D8,"ZV:funnelStore":M8,"ZV:flowStore":yv,"ZV:mediaStore":k8,"ZV:scheduleStore":O8,"ZV:textMessageStore":T8,"ZV:triggerStore":F8},W8=["ZV:authStore","ZV:flags","ZV:options"],G8=z8(U8);async function ap(e){const t=Z8(e),n=await chrome.storage.local.get(),r=Object.keys(n);for(const s of r)W8.includes(s.trim())||await chrome.storage.local.remove(s);await Sl.setOnStorage(G8),await vv(t.awaitAfter)}const q8={isBusy:!1,setIsBusy:()=>null},ip=y.createContext(q8),K8=({children:e})=>{const[t,n]=y.useState(!1);return o.jsx(ip.Provider,{value:{isBusy:t,setIsBusy:n},children:e})},fo=()=>y.useContext(ip),lp={name:"Login",path:"/login",colors:"",textColor:""},Y8={name:"Ops...",path:"/not-found",colors:"",textColor:""},cp={"/login":lp,"/home":{colors:"border-l-accent-foreground bg-accent/30 zv-dark:bg-accent/10",name:"Início",path:"/home",textColor:"text-accent-foreground"},"/messages":{colors:"border-l-item-message bg-item-message-light/30 zv-dark:bg-item-message-light/10",name:"Mensagens",path:"/messages",textColor:"text-item-message"},"/audios":{colors:"border-l-item-audio bg-item-audio-light/30 zv-dark:bg-item-audio-light/10",name:"Áudios",path:"/audios",textColor:"text-item-audio"},"/medias":{colors:"border-l-item-media bg-item-media-light/30 zv-dark:bg-item-media-light/10",name:"Mídias",path:"/medias",textColor:"text-item-media"},"/documents":{colors:"border-l-item-document bg-item-document-light/30 zv-dark:bg-item-document-light/10",name:"Documentos",path:"/documents",textColor:"text-item-document"},"/funnels":{colors:"border-l-item-funnel bg-item-funnel-light/30 zv-dark:bg-item-funnel-light/10",name:"Funis",path:"/funnels",textColor:"text-item-funnel"},"/triggers":{colors:"border-l-item-trigger bg-item-trigger-light/30 zv-dark:bg-item-trigger-light/10",name:"Gatilhos",path:"/triggers",textColor:"text-item-trigger"},"/flows":{colors:"border-l-item-trigger bg-item-trigger-light/30 zv-dark:bg-item-trigger-light/10",name:"Fluxos",path:"/flows",textColor:"text-item-trigger"},"/backups":{colors:"border-l-accent-foreground bg-accent/30 zv-dark:bg-accent/10",name:"Backups",path:"/backups",textColor:"text-accent-foreground"}},X8={currentRoute:lp},Xd="ZV:route";class J8{constructor(t,n){pe(this,"_store");pe(this,"useGetCurrentRoute",()=>Hd(this.store,t=>t.currentRoute));pe(this,"useSetRoute",()=>Hd(this.store,t=>t.setRoute));pe(this,"setRoute",t=>mn.unstable_batchedUpdates(()=>this.store.getState().setRoute(t)));this.zustandStorage=t,this.tracker=n,this._store=Bm()(uv(r=>({...X8,setRoute:async s=>(this.tracker.trackEvent("page_view",{zv_page_name:s,zv_scope:"dashboard"}),r({currentRoute:cp[s]??Y8}))}),{name:Xd,storage:fv(()=>this.zustandStorage),version:0})),t.addStorageListener(async()=>{await this.rehydrateStore()},[Xd])}async rehydrateStore(){setTimeout(async()=>{await this._store.persist.rehydrate()},300)}get store(){return this._store}get currentRoute(){return mn.unstable_batchedUpdates(()=>this.store.getState().currentRoute)}}const Nc=(e,t)=>{try{return fetch(e,{method:"POST",body:t}),!0}catch{return!1}},Q8=so(new Jr,ae,Nc),hn=new J8(new La,Q8);function Qr({actions:e,body:t,title:n}){return o.jsxs("div",{className:"flex h-fit w-full flex-col gap-8 px-0 pb-9 pt-0",children:[o.jsxs("div",{className:" top-0 z-50 flex gap-4 rounded-lg bg-card px-3 py-6 shadow-md max-lg:flex-wrap lg:px-9",children:[o.jsx("div",{className:"flex overflow-hidden whitespace-nowrap text-2xl",children:o.jsxs(xe,{children:[o.jsx(ye,{className:"overflow-hidden text-ellipsis",children:n}),o.jsx(ve,{children:n})]})}),o.jsx("div",{className:"flex h-10 flex-1 justify-end gap-2",children:e})]}),o.jsx("div",{className:"flex h-full max-h-[calc(100vh_-_300px)] flex-col gap-4 overflow-y-auto px-2 md:px-9",children:t})]})}class Ut{constructor(){pe(this,"audioStore",Qe)}async addAudio(...t){await this.audioStore.addAudio(...t)}async deleteAudio(...t){await this.audioStore.deleteAudio(...t)}async findById(...t){return await this.audioStore.findById(...t)}async getAudioDataById(...t){return await this.audioStore.getAudioDataById(...t)}async getAudioList(){return this.audioStore.audioList}async reorderAudioList(...t){await this.audioStore.reorderAudioList(...t)}async saveAudio(...t){await this.audioStore.saveAudio(...t)}async selectAudio(...t){await this.audioStore.selectAudio(...t)}async setAudioFilter(...t){await this.audioStore.setAudioFilter(...t)}async toggleAudioIsFavorite(...t){await this.audioStore.toggleAudioIsFavorite(...t)}}class eb{constructor(t){this.repository=t}async execute({funnelId:t,item:n}){const r=await this.repository.findById(t);if(!r)throw new Error("AddItemOnFunnel: Funnel not found");return r.itemsSequence.push(n),await this.repository.saveFunnel(r),{funnel:r}}}function tb(e){const t=new eb(e);return t.execute.bind(t)}class mo extends Km{get name(){return this.props.name}set name(t){this.props.name=t}get itemsSequence(){return this.props.itemsSequence}set itemsSequence(t){this.props.itemsSequence=t}get isFavorite(){return this.props.isFavorite}set isFavorite(t){this.props.isFavorite=t}get metadata(){return{id:this.id,isFavorite:this.props.isFavorite,itemsSequence:this.props.itemsSequence,name:this.props.name}}static create(t,n){return new mo({...t,itemsSequence:t.itemsSequence??[]},n)}}class nb{constructor(t){this.repository=t}async execute({id:t,isFavorite:n=!1,itemsSequence:r=[],name:s}){const a=s.trim();if(!a)throw new Error("CreateFunnel: Cannot create an funnel with empty name");const i=mo.create({name:a,itemsSequence:r,isFavorite:n},new Me(t));return await this.repository.addFunnel(i),{funnel:i}}}function rb(e){const t=new nb(e);return t.execute.bind(t)}class sb{constructor(t){this.repository=t}async execute(t){if(!t)throw new Error("DeleteFunnel: Id must be provided");await this.repository.deleteFunnel(t)}}function ob(e){const t=new sb(e);return t.execute.bind(t)}class ab{constructor(t){this.repository=t}async execute(t,n){if(!t||!n)throw new Error("DeleteItemOnFunnel: funnelId and itemOnFunnelId must be provided");const r=await this.repository.findById(t);if(!r)throw new Error("DeleteItemOnFunnel: Funnel not found");const s=r.itemsSequence.findIndex(a=>n===a.id);if(s===-1)throw new Error("DeleteItemOnFunnel: ItemId not found");r.itemsSequence.splice(s,1),await this.repository.saveFunnel(r)}}function ib(e){const t=new ab(e);return t.execute.bind(t)}class lb{constructor(t){this.repository=t}async execute({itemId:t}){const n=await this.repository.findFunnelsWithItem(t),r=n.length===1;if(n.length>0)throw new Error(`O item que você está tentando apagar está cadastrado ${r?"no seguinte funil":"nos seguintes funis"}:

${n.reduce((s,a)=>s+`• ${a}
`,"")}

Remova ele ${r?"desse funil":"desses funis"} antes de apagar`);return{funnelsWithItem:n}}}function cb(e){const t=new lb(e);return t.execute.bind(t)}const $a=cb;class db{constructor(t){this.repository=t}async execute({funnelId:t,indexes:{destinationIndex:n,sourceIndex:r}}){const s=await this.repository.findById(t);if(!s)throw new Error("ReorderFunnelItemsList: Funnel not found!");const a=(s==null?void 0:s.itemsSequence)??[],i=a.splice(r,1);a.splice(n,0,...i),s.itemsSequence=a,await this.repository.saveFunnel(s)}}function ub(e){const t=new db(e);return t.execute.bind(t)}class fb{constructor(t){this.repository=t}async execute(t){await this.repository.reorderFunnelList(t)}}function mb(e){const t=new fb(e);return t.execute.bind(t)}class pb{constructor(t){this.repository=t}async execute(t){if(!t)throw new Error("SelectFunnel: Id must be provided");await this.repository.selectFunnel(t)}}function hb(e){const t=new pb(e);return t.execute.bind(t)}class gb{constructor(t){this.repository=t}async execute(t){await this.repository.setFunnelFilter(t)}}function xb(e){return y.useMemo(()=>{const t=new gb(e);return t.execute.bind(t)},[e])}class yb{constructor(t){this.repository=t}async execute(t){if(!t)throw new Error("ToggleFunnelIsFavorite: Id must be provided");const n=await this.repository.findById(t);if(!n)throw new Error("ToggleFunnelIsFavorite: Funnel not found");const r=mo.create({isFavorite:!n.isFavorite,itemsSequence:n.itemsSequence,name:n.name},new Me(n.id));await this.repository.saveFunnel(r)}}function vb(e){const t=new yb(e);return t.execute.bind(t)}class bb{constructor(t){this.repository=t}async execute({id:t,isFavorite:n,itemsSequence:r,name:s}){if(!t)throw new Error("UpdateFunnelData: Id must be provided");const a=await this.repository.findById(t);if(!a)throw new Error("UpdateFunnelData: Funnel not found");const i=mo.create({isFavorite:n??a.isFavorite,itemsSequence:r??a.itemsSequence,name:s??a.name},new Me(a.id));return await this.repository.saveFunnel(i),{funnel:i}}}function wb(e){const t=new bb(e);return t.execute.bind(t)}class jb{constructor(t){this.repository=t}async execute(t,n){if(!t||!n)throw new Error("UpdateItemOnFunnel: funnelId and item must be provided");const r=await this.repository.findById(t);if(!r)throw new Error("UpdateItemOnFunnel: Funnel not found");const s=r.itemsSequence.findIndex(a=>n.id===a.id);if(s===-1)throw new Error("UpdateItemOnFunnel: Item not found");r.itemsSequence[s]=n,await this.repository.saveFunnel(r)}}function Nb(e){const t=new jb(e);return t.execute.bind(t)}class Eb{constructor(t){this.repository=t}async execute({itemId:t}){const n=await this.repository.findFlowsWithItem(t),r=n.length===1;if(n.length>0)throw new Error(`O item que você está tentando apagar está cadastrado ${r?"no seguinte fluxo":"nos seguintes fluxos"}:

${n.reduce((s,a)=>s+`• ${a}
`,"")}

Remova ele ${r?"desse fluxo":"desses fluxos"} antes de apagar`);return{flowsWithItem:n}}}function Sb(e){const t=new Eb(e);return t.execute.bind(t)}const Ra=Sb;class Cb{constructor(t,n,r){this.audioRepository=t,this.funnelRepository=n,this.flowRepository=r}async execute(t){if(!t)throw new Error("DeleteAudio: Id must be provided");await $a(this.funnelRepository)({itemId:t}),await Ra(this.flowRepository)({itemId:t}),await this.audioRepository.deleteAudio(t)}}function Ib(e,t,n){const r=new Cb(e,t,n);return r.execute.bind(r)}class Ab{constructor(t){this.audioRepository=t}async execute(t){if(!t)throw new Error("GetAudioData: Id must be provided");const n=await this.audioRepository.getAudioDataById(t);return n||(console.warn("GetAudioData: Audio not found"),null)}}function po(e){return y.useMemo(()=>{const t=new Ab(e);return t.execute.bind(t)},[e])}class Db{constructor(t){this.audioRepository=t}async execute(t){await this.audioRepository.reorderAudioList(t)}}function Mb(e){const t=new Db(e);return t.execute.bind(t)}class kb{constructor(t){this.audioRepository=t}async execute(t){if(!t)throw new Error("SelectAudio: Id must be provided");await this.audioRepository.selectAudio(t)}}function Ob(e){const t=new kb(e);return t.execute.bind(t)}class Tb{constructor(t){this.audioRepository=t}async execute(t){await this.audioRepository.setAudioFilter(t)}}function Fb(e){return y.useMemo(()=>{const t=new Tb(e);return t.execute.bind(t)},[e])}class _b{constructor(t){this.audioRepository=t}async execute(t){if(!t)throw new Error("ToggleAudioIsFavorite: Id must be provided");const n=await this.audioRepository.findById(t);if(!n)throw new Error("ToggleAudioIsFavorite: Audio not found");const r=Ym.create({asViewOnce:n.asViewOnce,data:n.data,isFavorite:!n.isFavorite,isPtt:n.isPtt,name:n.name},n.idEntity);await this.audioRepository.saveAudio(r)}}function Pb(e){const t=new _b(e);return t.execute.bind(t)}class Lb{constructor(t){this.audioRepository=t}async execute({asViewOnce:t,base64:n,id:r,isFavorite:s,isPtt:a,name:i}){if(!r)throw new Error("UpdateAudioData: Id must be provided");const l=await this.audioRepository.findById(r);if(!l)throw new Error("UpdateAudioData: Audio not found");const c=Ym.create({asViewOnce:t??l.asViewOnce,data:n??l.data,isFavorite:s??l.isFavorite,isPtt:a??l.isPtt,name:i??l.name},l.idEntity);return await this.audioRepository.saveAudio(c),{audio:c}}}function $b(e){const t=new Lb(e);return t.execute.bind(t)}const Rb=new Map([["bold",x.createElement(x.Fragment,null,x.createElement("path",{d:"M208.49,152.49l-72,72a12,12,0,0,1-17,0l-72-72a12,12,0,0,1,17-17L116,187V40a12,12,0,0,1,24,0V187l51.51-51.52a12,12,0,0,1,17,17Z"}))],["duotone",x.createElement(x.Fragment,null,x.createElement("path",{d:"M200,144l-72,72L56,144Z",opacity:"0.2"}),x.createElement("path",{d:"M207.39,140.94A8,8,0,0,0,200,136H136V40a8,8,0,0,0-16,0v96H56a8,8,0,0,0-5.66,13.66l72,72a8,8,0,0,0,11.32,0l72-72A8,8,0,0,0,207.39,140.94ZM128,204.69,75.31,152H180.69Z"}))],["fill",x.createElement(x.Fragment,null,x.createElement("path",{d:"M205.66,149.66l-72,72a8,8,0,0,1-11.32,0l-72-72A8,8,0,0,1,56,136h64V40a8,8,0,0,1,16,0v96h64a8,8,0,0,1,5.66,13.66Z"}))],["light",x.createElement(x.Fragment,null,x.createElement("path",{d:"M204.24,148.24l-72,72a6,6,0,0,1-8.48,0l-72-72a6,6,0,0,1,8.48-8.48L122,201.51V40a6,6,0,0,1,12,0V201.51l61.76-61.75a6,6,0,0,1,8.48,8.48Z"}))],["regular",x.createElement(x.Fragment,null,x.createElement("path",{d:"M205.66,149.66l-72,72a8,8,0,0,1-11.32,0l-72-72a8,8,0,0,1,11.32-11.32L120,196.69V40a8,8,0,0,1,16,0V196.69l58.34-58.35a8,8,0,0,1,11.32,11.32Z"}))],["thin",x.createElement(x.Fragment,null,x.createElement("path",{d:"M202.83,146.83l-72,72a4,4,0,0,1-5.66,0l-72-72a4,4,0,0,1,5.66-5.66L124,206.34V40a4,4,0,0,1,8,0V206.34l65.17-65.17a4,4,0,0,1,5.66,5.66Z"}))]]),Vb=new Map([["bold",x.createElement(x.Fragment,null,x.createElement("path",{d:"M240.49,119.51l-96-96A12,12,0,0,0,124,32V68H80A12,12,0,0,0,68,80v96a12,12,0,0,0,12,12h44v36a12,12,0,0,0,20.49,8.49l96-96A12,12,0,0,0,240.49,119.51ZM148,195V176a12,12,0,0,0-12-12H92V92h44a12,12,0,0,0,12-12V61l67,67ZM52,80v96a12,12,0,0,1-24,0V80a12,12,0,0,1,24,0Z"}))],["duotone",x.createElement(x.Fragment,null,x.createElement("path",{d:"M136,224V176H72V80h64V32l96,96Z",opacity:"0.2"}),x.createElement("path",{d:"M237.66,122.34l-96-96A8,8,0,0,0,128,32V72H72a8,8,0,0,0-8,8v96a8,8,0,0,0,8,8h56v40a8,8,0,0,0,13.66,5.66l96-96A8,8,0,0,0,237.66,122.34ZM144,204.69V176a8,8,0,0,0-8-8H80V88h56a8,8,0,0,0,8-8V51.31L220.69,128ZM48,80v96a8,8,0,0,1-16,0V80a8,8,0,0,1,16,0Z"}))],["fill",x.createElement(x.Fragment,null,x.createElement("path",{d:"M48,80v96a8,8,0,0,1-16,0V80a8,8,0,0,1,16,0Zm189.66,42.34-96-96A8,8,0,0,0,128,32V72H72a8,8,0,0,0-8,8v96a8,8,0,0,0,8,8h56v40a8,8,0,0,0,13.66,5.66l96-96A8,8,0,0,0,237.66,122.34Z"}))],["light",x.createElement(x.Fragment,null,x.createElement("path",{d:"M236.24,123.76l-96-96A6,6,0,0,0,130,32V74H72a6,6,0,0,0-6,6v96a6,6,0,0,0,6,6h58v42a6,6,0,0,0,10.24,4.24l96-96A6,6,0,0,0,236.24,123.76ZM142,209.51V176a6,6,0,0,0-6-6H78V86h58a6,6,0,0,0,6-6V46.49L223.51,128ZM46,80v96a6,6,0,0,1-12,0V80a6,6,0,0,1,12,0Z"}))],["regular",x.createElement(x.Fragment,null,x.createElement("path",{d:"M237.66,122.34l-96-96A8,8,0,0,0,128,32V72H72a8,8,0,0,0-8,8v96a8,8,0,0,0,8,8h56v40a8,8,0,0,0,13.66,5.66l96-96A8,8,0,0,0,237.66,122.34ZM144,204.69V176a8,8,0,0,0-8-8H80V88h56a8,8,0,0,0,8-8V51.31L220.69,128ZM48,80v96a8,8,0,0,1-16,0V80a8,8,0,0,1,16,0Z"}))],["thin",x.createElement(x.Fragment,null,x.createElement("path",{d:"M234.83,125.17l-96-96A4,4,0,0,0,132,32V76H72a4,4,0,0,0-4,4v96a4,4,0,0,0,4,4h60v44a4,4,0,0,0,2.47,3.7,4,4,0,0,0,4.36-.87l96-96A4,4,0,0,0,234.83,125.17ZM140,214.34V176a4,4,0,0,0-4-4H76V84h60a4,4,0,0,0,4-4V41.66L226.34,128ZM44,80v96a4,4,0,0,1-8,0V80a4,4,0,0,1,8,0Z"}))]]),Bb=new Map([["bold",x.createElement(x.Fragment,null,x.createElement("path",{d:"M224.49,136.49l-72,72a12,12,0,0,1-17-17L187,140H40a12,12,0,0,1,0-24H187L135.51,64.48a12,12,0,0,1,17-17l72,72A12,12,0,0,1,224.49,136.49Z"}))],["duotone",x.createElement(x.Fragment,null,x.createElement("path",{d:"M216,128l-72,72V56Z",opacity:"0.2"}),x.createElement("path",{d:"M221.66,122.34l-72-72A8,8,0,0,0,136,56v64H40a8,8,0,0,0,0,16h96v64a8,8,0,0,0,13.66,5.66l72-72A8,8,0,0,0,221.66,122.34ZM152,180.69V75.31L204.69,128Z"}))],["fill",x.createElement(x.Fragment,null,x.createElement("path",{d:"M221.66,133.66l-72,72A8,8,0,0,1,136,200V136H40a8,8,0,0,1,0-16h96V56a8,8,0,0,1,13.66-5.66l72,72A8,8,0,0,1,221.66,133.66Z"}))],["light",x.createElement(x.Fragment,null,x.createElement("path",{d:"M220.24,132.24l-72,72a6,6,0,0,1-8.48-8.48L201.51,134H40a6,6,0,0,1,0-12H201.51L139.76,60.24a6,6,0,0,1,8.48-8.48l72,72A6,6,0,0,1,220.24,132.24Z"}))],["regular",x.createElement(x.Fragment,null,x.createElement("path",{d:"M221.66,133.66l-72,72a8,8,0,0,1-11.32-11.32L196.69,136H40a8,8,0,0,1,0-16H196.69L138.34,61.66a8,8,0,0,1,11.32-11.32l72,72A8,8,0,0,1,221.66,133.66Z"}))],["thin",x.createElement(x.Fragment,null,x.createElement("path",{d:"M218.83,130.83l-72,72a4,4,0,0,1-5.66-5.66L206.34,132H40a4,4,0,0,1,0-8H206.34L141.17,58.83a4,4,0,0,1,5.66-5.66l72,72A4,4,0,0,1,218.83,130.83Z"}))]]),zb=new Map([["bold",x.createElement(x.Fragment,null,x.createElement("path",{d:"M237.24,213.21C216.12,203,204,180.64,204,152V134.73a19.94,19.94,0,0,0-12.62-18.59l-24.86-9.81a4,4,0,0,1-2.26-5.14l21.33-53A32,32,0,0,0,167.17,6,32.13,32.13,0,0,0,126.25,24.2l-.07.18-21,53.09a3.94,3.94,0,0,1-2.14,2.2,3.89,3.89,0,0,1-3,.06L74.6,69.43A19.89,19.89,0,0,0,52.87,74C31.06,96.43,20,122.68,20,152a115.46,115.46,0,0,0,32.29,80.3A12,12,0,0,0,61,236H232a12,12,0,0,0,5.24-22.79ZM68.19,92.73,91.06,102A28,28,0,0,0,127.5,86.31l20.95-53a8.32,8.32,0,0,1,10.33-4.81,8,8,0,0,1,4.61,10.57,1.17,1.17,0,0,0,0,.11L142,92.29a28.05,28.05,0,0,0,15.68,36.33L180,137.45V152c0,1,0,2.07.05,3.1l-122.44-49A101.91,101.91,0,0,1,68.19,92.73ZM116.74,212a83.73,83.73,0,0,1-22.09-39,12,12,0,0,0-23.25,6,110.27,110.27,0,0,0,14.49,33H66.25A91.53,91.53,0,0,1,44,152a84,84,0,0,1,3.41-24.11l136.67,54.66A86.58,86.58,0,0,0,198.66,212Z"}))],["duotone",x.createElement(x.Fragment,null,x.createElement("path",{d:"M192.8,165.12,43.93,105.57A110.88,110.88,0,0,1,61.47,82.38a8,8,0,0,1,8.67-1.81L95.52,90.85a16,16,0,0,0,20.82-9l21-53.1c4.15-10,15.47-15.33,25.63-11.53a20,20,0,0,1,11.51,26.39L153.13,96.71a16,16,0,0,0,8.93,20.75L187,127.3a8,8,0,0,1,5,7.43V152A104.58,104.58,0,0,0,192.8,165.12Z",opacity:"0.2"}),x.createElement("path",{d:"M235.5,216.81c-22.56-11-35.5-34.58-35.5-64.8V134.73a15.94,15.94,0,0,0-10.09-14.87L165,110a8,8,0,0,1-4.48-10.34l21.32-53a28,28,0,0,0-16.1-37,28.14,28.14,0,0,0-35.82,16,.61.61,0,0,0,0,.12L108.9,79a8,8,0,0,1-10.37,4.49L73.11,73.14A15.89,15.89,0,0,0,55.74,76.8C34.68,98.45,24,123.75,24,152a111.45,111.45,0,0,0,31.18,77.53A8,8,0,0,0,61,232H232a8,8,0,0,0,3.5-15.19ZM67.14,88l25.41,10.3a24,24,0,0,0,31.23-13.45l21-53c2.56-6.11,9.47-9.27,15.43-7a12,12,0,0,1,6.88,15.92L145.69,93.76a24,24,0,0,0,13.43,31.14L184,134.73V152c0,.33,0,.66,0,1L55.77,101.71A108.84,108.84,0,0,1,67.14,88Zm48,128a87.53,87.53,0,0,1-24.34-42,8,8,0,0,0-15.49,4,105.16,105.16,0,0,0,18.36,38H64.44A95.54,95.54,0,0,1,40,152a85.9,85.9,0,0,1,7.73-36.29l137.8,55.12c3,18,10.56,33.48,21.89,45.16Z"}))],["fill",x.createElement(x.Fragment,null,x.createElement("path",{d:"M235.29,216.7C212.86,205.69,200,182.12,200,152V134.69a15.94,15.94,0,0,0-10.09-14.87l-28.65-11.46A8,8,0,0,1,156.79,98l22.32-56.67C184,28.79,178,14.21,165.34,9.51a24,24,0,0,0-30.7,13.71L112.25,80.08a8,8,0,0,1-10.41,4.5L73.11,73.08a15.91,15.91,0,0,0-17.38,3.66C34.68,98.4,24,123.71,24,152a111.53,111.53,0,0,0,31.15,77.53A8.06,8.06,0,0,0,61,232H232a8,8,0,0,0,8-7.51A8.21,8.21,0,0,0,235.29,216.7ZM115.11,216a87.52,87.52,0,0,1-24.26-41.71,8.21,8.21,0,0,0-9.25-6.18A8,8,0,0,0,75.28,178a105.33,105.33,0,0,0,18.36,38H64.44A95.62,95.62,0,0,1,40,152a85.92,85.92,0,0,1,7.73-36.3l137.8,55.13c3,18.06,10.55,33.5,21.89,45.19Z"}))],["light",x.createElement(x.Fragment,null,x.createElement("path",{d:"M234.62,218.6C211.35,207.29,198,183,198,152V134.7a14,14,0,0,0-8.82-13l-24.89-9.83a10,10,0,0,1-5.59-13L180,45.9a26,26,0,0,0-15-34.33c-12.95-4.83-27.88,1.84-33.31,15l-21,53.11a10,10,0,0,1-13,5.61L72.37,75a13.9,13.9,0,0,0-15.2,3.19C36.49,99.42,26,124.26,26,152a109.53,109.53,0,0,0,30.62,76.16A6,6,0,0,0,61,230H232a6,6,0,0,0,2.62-11.4ZM65.77,86.52a2,2,0,0,1,2.12-.43l25.4,10.29a22,22,0,0,0,28.63-12.32l21-53c3-7.13,11-10.81,18-8.21a14,14,0,0,1,8,18.54l-21.36,53.1A22.05,22.05,0,0,0,159.86,123l24.88,9.83A2,2,0,0,1,186,134.7V152c0,1.34,0,2.65.08,4L52.74,102.61A110.07,110.07,0,0,1,65.77,86.52ZM114.33,218a89.6,89.6,0,0,1-25.5-43.5,6,6,0,1,0-11.62,3A102.87,102.87,0,0,0,97.81,218H63.56A97.56,97.56,0,0,1,38,152a87.42,87.42,0,0,1,8.71-38.86L187.35,169.4c3.15,19.92,11.77,36.66,25,48.6Z"}))],["regular",x.createElement(x.Fragment,null,x.createElement("path",{d:"M235.5,216.81c-22.56-11-35.5-34.58-35.5-64.8V134.73a15.94,15.94,0,0,0-10.09-14.87L165,110a8,8,0,0,1-4.48-10.34l21.32-53a28,28,0,0,0-16.1-37,28.14,28.14,0,0,0-35.82,16,.61.61,0,0,0,0,.12L108.9,79a8,8,0,0,1-10.37,4.49L73.11,73.14A15.89,15.89,0,0,0,55.74,76.8C34.68,98.45,24,123.75,24,152a111.45,111.45,0,0,0,31.18,77.53A8,8,0,0,0,61,232H232a8,8,0,0,0,3.5-15.19ZM67.14,88l25.41,10.3a24,24,0,0,0,31.23-13.45l21-53c2.56-6.11,9.47-9.27,15.43-7a12,12,0,0,1,6.88,15.92L145.69,93.76a24,24,0,0,0,13.43,31.14L184,134.73V152c0,.33,0,.66,0,1L55.77,101.71A108.84,108.84,0,0,1,67.14,88Zm48,128a87.53,87.53,0,0,1-24.34-42,8,8,0,0,0-15.49,4,105.16,105.16,0,0,0,18.36,38H64.44A95.54,95.54,0,0,1,40,152a85.9,85.9,0,0,1,7.73-36.29l137.8,55.12c3,18,10.56,33.48,21.89,45.16Z"}))],["thin",x.createElement(x.Fragment,null,x.createElement("path",{d:"M233.75,220.4C209.76,208.75,196,183.82,196,152V134.72a12,12,0,0,0-7.56-11.15l-24.89-9.83a12,12,0,0,1-6.71-15.55l21.33-53a23.88,23.88,0,0,0-31.93-31A24.72,24.72,0,0,0,133.62,27.3l-21,53.1A12,12,0,0,1,97,87.13L71.63,76.84a12,12,0,0,0-13,2.73C38.3,100.45,28,124.82,28,152a107.5,107.5,0,0,0,30.07,74.77A4,4,0,0,0,61,228H232a4,4,0,0,0,1.75-7.6ZM64.34,85.15a3.94,3.94,0,0,1,4.3-.89L94,94.55a20,20,0,0,0,26-11.2l21-53C144.39,22.19,153.61,18,161.58,21a16,16,0,0,1,9.19,21.16L149.41,95.22a20,20,0,0,0,11.18,26l24.9,9.83a4,4,0,0,1,2.51,3.72V152c0,2.36.08,4.69.22,7l-138.5-55.4A110.84,110.84,0,0,1,64.34,85.15ZM113.56,220A91.35,91.35,0,0,1,86.9,175a4,4,0,0,0-7.75,2,100.21,100.21,0,0,0,23.09,43H62.68A99.5,99.5,0,0,1,36,152a89.37,89.37,0,0,1,9.73-41.4L189.13,168c3.22,22,13.23,40.09,28.8,52Z"}))]]),Hb=new Map([["bold",x.createElement(x.Fragment,null,x.createElement("path",{d:"M168.49,199.51a12,12,0,0,1-17,17l-80-80a12,12,0,0,1,0-17l80-80a12,12,0,0,1,17,17L97,128Z"}))],["duotone",x.createElement(x.Fragment,null,x.createElement("path",{d:"M160,48V208L80,128Z",opacity:"0.2"}),x.createElement("path",{d:"M163.06,40.61a8,8,0,0,0-8.72,1.73l-80,80a8,8,0,0,0,0,11.32l80,80A8,8,0,0,0,168,208V48A8,8,0,0,0,163.06,40.61ZM152,188.69,91.31,128,152,67.31Z"}))],["fill",x.createElement(x.Fragment,null,x.createElement("path",{d:"M168,48V208a8,8,0,0,1-13.66,5.66l-80-80a8,8,0,0,1,0-11.32l80-80A8,8,0,0,1,168,48Z"}))],["light",x.createElement(x.Fragment,null,x.createElement("path",{d:"M164.24,203.76a6,6,0,1,1-8.48,8.48l-80-80a6,6,0,0,1,0-8.48l80-80a6,6,0,0,1,8.48,8.48L88.49,128Z"}))],["regular",x.createElement(x.Fragment,null,x.createElement("path",{d:"M165.66,202.34a8,8,0,0,1-11.32,11.32l-80-80a8,8,0,0,1,0-11.32l80-80a8,8,0,0,1,11.32,11.32L91.31,128Z"}))],["thin",x.createElement(x.Fragment,null,x.createElement("path",{d:"M162.83,205.17a4,4,0,0,1-5.66,5.66l-80-80a4,4,0,0,1,0-5.66l80-80a4,4,0,1,1,5.66,5.66L85.66,128Z"}))]]),Zb=new Map([["bold",x.createElement(x.Fragment,null,x.createElement("path",{d:"M79.51,144.49a12,12,0,1,1,17-17L112,143l47.51-47.52a12,12,0,0,1,17,17l-56,56a12,12,0,0,1-17,0ZM228,48V208a20,20,0,0,1-20,20H48a20,20,0,0,1-20-20V48A20,20,0,0,1,48,28H208A20,20,0,0,1,228,48Zm-24,4H52V204H204Z"}))],["duotone",x.createElement(x.Fragment,null,x.createElement("path",{d:"M216,48V208a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V48a8,8,0,0,1,8-8H208A8,8,0,0,1,216,48Z",opacity:"0.2"}),x.createElement("path",{d:"M173.66,98.34a8,8,0,0,1,0,11.32l-56,56a8,8,0,0,1-11.32,0l-24-24a8,8,0,0,1,11.32-11.32L112,148.69l50.34-50.35A8,8,0,0,1,173.66,98.34ZM224,48V208a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V48A16,16,0,0,1,48,32H208A16,16,0,0,1,224,48ZM208,208V48H48V208H208Z"}))],["fill",x.createElement(x.Fragment,null,x.createElement("path",{d:"M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32Zm-34.34,77.66-56,56a8,8,0,0,1-11.32,0l-24-24a8,8,0,0,1,11.32-11.32L112,148.69l50.34-50.35a8,8,0,0,1,11.32,11.32Z"}))],["light",x.createElement(x.Fragment,null,x.createElement("path",{d:"M172.24,99.76a6,6,0,0,1,0,8.48l-56,56a6,6,0,0,1-8.48,0l-24-24a6,6,0,0,1,8.48-8.48L112,151.51l51.76-51.75A6,6,0,0,1,172.24,99.76ZM222,48V208a14,14,0,0,1-14,14H48a14,14,0,0,1-14-14V48A14,14,0,0,1,48,34H208A14,14,0,0,1,222,48Zm-12,0a2,2,0,0,0-2-2H48a2,2,0,0,0-2,2V208a2,2,0,0,0,2,2H208a2,2,0,0,0,2-2Z"}))],["regular",x.createElement(x.Fragment,null,x.createElement("path",{d:"M173.66,98.34a8,8,0,0,1,0,11.32l-56,56a8,8,0,0,1-11.32,0l-24-24a8,8,0,0,1,11.32-11.32L112,148.69l50.34-50.35A8,8,0,0,1,173.66,98.34ZM224,48V208a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V48A16,16,0,0,1,48,32H208A16,16,0,0,1,224,48ZM208,208V48H48V208H208Z"}))],["thin",x.createElement(x.Fragment,null,x.createElement("path",{d:"M170.83,101.17a4,4,0,0,1,0,5.66l-56,56a4,4,0,0,1-5.66,0l-24-24a4,4,0,0,1,5.66-5.66L112,154.34l53.17-53.17A4,4,0,0,1,170.83,101.17ZM220,48V208a12,12,0,0,1-12,12H48a12,12,0,0,1-12-12V48A12,12,0,0,1,48,36H208A12,12,0,0,1,220,48Zm-8,0a4,4,0,0,0-4-4H48a4,4,0,0,0-4,4V208a4,4,0,0,0,4,4H208a4,4,0,0,0,4-4Z"}))]]),Ub=new Map([["bold",x.createElement(x.Fragment,null,x.createElement("path",{d:"M152.41,88.56l-89.6,88a12,12,0,0,1-16.82,0L7.59,138.85a12,12,0,0,1,16.82-17.13l30,29.46,81.19-79.74a12,12,0,0,1,16.82,17.12Zm96.15-17a12,12,0,0,0-17-.15L150.4,151.18l-7.88-7.74a12,12,0,0,0-16.82,17.12l16.29,16a12,12,0,0,0,16.82,0l89.6-88A12,12,0,0,0,248.56,71.59Z"}))],["duotone",x.createElement(x.Fragment,null,x.createElement("path",{d:"M240,64V192a16,16,0,0,1-16,16H32a16,16,0,0,1-16-16V64A16,16,0,0,1,32,48H224A16,16,0,0,1,240,64Z",opacity:"0.2"}),x.createElement("path",{d:"M149.61,85.71l-89.6,88a8,8,0,0,1-11.22,0L10.39,136a8,8,0,1,1,11.22-11.41L54.4,156.79l84-82.5a8,8,0,1,1,11.22,11.42Zm96.1-11.32a8,8,0,0,0-11.32-.1l-84,82.5-18.83-18.5a8,8,0,0,0-11.21,11.42l24.43,24a8,8,0,0,0,11.22,0l89.6-88A8,8,0,0,0,245.71,74.39Z"}))],["fill",x.createElement(x.Fragment,null,x.createElement("path",{d:"M224,48H32A16,16,0,0,0,16,64V192a16,16,0,0,0,16,16H224a16,16,0,0,0,16-16V64A16,16,0,0,0,224,48ZM72,168a8,8,0,0,1-5.66-2.34l-24-24a8,8,0,0,1,11.32-11.32L72,148.69l58.34-58.35a8,8,0,0,1,11.32,11.32l-64,64A8,8,0,0,1,72,168Zm141.66-66.34-64,64a8,8,0,0,1-11.32,0l-16-16a8,8,0,0,1,11.32-11.32L144,148.69l58.34-58.35a8,8,0,0,1,11.32,11.32Z"}))],["light",x.createElement(x.Fragment,null,x.createElement("path",{d:"M148.2,84.28l-89.6,88a6,6,0,0,1-8.4,0L11.8,134.57A6,6,0,1,1,20.2,126l34.2,33.58,85.4-83.87a6,6,0,1,1,8.4,8.56Zm96.08-8.48a6,6,0,0,0-8.48-.08l-85.4,83.87-20.23-19.87a6,6,0,1,0-8.41,8.56l24.44,24a6,6,0,0,0,8.4,0l89.6-88A6,6,0,0,0,244.28,75.8Z"}))],["regular",x.createElement(x.Fragment,null,x.createElement("path",{d:"M149.61,85.71l-89.6,88a8,8,0,0,1-11.22,0L10.39,136a8,8,0,1,1,11.22-11.41L54.4,156.79l84-82.5a8,8,0,1,1,11.22,11.42Zm96.1-11.32a8,8,0,0,0-11.32-.1l-84,82.5-18.83-18.5a8,8,0,0,0-11.21,11.42l24.43,24a8,8,0,0,0,11.22,0l89.6-88A8,8,0,0,0,245.71,74.39Z"}))],["thin",x.createElement(x.Fragment,null,x.createElement("path",{d:"M146.8,82.85l-89.6,88a4,4,0,0,1-5.6,0L13.2,133.14a4,4,0,0,1,5.6-5.71l35.6,35,86.8-85.24a4,4,0,0,1,5.6,5.7Zm96-5.65a4,4,0,0,0-5.65,0l-86.8,85.24-21.63-21.24a4,4,0,1,0-5.61,5.7l24.44,24a4,4,0,0,0,5.6,0l89.6-88A4,4,0,0,0,242.85,77.2Z"}))]]),Wb=new Map([["bold",x.createElement(x.Fragment,null,x.createElement("path",{d:"M192.49,167.51a12,12,0,0,1,0,17l-32,32a12,12,0,0,1-17,0l-32-32a12,12,0,1,1,17-17L140,179V128a12,12,0,0,1,24,0v51l11.51-11.52A12,12,0,0,1,192.49,167.51ZM160,36A92.08,92.08,0,0,0,79,84.37,68,68,0,1,0,72,220H84a12,12,0,0,0,0-24H72a44,44,0,0,1-1.81-87.95A91.7,91.7,0,0,0,68,128a12,12,0,0,0,24,0,68,68,0,0,1,136,0,67.27,67.27,0,0,1-7.25,30.59,12,12,0,1,0,21.42,10.82A91.08,91.08,0,0,0,252,128,92.1,92.1,0,0,0,160,36Z"}))],["duotone",x.createElement(x.Fragment,null,x.createElement("path",{d:"M240,128a80,80,0,0,1-80,80H72A56,56,0,1,1,85.92,97.74l0,.1A80,80,0,0,1,240,128Z",opacity:"0.2"}),x.createElement("path",{d:"M248,128a87.34,87.34,0,0,1-17.6,52.81,8,8,0,1,1-12.8-9.62A71.34,71.34,0,0,0,232,128a72,72,0,0,0-144,0,8,8,0,0,1-16,0,88,88,0,0,1,3.29-23.88C74.2,104,73.1,104,72,104a48,48,0,0,0,0,96H96a8,8,0,0,1,0,16H72A64,64,0,1,1,81.29,88.68,88,88,0,0,1,248,128Zm-69.66,42.34L160,188.69V128a8,8,0,0,0-16,0v60.69l-18.34-18.35a8,8,0,0,0-11.32,11.32l32,32a8,8,0,0,0,11.32,0l32-32a8,8,0,0,0-11.32-11.32Z"}))],["fill",x.createElement(x.Fragment,null,x.createElement("path",{d:"M247.93,124.52C246.11,77.54,207.07,40,160.06,40A88.1,88.1,0,0,0,81.29,88.67h0A87.48,87.48,0,0,0,72,127.73,8.18,8.18,0,0,1,64.57,136,8,8,0,0,1,56,128a103.66,103.66,0,0,1,5.34-32.92,4,4,0,0,0-4.75-5.18A64.09,64.09,0,0,0,8,152c0,35.19,29.75,64,65,64H160A88.09,88.09,0,0,0,247.93,124.52Zm-50.27,25.14-32,32a8,8,0,0,1-11.32,0l-32-32a8,8,0,0,1,11.32-11.32L152,156.69V96a8,8,0,0,1,16,0v60.69l18.34-18.35a8,8,0,0,1,11.32,11.32Z"}))],["light",x.createElement(x.Fragment,null,x.createElement("path",{d:"M246,128a85.27,85.27,0,0,1-17.2,51.6,6,6,0,1,1-9.6-7.2A74,74,0,1,0,86,128a6,6,0,0,1-12,0,85.54,85.54,0,0,1,3.91-25.64A50.68,50.68,0,0,0,72,102a50,50,0,0,0,0,100H96a6,6,0,0,1,0,12H72A62,62,0,1,1,82.43,90.88,86,86,0,0,1,246,128Zm-66.24,43.76L158,193.51V128a6,6,0,0,0-12,0v65.51l-21.76-21.75a6,6,0,0,0-8.48,8.48l32,32a6,6,0,0,0,8.48,0l32-32a6,6,0,0,0-8.48-8.48Z"}))],["regular",x.createElement(x.Fragment,null,x.createElement("path",{d:"M248,128a87.34,87.34,0,0,1-17.6,52.81,8,8,0,1,1-12.8-9.62A71.34,71.34,0,0,0,232,128a72,72,0,0,0-144,0,8,8,0,0,1-16,0,88,88,0,0,1,3.29-23.88C74.2,104,73.1,104,72,104a48,48,0,0,0,0,96H96a8,8,0,0,1,0,16H72A64,64,0,1,1,81.29,88.68,88,88,0,0,1,248,128Zm-69.66,42.34L160,188.69V128a8,8,0,0,0-16,0v60.69l-18.34-18.35a8,8,0,0,0-11.32,11.32l32,32a8,8,0,0,0,11.32,0l32-32a8,8,0,0,0-11.32-11.32Z"}))],["thin",x.createElement(x.Fragment,null,x.createElement("path",{d:"M244,128a83.28,83.28,0,0,1-16.8,50.4,4,4,0,1,1-6.4-4.8A76,76,0,1,0,84,128a4,4,0,0,1-8,0,83.45,83.45,0,0,1,4.57-27.27A52,52,0,1,0,72,204H96a4,4,0,0,1,0,8H72A60,60,0,1,1,83.61,93.13,84,84,0,0,1,244,128Zm-62.83,45.17L156,198.34V128a4,4,0,0,0-8,0v70.34l-25.17-25.17a4,4,0,0,0-5.66,5.66l32,32a4,4,0,0,0,5.66,0l32-32a4,4,0,0,0-5.66-5.66Z"}))]]),Gb=new Map([["bold",x.createElement(x.Fragment,null,x.createElement("path",{d:"M216,28H88A12,12,0,0,0,76,40V76H40A12,12,0,0,0,28,88V216a12,12,0,0,0,12,12H168a12,12,0,0,0,12-12V180h36a12,12,0,0,0,12-12V40A12,12,0,0,0,216,28ZM156,204H52V100H156Zm48-48H180V88a12,12,0,0,0-12-12H100V52H204Z"}))],["duotone",x.createElement(x.Fragment,null,x.createElement("path",{d:"M216,40V168H168V88H88V40Z",opacity:"0.2"}),x.createElement("path",{d:"M216,32H88a8,8,0,0,0-8,8V80H40a8,8,0,0,0-8,8V216a8,8,0,0,0,8,8H168a8,8,0,0,0,8-8V176h40a8,8,0,0,0,8-8V40A8,8,0,0,0,216,32ZM160,208H48V96H160Zm48-48H176V88a8,8,0,0,0-8-8H96V48H208Z"}))],["fill",x.createElement(x.Fragment,null,x.createElement("path",{d:"M216,32H88a8,8,0,0,0-8,8V80H40a8,8,0,0,0-8,8V216a8,8,0,0,0,8,8H168a8,8,0,0,0,8-8V176h40a8,8,0,0,0,8-8V40A8,8,0,0,0,216,32Zm-8,128H176V88a8,8,0,0,0-8-8H96V48H208Z"}))],["light",x.createElement(x.Fragment,null,x.createElement("path",{d:"M216,34H88a6,6,0,0,0-6,6V82H40a6,6,0,0,0-6,6V216a6,6,0,0,0,6,6H168a6,6,0,0,0,6-6V174h42a6,6,0,0,0,6-6V40A6,6,0,0,0,216,34ZM162,210H46V94H162Zm48-48H174V88a6,6,0,0,0-6-6H94V46H210Z"}))],["regular",x.createElement(x.Fragment,null,x.createElement("path",{d:"M216,32H88a8,8,0,0,0-8,8V80H40a8,8,0,0,0-8,8V216a8,8,0,0,0,8,8H168a8,8,0,0,0,8-8V176h40a8,8,0,0,0,8-8V40A8,8,0,0,0,216,32ZM160,208H48V96H160Zm48-48H176V88a8,8,0,0,0-8-8H96V48H208Z"}))],["thin",x.createElement(x.Fragment,null,x.createElement("path",{d:"M216,36H88a4,4,0,0,0-4,4V84H40a4,4,0,0,0-4,4V216a4,4,0,0,0,4,4H168a4,4,0,0,0,4-4V172h44a4,4,0,0,0,4-4V40A4,4,0,0,0,216,36ZM164,212H44V92H164Zm48-48H172V88a4,4,0,0,0-4-4H92V44H212Z"}))]]),qb=new Map([["bold",x.createElement(x.Fragment,null,x.createElement("path",{d:"M108,60A16,16,0,1,1,92,44,16,16,0,0,1,108,60Zm56,16a16,16,0,1,0-16-16A16,16,0,0,0,164,76ZM92,112a16,16,0,1,0,16,16A16,16,0,0,0,92,112Zm72,0a16,16,0,1,0,16,16A16,16,0,0,0,164,112ZM92,180a16,16,0,1,0,16,16A16,16,0,0,0,92,180Zm72,0a16,16,0,1,0,16,16A16,16,0,0,0,164,180Z"}))],["duotone",x.createElement(x.Fragment,null,x.createElement("path",{d:"M208,32V224a16,16,0,0,1-16,16H64a16,16,0,0,1-16-16V32A16,16,0,0,1,64,16H192A16,16,0,0,1,208,32Z",opacity:"0.2"}),x.createElement("path",{d:"M104,60A12,12,0,1,1,92,48,12,12,0,0,1,104,60Zm60,12a12,12,0,1,0-12-12A12,12,0,0,0,164,72ZM92,116a12,12,0,1,0,12,12A12,12,0,0,0,92,116Zm72,0a12,12,0,1,0,12,12A12,12,0,0,0,164,116ZM92,184a12,12,0,1,0,12,12A12,12,0,0,0,92,184Zm72,0a12,12,0,1,0,12,12A12,12,0,0,0,164,184Z"}))],["fill",x.createElement(x.Fragment,null,x.createElement("path",{d:"M192,16H64A16,16,0,0,0,48,32V224a16,16,0,0,0,16,16H192a16,16,0,0,0,16-16V32A16,16,0,0,0,192,16ZM100,200a12,12,0,1,1,12-12A12,12,0,0,1,100,200Zm0-60a12,12,0,1,1,12-12A12,12,0,0,1,100,140Zm0-60a12,12,0,1,1,12-12A12,12,0,0,1,100,80Zm56,120a12,12,0,1,1,12-12A12,12,0,0,1,156,200Zm0-60a12,12,0,1,1,12-12A12,12,0,0,1,156,140Zm0-60a12,12,0,1,1,12-12A12,12,0,0,1,156,80Z"}))],["light",x.createElement(x.Fragment,null,x.createElement("path",{d:"M102,60A10,10,0,1,1,92,50,10,10,0,0,1,102,60Zm62,10a10,10,0,1,0-10-10A10,10,0,0,0,164,70ZM92,118a10,10,0,1,0,10,10A10,10,0,0,0,92,118Zm72,0a10,10,0,1,0,10,10A10,10,0,0,0,164,118ZM92,186a10,10,0,1,0,10,10A10,10,0,0,0,92,186Zm72,0a10,10,0,1,0,10,10A10,10,0,0,0,164,186Z"}))],["regular",x.createElement(x.Fragment,null,x.createElement("path",{d:"M104,60A12,12,0,1,1,92,48,12,12,0,0,1,104,60Zm60,12a12,12,0,1,0-12-12A12,12,0,0,0,164,72ZM92,116a12,12,0,1,0,12,12A12,12,0,0,0,92,116Zm72,0a12,12,0,1,0,12,12A12,12,0,0,0,164,116ZM92,184a12,12,0,1,0,12,12A12,12,0,0,0,92,184Zm72,0a12,12,0,1,0,12,12A12,12,0,0,0,164,184Z"}))],["thin",x.createElement(x.Fragment,null,x.createElement("path",{d:"M100,60a8,8,0,1,1-8-8A8,8,0,0,1,100,60Zm64,8a8,8,0,1,0-8-8A8,8,0,0,0,164,68ZM92,120a8,8,0,1,0,8,8A8,8,0,0,0,92,120Zm72,0a8,8,0,1,0,8,8A8,8,0,0,0,164,120ZM92,188a8,8,0,1,0,8,8A8,8,0,0,0,92,188Zm72,0a8,8,0,1,0,8,8A8,8,0,0,0,164,188Z"}))]]),Kb=new Map([["bold",x.createElement(x.Fragment,null,x.createElement("path",{d:"M228,144v64a12,12,0,0,1-12,12H40a12,12,0,0,1-12-12V144a12,12,0,0,1,24,0v52H204V144a12,12,0,0,1,24,0Zm-108.49,8.49a12,12,0,0,0,17,0l40-40a12,12,0,0,0-17-17L140,115V32a12,12,0,0,0-24,0v83L96.49,95.51a12,12,0,0,0-17,17Z"}))],["duotone",x.createElement(x.Fragment,null,x.createElement("path",{d:"M216,48V208H40V48A16,16,0,0,1,56,32H200A16,16,0,0,1,216,48Z",opacity:"0.2"}),x.createElement("path",{d:"M224,144v64a8,8,0,0,1-8,8H40a8,8,0,0,1-8-8V144a8,8,0,0,1,16,0v56H208V144a8,8,0,0,1,16,0Zm-101.66,5.66a8,8,0,0,0,11.32,0l40-40a8,8,0,0,0-11.32-11.32L136,124.69V32a8,8,0,0,0-16,0v92.69L93.66,98.34a8,8,0,0,0-11.32,11.32Z"}))],["fill",x.createElement(x.Fragment,null,x.createElement("path",{d:"M224,144v64a8,8,0,0,1-8,8H40a8,8,0,0,1-8-8V144a8,8,0,0,1,16,0v56H208V144a8,8,0,0,1,16,0Zm-101.66,5.66a8,8,0,0,0,11.32,0l40-40A8,8,0,0,0,168,96H136V32a8,8,0,0,0-16,0V96H88a8,8,0,0,0-5.66,13.66Z"}))],["light",x.createElement(x.Fragment,null,x.createElement("path",{d:"M222,144v64a6,6,0,0,1-6,6H40a6,6,0,0,1-6-6V144a6,6,0,0,1,12,0v58H210V144a6,6,0,0,1,12,0Zm-98.24,4.24a6,6,0,0,0,8.48,0l40-40a6,6,0,0,0-8.48-8.48L134,129.51V32a6,6,0,0,0-12,0v97.51L92.24,99.76a6,6,0,0,0-8.48,8.48Z"}))],["regular",x.createElement(x.Fragment,null,x.createElement("path",{d:"M224,144v64a8,8,0,0,1-8,8H40a8,8,0,0,1-8-8V144a8,8,0,0,1,16,0v56H208V144a8,8,0,0,1,16,0Zm-101.66,5.66a8,8,0,0,0,11.32,0l40-40a8,8,0,0,0-11.32-11.32L136,124.69V32a8,8,0,0,0-16,0v92.69L93.66,98.34a8,8,0,0,0-11.32,11.32Z"}))],["thin",x.createElement(x.Fragment,null,x.createElement("path",{d:"M220,144v64a4,4,0,0,1-4,4H40a4,4,0,0,1-4-4V144a4,4,0,0,1,8,0v60H212V144a4,4,0,0,1,8,0Zm-94.83,2.83a4,4,0,0,0,5.66,0l40-40a4,4,0,1,0-5.66-5.66L132,134.34V32a4,4,0,0,0-8,0V134.34L90.83,101.17a4,4,0,0,0-5.66,5.66Z"}))]]),Yb=new Map([["bold",x.createElement(x.Fragment,null,x.createElement("path",{d:"M216.49,79.52l-56-56A12,12,0,0,0,152,20H56A20,20,0,0,0,36,40V216a20,20,0,0,0,20,20H200a20,20,0,0,0,20-20V88A12,12,0,0,0,216.49,79.52ZM160,57l23,23H160ZM60,212V44h76V92a12,12,0,0,0,12,12h48V212Zm100.49-60.49a12,12,0,0,1,0,17l-24,24a12,12,0,0,1-17,0l-24-24a12,12,0,0,1,17-17L116,155V124a12,12,0,0,1,24,0v31l3.51-3.52A12,12,0,0,1,160.49,151.51Z"}))],["duotone",x.createElement(x.Fragment,null,x.createElement("path",{d:"M208,88H152V32Z",opacity:"0.2"}),x.createElement("path",{d:"M213.66,82.34l-56-56A8,8,0,0,0,152,24H56A16,16,0,0,0,40,40V216a16,16,0,0,0,16,16H200a16,16,0,0,0,16-16V88A8,8,0,0,0,213.66,82.34ZM160,51.31,188.69,80H160ZM200,216H56V40h88V88a8,8,0,0,0,8,8h48V216Zm-42.34-61.66a8,8,0,0,1,0,11.32l-24,24a8,8,0,0,1-11.32,0l-24-24a8,8,0,0,1,11.32-11.32L120,164.69V120a8,8,0,0,1,16,0v44.69l10.34-10.35A8,8,0,0,1,157.66,154.34Z"}))],["fill",x.createElement(x.Fragment,null,x.createElement("path",{d:"M213.66,82.34l-56-56A8,8,0,0,0,152,24H56A16,16,0,0,0,40,40V216a16,16,0,0,0,16,16H200a16,16,0,0,0,16-16V88A8,8,0,0,0,213.66,82.34Zm-56,83.32-24,24a8,8,0,0,1-11.32,0l-24-24a8,8,0,0,1,11.32-11.32L120,164.69V120a8,8,0,0,1,16,0v44.69l10.34-10.35a8,8,0,0,1,11.32,11.32ZM152,88V44l44,44Z"}))],["light",x.createElement(x.Fragment,null,x.createElement("path",{d:"M212.24,83.76l-56-56A6,6,0,0,0,152,26H56A14,14,0,0,0,42,40V216a14,14,0,0,0,14,14H200a14,14,0,0,0,14-14V88A6,6,0,0,0,212.24,83.76ZM158,46.48,193.52,82H158ZM200,218H56a2,2,0,0,1-2-2V40a2,2,0,0,1,2-2h90V88a6,6,0,0,0,6,6h50V216A2,2,0,0,1,200,218Zm-43.76-62.24a6,6,0,0,1,0,8.48l-24,24a6,6,0,0,1-8.48,0l-24-24a6,6,0,0,1,8.48-8.48L122,169.51V120a6,6,0,0,1,12,0v49.51l13.76-13.75A6,6,0,0,1,156.24,155.76Z"}))],["regular",x.createElement(x.Fragment,null,x.createElement("path",{d:"M213.66,82.34l-56-56A8,8,0,0,0,152,24H56A16,16,0,0,0,40,40V216a16,16,0,0,0,16,16H200a16,16,0,0,0,16-16V88A8,8,0,0,0,213.66,82.34ZM160,51.31,188.69,80H160ZM200,216H56V40h88V88a8,8,0,0,0,8,8h48V216Zm-42.34-61.66a8,8,0,0,1,0,11.32l-24,24a8,8,0,0,1-11.32,0l-24-24a8,8,0,0,1,11.32-11.32L120,164.69V120a8,8,0,0,1,16,0v44.69l10.34-10.35A8,8,0,0,1,157.66,154.34Z"}))],["thin",x.createElement(x.Fragment,null,x.createElement("path",{d:"M210.83,85.17l-56-56A4,4,0,0,0,152,28H56A12,12,0,0,0,44,40V216a12,12,0,0,0,12,12H200a12,12,0,0,0,12-12V88A4,4,0,0,0,210.83,85.17ZM156,41.65,198.34,84H156ZM200,220H56a4,4,0,0,1-4-4V40a4,4,0,0,1,4-4h92V88a4,4,0,0,0,4,4h52V216A4,4,0,0,1,200,220Zm-45.17-62.83a4,4,0,0,1,0,5.66l-24,24a4,4,0,0,1-5.66,0l-24-24a4,4,0,0,1,5.66-5.66L124,174.34V120a4,4,0,0,1,8,0v54.34l17.17-17.17A4,4,0,0,1,154.83,157.17Z"}))]]),Xb=new Map([["bold",x.createElement(x.Fragment,null,x.createElement("path",{d:"M216.49,79.52l-56-56A12,12,0,0,0,152,20H56A20,20,0,0,0,36,40V216a20,20,0,0,0,20,20H200a20,20,0,0,0,20-20V88A12,12,0,0,0,216.49,79.52ZM183,80H160V57ZM60,212V44h76V92a12,12,0,0,0,12,12h48V212Zm100.49-72.49a12,12,0,0,1-17,17L140,153v31a12,12,0,0,1-24,0V153l-3.51,3.52a12,12,0,0,1-17-17l24-24a12,12,0,0,1,17,0Z"}))],["duotone",x.createElement(x.Fragment,null,x.createElement("path",{d:"M208,88H152V32Z",opacity:"0.2"}),x.createElement("path",{d:"M213.66,82.34l-56-56A8,8,0,0,0,152,24H56A16,16,0,0,0,40,40V216a16,16,0,0,0,16,16H200a16,16,0,0,0,16-16V88A8,8,0,0,0,213.66,82.34ZM160,51.31,188.69,80H160ZM200,216H56V40h88V88a8,8,0,0,0,8,8h48V216Zm-42.34-77.66a8,8,0,0,1-11.32,11.32L136,139.31V184a8,8,0,0,1-16,0V139.31l-10.34,10.35a8,8,0,0,1-11.32-11.32l24-24a8,8,0,0,1,11.32,0Z"}))],["fill",x.createElement(x.Fragment,null,x.createElement("path",{d:"M213.66,82.34l-56-56A8,8,0,0,0,152,24H56A16,16,0,0,0,40,40V216a16,16,0,0,0,16,16H200a16,16,0,0,0,16-16V88A8,8,0,0,0,213.66,82.34Zm-56,67.32a8,8,0,0,1-11.32,0L136,139.31V184a8,8,0,0,1-16,0V139.31l-10.34,10.35a8,8,0,0,1-11.32-11.32l24-24a8,8,0,0,1,11.32,0l24,24A8,8,0,0,1,157.66,149.66ZM152,88V44l44,44Z"}))],["light",x.createElement(x.Fragment,null,x.createElement("path",{d:"M212.24,83.76l-56-56A6,6,0,0,0,152,26H56A14,14,0,0,0,42,40V216a14,14,0,0,0,14,14H200a14,14,0,0,0,14-14V88A6,6,0,0,0,212.24,83.76ZM158,46.48,193.52,82H158ZM200,218H56a2,2,0,0,1-2-2V40a2,2,0,0,1,2-2h90V88a6,6,0,0,0,6,6h50V216A2,2,0,0,1,200,218Zm-43.76-78.24a6,6,0,1,1-8.48,8.48L134,134.49V184a6,6,0,0,1-12,0V134.49l-13.76,13.75a6,6,0,0,1-8.48-8.48l24-24a6,6,0,0,1,8.48,0Z"}))],["regular",x.createElement(x.Fragment,null,x.createElement("path",{d:"M213.66,82.34l-56-56A8,8,0,0,0,152,24H56A16,16,0,0,0,40,40V216a16,16,0,0,0,16,16H200a16,16,0,0,0,16-16V88A8,8,0,0,0,213.66,82.34ZM160,51.31,188.69,80H160ZM200,216H56V40h88V88a8,8,0,0,0,8,8h48V216Zm-42.34-77.66a8,8,0,0,1-11.32,11.32L136,139.31V184a8,8,0,0,1-16,0V139.31l-10.34,10.35a8,8,0,0,1-11.32-11.32l24-24a8,8,0,0,1,11.32,0Z"}))],["thin",x.createElement(x.Fragment,null,x.createElement("path",{d:"M210.83,85.17l-56-56A4,4,0,0,0,152,28H56A12,12,0,0,0,44,40V216a12,12,0,0,0,12,12H200a12,12,0,0,0,12-12V88A4,4,0,0,0,210.83,85.17ZM156,41.65,198.34,84H156ZM200,220H56a4,4,0,0,1-4-4V40a4,4,0,0,1,4-4h92V88a4,4,0,0,0,4,4h52V216A4,4,0,0,1,200,220Zm-45.17-78.83a4,4,0,0,1-5.66,5.66L132,129.66V184a4,4,0,0,1-8,0V129.66l-17.17,17.17a4,4,0,0,1-5.66-5.66l24-24a4,4,0,0,1,5.66,0Z"}))]]),Jb=new Map([["bold",x.createElement(x.Fragment,null,x.createElement("path",{d:"M248.49,71.51l-32-32a12,12,0,0,0-17,17L211,68h-3c-52,0-64.8,30.71-75.08,55.38-8.82,21.17-15.45,37.05-42.75,40.09a44,44,0,1,0,.28,24.08c43.34-3.87,55.07-32,64.63-54.93C164.9,109,172,92,208,92h3l-11.52,11.51a12,12,0,0,0,17,17l32-32A12,12,0,0,0,248.49,71.51ZM48,196a20,20,0,1,1,20-20A20,20,0,0,1,48,196Z"}))],["duotone",x.createElement(x.Fragment,null,x.createElement("path",{d:"M80,176a32,32,0,1,1-32-32A32,32,0,0,1,80,176Z",opacity:"0.2"}),x.createElement("path",{d:"M245.66,74.34l-32-32a8,8,0,0,0-11.32,11.32L220.69,72H208c-49.33,0-61.05,28.12-71.38,52.92-9.38,22.51-16.92,40.59-49.48,42.84a40,40,0,1,0,.1,16c43.26-2.65,54.34-29.15,64.14-52.69C161.41,107,169.33,88,208,88h12.69l-18.35,18.34a8,8,0,0,0,11.32,11.32l32-32A8,8,0,0,0,245.66,74.34ZM48,200a24,24,0,1,1,24-24A24,24,0,0,1,48,200Z"}))],["fill",x.createElement(x.Fragment,null,x.createElement("path",{d:"M245.66,85.66l-32,32a8,8,0,0,1-11.32-11.32L220.69,88H208c-38.67,0-46.59,19-56.62,43.08C141.05,155.88,129.33,184,80,184H79a32,32,0,1,1,0-16h1c38.67,0,46.59-19,56.62-43.08C147,100.12,158.67,72,208,72h12.69L202.34,53.66a8,8,0,0,1,11.32-11.32l32,32A8,8,0,0,1,245.66,85.66Z"}))],["light",x.createElement(x.Fragment,null,x.createElement("path",{d:"M244.24,75.76l-32-32a6,6,0,0,0-8.48,8.48L225.51,74H208c-48,0-59.44,27.46-69.54,51.69-9.43,22.64-17.66,42.33-53,44.16a38,38,0,1,0,.06,12c43.34-2.06,54.29-28.29,64-51.55C159.44,106.53,168,86,208,86h17.51l-21.75,21.76a6,6,0,1,0,8.48,8.48l32-32A6,6,0,0,0,244.24,75.76ZM48,202a26,26,0,1,1,26-26A26,26,0,0,1,48,202Z"}))],["regular",x.createElement(x.Fragment,null,x.createElement("path",{d:"M245.66,74.34l-32-32a8,8,0,0,0-11.32,11.32L220.69,72H208c-49.33,0-61.05,28.12-71.38,52.92-9.38,22.51-16.92,40.59-49.48,42.84a40,40,0,1,0,.1,16c43.26-2.65,54.34-29.15,64.14-52.69C161.41,107,169.33,88,208,88h12.69l-18.35,18.34a8,8,0,0,0,11.32,11.32l32-32A8,8,0,0,0,245.66,74.34ZM48,200a24,24,0,1,1,24-24A24,24,0,0,1,48,200Z"}))],["thin",x.createElement(x.Fragment,null,x.createElement("path",{d:"M242.83,77.17l-32-32a4,4,0,0,0-5.66,5.66L230.34,76H208c-46.67,0-57.84,26.81-67.69,50.46-9.46,22.69-18.4,44.16-56.55,45.48a36,36,0,1,0,0,8c43.49-1.42,54.33-27.39,63.91-50.39C157.45,106.12,166.67,84,208,84h22.34l-25.17,25.17a4,4,0,0,0,5.66,5.66l32-32A4,4,0,0,0,242.83,77.17ZM48,204a28,28,0,1,1,28-28A28,28,0,0,1,48,204Z"}))]]),Qb=new Map([["bold",x.createElement(x.Fragment,null,x.createElement("path",{d:"M128,76a52,52,0,1,0,52,52A52.06,52.06,0,0,0,128,76Zm0,80a28,28,0,1,1,28-28A28,28,0,0,1,128,156Zm92-27.21v-1.58l14-17.51a12,12,0,0,0,2.23-10.59A111.75,111.75,0,0,0,225,71.89,12,12,0,0,0,215.89,66L193.61,63.5l-1.11-1.11L190,40.1A12,12,0,0,0,184.11,31a111.67,111.67,0,0,0-27.23-11.27A12,12,0,0,0,146.3,22L128.79,36h-1.58L109.7,22a12,12,0,0,0-10.59-2.23A111.75,111.75,0,0,0,71.89,31.05,12,12,0,0,0,66,40.11L63.5,62.39,62.39,63.5,40.1,66A12,12,0,0,0,31,71.89,111.67,111.67,0,0,0,19.77,99.12,12,12,0,0,0,22,109.7l14,17.51v1.58L22,146.3a12,12,0,0,0-2.23,10.59,111.75,111.75,0,0,0,11.29,27.22A12,12,0,0,0,40.11,190l22.28,2.48,1.11,1.11L66,215.9A12,12,0,0,0,71.89,225a111.67,111.67,0,0,0,27.23,11.27A12,12,0,0,0,109.7,234l17.51-14h1.58l17.51,14a12,12,0,0,0,10.59,2.23A111.75,111.75,0,0,0,184.11,225a12,12,0,0,0,5.91-9.06l2.48-22.28,1.11-1.11L215.9,190a12,12,0,0,0,9.06-5.91,111.67,111.67,0,0,0,11.27-27.23A12,12,0,0,0,234,146.3Zm-24.12-4.89a70.1,70.1,0,0,1,0,8.2,12,12,0,0,0,2.61,8.22l12.84,16.05A86.47,86.47,0,0,1,207,166.86l-20.43,2.27a12,12,0,0,0-7.65,4,69,69,0,0,1-5.8,5.8,12,12,0,0,0-4,7.65L166.86,207a86.47,86.47,0,0,1-10.49,4.35l-16.05-12.85a12,12,0,0,0-7.5-2.62c-.24,0-.48,0-.72,0a70.1,70.1,0,0,1-8.2,0,12.06,12.06,0,0,0-8.22,2.6L99.63,211.33A86.47,86.47,0,0,1,89.14,207l-2.27-20.43a12,12,0,0,0-4-7.65,69,69,0,0,1-5.8-5.8,12,12,0,0,0-7.65-4L49,166.86a86.47,86.47,0,0,1-4.35-10.49l12.84-16.05a12,12,0,0,0,2.61-8.22,70.1,70.1,0,0,1,0-8.2,12,12,0,0,0-2.61-8.22L44.67,99.63A86.47,86.47,0,0,1,49,89.14l20.43-2.27a12,12,0,0,0,7.65-4,69,69,0,0,1,5.8-5.8,12,12,0,0,0,4-7.65L89.14,49a86.47,86.47,0,0,1,10.49-4.35l16.05,12.85a12.06,12.06,0,0,0,8.22,2.6,70.1,70.1,0,0,1,8.2,0,12,12,0,0,0,8.22-2.6l16.05-12.85A86.47,86.47,0,0,1,166.86,49l2.27,20.43a12,12,0,0,0,4,7.65,69,69,0,0,1,5.8,5.8,12,12,0,0,0,7.65,4L207,89.14a86.47,86.47,0,0,1,4.35,10.49l-12.84,16.05A12,12,0,0,0,195.88,123.9Z"}))],["duotone",x.createElement(x.Fragment,null,x.createElement("path",{d:"M207.86,123.18l16.78-21a99.14,99.14,0,0,0-10.07-24.29l-26.7-3a81,81,0,0,0-6.81-6.81l-3-26.71a99.43,99.43,0,0,0-24.3-10l-21,16.77a81.59,81.59,0,0,0-9.64,0l-21-16.78A99.14,99.14,0,0,0,77.91,41.43l-3,26.7a81,81,0,0,0-6.81,6.81l-26.71,3a99.43,99.43,0,0,0-10,24.3l16.77,21a81.59,81.59,0,0,0,0,9.64l-16.78,21a99.14,99.14,0,0,0,10.07,24.29l26.7,3a81,81,0,0,0,6.81,6.81l3,26.71a99.43,99.43,0,0,0,24.3,10l21-16.77a81.59,81.59,0,0,0,9.64,0l21,16.78a99.14,99.14,0,0,0,24.29-10.07l3-26.7a81,81,0,0,0,6.81-6.81l26.71-3a99.43,99.43,0,0,0,10-24.3l-16.77-21A81.59,81.59,0,0,0,207.86,123.18ZM128,168a40,40,0,1,1,40-40A40,40,0,0,1,128,168Z",opacity:"0.2"}),x.createElement("path",{d:"M128,80a48,48,0,1,0,48,48A48.05,48.05,0,0,0,128,80Zm0,80a32,32,0,1,1,32-32A32,32,0,0,1,128,160Zm88-29.84q.06-2.16,0-4.32l14.92-18.64a8,8,0,0,0,1.48-7.06,107.6,107.6,0,0,0-10.88-26.25,8,8,0,0,0-6-3.93l-23.72-2.64q-1.48-1.56-3-3L186,40.54a8,8,0,0,0-3.94-6,107.29,107.29,0,0,0-26.25-10.86,8,8,0,0,0-7.06,1.48L130.16,40Q128,40,125.84,40L107.2,25.11a8,8,0,0,0-7.06-1.48A107.6,107.6,0,0,0,73.89,34.51a8,8,0,0,0-3.93,6L67.32,64.27q-1.56,1.49-3,3L40.54,70a8,8,0,0,0-6,3.94,107.71,107.71,0,0,0-10.87,26.25,8,8,0,0,0,1.49,7.06L40,125.84Q40,128,40,130.16L25.11,148.8a8,8,0,0,0-1.48,7.06,107.6,107.6,0,0,0,10.88,26.25,8,8,0,0,0,6,3.93l23.72,2.64q1.49,1.56,3,3L70,215.46a8,8,0,0,0,3.94,6,107.71,107.71,0,0,0,26.25,10.87,8,8,0,0,0,7.06-1.49L125.84,216q2.16.06,4.32,0l18.64,14.92a8,8,0,0,0,7.06,1.48,107.21,107.21,0,0,0,26.25-10.88,8,8,0,0,0,3.93-6l2.64-23.72q1.56-1.48,3-3L215.46,186a8,8,0,0,0,6-3.94,107.71,107.71,0,0,0,10.87-26.25,8,8,0,0,0-1.49-7.06Zm-16.1-6.5a73.93,73.93,0,0,1,0,8.68,8,8,0,0,0,1.74,5.48l14.19,17.73a91.57,91.57,0,0,1-6.23,15L187,173.11a8,8,0,0,0-5.1,2.64,74.11,74.11,0,0,1-6.14,6.14,8,8,0,0,0-2.64,5.1l-2.51,22.58a91.32,91.32,0,0,1-15,6.23l-17.74-14.19a8,8,0,0,0-5-1.75h-.48a73.93,73.93,0,0,1-8.68,0,8.06,8.06,0,0,0-5.48,1.74L100.45,215.8a91.57,91.57,0,0,1-15-6.23L82.89,187a8,8,0,0,0-2.64-5.1,74.11,74.11,0,0,1-6.14-6.14,8,8,0,0,0-5.1-2.64L46.43,170.6a91.32,91.32,0,0,1-6.23-15l14.19-17.74a8,8,0,0,0,1.74-5.48,73.93,73.93,0,0,1,0-8.68,8,8,0,0,0-1.74-5.48L40.2,100.45a91.57,91.57,0,0,1,6.23-15L69,82.89a8,8,0,0,0,5.1-2.64,74.11,74.11,0,0,1,6.14-6.14A8,8,0,0,0,82.89,69L85.4,46.43a91.32,91.32,0,0,1,15-6.23l17.74,14.19a8,8,0,0,0,5.48,1.74,73.93,73.93,0,0,1,8.68,0,8.06,8.06,0,0,0,5.48-1.74L155.55,40.2a91.57,91.57,0,0,1,15,6.23L173.11,69a8,8,0,0,0,2.64,5.1,74.11,74.11,0,0,1,6.14,6.14,8,8,0,0,0,5.1,2.64l22.58,2.51a91.32,91.32,0,0,1,6.23,15l-14.19,17.74A8,8,0,0,0,199.87,123.66Z"}))],["fill",x.createElement(x.Fragment,null,x.createElement("path",{d:"M216,130.16q.06-2.16,0-4.32l14.92-18.64a8,8,0,0,0,1.48-7.06,107.6,107.6,0,0,0-10.88-26.25,8,8,0,0,0-6-3.93l-23.72-2.64q-1.48-1.56-3-3L186,40.54a8,8,0,0,0-3.94-6,107.29,107.29,0,0,0-26.25-10.86,8,8,0,0,0-7.06,1.48L130.16,40Q128,40,125.84,40L107.2,25.11a8,8,0,0,0-7.06-1.48A107.6,107.6,0,0,0,73.89,34.51a8,8,0,0,0-3.93,6L67.32,64.27q-1.56,1.49-3,3L40.54,70a8,8,0,0,0-6,3.94,107.71,107.71,0,0,0-10.87,26.25,8,8,0,0,0,1.49,7.06L40,125.84Q40,128,40,130.16L25.11,148.8a8,8,0,0,0-1.48,7.06,107.6,107.6,0,0,0,10.88,26.25,8,8,0,0,0,6,3.93l23.72,2.64q1.49,1.56,3,3L70,215.46a8,8,0,0,0,3.94,6,107.71,107.71,0,0,0,26.25,10.87,8,8,0,0,0,7.06-1.49L125.84,216q2.16.06,4.32,0l18.64,14.92a8,8,0,0,0,7.06,1.48,107.21,107.21,0,0,0,26.25-10.88,8,8,0,0,0,3.93-6l2.64-23.72q1.56-1.48,3-3L215.46,186a8,8,0,0,0,6-3.94,107.71,107.71,0,0,0,10.87-26.25,8,8,0,0,0-1.49-7.06ZM128,168a40,40,0,1,1,40-40A40,40,0,0,1,128,168Z"}))],["light",x.createElement(x.Fragment,null,x.createElement("path",{d:"M128,82a46,46,0,1,0,46,46A46.06,46.06,0,0,0,128,82Zm0,80a34,34,0,1,1,34-34A34,34,0,0,1,128,162ZM214,130.84c.06-1.89.06-3.79,0-5.68L229.33,106a6,6,0,0,0,1.11-5.29A105.34,105.34,0,0,0,219.76,74.9a6,6,0,0,0-4.53-3l-24.45-2.71q-1.93-2.07-4-4l-2.72-24.46a6,6,0,0,0-3-4.53,105.65,105.65,0,0,0-25.77-10.66A6,6,0,0,0,150,26.68l-19.2,15.37c-1.89-.06-3.79-.06-5.68,0L106,26.67a6,6,0,0,0-5.29-1.11A105.34,105.34,0,0,0,74.9,36.24a6,6,0,0,0-3,4.53L69.23,65.22q-2.07,1.94-4,4L40.76,72a6,6,0,0,0-4.53,3,105.65,105.65,0,0,0-10.66,25.77A6,6,0,0,0,26.68,106l15.37,19.2c-.06,1.89-.06,3.79,0,5.68L26.67,150.05a6,6,0,0,0-1.11,5.29A105.34,105.34,0,0,0,36.24,181.1a6,6,0,0,0,4.53,3l24.45,2.71q1.94,2.07,4,4L72,215.24a6,6,0,0,0,3,4.53,105.65,105.65,0,0,0,25.77,10.66,6,6,0,0,0,5.29-1.11L125.16,214c1.89.06,3.79.06,5.68,0l19.21,15.38a6,6,0,0,0,3.75,1.31,6.2,6.2,0,0,0,1.54-.2,105.34,105.34,0,0,0,25.76-10.68,6,6,0,0,0,3-4.53l2.71-24.45q2.07-1.93,4-4l24.46-2.72a6,6,0,0,0,4.53-3,105.49,105.49,0,0,0,10.66-25.77,6,6,0,0,0-1.11-5.29Zm-3.1,41.63-23.64,2.63a6,6,0,0,0-3.82,2,75.14,75.14,0,0,1-6.31,6.31,6,6,0,0,0-2,3.82l-2.63,23.63A94.28,94.28,0,0,1,155.14,218l-18.57-14.86a6,6,0,0,0-3.75-1.31h-.36a78.07,78.07,0,0,1-8.92,0,6,6,0,0,0-4.11,1.3L100.87,218a94.13,94.13,0,0,1-17.34-7.17L80.9,187.21a6,6,0,0,0-2-3.82,75.14,75.14,0,0,1-6.31-6.31,6,6,0,0,0-3.82-2l-23.63-2.63A94.28,94.28,0,0,1,38,155.14l14.86-18.57a6,6,0,0,0,1.3-4.11,78.07,78.07,0,0,1,0-8.92,6,6,0,0,0-1.3-4.11L38,100.87a94.13,94.13,0,0,1,7.17-17.34L68.79,80.9a6,6,0,0,0,3.82-2,75.14,75.14,0,0,1,6.31-6.31,6,6,0,0,0,2-3.82l2.63-23.63A94.28,94.28,0,0,1,100.86,38l18.57,14.86a6,6,0,0,0,4.11,1.3,78.07,78.07,0,0,1,8.92,0,6,6,0,0,0,4.11-1.3L155.13,38a94.13,94.13,0,0,1,17.34,7.17l2.63,23.64a6,6,0,0,0,2,3.82,75.14,75.14,0,0,1,6.31,6.31,6,6,0,0,0,3.82,2l23.63,2.63A94.28,94.28,0,0,1,218,100.86l-14.86,18.57a6,6,0,0,0-1.3,4.11,78.07,78.07,0,0,1,0,8.92,6,6,0,0,0,1.3,4.11L218,155.13A94.13,94.13,0,0,1,210.85,172.47Z"}))],["regular",x.createElement(x.Fragment,null,x.createElement("path",{d:"M128,80a48,48,0,1,0,48,48A48.05,48.05,0,0,0,128,80Zm0,80a32,32,0,1,1,32-32A32,32,0,0,1,128,160Zm88-29.84q.06-2.16,0-4.32l14.92-18.64a8,8,0,0,0,1.48-7.06,107.21,107.21,0,0,0-10.88-26.25,8,8,0,0,0-6-3.93l-23.72-2.64q-1.48-1.56-3-3L186,40.54a8,8,0,0,0-3.94-6,107.71,107.71,0,0,0-26.25-10.87,8,8,0,0,0-7.06,1.49L130.16,40Q128,40,125.84,40L107.2,25.11a8,8,0,0,0-7.06-1.48A107.6,107.6,0,0,0,73.89,34.51a8,8,0,0,0-3.93,6L67.32,64.27q-1.56,1.49-3,3L40.54,70a8,8,0,0,0-6,3.94,107.71,107.71,0,0,0-10.87,26.25,8,8,0,0,0,1.49,7.06L40,125.84Q40,128,40,130.16L25.11,148.8a8,8,0,0,0-1.48,7.06,107.21,107.21,0,0,0,10.88,26.25,8,8,0,0,0,6,3.93l23.72,2.64q1.49,1.56,3,3L70,215.46a8,8,0,0,0,3.94,6,107.71,107.71,0,0,0,26.25,10.87,8,8,0,0,0,7.06-1.49L125.84,216q2.16.06,4.32,0l18.64,14.92a8,8,0,0,0,7.06,1.48,107.21,107.21,0,0,0,26.25-10.88,8,8,0,0,0,3.93-6l2.64-23.72q1.56-1.48,3-3L215.46,186a8,8,0,0,0,6-3.94,107.71,107.71,0,0,0,10.87-26.25,8,8,0,0,0-1.49-7.06Zm-16.1-6.5a73.93,73.93,0,0,1,0,8.68,8,8,0,0,0,1.74,5.48l14.19,17.73a91.57,91.57,0,0,1-6.23,15L187,173.11a8,8,0,0,0-5.1,2.64,74.11,74.11,0,0,1-6.14,6.14,8,8,0,0,0-2.64,5.1l-2.51,22.58a91.32,91.32,0,0,1-15,6.23l-17.74-14.19a8,8,0,0,0-5-1.75h-.48a73.93,73.93,0,0,1-8.68,0,8,8,0,0,0-5.48,1.74L100.45,215.8a91.57,91.57,0,0,1-15-6.23L82.89,187a8,8,0,0,0-2.64-5.1,74.11,74.11,0,0,1-6.14-6.14,8,8,0,0,0-5.1-2.64L46.43,170.6a91.32,91.32,0,0,1-6.23-15l14.19-17.74a8,8,0,0,0,1.74-5.48,73.93,73.93,0,0,1,0-8.68,8,8,0,0,0-1.74-5.48L40.2,100.45a91.57,91.57,0,0,1,6.23-15L69,82.89a8,8,0,0,0,5.1-2.64,74.11,74.11,0,0,1,6.14-6.14A8,8,0,0,0,82.89,69L85.4,46.43a91.32,91.32,0,0,1,15-6.23l17.74,14.19a8,8,0,0,0,5.48,1.74,73.93,73.93,0,0,1,8.68,0,8,8,0,0,0,5.48-1.74L155.55,40.2a91.57,91.57,0,0,1,15,6.23L173.11,69a8,8,0,0,0,2.64,5.1,74.11,74.11,0,0,1,6.14,6.14,8,8,0,0,0,5.1,2.64l22.58,2.51a91.32,91.32,0,0,1,6.23,15l-14.19,17.74A8,8,0,0,0,199.87,123.66Z"}))],["thin",x.createElement(x.Fragment,null,x.createElement("path",{d:"M128,84a44,44,0,1,0,44,44A44.05,44.05,0,0,0,128,84Zm0,80a36,36,0,1,1,36-36A36,36,0,0,1,128,164Zm83.93-32.49q.13-3.51,0-7l15.83-19.79a4,4,0,0,0,.75-3.53A103.64,103.64,0,0,0,218,75.9a4,4,0,0,0-3-2l-25.19-2.8c-1.58-1.71-3.24-3.37-4.95-4.95L182.07,41a4,4,0,0,0-2-3A104,104,0,0,0,154.82,27.5a4,4,0,0,0-3.53.74L131.51,44.07q-3.51-.14-7,0L104.7,28.24a4,4,0,0,0-3.53-.75A103.64,103.64,0,0,0,75.9,38a4,4,0,0,0-2,3l-2.8,25.19c-1.71,1.58-3.37,3.24-4.95,4.95L41,73.93a4,4,0,0,0-3,2A104,104,0,0,0,27.5,101.18a4,4,0,0,0,.74,3.53l15.83,19.78q-.14,3.51,0,7L28.24,151.3a4,4,0,0,0-.75,3.53A103.64,103.64,0,0,0,38,180.1a4,4,0,0,0,3,2l25.19,2.8c1.58,1.71,3.24,3.37,4.95,4.95l2.8,25.2a4,4,0,0,0,2,3,104,104,0,0,0,25.28,10.46,4,4,0,0,0,3.53-.74l19.78-15.83q3.51.13,7,0l19.79,15.83a4,4,0,0,0,2.5.88,4,4,0,0,0,1-.13A103.64,103.64,0,0,0,180.1,218a4,4,0,0,0,2-3l2.8-25.19c1.71-1.58,3.37-3.24,4.95-4.95l25.2-2.8a4,4,0,0,0,3-2,104,104,0,0,0,10.46-25.28,4,4,0,0,0-.74-3.53Zm.17,42.83-24.67,2.74a4,4,0,0,0-2.55,1.32,76.2,76.2,0,0,1-6.48,6.48,4,4,0,0,0-1.32,2.55l-2.74,24.66a95.45,95.45,0,0,1-19.64,8.15l-19.38-15.51a4,4,0,0,0-2.5-.87h-.24a73.67,73.67,0,0,1-9.16,0,4,4,0,0,0-2.74.87l-19.37,15.5a95.33,95.33,0,0,1-19.65-8.13l-2.74-24.67a4,4,0,0,0-1.32-2.55,76.2,76.2,0,0,1-6.48-6.48,4,4,0,0,0-2.55-1.32l-24.66-2.74a95.45,95.45,0,0,1-8.15-19.64l15.51-19.38a4,4,0,0,0,.87-2.74,77.76,77.76,0,0,1,0-9.16,4,4,0,0,0-.87-2.74l-15.5-19.37A95.33,95.33,0,0,1,43.9,81.66l24.67-2.74a4,4,0,0,0,2.55-1.32,76.2,76.2,0,0,1,6.48-6.48,4,4,0,0,0,1.32-2.55l2.74-24.66a95.45,95.45,0,0,1,19.64-8.15l19.38,15.51a4,4,0,0,0,2.74.87,73.67,73.67,0,0,1,9.16,0,4,4,0,0,0,2.74-.87l19.37-15.5a95.33,95.33,0,0,1,19.65,8.13l2.74,24.67a4,4,0,0,0,1.32,2.55,76.2,76.2,0,0,1,6.48,6.48,4,4,0,0,0,2.55,1.32l24.66,2.74a95.45,95.45,0,0,1,8.15,19.64l-15.51,19.38a4,4,0,0,0-.87,2.74,77.76,77.76,0,0,1,0,9.16,4,4,0,0,0,.87,2.74l15.5,19.37A95.33,95.33,0,0,1,212.1,174.34Z"}))]]),e6=new Map([["bold",x.createElement(x.Fragment,null,x.createElement("path",{d:"M222.14,105.85l-80-80a20,20,0,0,0-28.28,0l-80,80A19.86,19.86,0,0,0,28,120v96a12,12,0,0,0,12,12h64a12,12,0,0,0,12-12V164h24v52a12,12,0,0,0,12,12h64a12,12,0,0,0,12-12V120A19.86,19.86,0,0,0,222.14,105.85ZM204,204H164V152a12,12,0,0,0-12-12H104a12,12,0,0,0-12,12v52H52V121.65l76-76,76,76Z"}))],["duotone",x.createElement(x.Fragment,null,x.createElement("path",{d:"M216,120v96H152V152H104v64H40V120a8,8,0,0,1,2.34-5.66l80-80a8,8,0,0,1,11.32,0l80,80A8,8,0,0,1,216,120Z",opacity:"0.2"}),x.createElement("path",{d:"M219.31,108.68l-80-80a16,16,0,0,0-22.62,0l-80,80A15.87,15.87,0,0,0,32,120v96a8,8,0,0,0,8,8h64a8,8,0,0,0,8-8V160h32v56a8,8,0,0,0,8,8h64a8,8,0,0,0,8-8V120A15.87,15.87,0,0,0,219.31,108.68ZM208,208H160V152a8,8,0,0,0-8-8H104a8,8,0,0,0-8,8v56H48V120l80-80,80,80Z"}))],["fill",x.createElement(x.Fragment,null,x.createElement("path",{d:"M224,120v96a8,8,0,0,1-8,8H160a8,8,0,0,1-8-8V164a4,4,0,0,0-4-4H108a4,4,0,0,0-4,4v52a8,8,0,0,1-8,8H40a8,8,0,0,1-8-8V120a16,16,0,0,1,4.69-11.31l80-80a16,16,0,0,1,22.62,0l80,80A16,16,0,0,1,224,120Z"}))],["light",x.createElement(x.Fragment,null,x.createElement("path",{d:"M217.9,110.1l-80-80a14,14,0,0,0-19.8,0l-80,80A13.92,13.92,0,0,0,34,120v96a6,6,0,0,0,6,6h64a6,6,0,0,0,6-6V158h36v58a6,6,0,0,0,6,6h64a6,6,0,0,0,6-6V120A13.92,13.92,0,0,0,217.9,110.1ZM210,210H158V152a6,6,0,0,0-6-6H104a6,6,0,0,0-6,6v58H46V120a2,2,0,0,1,.58-1.42l80-80a2,2,0,0,1,2.84,0l80,80A2,2,0,0,1,210,120Z"}))],["regular",x.createElement(x.Fragment,null,x.createElement("path",{d:"M219.31,108.68l-80-80a16,16,0,0,0-22.62,0l-80,80A15.87,15.87,0,0,0,32,120v96a8,8,0,0,0,8,8h64a8,8,0,0,0,8-8V160h32v56a8,8,0,0,0,8,8h64a8,8,0,0,0,8-8V120A15.87,15.87,0,0,0,219.31,108.68ZM208,208H160V152a8,8,0,0,0-8-8H104a8,8,0,0,0-8,8v56H48V120l80-80,80,80Z"}))],["thin",x.createElement(x.Fragment,null,x.createElement("path",{d:"M216.49,111.51l-80-80a12,12,0,0,0-17,0l-80,80A12,12,0,0,0,36,120v96a4,4,0,0,0,4,4h64a4,4,0,0,0,4-4V156h40v60a4,4,0,0,0,4,4h64a4,4,0,0,0,4-4V120A12,12,0,0,0,216.49,111.51ZM212,212H156V152a4,4,0,0,0-4-4H104a4,4,0,0,0-4,4v60H44V120a4,4,0,0,1,1.17-2.83l80-80a4,4,0,0,1,5.66,0l80,80A4,4,0,0,1,212,120Z"}))]]),t6=new Map([["bold",x.createElement(x.Fragment,null,x.createElement("path",{d:"M196,76a16,16,0,1,1-16-16A16,16,0,0,1,196,76Zm48,22.74A84.3,84.3,0,0,1,160.11,180H160a83.52,83.52,0,0,1-23.65-3.38l-7.86,7.87A12,12,0,0,1,120,188H108v12a12,12,0,0,1-12,12H84v12a12,12,0,0,1-12,12H40a20,20,0,0,1-20-20V187.31a19.86,19.86,0,0,1,5.86-14.14l53.52-53.52A84,84,0,1,1,244,98.74ZM202.43,53.57A59.48,59.48,0,0,0,158,36c-32,1-58,27.89-58,59.89a59.69,59.69,0,0,0,4.2,22.19,12,12,0,0,1-2.55,13.21L44,189v23H60V200a12,12,0,0,1,12-12H84V176a12,12,0,0,1,12-12h19l9.65-9.65a12,12,0,0,1,13.22-2.55A59.58,59.58,0,0,0,160,156h.08c32,0,58.87-26.07,59.89-58A59.55,59.55,0,0,0,202.43,53.57Z"}))],["duotone",x.createElement(x.Fragment,null,x.createElement("path",{d:"M232,98.36C230.73,136.92,198.67,168,160.09,168a71.68,71.68,0,0,1-26.92-5.17h0L120,176H96v24H72v24H40a8,8,0,0,1-8-8V187.31a8,8,0,0,1,2.34-5.65l58.83-58.83h0A71.68,71.68,0,0,1,88,95.91c0-38.58,31.08-70.64,69.64-71.87A72,72,0,0,1,232,98.36Z",opacity:"0.2"}),x.createElement("path",{d:"M216.57,39.43A80,80,0,0,0,83.91,120.78L28.69,176A15.86,15.86,0,0,0,24,187.31V216a16,16,0,0,0,16,16H72a8,8,0,0,0,8-8V208H96a8,8,0,0,0,8-8V184h16a8,8,0,0,0,5.66-2.34l9.56-9.57A79.73,79.73,0,0,0,160,176h.1A80,80,0,0,0,216.57,39.43ZM224,98.1c-1.09,34.09-29.75,61.86-63.89,61.9H160a63.7,63.7,0,0,1-23.65-4.51,8,8,0,0,0-8.84,1.68L116.69,168H96a8,8,0,0,0-8,8v16H72a8,8,0,0,0-8,8v16H40V187.31l58.83-58.82a8,8,0,0,0,1.68-8.84A63.72,63.72,0,0,1,96,95.92c0-34.14,27.81-62.8,61.9-63.89A64,64,0,0,1,224,98.1ZM192,76a12,12,0,1,1-12-12A12,12,0,0,1,192,76Z"}))],["fill",x.createElement(x.Fragment,null,x.createElement("path",{d:"M216.57,39.43A80,80,0,0,0,83.91,120.78L28.69,176A15.86,15.86,0,0,0,24,187.31V216a16,16,0,0,0,16,16H72a8,8,0,0,0,8-8V208H96a8,8,0,0,0,8-8V184h16a8,8,0,0,0,5.66-2.34l9.56-9.57A79.73,79.73,0,0,0,160,176h.1A80,80,0,0,0,216.57,39.43ZM180,92a16,16,0,1,1,16-16A16,16,0,0,1,180,92Z"}))],["light",x.createElement(x.Fragment,null,x.createElement("path",{d:"M215.15,40.85A78,78,0,0,0,86.2,121.31l-56.1,56.1a13.94,13.94,0,0,0-4.1,9.9V216a14,14,0,0,0,14,14H72a6,6,0,0,0,6-6V206H96a6,6,0,0,0,6-6V182h18a6,6,0,0,0,4.24-1.76l10.45-10.44A77.59,77.59,0,0,0,160,174h.1A78,78,0,0,0,215.15,40.85ZM226,98.16c-1.12,35.16-30.67,63.8-65.88,63.84a65.93,65.93,0,0,1-24.51-4.67,6,6,0,0,0-6.64,1.26L117.51,170H96a6,6,0,0,0-6,6v18H72a6,6,0,0,0-6,6v18H40a2,2,0,0,1-2-2V187.31a2,2,0,0,1,.58-1.41l58.83-58.83a6,6,0,0,0,1.26-6.64A65.61,65.61,0,0,1,94,95.92C94,60.71,122.68,31.16,157.83,30A66,66,0,0,1,226,98.16ZM190,76a10,10,0,1,1-10-10A10,10,0,0,1,190,76Z"}))],["regular",x.createElement(x.Fragment,null,x.createElement("path",{d:"M216.57,39.43A80,80,0,0,0,83.91,120.78L28.69,176A15.86,15.86,0,0,0,24,187.31V216a16,16,0,0,0,16,16H72a8,8,0,0,0,8-8V208H96a8,8,0,0,0,8-8V184h16a8,8,0,0,0,5.66-2.34l9.56-9.57A79.73,79.73,0,0,0,160,176h.1A80,80,0,0,0,216.57,39.43ZM224,98.1c-1.09,34.09-29.75,61.86-63.89,61.9H160a63.7,63.7,0,0,1-23.65-4.51,8,8,0,0,0-8.84,1.68L116.69,168H96a8,8,0,0,0-8,8v16H72a8,8,0,0,0-8,8v16H40V187.31l58.83-58.82a8,8,0,0,0,1.68-8.84A63.72,63.72,0,0,1,96,95.92c0-34.14,27.81-62.8,61.9-63.89A64,64,0,0,1,224,98.1ZM192,76a12,12,0,1,1-12-12A12,12,0,0,1,192,76Z"}))],["thin",x.createElement(x.Fragment,null,x.createElement("path",{d:"M213.74,42.26A76,76,0,0,0,88.51,121.84l-57,57A11.93,11.93,0,0,0,28,187.31V216a12,12,0,0,0,12,12H72a4,4,0,0,0,4-4V204H96a4,4,0,0,0,4-4V180h20a4,4,0,0,0,2.83-1.17l11.33-11.34A75.72,75.72,0,0,0,160,172h.1A76,76,0,0,0,213.74,42.26Zm14.22,56c-1.15,36.22-31.6,65.72-67.87,65.77H160a67.52,67.52,0,0,1-25.21-4.83,4,4,0,0,0-4.45.83l-12,12H96a4,4,0,0,0-4,4v20H72a4,4,0,0,0-4,4v20H40a4,4,0,0,1-4-4V187.31a4.06,4.06,0,0,1,1.17-2.83L96,125.66a4,4,0,0,0,.83-4.45A67.51,67.51,0,0,1,92,95.91C92,59.64,121.55,29.19,157.77,28A68,68,0,0,1,228,98.23ZM188,76a8,8,0,1,1-8-8A8,8,0,0,1,188,76Z"}))]]),n6=new Map([["bold",x.createElement(x.Fragment,null,x.createElement("path",{d:"M117.18,188.74a12,12,0,0,1,0,17l-5.12,5.12A58.26,58.26,0,0,1,70.6,228h0A58.62,58.62,0,0,1,29.14,127.92L63.89,93.17a58.64,58.64,0,0,1,98.56,28.11,12,12,0,1,1-23.37,5.44,34.65,34.65,0,0,0-58.22-16.58L46.11,144.89A34.62,34.62,0,0,0,70.57,204h0a34.41,34.41,0,0,0,24.49-10.14l5.11-5.12A12,12,0,0,1,117.18,188.74ZM226.83,45.17a58.65,58.65,0,0,0-82.93,0l-5.11,5.11a12,12,0,0,0,17,17l5.12-5.12a34.63,34.63,0,1,1,49,49L175.1,145.86A34.39,34.39,0,0,1,150.61,156h0a34.63,34.63,0,0,1-33.69-26.72,12,12,0,0,0-23.38,5.44A58.64,58.64,0,0,0,150.56,180h.05a58.28,58.28,0,0,0,41.47-17.17l34.75-34.75a58.62,58.62,0,0,0,0-82.91Z"}))],["duotone",x.createElement(x.Fragment,null,x.createElement("path",{d:"M218.34,119.6,183.6,154.34a46.58,46.58,0,0,1-44.31,12.26c-.31.34-.62.67-.95,1L103.6,202.34A46.63,46.63,0,1,1,37.66,136.4L72.4,101.66A46.6,46.6,0,0,1,116.71,89.4c.31-.34.62-.67,1-1L152.4,53.66a46.63,46.63,0,0,1,65.94,65.94Z",opacity:"0.2"}),x.createElement("path",{d:"M240,88.23a54.43,54.43,0,0,1-16,37L189.25,160a54.27,54.27,0,0,1-38.63,16h-.05A54.63,54.63,0,0,1,96,119.84a8,8,0,0,1,16,.45A38.62,38.62,0,0,0,150.58,160h0a38.39,38.39,0,0,0,27.31-11.31l34.75-34.75a38.63,38.63,0,0,0-54.63-54.63l-11,11A8,8,0,0,1,135.7,59l11-11A54.65,54.65,0,0,1,224,48,54.86,54.86,0,0,1,240,88.23ZM109,185.66l-11,11A38.41,38.41,0,0,1,70.6,208h0a38.63,38.63,0,0,1-27.29-65.94L78,107.31A38.63,38.63,0,0,1,144,135.71a8,8,0,0,0,7.78,8.22H152a8,8,0,0,0,8-7.78A54.86,54.86,0,0,0,144,96a54.65,54.65,0,0,0-77.27,0L32,130.75A54.62,54.62,0,0,0,70.56,224h0a54.28,54.28,0,0,0,38.64-16l11-11A8,8,0,0,0,109,185.66Z"}))],["fill",x.createElement(x.Fragment,null,x.createElement("path",{d:"M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM115.7,192.49a43.31,43.31,0,0,1-55-66.43l25.37-25.37a43.35,43.35,0,0,1,61.25,0,42.9,42.9,0,0,1,9.95,15.43,8,8,0,1,1-15,5.6A27.33,27.33,0,0,0,97.37,112L72,137.37a27.32,27.32,0,0,0,34.68,41.91,8,8,0,1,1,9,13.21Zm79.61-62.55-25.37,25.37A43,43,0,0,1,139.32,168h0a43.35,43.35,0,0,1-40.53-28.12,8,8,0,1,1,15-5.6A27.35,27.35,0,0,0,139.28,152h0a27.14,27.14,0,0,0,19.32-8L184,118.63a27.32,27.32,0,0,0-34.68-41.91,8,8,0,1,1-9-13.21,43.32,43.32,0,0,1,55,66.43Z"}))],["light",x.createElement(x.Fragment,null,x.createElement("path",{d:"M238,88.18a52.42,52.42,0,0,1-15.4,35.66l-34.75,34.75A52.28,52.28,0,0,1,150.62,174h-.05A52.63,52.63,0,0,1,98,119.9a6,6,0,0,1,6-5.84h.17a6,6,0,0,1,5.83,6.16A40.62,40.62,0,0,0,150.58,162h0a40.4,40.4,0,0,0,28.73-11.9l34.75-34.74A40.63,40.63,0,0,0,156.63,57.9l-11,11a6,6,0,0,1-8.49-8.49l11-11a52.62,52.62,0,0,1,74.43,0A52.83,52.83,0,0,1,238,88.18Zm-127.62,98.9-11,11A40.36,40.36,0,0,1,70.6,210h0a40.63,40.63,0,0,1-28.7-69.36L76.62,105.9A40.63,40.63,0,0,1,146,135.77a6,6,0,0,0,5.83,6.16H152a6,6,0,0,0,6-5.84A52.63,52.63,0,0,0,68.14,97.42L33.38,132.16A52.63,52.63,0,0,0,70.56,222h0a52.26,52.26,0,0,0,37.22-15.42l11-11a6,6,0,1,0-8.49-8.48Z"}))],["regular",x.createElement(x.Fragment,null,x.createElement("path",{d:"M240,88.23a54.43,54.43,0,0,1-16,37L189.25,160a54.27,54.27,0,0,1-38.63,16h-.05A54.63,54.63,0,0,1,96,119.84a8,8,0,0,1,16,.45A38.62,38.62,0,0,0,150.58,160h0a38.39,38.39,0,0,0,27.31-11.31l34.75-34.75a38.63,38.63,0,0,0-54.63-54.63l-11,11A8,8,0,0,1,135.7,59l11-11A54.65,54.65,0,0,1,224,48,54.86,54.86,0,0,1,240,88.23ZM109,185.66l-11,11A38.41,38.41,0,0,1,70.6,208h0a38.63,38.63,0,0,1-27.29-65.94L78,107.31A38.63,38.63,0,0,1,144,135.71a8,8,0,0,0,16,.45A54.86,54.86,0,0,0,144,96a54.65,54.65,0,0,0-77.27,0L32,130.75A54.62,54.62,0,0,0,70.56,224h0a54.28,54.28,0,0,0,38.64-16l11-11A8,8,0,0,0,109,185.66Z"}))],["thin",x.createElement(x.Fragment,null,x.createElement("path",{d:"M236,88.12a50.44,50.44,0,0,1-14.81,34.31l-34.75,34.74A50.33,50.33,0,0,1,150.62,172h-.05A50.63,50.63,0,0,1,100,120a4,4,0,0,1,4-3.89h.11a4,4,0,0,1,3.89,4.11A42.64,42.64,0,0,0,150.58,164h0a42.32,42.32,0,0,0,30.14-12.49l34.75-34.74a42.63,42.63,0,1,0-60.29-60.28l-11,11a4,4,0,0,1-5.66-5.65l11-11A50.64,50.64,0,0,1,236,88.12ZM111.78,188.49l-11,11A42.33,42.33,0,0,1,70.6,212h0a42.63,42.63,0,0,1-30.11-72.77l34.75-34.74A42.63,42.63,0,0,1,148,135.82a4,4,0,0,0,8,.23A50.64,50.64,0,0,0,69.55,98.83L34.8,133.57A50.63,50.63,0,0,0,70.56,220h0a50.33,50.33,0,0,0,35.81-14.83l11-11a4,4,0,1,0-5.65-5.66Z"}))]]),r6=new Map([["bold",x.createElement(x.Fragment,null,x.createElement("path",{d:"M195.8,60.2a28,28,0,0,0-39.51-.09L144.68,72.28a12,12,0,1,1-17.36-16.56L139,43.43l.2-.2a52,52,0,0,1,73.54,73.54l-.2.2-12.29,11.71a12,12,0,0,1-16.56-17.36l12.17-11.61A28,28,0,0,0,195.8,60.2ZM111.32,183.72,99.71,195.89a28,28,0,0,1-39.6-39.6l12.17-11.61a12,12,0,0,0-16.56-17.36L43.43,139l-.2.2a52,52,0,0,0,73.54,73.54l.2-.2,11.71-12.29a12,12,0,1,0-17.36-16.56ZM216,148H192a12,12,0,0,0,0,24h24a12,12,0,0,0,0-24ZM40,108H64a12,12,0,0,0,0-24H40a12,12,0,0,0,0,24Zm120,72a12,12,0,0,0-12,12v24a12,12,0,0,0,24,0V192A12,12,0,0,0,160,180ZM96,76a12,12,0,0,0,12-12V40a12,12,0,0,0-24,0V64A12,12,0,0,0,96,76Z"}))],["duotone",x.createElement(x.Fragment,null,x.createElement("path",{d:"M204.28,108.28l-96,96a40,40,0,0,1-56.56-56.56l96-96a40,40,0,0,1,56.56,56.56Z",opacity:"0.2"}),x.createElement("path",{d:"M198.63,57.37a32,32,0,0,0-45.19-.06L141.79,69.52a8,8,0,0,1-11.58-11l11.72-12.29a1.59,1.59,0,0,1,.13-.13,48,48,0,0,1,67.88,67.88,1.59,1.59,0,0,1-.13.13l-12.29,11.72a8,8,0,0,1-11-11.58l12.21-11.65A32,32,0,0,0,198.63,57.37ZM114.21,186.48l-11.65,12.21a32,32,0,0,1-45.25-45.25l12.21-11.65a8,8,0,0,0-11-11.58L46.19,141.93a1.59,1.59,0,0,0-.13.13,48,48,0,0,0,67.88,67.88,1.59,1.59,0,0,0,.13-.13l11.72-12.29a8,8,0,1,0-11.58-11ZM216,152H192a8,8,0,0,0,0,16h24a8,8,0,0,0,0-16ZM40,104H64a8,8,0,0,0,0-16H40a8,8,0,0,0,0,16Zm120,80a8,8,0,0,0-8,8v24a8,8,0,0,0,16,0V192A8,8,0,0,0,160,184ZM96,72a8,8,0,0,0,8-8V40a8,8,0,0,0-16,0V64A8,8,0,0,0,96,72Z"}))],["fill",x.createElement(x.Fragment,null,x.createElement("path",{d:"M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM96,64a8,8,0,0,1,16,0V80a8,8,0,0,1-16,0ZM64,96H80a8,8,0,0,1,0,16H64a8,8,0,0,1,0-16Zm64.08,85.66-7.21,7.21a38,38,0,1,1-53.74-53.74l7.21-7.21a8,8,0,1,1,11.32,11.31l-7.22,7.21a22,22,0,0,0,31.12,31.12l7.21-7.22a8,8,0,1,1,11.31,11.32ZM160,192a8,8,0,0,1-16,0V176a8,8,0,0,1,16,0Zm32-32H176a8,8,0,0,1,0-16h16a8,8,0,0,1,0,16Zm-3.13-39.13-7.21,7.21a8,8,0,1,1-11.32-11.31l7.22-7.21a22,22,0,0,0-31.12-31.12l-7.21,7.22a8,8,0,1,1-11.31-11.32l7.21-7.21a38,38,0,1,1,53.74,53.74Z"}))],["light",x.createElement(x.Fragment,null,x.createElement("path",{d:"M200,56a34,34,0,0,0-48-.05L140.34,68.14a6,6,0,1,1-8.68-8.28l11.71-12.28.1-.11a46,46,0,0,1,65.06,65.06l-.11.1-12.28,11.71a6,6,0,1,1-8.28-8.68L200.09,104A34,34,0,0,0,200,56Zm-84.38,131.9L104,200.09A34,34,0,0,1,55.91,152l12.23-11.67a6,6,0,0,0-8.28-8.68L47.58,143.37l-.11.1a46,46,0,0,0,65.06,65.06l.1-.11,11.71-12.28a6,6,0,1,0-8.68-8.28ZM216,154H192a6,6,0,0,0,0,12h24a6,6,0,0,0,0-12ZM40,102H64a6,6,0,0,0,0-12H40a6,6,0,0,0,0,12Zm120,84a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V192A6,6,0,0,0,160,186ZM96,70a6,6,0,0,0,6-6V40a6,6,0,0,0-12,0V64A6,6,0,0,0,96,70Z"}))],["regular",x.createElement(x.Fragment,null,x.createElement("path",{d:"M198.63,57.37a32,32,0,0,0-45.19-.06L141.79,69.52a8,8,0,0,1-11.58-11l11.72-12.29a1.59,1.59,0,0,1,.13-.13,48,48,0,0,1,67.88,67.88,1.59,1.59,0,0,1-.13.13l-12.29,11.72a8,8,0,0,1-11-11.58l12.21-11.65A32,32,0,0,0,198.63,57.37ZM114.21,186.48l-11.65,12.21a32,32,0,0,1-45.25-45.25l12.21-11.65a8,8,0,0,0-11-11.58L46.19,141.93a1.59,1.59,0,0,0-.13.13,48,48,0,0,0,67.88,67.88,1.59,1.59,0,0,0,.13-.13l11.72-12.29a8,8,0,1,0-11.58-11ZM216,152H192a8,8,0,0,0,0,16h24a8,8,0,0,0,0-16ZM40,104H64a8,8,0,0,0,0-16H40a8,8,0,0,0,0,16Zm120,80a8,8,0,0,0-8,8v24a8,8,0,0,0,16,0V192A8,8,0,0,0,160,184ZM96,72a8,8,0,0,0,8-8V40a8,8,0,0,0-16,0V64A8,8,0,0,0,96,72Z"}))],["thin",x.createElement(x.Fragment,null,x.createElement("path",{d:"M201.46,54.54a36.06,36.06,0,0,0-50.92,0L138.89,66.76a4,4,0,0,1-5.78-5.52L144.82,49a44,44,0,1,1,62.29,62.15l-12.35,11.78a4,4,0,0,1-5.52-5.78l12.28-11.72A36,36,0,0,0,201.46,54.54Zm-84.35,134.7-11.65,12.22a36,36,0,0,1-51-50.85l12.28-11.72a4,4,0,0,0-5.52-5.78L48.89,144.89A44,44,0,1,0,111.18,207l11.71-12.28a4,4,0,1,0-5.78-5.52ZM216,156H192a4,4,0,0,0,0,8h24a4,4,0,0,0,0-8ZM40,100H64a4,4,0,0,0,0-8H40a4,4,0,0,0,0,8Zm120,88a4,4,0,0,0-4,4v24a4,4,0,0,0,8,0V192A4,4,0,0,0,160,188ZM96,68a4,4,0,0,0,4-4V40a4,4,0,0,0-8,0V64A4,4,0,0,0,96,68Z"}))]]),s6=new Map([["bold",x.createElement(x.Fragment,null,x.createElement("path",{d:"M208,28H48A20,20,0,0,0,28,48V208a20,20,0,0,0,20,20H208a20,20,0,0,0,20-20V48A20,20,0,0,0,208,28Zm-4,176H52V52H204ZM76,128a12,12,0,0,1,12-12h80a12,12,0,0,1,0,24H88A12,12,0,0,1,76,128Z"}))],["duotone",x.createElement(x.Fragment,null,x.createElement("path",{d:"M216,48V208a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V48a8,8,0,0,1,8-8H208A8,8,0,0,1,216,48Z",opacity:"0.2"}),x.createElement("path",{d:"M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32Zm0,176H48V48H208V208Zm-32-80a8,8,0,0,1-8,8H88a8,8,0,0,1,0-16h80A8,8,0,0,1,176,128Z"}))],["fill",x.createElement(x.Fragment,null,x.createElement("path",{d:"M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM168,136H88a8,8,0,0,1,0-16h80a8,8,0,0,1,0,16Z"}))],["light",x.createElement(x.Fragment,null,x.createElement("path",{d:"M208,34H48A14,14,0,0,0,34,48V208a14,14,0,0,0,14,14H208a14,14,0,0,0,14-14V48A14,14,0,0,0,208,34Zm2,174a2,2,0,0,1-2,2H48a2,2,0,0,1-2-2V48a2,2,0,0,1,2-2H208a2,2,0,0,1,2,2Zm-36-80a6,6,0,0,1-6,6H88a6,6,0,0,1,0-12h80A6,6,0,0,1,174,128Z"}))],["regular",x.createElement(x.Fragment,null,x.createElement("path",{d:"M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32Zm0,176H48V48H208V208Zm-32-80a8,8,0,0,1-8,8H88a8,8,0,0,1,0-16h80A8,8,0,0,1,176,128Z"}))],["thin",x.createElement(x.Fragment,null,x.createElement("path",{d:"M208,36H48A12,12,0,0,0,36,48V208a12,12,0,0,0,12,12H208a12,12,0,0,0,12-12V48A12,12,0,0,0,208,36Zm4,172a4,4,0,0,1-4,4H48a4,4,0,0,1-4-4V48a4,4,0,0,1,4-4H208a4,4,0,0,1,4,4Zm-40-80a4,4,0,0,1-4,4H88a4,4,0,0,1,0-8h80A4,4,0,0,1,172,128Z"}))]]),o6=new Map([["bold",x.createElement(x.Fragment,null,x.createElement("path",{d:"M225.6,62.64l-88-48.17a19.91,19.91,0,0,0-19.2,0l-88,48.17A20,20,0,0,0,20,80.19v95.62a20,20,0,0,0,10.4,17.55l88,48.17a19.89,19.89,0,0,0,19.2,0l88-48.17A20,20,0,0,0,236,175.81V80.19A20,20,0,0,0,225.6,62.64ZM128,36.57,200,76,178.57,87.73l-72-39.42Zm0,78.83L56,76,81.56,62l72,39.41ZM44,96.79l72,39.4v76.67L44,173.44Zm96,116.07V136.19l24-13.13V152a12,12,0,0,0,24,0V109.92l24-13.13v76.65Z"}))],["duotone",x.createElement(x.Fragment,null,x.createElement("path",{d:"M128,129.09V232a8,8,0,0,1-3.84-1l-88-48.18a8,8,0,0,1-4.16-7V80.18a8,8,0,0,1,.7-3.25Z",opacity:"0.2"}),x.createElement("path",{d:"M223.68,66.15,135.68,18a15.88,15.88,0,0,0-15.36,0l-88,48.17a16,16,0,0,0-8.32,14v95.64a16,16,0,0,0,8.32,14l88,48.17a15.88,15.88,0,0,0,15.36,0l88-48.17a16,16,0,0,0,8.32-14V80.18A16,16,0,0,0,223.68,66.15ZM128,32l80.34,44-29.77,16.3-80.35-44ZM128,120,47.66,76l33.9-18.56,80.34,44ZM40,90l80,43.78v85.79L40,175.82Zm176,85.78h0l-80,43.79V133.82l32-17.51V152a8,8,0,0,0,16,0V107.55L216,90v85.77Z"}))],["fill",x.createElement(x.Fragment,null,x.createElement("path",{d:"M223.68,66.15,135.68,18a15.88,15.88,0,0,0-15.36,0l-88,48.17a16,16,0,0,0-8.32,14v95.64a16,16,0,0,0,8.32,14l88,48.17a15.88,15.88,0,0,0,15.36,0l88-48.17a16,16,0,0,0,8.32-14V80.18A16,16,0,0,0,223.68,66.15ZM128,32l80.35,44L178.57,92.29l-80.35-44Zm0,88L47.65,76,81.56,57.43l80.35,44Zm88,55.85h0l-80,43.79V133.83l32-17.51V152a8,8,0,0,0,16,0V107.56l32-17.51v85.76Z"}))],["light",x.createElement(x.Fragment,null,x.createElement("path",{d:"M222.72,67.91l-88-48.18a13.9,13.9,0,0,0-13.44,0l-88,48.18A14,14,0,0,0,26,80.18v95.64a14,14,0,0,0,7.28,12.27l88,48.18a13.92,13.92,0,0,0,13.44,0l88-48.18A14,14,0,0,0,230,175.82V80.18A14,14,0,0,0,222.72,67.91ZM127,30.25a2,2,0,0,1,1.92,0L212.51,76,178.57,94.57,94.05,48.31ZM122,223,39,177.57a2,2,0,0,1-1-1.75V86.66l84,46ZM43.49,76,81.56,55.15l84.51,46.26L128,122.24ZM218,175.82a2,2,0,0,1-1,1.75h0L134,223V132.64l36-19.71V152a6,6,0,0,0,12,0V106.37l36-19.71Z"}))],["regular",x.createElement(x.Fragment,null,x.createElement("path",{d:"M223.68,66.15,135.68,18a15.88,15.88,0,0,0-15.36,0l-88,48.17a16,16,0,0,0-8.32,14v95.64a16,16,0,0,0,8.32,14l88,48.17a15.88,15.88,0,0,0,15.36,0l88-48.17a16,16,0,0,0,8.32-14V80.18A16,16,0,0,0,223.68,66.15ZM128,32l80.34,44-29.77,16.3-80.35-44ZM128,120,47.66,76l33.9-18.56,80.34,44ZM40,90l80,43.78v85.79L40,175.82Zm176,85.78h0l-80,43.79V133.82l32-17.51V152a8,8,0,0,0,16,0V107.55L216,90v85.77Z"}))],["thin",x.createElement(x.Fragment,null,x.createElement("path",{d:"M221.76,69.66l-88-48.18a12,12,0,0,0-11.52,0l-88,48.18A12,12,0,0,0,28,80.18v95.64a12,12,0,0,0,6.24,10.52l88,48.18a11.95,11.95,0,0,0,11.52,0l88-48.18A12,12,0,0,0,228,175.82V80.18A12,12,0,0,0,221.76,69.66ZM126.08,28.5a3.94,3.94,0,0,1,3.84,0L216.67,76,178.5,96.89a4,4,0,0,0-.58-.4l-88-48.18Zm1.92,96L39.33,76,81.56,52.87l88.67,48.54Zm-89.92,54.8a4,4,0,0,1-2.08-3.5V83.29l88,48.16v94.91Zm179.84,0h0l-85.92,47V131.45l40-21.89V152a4,4,0,0,0,8,0V105.18l40-21.89v92.53A4,4,0,0,1,217.92,179.32Z"}))]]),a6=new Map([["bold",x.createElement(x.Fragment,null,x.createElement("path",{d:"M230.14,70.54,185.46,25.85a20,20,0,0,0-28.29,0L33.86,149.17A19.85,19.85,0,0,0,28,163.31V208a20,20,0,0,0,20,20H92.69a19.86,19.86,0,0,0,14.14-5.86L230.14,98.82a20,20,0,0,0,0-28.28ZM93,180l71-71,11,11-71,71ZM76,163,65,152l71-71,11,11ZM52,173l15.51,15.51h0L83,204H52ZM192,103,153,64l18.34-18.34,39,39Z"}))],["duotone",x.createElement(x.Fragment,null,x.createElement("path",{d:"M221.66,90.34,192,120,136,64l29.66-29.66a8,8,0,0,1,11.31,0L221.66,79A8,8,0,0,1,221.66,90.34Z",opacity:"0.2"}),x.createElement("path",{d:"M227.31,73.37,182.63,28.68a16,16,0,0,0-22.63,0L36.69,152A15.86,15.86,0,0,0,32,163.31V208a16,16,0,0,0,16,16H92.69A15.86,15.86,0,0,0,104,219.31L227.31,96a16,16,0,0,0,0-22.63ZM51.31,160,136,75.31,152.69,92,68,176.68ZM48,179.31,76.69,208H48Zm48,25.38L79.31,188,164,103.31,180.69,120Zm96-96L147.31,64l24-24L216,84.68Z"}))],["fill",x.createElement(x.Fragment,null,x.createElement("path",{d:"M227.31,73.37,182.63,28.68a16,16,0,0,0-22.63,0L36.69,152A15.86,15.86,0,0,0,32,163.31V208a16,16,0,0,0,16,16H92.69A15.86,15.86,0,0,0,104,219.31L227.31,96a16,16,0,0,0,0-22.63ZM51.31,160l90.35-90.35,16.68,16.69L68,176.68ZM48,179.31,76.69,208H48Zm48,25.38L79.31,188l90.35-90.35h0l16.68,16.69Z"}))],["light",x.createElement(x.Fragment,null,x.createElement("path",{d:"M225.9,74.78,181.21,30.09a14,14,0,0,0-19.8,0L38.1,153.41a13.94,13.94,0,0,0-4.1,9.9V208a14,14,0,0,0,14,14H92.69a13.94,13.94,0,0,0,9.9-4.1L225.9,94.58a14,14,0,0,0,0-19.8ZM48.49,160,136,72.48,155.51,92,68,179.51ZM46,208V174.48L81.51,210H48A2,2,0,0,1,46,208Zm50-.49L76.49,188,164,100.48,183.51,120ZM217.41,86.1,192,111.51,144.49,64,169.9,38.58a2,2,0,0,1,2.83,0l44.68,44.69a2,2,0,0,1,0,2.83Z"}))],["regular",x.createElement(x.Fragment,null,x.createElement("path",{d:"M227.31,73.37,182.63,28.68a16,16,0,0,0-22.63,0L36.69,152A15.86,15.86,0,0,0,32,163.31V208a16,16,0,0,0,16,16H92.69A15.86,15.86,0,0,0,104,219.31L227.31,96a16,16,0,0,0,0-22.63ZM51.31,160,136,75.31,152.69,92,68,176.68ZM48,179.31,76.69,208H48Zm48,25.38L79.31,188,164,103.31,180.69,120Zm96-96L147.31,64l24-24L216,84.68Z"}))],["thin",x.createElement(x.Fragment,null,x.createElement("path",{d:"M224.49,76.2,179.8,31.51a12,12,0,0,0-17,0L39.52,154.83A11.9,11.9,0,0,0,36,163.31V208a12,12,0,0,0,12,12H92.69a12,12,0,0,0,8.48-3.51L224.48,93.17a12,12,0,0,0,0-17ZM45.66,160,136,69.65,158.34,92,68,182.34ZM44,208V169.66l21.17,21.17h0L86.34,212H48A4,4,0,0,1,44,208Zm52,2.34L73.66,188,164,97.65,186.34,120ZM218.83,87.51,192,114.34,141.66,64l26.82-26.83a4,4,0,0,1,5.66,0l44.69,44.68a4,4,0,0,1,0,5.66Z"}))]]),i6=new Map([["bold",x.createElement(x.Fragment,null,x.createElement("path",{d:"M128,20A108,108,0,1,0,236,128,108.12,108.12,0,0,0,128,20Zm0,192a84,84,0,1,1,84-84A84.09,84.09,0,0,1,128,212Zm52-84a12,12,0,0,1-12,12H140v28a12,12,0,0,1-24,0V140H88a12,12,0,0,1,0-24h28V88a12,12,0,0,1,24,0v28h28A12,12,0,0,1,180,128Z"}))],["duotone",x.createElement(x.Fragment,null,x.createElement("path",{d:"M224,128a96,96,0,1,1-96-96A96,96,0,0,1,224,128Z",opacity:"0.2"}),x.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm48-88a8,8,0,0,1-8,8H136v32a8,8,0,0,1-16,0V136H88a8,8,0,0,1,0-16h32V88a8,8,0,0,1,16,0v32h32A8,8,0,0,1,176,128Z"}))],["fill",x.createElement(x.Fragment,null,x.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.13,104.13,0,0,0,128,24Zm40,112H136v32a8,8,0,0,1-16,0V136H88a8,8,0,0,1,0-16h32V88a8,8,0,0,1,16,0v32h32a8,8,0,0,1,0,16Z"}))],["light",x.createElement(x.Fragment,null,x.createElement("path",{d:"M128,26A102,102,0,1,0,230,128,102.12,102.12,0,0,0,128,26Zm0,192a90,90,0,1,1,90-90A90.1,90.1,0,0,1,128,218Zm46-90a6,6,0,0,1-6,6H134v34a6,6,0,0,1-12,0V134H88a6,6,0,0,1,0-12h34V88a6,6,0,0,1,12,0v34h34A6,6,0,0,1,174,128Z"}))],["regular",x.createElement(x.Fragment,null,x.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm48-88a8,8,0,0,1-8,8H136v32a8,8,0,0,1-16,0V136H88a8,8,0,0,1,0-16h32V88a8,8,0,0,1,16,0v32h32A8,8,0,0,1,176,128Z"}))],["thin",x.createElement(x.Fragment,null,x.createElement("path",{d:"M128,28A100,100,0,1,0,228,128,100.11,100.11,0,0,0,128,28Zm0,192a92,92,0,1,1,92-92A92.1,92.1,0,0,1,128,220Zm44-92a4,4,0,0,1-4,4H132v36a4,4,0,0,1-8,0V132H88a4,4,0,0,1,0-8h36V88a4,4,0,0,1,8,0v36h36A4,4,0,0,1,172,128Z"}))]]),l6=new Map([["bold",x.createElement(x.Fragment,null,x.createElement("path",{d:"M124,216a12,12,0,0,1-12,12H48a12,12,0,0,1-12-12V40A12,12,0,0,1,48,28h64a12,12,0,0,1,0,24H60V204h52A12,12,0,0,1,124,216Zm108.49-96.49-40-40a12,12,0,0,0-17,17L195,116H112a12,12,0,0,0,0,24h83l-19.52,19.51a12,12,0,0,0,17,17l40-40A12,12,0,0,0,232.49,119.51Z"}))],["duotone",x.createElement(x.Fragment,null,x.createElement("path",{d:"M224,56V200a16,16,0,0,1-16,16H48V40H208A16,16,0,0,1,224,56Z",opacity:"0.2"}),x.createElement("path",{d:"M120,216a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V40a8,8,0,0,1,8-8h64a8,8,0,0,1,0,16H56V208h56A8,8,0,0,1,120,216Zm109.66-93.66-40-40a8,8,0,0,0-11.32,11.32L204.69,120H112a8,8,0,0,0,0,16h92.69l-26.35,26.34a8,8,0,0,0,11.32,11.32l40-40A8,8,0,0,0,229.66,122.34Z"}))],["fill",x.createElement(x.Fragment,null,x.createElement("path",{d:"M120,216a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V40a8,8,0,0,1,8-8h64a8,8,0,0,1,0,16H56V208h56A8,8,0,0,1,120,216Zm109.66-93.66-40-40A8,8,0,0,0,176,88v32H112a8,8,0,0,0,0,16h64v32a8,8,0,0,0,13.66,5.66l40-40A8,8,0,0,0,229.66,122.34Z"}))],["light",x.createElement(x.Fragment,null,x.createElement("path",{d:"M118,216a6,6,0,0,1-6,6H48a6,6,0,0,1-6-6V40a6,6,0,0,1,6-6h64a6,6,0,0,1,0,12H54V210h58A6,6,0,0,1,118,216Zm110.24-92.24-40-40a6,6,0,0,0-8.48,8.48L209.51,122H112a6,6,0,0,0,0,12h97.51l-29.75,29.76a6,6,0,1,0,8.48,8.48l40-40A6,6,0,0,0,228.24,123.76Z"}))],["regular",x.createElement(x.Fragment,null,x.createElement("path",{d:"M120,216a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V40a8,8,0,0,1,8-8h64a8,8,0,0,1,0,16H56V208h56A8,8,0,0,1,120,216Zm109.66-93.66-40-40a8,8,0,0,0-11.32,11.32L204.69,120H112a8,8,0,0,0,0,16h92.69l-26.35,26.34a8,8,0,0,0,11.32,11.32l40-40A8,8,0,0,0,229.66,122.34Z"}))],["thin",x.createElement(x.Fragment,null,x.createElement("path",{d:"M116,216a4,4,0,0,1-4,4H48a4,4,0,0,1-4-4V40a4,4,0,0,1,4-4h64a4,4,0,0,1,0,8H52V212h60A4,4,0,0,1,116,216Zm110.83-90.83-40-40a4,4,0,0,0-5.66,5.66L214.34,124H112a4,4,0,0,0,0,8H214.34l-33.17,33.17a4,4,0,0,0,5.66,5.66l40-40A4,4,0,0,0,226.83,125.17Z"}))]]),c6=new Map([["bold",x.createElement(x.Fragment,null,x.createElement("path",{d:"M90.86,50.89a12,12,0,0,0-21.72,0l-64,136a12,12,0,0,0,21.71,10.22L42.44,164h75.12l15.58,33.11a12,12,0,0,0,21.72-10.22ZM53.74,140,80,84.18,106.27,140ZM200,84c-13.85,0-24.77,3.86-32.45,11.48a12,12,0,1,0,16.9,17c3-3,8.26-4.52,15.55-4.52,11,0,20,7.18,20,16v4.39A47.28,47.28,0,0,0,200,124c-24.26,0-44,17.94-44,40s19.74,40,44,40a47.18,47.18,0,0,0,22-5.38A12,12,0,0,0,244,192V124C244,101.94,224.26,84,200,84Zm0,96c-11,0-20-7.18-20-16s9-16,20-16,20,7.18,20,16S211,180,200,180Z"}))],["duotone",x.createElement(x.Fragment,null,x.createElement("path",{d:"M232,164c0,15.46-14.33,28-32,28s-32-12.54-32-28,14.33-28,32-28S232,148.54,232,164ZM34.82,152h90.36L80,56Z",opacity:"0.2"}),x.createElement("path",{d:"M87.24,52.59a8,8,0,0,0-14.48,0l-64,136a8,8,0,1,0,14.48,6.81L39.9,160h80.2l16.66,35.4a8,8,0,1,0,14.48-6.81ZM47.43,144,80,74.79,112.57,144ZM200,96c-12.76,0-22.73,3.47-29.63,10.32a8,8,0,0,0,11.26,11.36c3.8-3.77,10-5.68,18.37-5.68,13.23,0,24,9,24,20v3.22A42.76,42.76,0,0,0,200,128c-22.06,0-40,16.15-40,36s17.94,36,40,36a42.73,42.73,0,0,0,24-7.25,8,8,0,0,0,16-.75V132C240,112.15,222.06,96,200,96Zm0,88c-13.23,0-24-9-24-20s10.77-20,24-20,24,9,24,20S213.23,184,200,184Z"}))],["fill",x.createElement(x.Fragment,null,x.createElement("path",{d:"M200,156c0,6.5-7.33,12-16,12s-16-5.5-16-12,7.33-12,16-12S200,149.5,200,156ZM232,56V200a16,16,0,0,1-16,16H40a16,16,0,0,1-16-16V56A16,16,0,0,1,40,40H216A16,16,0,0,1,232,56ZM143.37,172.88l-44-104a8,8,0,0,0-14.74,0l-44,104a8,8,0,0,0,14.74,6.24L66.84,152h50.32l11.47,27.12a8,8,0,0,0,14.74-6.24ZM216,124c0-15.44-14.36-28-32-28a34.86,34.86,0,0,0-20.78,6.68,8,8,0,0,0,9.56,12.83A18.84,18.84,0,0,1,184,112c8.56,0,15.8,5.36,16,11.76v8A35.24,35.24,0,0,0,184,128c-17.64,0-32,12.56-32,28s14.36,28,32,28a35.13,35.13,0,0,0,16.93-4.26A8,8,0,0,0,216,176ZM73.61,136h36.78L92,92.53Z"}))],["light",x.createElement(x.Fragment,null,x.createElement("path",{d:"M85.43,53.45a6,6,0,0,0-10.86,0l-64,136a6,6,0,1,0,10.86,5.11L38.63,158h82.74l17.2,36.55a6,6,0,1,0,10.86-5.11ZM44.28,146,80,70.09,115.72,146ZM200,98c-12.21,0-21.71,3.28-28.23,9.74a6,6,0,0,0,8.46,8.52c4.18-4.15,10.84-6.26,19.77-6.26,14.34,0,26,9.87,26,22v7.24A40.36,40.36,0,0,0,200,130c-20.95,0-38,15.25-38,34s17.05,34,38,34a40.36,40.36,0,0,0,26-9.24V192a6,6,0,0,0,12,0V132C238,113.25,221,98,200,98Zm0,88c-14.34,0-26-9.87-26-22s11.66-22,26-22,26,9.87,26,22S214.34,186,200,186Z"}))],["regular",x.createElement(x.Fragment,null,x.createElement("path",{d:"M87.24,52.59a8,8,0,0,0-14.48,0l-64,136a8,8,0,1,0,14.48,6.81L39.9,160h80.2l16.66,35.4a8,8,0,1,0,14.48-6.81ZM47.43,144,80,74.79,112.57,144ZM200,96c-12.76,0-22.73,3.47-29.63,10.32a8,8,0,0,0,11.26,11.36c3.8-3.77,10-5.68,18.37-5.68,13.23,0,24,9,24,20v3.22A42.76,42.76,0,0,0,200,128c-22.06,0-40,16.15-40,36s17.94,36,40,36a42.73,42.73,0,0,0,24-7.25,8,8,0,0,0,16-.75V132C240,112.15,222.06,96,200,96Zm0,88c-13.23,0-24-9-24-20s10.77-20,24-20,24,9,24,20S213.23,184,200,184Z"}))],["thin",x.createElement(x.Fragment,null,x.createElement("path",{d:"M83.62,54.3a4,4,0,0,0-7.24,0l-64,136a4,4,0,0,0,7.24,3.4L37.36,156h85.28l17.74,37.7a4,4,0,1,0,7.24-3.4ZM41.13,148,80,65.39,118.87,148ZM200,100c-11.67,0-20.69,3.08-26.82,9.16a4,4,0,1,0,5.64,5.68c4.57-4.54,11.7-6.84,21.18-6.84,15.44,0,28,10.77,28,24v11.92A37.78,37.78,0,0,0,200,132c-19.85,0-36,14.35-36,32s16.15,32,36,32a37.78,37.78,0,0,0,28-11.92V192a4,4,0,0,0,8,0V132C236,114.36,219.85,100,200,100Zm0,88c-15.44,0-28-10.77-28-24s12.56-24,28-24,28,10.77,28,24S215.44,188,200,188Z"}))]]),d6=new Map([["bold",x.createElement(x.Fragment,null,x.createElement("path",{d:"M128,20A108,108,0,1,0,236,128,108.12,108.12,0,0,0,128,20ZM79.57,196.57a60,60,0,0,1,96.86,0,83.72,83.72,0,0,1-96.86,0ZM100,120a28,28,0,1,1,28,28A28,28,0,0,1,100,120ZM194,179.94a83.48,83.48,0,0,0-29-23.42,52,52,0,1,0-74,0,83.48,83.48,0,0,0-29,23.42,84,84,0,1,1,131.9,0Z"}))],["duotone",x.createElement(x.Fragment,null,x.createElement("path",{d:"M224,128a95.76,95.76,0,0,1-31.8,71.37A72,72,0,0,0,128,160a40,40,0,1,0-40-40,40,40,0,0,0,40,40,72,72,0,0,0-64.2,39.37h0A96,96,0,1,1,224,128Z",opacity:"0.2"}),x.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24ZM74.08,197.5a64,64,0,0,1,107.84,0,87.83,87.83,0,0,1-107.84,0ZM96,120a32,32,0,1,1,32,32A32,32,0,0,1,96,120Zm97.76,66.41a79.66,79.66,0,0,0-36.06-28.75,48,48,0,1,0-59.4,0,79.66,79.66,0,0,0-36.06,28.75,88,88,0,1,1,131.52,0Z"}))],["fill",x.createElement(x.Fragment,null,x.createElement("path",{d:"M172,120a44,44,0,1,1-44-44A44.05,44.05,0,0,1,172,120Zm60,8A104,104,0,1,1,128,24,104.11,104.11,0,0,1,232,128Zm-16,0a88.09,88.09,0,0,0-91.47-87.93C77.43,41.89,39.87,81.12,40,128.25a87.65,87.65,0,0,0,22.24,58.16A79.71,79.71,0,0,1,84,165.1a4,4,0,0,1,4.83.32,59.83,59.83,0,0,0,78.28,0,4,4,0,0,1,4.83-.32,79.71,79.71,0,0,1,21.79,21.31A87.62,87.62,0,0,0,216,128Z"}))],["light",x.createElement(x.Fragment,null,x.createElement("path",{d:"M128,26A102,102,0,1,0,230,128,102.12,102.12,0,0,0,128,26ZM71.44,198a66,66,0,0,1,113.12,0,89.8,89.8,0,0,1-113.12,0ZM94,120a34,34,0,1,1,34,34A34,34,0,0,1,94,120Zm99.51,69.64a77.53,77.53,0,0,0-40-31.38,46,46,0,1,0-51,0,77.53,77.53,0,0,0-40,31.38,90,90,0,1,1,131,0Z"}))],["regular",x.createElement(x.Fragment,null,x.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24ZM74.08,197.5a64,64,0,0,1,107.84,0,87.83,87.83,0,0,1-107.84,0ZM96,120a32,32,0,1,1,32,32A32,32,0,0,1,96,120Zm97.76,66.41a79.66,79.66,0,0,0-36.06-28.75,48,48,0,1,0-59.4,0,79.66,79.66,0,0,0-36.06,28.75,88,88,0,1,1,131.52,0Z"}))],["thin",x.createElement(x.Fragment,null,x.createElement("path",{d:"M128,28A100,100,0,1,0,228,128,100.11,100.11,0,0,0,128,28ZM68.87,198.42a68,68,0,0,1,118.26,0,91.8,91.8,0,0,1-118.26,0Zm124.3-5.55a75.61,75.61,0,0,0-44.51-34,44,44,0,1,0-41.32,0,75.61,75.61,0,0,0-44.51,34,92,92,0,1,1,130.34,0ZM128,156a36,36,0,1,1,36-36A36,36,0,0,1,128,156Z"}))]]),u6=new Map([["bold",x.createElement(x.Fragment,null,x.createElement("path",{d:"M216,36H40A20,20,0,0,0,20,56V160a20,20,0,0,0,20,20H216a20,20,0,0,0,20-20V56A20,20,0,0,0,216,36Zm-4,120H44V60H212Zm24,52a12,12,0,0,1-12,12H32a12,12,0,0,1,0-24H224A12,12,0,0,1,236,208ZM104,128V88a12,12,0,0,1,18.36-10.18l32,20a12,12,0,0,1,0,20.36l-32,20A12,12,0,0,1,104,128Z"}))],["duotone",x.createElement(x.Fragment,null,x.createElement("path",{d:"M216,48H40a8,8,0,0,0-8,8V168a8,8,0,0,0,8,8H216a8,8,0,0,0,8-8V56A8,8,0,0,0,216,48ZM112,144V80l48,32Z",opacity:"0.2"}),x.createElement("path",{d:"M164.44,105.34l-48-32A8,8,0,0,0,104,80v64a8,8,0,0,0,12.44,6.66l48-32a8,8,0,0,0,0-13.32ZM120,129.05V95l25.58,17ZM216,40H40A16,16,0,0,0,24,56V168a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A16,16,0,0,0,216,40Zm0,128H40V56H216V168Zm16,40a8,8,0,0,1-8,8H32a8,8,0,0,1,0-16H224A8,8,0,0,1,232,208Z"}))],["fill",x.createElement(x.Fragment,null,x.createElement("path",{d:"M232,208a8,8,0,0,1-8,8H32a8,8,0,0,1,0-16H224A8,8,0,0,1,232,208Zm0-152V168a16,16,0,0,1-16,16H40a16,16,0,0,1-16-16V56A16,16,0,0,1,40,40H216A16,16,0,0,1,232,56Zm-68,56a8,8,0,0,0-3.41-6.55l-40-28A8,8,0,0,0,108,84v56a8,8,0,0,0,12.59,6.55l40-28A8,8,0,0,0,164,112Z"}))],["light",x.createElement(x.Fragment,null,x.createElement("path",{d:"M163.33,107l-48-32A6,6,0,0,0,106,80v64a6,6,0,0,0,9.33,5l48-32a6,6,0,0,0,0-10ZM118,132.79V91.21L149.18,112ZM216,42H40A14,14,0,0,0,26,56V168a14,14,0,0,0,14,14H216a14,14,0,0,0,14-14V56A14,14,0,0,0,216,42Zm2,126a2,2,0,0,1-2,2H40a2,2,0,0,1-2-2V56a2,2,0,0,1,2-2H216a2,2,0,0,1,2,2Zm12,40a6,6,0,0,1-6,6H32a6,6,0,0,1,0-12H224A6,6,0,0,1,230,208Z"}))],["regular",x.createElement(x.Fragment,null,x.createElement("path",{d:"M164.44,105.34l-48-32A8,8,0,0,0,104,80v64a8,8,0,0,0,12.44,6.66l48-32a8,8,0,0,0,0-13.32ZM120,129.05V95l25.58,17ZM216,40H40A16,16,0,0,0,24,56V168a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A16,16,0,0,0,216,40Zm0,128H40V56H216V168Zm16,40a8,8,0,0,1-8,8H32a8,8,0,0,1,0-16H224A8,8,0,0,1,232,208Z"}))],["thin",x.createElement(x.Fragment,null,x.createElement("path",{d:"M162.22,108.67l-48-32A4,4,0,0,0,108,80v64a4,4,0,0,0,2.11,3.53,4,4,0,0,0,4.11-.2l48-32a4,4,0,0,0,0-6.66ZM116,136.53V87.47L152.79,112ZM216,44H40A12,12,0,0,0,28,56V168a12,12,0,0,0,12,12H216a12,12,0,0,0,12-12V56A12,12,0,0,0,216,44Zm4,124a4,4,0,0,1-4,4H40a4,4,0,0,1-4-4V56a4,4,0,0,1,4-4H216a4,4,0,0,1,4,4Zm8,40a4,4,0,0,1-4,4H32a4,4,0,0,1,0-8H224A4,4,0,0,1,228,208Z"}))]]);var f6=Object.defineProperty,m6=Object.defineProperties,p6=Object.getOwnPropertyDescriptors,Jd=Object.getOwnPropertySymbols,h6=Object.prototype.hasOwnProperty,g6=Object.prototype.propertyIsEnumerable,Qd=(e,t,n)=>t in e?f6(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,x6=(e,t)=>{for(var n in t||(t={}))h6.call(t,n)&&Qd(e,n,t[n]);if(Jd)for(var n of Jd(t))g6.call(t,n)&&Qd(e,n,t[n]);return e},y6=(e,t)=>m6(e,p6(t));const dp=y.forwardRef((e,t)=>x.createElement(Ce,y6(x6({ref:t},e),{weights:Rb})));dp.displayName="ArrowDown";var v6=Object.defineProperty,b6=Object.defineProperties,w6=Object.getOwnPropertyDescriptors,eu=Object.getOwnPropertySymbols,j6=Object.prototype.hasOwnProperty,N6=Object.prototype.propertyIsEnumerable,tu=(e,t,n)=>t in e?v6(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,E6=(e,t)=>{for(var n in t||(t={}))j6.call(t,n)&&tu(e,n,t[n]);if(eu)for(var n of eu(t))N6.call(t,n)&&tu(e,n,t[n]);return e},S6=(e,t)=>b6(e,w6(t));const up=y.forwardRef((e,t)=>x.createElement(Ce,S6(E6({ref:t},e),{weights:Vb})));up.displayName="ArrowFatLineRight";var C6=Object.defineProperty,I6=Object.defineProperties,A6=Object.getOwnPropertyDescriptors,nu=Object.getOwnPropertySymbols,D6=Object.prototype.hasOwnProperty,M6=Object.prototype.propertyIsEnumerable,ru=(e,t,n)=>t in e?C6(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,k6=(e,t)=>{for(var n in t||(t={}))D6.call(t,n)&&ru(e,n,t[n]);if(nu)for(var n of nu(t))M6.call(t,n)&&ru(e,n,t[n]);return e},O6=(e,t)=>I6(e,A6(t));const Va=y.forwardRef((e,t)=>x.createElement(Ce,O6(k6({ref:t},e),{weights:Bb})));Va.displayName="ArrowRight";var T6=Object.defineProperty,F6=Object.defineProperties,_6=Object.getOwnPropertyDescriptors,su=Object.getOwnPropertySymbols,P6=Object.prototype.hasOwnProperty,L6=Object.prototype.propertyIsEnumerable,ou=(e,t,n)=>t in e?T6(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,$6=(e,t)=>{for(var n in t||(t={}))P6.call(t,n)&&ou(e,n,t[n]);if(su)for(var n of su(t))L6.call(t,n)&&ou(e,n,t[n]);return e},R6=(e,t)=>F6(e,_6(t));const fp=y.forwardRef((e,t)=>x.createElement(Ce,R6($6({ref:t},e),{weights:zb})));fp.displayName="Broom";var V6=Object.defineProperty,B6=Object.defineProperties,z6=Object.getOwnPropertyDescriptors,au=Object.getOwnPropertySymbols,H6=Object.prototype.hasOwnProperty,Z6=Object.prototype.propertyIsEnumerable,iu=(e,t,n)=>t in e?V6(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,U6=(e,t)=>{for(var n in t||(t={}))H6.call(t,n)&&iu(e,n,t[n]);if(au)for(var n of au(t))Z6.call(t,n)&&iu(e,n,t[n]);return e},W6=(e,t)=>B6(e,z6(t));const mp=y.forwardRef((e,t)=>x.createElement(Ce,W6(U6({ref:t},e),{weights:Hb})));mp.displayName="CaretLeft";var G6=Object.defineProperty,q6=Object.defineProperties,K6=Object.getOwnPropertyDescriptors,lu=Object.getOwnPropertySymbols,Y6=Object.prototype.hasOwnProperty,X6=Object.prototype.propertyIsEnumerable,cu=(e,t,n)=>t in e?G6(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,J6=(e,t)=>{for(var n in t||(t={}))Y6.call(t,n)&&cu(e,n,t[n]);if(lu)for(var n of lu(t))X6.call(t,n)&&cu(e,n,t[n]);return e},Q6=(e,t)=>q6(e,K6(t));const pp=y.forwardRef((e,t)=>x.createElement(Ce,Q6(J6({ref:t},e),{weights:Zb})));pp.displayName="CheckSquare";var e4=Object.defineProperty,t4=Object.defineProperties,n4=Object.getOwnPropertyDescriptors,du=Object.getOwnPropertySymbols,r4=Object.prototype.hasOwnProperty,s4=Object.prototype.propertyIsEnumerable,uu=(e,t,n)=>t in e?e4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,o4=(e,t)=>{for(var n in t||(t={}))r4.call(t,n)&&uu(e,n,t[n]);if(du)for(var n of du(t))s4.call(t,n)&&uu(e,n,t[n]);return e},a4=(e,t)=>t4(e,n4(t));const hp=y.forwardRef((e,t)=>x.createElement(Ce,a4(o4({ref:t},e),{weights:Ub})));hp.displayName="Checks";var i4=Object.defineProperty,l4=Object.defineProperties,c4=Object.getOwnPropertyDescriptors,fu=Object.getOwnPropertySymbols,d4=Object.prototype.hasOwnProperty,u4=Object.prototype.propertyIsEnumerable,mu=(e,t,n)=>t in e?i4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,f4=(e,t)=>{for(var n in t||(t={}))d4.call(t,n)&&mu(e,n,t[n]);if(fu)for(var n of fu(t))u4.call(t,n)&&mu(e,n,t[n]);return e},m4=(e,t)=>l4(e,c4(t));const gp=y.forwardRef((e,t)=>x.createElement(Ce,m4(f4({ref:t},e),{weights:Wb})));gp.displayName="CloudArrowDown";var p4=Object.defineProperty,h4=Object.defineProperties,g4=Object.getOwnPropertyDescriptors,pu=Object.getOwnPropertySymbols,x4=Object.prototype.hasOwnProperty,y4=Object.prototype.propertyIsEnumerable,hu=(e,t,n)=>t in e?p4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,v4=(e,t)=>{for(var n in t||(t={}))x4.call(t,n)&&hu(e,n,t[n]);if(pu)for(var n of pu(t))y4.call(t,n)&&hu(e,n,t[n]);return e},b4=(e,t)=>h4(e,g4(t));const xp=y.forwardRef((e,t)=>x.createElement(Ce,b4(v4({ref:t},e),{weights:Gb})));xp.displayName="Copy";var w4=Object.defineProperty,j4=Object.defineProperties,N4=Object.getOwnPropertyDescriptors,gu=Object.getOwnPropertySymbols,E4=Object.prototype.hasOwnProperty,S4=Object.prototype.propertyIsEnumerable,xu=(e,t,n)=>t in e?w4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,C4=(e,t)=>{for(var n in t||(t={}))E4.call(t,n)&&xu(e,n,t[n]);if(gu)for(var n of gu(t))S4.call(t,n)&&xu(e,n,t[n]);return e},I4=(e,t)=>j4(e,N4(t));const yp=y.forwardRef((e,t)=>x.createElement(Ce,I4(C4({ref:t},e),{weights:qb})));yp.displayName="DotsSixVertical";var A4=Object.defineProperty,D4=Object.defineProperties,M4=Object.getOwnPropertyDescriptors,yu=Object.getOwnPropertySymbols,k4=Object.prototype.hasOwnProperty,O4=Object.prototype.propertyIsEnumerable,vu=(e,t,n)=>t in e?A4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,T4=(e,t)=>{for(var n in t||(t={}))k4.call(t,n)&&vu(e,n,t[n]);if(yu)for(var n of yu(t))O4.call(t,n)&&vu(e,n,t[n]);return e},F4=(e,t)=>D4(e,M4(t));const es=y.forwardRef((e,t)=>x.createElement(Ce,F4(T4({ref:t},e),{weights:Kb})));es.displayName="DownloadSimple";var _4=Object.defineProperty,P4=Object.defineProperties,L4=Object.getOwnPropertyDescriptors,bu=Object.getOwnPropertySymbols,$4=Object.prototype.hasOwnProperty,R4=Object.prototype.propertyIsEnumerable,wu=(e,t,n)=>t in e?_4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,V4=(e,t)=>{for(var n in t||(t={}))$4.call(t,n)&&wu(e,n,t[n]);if(bu)for(var n of bu(t))R4.call(t,n)&&wu(e,n,t[n]);return e},B4=(e,t)=>P4(e,L4(t));const Ba=y.forwardRef((e,t)=>x.createElement(Ce,B4(V4({ref:t},e),{weights:Yb})));Ba.displayName="FileArrowDown";var z4=Object.defineProperty,H4=Object.defineProperties,Z4=Object.getOwnPropertyDescriptors,ju=Object.getOwnPropertySymbols,U4=Object.prototype.hasOwnProperty,W4=Object.prototype.propertyIsEnumerable,Nu=(e,t,n)=>t in e?z4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,G4=(e,t)=>{for(var n in t||(t={}))U4.call(t,n)&&Nu(e,n,t[n]);if(ju)for(var n of ju(t))W4.call(t,n)&&Nu(e,n,t[n]);return e},q4=(e,t)=>H4(e,Z4(t));const Ec=y.forwardRef((e,t)=>x.createElement(Ce,q4(G4({ref:t},e),{weights:Xb})));Ec.displayName="FileArrowUp";var K4=Object.defineProperty,Y4=Object.defineProperties,X4=Object.getOwnPropertyDescriptors,Eu=Object.getOwnPropertySymbols,J4=Object.prototype.hasOwnProperty,Q4=Object.prototype.propertyIsEnumerable,Su=(e,t,n)=>t in e?K4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ew=(e,t)=>{for(var n in t||(t={}))J4.call(t,n)&&Su(e,n,t[n]);if(Eu)for(var n of Eu(t))Q4.call(t,n)&&Su(e,n,t[n]);return e},tw=(e,t)=>Y4(e,X4(t));const za=y.forwardRef((e,t)=>x.createElement(Ce,tw(ew({ref:t},e),{weights:Jb})));za.displayName="FlowArrow";var nw=Object.defineProperty,rw=Object.defineProperties,sw=Object.getOwnPropertyDescriptors,Cu=Object.getOwnPropertySymbols,ow=Object.prototype.hasOwnProperty,aw=Object.prototype.propertyIsEnumerable,Iu=(e,t,n)=>t in e?nw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,iw=(e,t)=>{for(var n in t||(t={}))ow.call(t,n)&&Iu(e,n,t[n]);if(Cu)for(var n of Cu(t))aw.call(t,n)&&Iu(e,n,t[n]);return e},lw=(e,t)=>rw(e,sw(t));const ot=y.forwardRef((e,t)=>x.createElement(Ce,lw(iw({ref:t},e),{weights:Qb})));ot.displayName="Gear";var cw=Object.defineProperty,dw=Object.defineProperties,uw=Object.getOwnPropertyDescriptors,Au=Object.getOwnPropertySymbols,fw=Object.prototype.hasOwnProperty,mw=Object.prototype.propertyIsEnumerable,Du=(e,t,n)=>t in e?cw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,pw=(e,t)=>{for(var n in t||(t={}))fw.call(t,n)&&Du(e,n,t[n]);if(Au)for(var n of Au(t))mw.call(t,n)&&Du(e,n,t[n]);return e},hw=(e,t)=>dw(e,uw(t));const vp=y.forwardRef((e,t)=>x.createElement(Ce,hw(pw({ref:t},e),{weights:e6})));vp.displayName="House";var gw=Object.defineProperty,xw=Object.defineProperties,yw=Object.getOwnPropertyDescriptors,Mu=Object.getOwnPropertySymbols,vw=Object.prototype.hasOwnProperty,bw=Object.prototype.propertyIsEnumerable,ku=(e,t,n)=>t in e?gw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ww=(e,t)=>{for(var n in t||(t={}))vw.call(t,n)&&ku(e,n,t[n]);if(Mu)for(var n of Mu(t))bw.call(t,n)&&ku(e,n,t[n]);return e},jw=(e,t)=>xw(e,yw(t));const bp=y.forwardRef((e,t)=>x.createElement(Ce,jw(ww({ref:t},e),{weights:t6})));bp.displayName="Key";var Nw=Object.defineProperty,Ew=Object.defineProperties,Sw=Object.getOwnPropertyDescriptors,Ou=Object.getOwnPropertySymbols,Cw=Object.prototype.hasOwnProperty,Iw=Object.prototype.propertyIsEnumerable,Tu=(e,t,n)=>t in e?Nw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Aw=(e,t)=>{for(var n in t||(t={}))Cw.call(t,n)&&Tu(e,n,t[n]);if(Ou)for(var n of Ou(t))Iw.call(t,n)&&Tu(e,n,t[n]);return e},Dw=(e,t)=>Ew(e,Sw(t));const Ha=y.forwardRef((e,t)=>x.createElement(Ce,Dw(Aw({ref:t},e),{weights:n6})));Ha.displayName="Link";var Mw=Object.defineProperty,kw=Object.defineProperties,Ow=Object.getOwnPropertyDescriptors,Fu=Object.getOwnPropertySymbols,Tw=Object.prototype.hasOwnProperty,Fw=Object.prototype.propertyIsEnumerable,_u=(e,t,n)=>t in e?Mw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_w=(e,t)=>{for(var n in t||(t={}))Tw.call(t,n)&&_u(e,n,t[n]);if(Fu)for(var n of Fu(t))Fw.call(t,n)&&_u(e,n,t[n]);return e},Pw=(e,t)=>kw(e,Ow(t));const wp=y.forwardRef((e,t)=>x.createElement(Ce,Pw(_w({ref:t},e),{weights:r6})));wp.displayName="LinkBreak";var Lw=Object.defineProperty,$w=Object.defineProperties,Rw=Object.getOwnPropertyDescriptors,Pu=Object.getOwnPropertySymbols,Vw=Object.prototype.hasOwnProperty,Bw=Object.prototype.propertyIsEnumerable,Lu=(e,t,n)=>t in e?Lw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zw=(e,t)=>{for(var n in t||(t={}))Vw.call(t,n)&&Lu(e,n,t[n]);if(Pu)for(var n of Pu(t))Bw.call(t,n)&&Lu(e,n,t[n]);return e},Hw=(e,t)=>$w(e,Rw(t));const jp=y.forwardRef((e,t)=>x.createElement(Ce,Hw(zw({ref:t},e),{weights:s6})));jp.displayName="MinusSquare";var Zw=Object.defineProperty,Uw=Object.defineProperties,Ww=Object.getOwnPropertyDescriptors,$u=Object.getOwnPropertySymbols,Gw=Object.prototype.hasOwnProperty,qw=Object.prototype.propertyIsEnumerable,Ru=(e,t,n)=>t in e?Zw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Kw=(e,t)=>{for(var n in t||(t={}))Gw.call(t,n)&&Ru(e,n,t[n]);if($u)for(var n of $u(t))qw.call(t,n)&&Ru(e,n,t[n]);return e},Yw=(e,t)=>Uw(e,Ww(t));const Sc=y.forwardRef((e,t)=>x.createElement(Ce,Yw(Kw({ref:t},e),{weights:o6})));Sc.displayName="Package";var Xw=Object.defineProperty,Jw=Object.defineProperties,Qw=Object.getOwnPropertyDescriptors,Vu=Object.getOwnPropertySymbols,e3=Object.prototype.hasOwnProperty,t3=Object.prototype.propertyIsEnumerable,Bu=(e,t,n)=>t in e?Xw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,n3=(e,t)=>{for(var n in t||(t={}))e3.call(t,n)&&Bu(e,n,t[n]);if(Vu)for(var n of Vu(t))t3.call(t,n)&&Bu(e,n,t[n]);return e},r3=(e,t)=>Jw(e,Qw(t));const Wt=y.forwardRef((e,t)=>x.createElement(Ce,r3(n3({ref:t},e),{weights:a6})));Wt.displayName="Pencil";var s3=Object.defineProperty,o3=Object.defineProperties,a3=Object.getOwnPropertyDescriptors,zu=Object.getOwnPropertySymbols,i3=Object.prototype.hasOwnProperty,l3=Object.prototype.propertyIsEnumerable,Hu=(e,t,n)=>t in e?s3(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,c3=(e,t)=>{for(var n in t||(t={}))i3.call(t,n)&&Hu(e,n,t[n]);if(zu)for(var n of zu(t))l3.call(t,n)&&Hu(e,n,t[n]);return e},d3=(e,t)=>o3(e,a3(t));const Np=y.forwardRef((e,t)=>x.createElement(Ce,d3(c3({ref:t},e),{weights:i6})));Np.displayName="PlusCircle";var u3=Object.defineProperty,f3=Object.defineProperties,m3=Object.getOwnPropertyDescriptors,Zu=Object.getOwnPropertySymbols,p3=Object.prototype.hasOwnProperty,h3=Object.prototype.propertyIsEnumerable,Uu=(e,t,n)=>t in e?u3(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,g3=(e,t)=>{for(var n in t||(t={}))p3.call(t,n)&&Uu(e,n,t[n]);if(Zu)for(var n of Zu(t))h3.call(t,n)&&Uu(e,n,t[n]);return e},x3=(e,t)=>f3(e,m3(t));const Cc=y.forwardRef((e,t)=>x.createElement(Ce,x3(g3({ref:t},e),{weights:l6})));Cc.displayName="SignOut";var y3=Object.defineProperty,v3=Object.defineProperties,b3=Object.getOwnPropertyDescriptors,Wu=Object.getOwnPropertySymbols,w3=Object.prototype.hasOwnProperty,j3=Object.prototype.propertyIsEnumerable,Gu=(e,t,n)=>t in e?y3(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,N3=(e,t)=>{for(var n in t||(t={}))w3.call(t,n)&&Gu(e,n,t[n]);if(Wu)for(var n of Wu(t))j3.call(t,n)&&Gu(e,n,t[n]);return e},E3=(e,t)=>v3(e,b3(t));const Ic=y.forwardRef((e,t)=>x.createElement(Ce,E3(N3({ref:t},e),{weights:c6})));Ic.displayName="TextAa";var S3=Object.defineProperty,C3=Object.defineProperties,I3=Object.getOwnPropertyDescriptors,qu=Object.getOwnPropertySymbols,A3=Object.prototype.hasOwnProperty,D3=Object.prototype.propertyIsEnumerable,Ku=(e,t,n)=>t in e?S3(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,M3=(e,t)=>{for(var n in t||(t={}))A3.call(t,n)&&Ku(e,n,t[n]);if(qu)for(var n of qu(t))D3.call(t,n)&&Ku(e,n,t[n]);return e},k3=(e,t)=>C3(e,I3(t));const Ep=y.forwardRef((e,t)=>x.createElement(Ce,k3(M3({ref:t},e),{weights:d6})));Ep.displayName="UserCircle";var O3=Object.defineProperty,T3=Object.defineProperties,F3=Object.getOwnPropertyDescriptors,Yu=Object.getOwnPropertySymbols,_3=Object.prototype.hasOwnProperty,P3=Object.prototype.propertyIsEnumerable,Xu=(e,t,n)=>t in e?O3(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,L3=(e,t)=>{for(var n in t||(t={}))_3.call(t,n)&&Xu(e,n,t[n]);if(Yu)for(var n of Yu(t))P3.call(t,n)&&Xu(e,n,t[n]);return e},$3=(e,t)=>T3(e,F3(t));const Ac=y.forwardRef((e,t)=>x.createElement(Ce,$3(L3({ref:t},e),{weights:u6})));Ac.displayName="Video";const Sp=new bv(new La);class Be{constructor(){pe(this,"backupDataStore",Sp)}async addOption(...t){return await this.backupDataStore.addOption(...t)}async removeOption(...t){return await this.backupDataStore.removeOption(...t)}async setOptions(...t){return await this.backupDataStore.setOptions(...t)}async updateOption(...t){return await this.backupDataStore.updateOption(...t)}}const dt=new wv(new La);class Ee{constructor(){pe(this,"flowStore",dt)}selectFlow(...t){return this.flowStore.selectFlow(...t)}async addFlow(...t){return await this.flowStore.addFlow(...t)}async addNodeToFlow(...t){return await this.flowStore.addNodeToFlow(...t)}async updateFlow(...t){return await this.flowStore.updateFlow(...t)}deleteFlow(...t){return this.flowStore.deleteFlow(...t)}findAll(...t){return this.flowStore.findAll(...t)}findById(...t){return this.flowStore.findById(...t)}findFlowsWithItem(...t){return this.flowStore.findFlowsWithItem(...t)}removeNodeFromFlow(...t){return this.flowStore.removeNodeFromFlow(...t)}updateNode(...t){return this.flowStore.updateNode(...t)}updateManyNodes(...t){return this.flowStore.updateManyNodes(...t)}}class St{constructor(){pe(this,"funnelStore",Ot)}async addFunnel(...t){await this.funnelStore.addFunnel(...t)}async deleteFunnel(...t){await this.funnelStore.deleteFunnel(...t)}async findById(...t){return await this.funnelStore.findById(...t)}async findFunnelsWithItem(...t){return await this.funnelStore.findFunnelsWithItem(...t)}async getFunnelList(){return this.funnelStore.funnelList}async getSequenceItems(...t){return await this.funnelStore.getSequenceItems(...t)}async reorderFunnelList(...t){await this.funnelStore.reorderFunnelList(...t)}async saveFunnel(...t){await this.funnelStore.saveFunnel(...t)}async selectFunnel(...t){await this.funnelStore.selectFunnel(...t)}async setFunnelFilter(...t){await this.funnelStore.setFunnelFilter(...t)}}class R3{constructor(t){this.backupDataRepository=t}async execute({optionKey:t,optionIdToRemove:n}){return await this.backupDataRepository.removeOption({optionKey:t,optionIdToRemove:n})}}function wr(e){const t=new R3(e);return t.execute.bind(t)}function V3({audio:e}){const t=Ib(new Ut,new St,new Ee),n=wr(new Be);return o.jsxs(xe,{children:[o.jsx(ye,{asChild:!0,children:o.jsx("div",{children:o.jsx(we,{className:"md:w-fit",actionVariant:"actionDestructive",actionProps:{childrenVariant:"no-dark"},onAction:()=>{t(e==null?void 0:e.id).then(()=>{n({optionKey:"audios",optionIdToRemove:e.id})}).then(()=>{ie({title:`Áudio "${e==null?void 0:e.name}" excluído com sucesso.`})},r=>{r instanceof Error&&he({title:"Atenção",description:o.jsxs("div",{className:"flex flex-col gap-1",children:[`Não foi possível excluir o áudio "${e==null?void 0:e.name}":`,o.jsx("p",{children:" "}),r.message.split(`
`).map((s,a)=>o.jsx("pre",{className:"min-h-[1ch] whitespace-pre-wrap font-sans text-sm",children:s},a))]}),duration:5e3})})},action:"Excluir",cancel:"Cancelar",description:o.jsx("div",{children:o.jsxs("div",{className:"mb-3 text-center",children:[o.jsxs("span",{children:["Tem certeza que deseja excluir o áudio"," ",o.jsxs("span",{className:"break-all font-bold",children:["“",e==null?void 0:e.name,"”"]}),"?"]}),o.jsx("br",{}),o.jsx("span",{children:"Essa ação é irreversível."})]})}),title:o.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[o.jsx(xt,{size:32}),o.jsx("p",{children:"Excluir áudio"})]}),trigger:o.jsx(X,{icon:o.jsx(yt,{size:24}),variant:"actionDestructive",childrenVariant:"no-dark",size:"action"})})})}),o.jsx(ve,{className:"bg-destructive text-destructive-foreground",children:"Excluir"})]})}function B3({audio:e}){return o.jsxs(xe,{children:[o.jsx(ye,{asChild:!0,children:o.jsx("a",{download:e==null?void 0:e.name,href:e==null?void 0:e.data,target:"_blank",rel:"noopener noreferrer",children:o.jsx(X,{icon:o.jsx(es,{size:24}),variant:"action",size:"action"})})}),o.jsx(ve,{children:"Baixar"})]})}class z3{constructor(t){this.backupDataRepository=t}async execute({optionKey:t,optionToUpdate:n}){return await this.backupDataRepository.updateOption({optionKey:t,optionToUpdate:n})}}function zn(e){return y.useMemo(()=>{const t=new z3(e);return t.execute.bind(t)},[e])}const H3=({audioIsForwarded:e,audioName:t,itemId:n,mode:r,viewOnce:s})=>{const[a,i]=y.useState(s),[l,c]=y.useState(void 0),[d,u]=y.useState(void 0),[f,m]=y.useState(e),[p,g]=y.useState(t),h=new Ut,v=new Be,b=jv(h),w=po(h),j=$b(h),N=yn(v),S=zn(v);y.useEffect(()=>{e!==f&&m(e),t!==p&&g(t),s!==a&&i(s)},[e,t,s]);const E=()=>{r==="edit"?(g(t),m(e)):(g(""),c(void 0),m(!1))},I=(C,T)=>{c(C),u(T)},A=async C=>{if(C&&r==="edit"&&n){const T=await w(n);T&&(c(T.data),m(!T.isPtt))}},M=async()=>{if(r==="create"&&l){const{audio:C}=await b({asViewOnce:a,base64:l,isPtt:!f,name:p.trim()});await N({optionKey:"audios",optionToAdd:{id:C.id,name:C.name,size:await De(C,{itemData:C.data})}}),ie({title:`Áudio "${p.trim()}" adicionado com sucesso.`}),E()}else if(r==="edit"&&n){const{audio:C}=await j({asViewOnce:a,base64:l,id:n,isPtt:!f,name:p.trim()});await S({optionKey:"audios",optionToUpdate:{id:C.id,name:C.name,size:await De(C,{itemData:C.data})}}),ie({title:`Áudio "${p.trim()}" atualizado com sucesso.`})}},O=C=>(C.stopPropagation(),c(void 0)),L={value:p,onChange:C=>g(C.target.value)},$={checked:f,onCheckedChange:m},P={checked:a,onCheckedChange:i};return{base64:l,clearAllState:E,fileName:d,handleModalAction:M,handleOpenChange:A,handleRemoveUploadedAudio:O,handleUploadedAudio:I,hasAudio:!!l&&!!d,nameHandler:L,notReady:p.trim()===""||r==="create"&&!l,forwardedHandler:$,sendAs:f?"gravado":"encaminhado",title:r==="create"?"Adicionar áudio":"Editar áudio",viewOnceHandler:P}};var Cp={exports:{}},Z3="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",U3=Z3,W3=U3;function Ip(){}function Ap(){}Ap.resetWarningCache=Ip;var G3=function(){function e(r,s,a,i,l,c){if(c!==W3){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Ap,resetWarningCache:Ip};return n.PropTypes=n,n};Cp.exports=G3();var q3=Cp.exports;const Se=uc(q3);var K3=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function ho(e,t){var n=Y3(e);if(typeof n.path!="string"){var r=e.webkitRelativePath;Object.defineProperty(n,"path",{value:typeof t=="string"?t:typeof r=="string"&&r.length>0?r:e.name,writable:!1,configurable:!1,enumerable:!0})}return n}function Y3(e){var t=e.name,n=t&&t.lastIndexOf(".")!==-1;if(n&&!e.type){var r=t.split(".").pop().toLowerCase(),s=K3.get(r);s&&Object.defineProperty(e,"type",{value:s,writable:!1,configurable:!1,enumerable:!0})}return e}var X3=[".DS_Store","Thumbs.db"];function J3(e){return qr(this,void 0,void 0,function(){return Kr(this,function(t){return Xo(e)&&Q3(e.dataTransfer)?[2,rj(e.dataTransfer,e.type)]:ej(e)?[2,tj(e)]:Array.isArray(e)&&e.every(function(n){return"getFile"in n&&typeof n.getFile=="function"})?[2,nj(e)]:[2,[]]})})}function Q3(e){return Xo(e)}function ej(e){return Xo(e)&&Xo(e.target)}function Xo(e){return typeof e=="object"&&e!==null}function tj(e){return Cl(e.target.files).map(function(t){return ho(t)})}function nj(e){return qr(this,void 0,void 0,function(){var t;return Kr(this,function(n){switch(n.label){case 0:return[4,Promise.all(e.map(function(r){return r.getFile()}))];case 1:return t=n.sent(),[2,t.map(function(r){return ho(r)})]}})})}function rj(e,t){return qr(this,void 0,void 0,function(){var n,r;return Kr(this,function(s){switch(s.label){case 0:return e.items?(n=Cl(e.items).filter(function(a){return a.kind==="file"}),t!=="drop"?[2,n]:[4,Promise.all(n.map(sj))]):[3,2];case 1:return r=s.sent(),[2,Ju(Dp(r))];case 2:return[2,Ju(Cl(e.files).map(function(a){return ho(a)}))]}})})}function Ju(e){return e.filter(function(t){return X3.indexOf(t.name)===-1})}function Cl(e){if(e===null)return[];for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(r)}return t}function sj(e){if(typeof e.webkitGetAsEntry!="function")return Qu(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?Mp(t):Qu(e)}function Dp(e){return e.reduce(function(t,n){return Zd(Zd([],Ud(t),!1),Ud(Array.isArray(n)?Dp(n):[n]),!1)},[])}function Qu(e){var t=e.getAsFile();if(!t)return Promise.reject("".concat(e," is not a File"));var n=ho(t);return Promise.resolve(n)}function oj(e){return qr(this,void 0,void 0,function(){return Kr(this,function(t){return[2,e.isDirectory?Mp(e):aj(e)]})})}function Mp(e){var t=e.createReader();return new Promise(function(n,r){var s=[];function a(){var i=this;t.readEntries(function(l){return qr(i,void 0,void 0,function(){var c,d,u;return Kr(this,function(f){switch(f.label){case 0:if(l.length)return[3,5];f.label=1;case 1:return f.trys.push([1,3,,4]),[4,Promise.all(s)];case 2:return c=f.sent(),n(c),[3,4];case 3:return d=f.sent(),r(d),[3,4];case 4:return[3,6];case 5:u=Promise.all(l.map(oj)),s.push(u),a(),f.label=6;case 6:return[2]}})})},function(l){r(l)})}a()})}function aj(e){return qr(this,void 0,void 0,function(){return Kr(this,function(t){return[2,new Promise(function(n,r){e.file(function(s){var a=ho(s,e.fullPath);n(a)},function(s){r(s)})})]})})}var Ki=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(",");if(n.length===0)return!0;var r=e.name||"",s=(e.type||"").toLowerCase(),a=s.replace(/\/.*$/,"");return n.some(function(i){var l=i.trim().toLowerCase();return l.charAt(0)==="."?r.toLowerCase().endsWith(l):l.endsWith("/*")?a===l.replace(/\/.*$/,""):s===l})}return!0};function ef(e){return cj(e)||lj(e)||Op(e)||ij()}function ij(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lj(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function cj(e){if(Array.isArray(e))return Il(e)}function tf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function nf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tf(Object(n),!0).forEach(function(r){kp(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tf(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function kp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rs(e,t){return fj(e)||uj(e,t)||Op(e,t)||dj()}function dj(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Op(e,t){if(e){if(typeof e=="string")return Il(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Il(e,t)}}function Il(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function uj(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],s=!0,a=!1,i,l;try{for(n=n.call(e);!(s=(i=n.next()).done)&&(r.push(i.value),!(t&&r.length===t));s=!0);}catch(c){a=!0,l=c}finally{try{!s&&n.return!=null&&n.return()}finally{if(a)throw l}}return r}}function fj(e){if(Array.isArray(e))return e}var mj=typeof Ki=="function"?Ki:Ki.default,Tp="file-invalid-type",Fp="file-too-large",_p="file-too-small",Pp="too-many-files",rf={FileInvalidType:Tp,FileTooLarge:Fp,FileTooSmall:_p,TooManyFiles:Pp},pj=function(t){t=Array.isArray(t)&&t.length===1?t[0]:t;var n=Array.isArray(t)?"one of ".concat(t.join(", ")):t;return{code:Tp,message:"File type must be ".concat(n)}},sf=function(t){return{code:Fp,message:"File is larger than ".concat(t," ").concat(t===1?"byte":"bytes")}},of=function(t){return{code:_p,message:"File is smaller than ".concat(t," ").concat(t===1?"byte":"bytes")}},hj={code:Pp,message:"Too many files"};function Lp(e,t){var n=e.type==="application/x-moz-file"||mj(e,t);return[n,n?null:pj(t)]}function $p(e,t,n){if(sr(e.size))if(sr(t)&&sr(n)){if(e.size>n)return[!1,sf(n)];if(e.size<t)return[!1,of(t)]}else{if(sr(t)&&e.size<t)return[!1,of(t)];if(sr(n)&&e.size>n)return[!1,sf(n)]}return[!0,null]}function sr(e){return e!=null}function gj(e){var t=e.files,n=e.accept,r=e.minSize,s=e.maxSize,a=e.multiple,i=e.maxFiles,l=e.validator;return!a&&t.length>1||a&&i>=1&&t.length>i?!1:t.every(function(c){var d=Lp(c,n),u=Rs(d,1),f=u[0],m=$p(c,r,s),p=Rs(m,1),g=p[0],h=l?l(c):null;return f&&g&&!h})}function Jo(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1}function Mo(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(t){return t==="Files"||t==="application/x-moz-file"}):!!e.target&&!!e.target.files}function af(e){e.preventDefault()}function xj(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function yj(e){return e.indexOf("Edge/")!==-1}function vj(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return xj(e)||yj(e)}function Yt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){for(var s=arguments.length,a=new Array(s>1?s-1:0),i=1;i<s;i++)a[i-1]=arguments[i];return t.some(function(l){return!Jo(r)&&l&&l.apply(void 0,[r].concat(a)),Jo(r)})}}function bj(){return"showOpenFilePicker"in window}function wj(e){if(sr(e)){var t=Object.entries(e).filter(function(n){var r=Rs(n,2),s=r[0],a=r[1],i=!0;return Rp(s)||(console.warn('Skipped "'.concat(s,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),i=!1),(!Array.isArray(a)||!a.every(Vp))&&(console.warn('Skipped "'.concat(s,'" because an invalid file extension was provided.')),i=!1),i}).reduce(function(n,r){var s=Rs(r,2),a=s[0],i=s[1];return nf(nf({},n),{},kp({},a,i))},{});return[{description:"Files",accept:t}]}return e}function jj(e){if(sr(e))return Object.entries(e).reduce(function(t,n){var r=Rs(n,2),s=r[0],a=r[1];return[].concat(ef(t),[s],ef(a))},[]).filter(function(t){return Rp(t)||Vp(t)}).join(",")}function Nj(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function Ej(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}function Rp(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}function Vp(e){return/^.*\.[\w]+$/.test(e)}var Sj=["children"],Cj=["open"],Ij=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],Aj=["refKey","onChange","onClick"];function Dj(e){return Oj(e)||kj(e)||Bp(e)||Mj()}function Mj(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kj(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Oj(e){if(Array.isArray(e))return Al(e)}function Yi(e,t){return _j(e)||Fj(e,t)||Bp(e,t)||Tj()}function Tj(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bp(e,t){if(e){if(typeof e=="string")return Al(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Al(e,t)}}function Al(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Fj(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],s=!0,a=!1,i,l;try{for(n=n.call(e);!(s=(i=n.next()).done)&&(r.push(i.value),!(t&&r.length===t));s=!0);}catch(c){a=!0,l=c}finally{try{!s&&n.return!=null&&n.return()}finally{if(a)throw l}}return r}}function _j(e){if(Array.isArray(e))return e}function lf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Fe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lf(Object(n),!0).forEach(function(r){Dl(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lf(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Dl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qo(e,t){if(e==null)return{};var n=Pj(e,t),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)r=a[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Pj(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}var Dc=y.forwardRef(function(e,t){var n=e.children,r=Qo(e,Sj),s=Hp(r),a=s.open,i=Qo(s,Cj);return y.useImperativeHandle(t,function(){return{open:a}},[a]),x.createElement(y.Fragment,null,n(Fe(Fe({},i),{},{open:a})))});Dc.displayName="Dropzone";var zp={disabled:!1,getFilesFromEvent:J3,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};Dc.defaultProps=zp;Dc.propTypes={children:Se.func,accept:Se.objectOf(Se.arrayOf(Se.string)),multiple:Se.bool,preventDropOnDocument:Se.bool,noClick:Se.bool,noKeyboard:Se.bool,noDrag:Se.bool,noDragEventsBubbling:Se.bool,minSize:Se.number,maxSize:Se.number,maxFiles:Se.number,disabled:Se.bool,getFilesFromEvent:Se.func,onFileDialogCancel:Se.func,onFileDialogOpen:Se.func,useFsAccessApi:Se.bool,autoFocus:Se.bool,onDragEnter:Se.func,onDragLeave:Se.func,onDragOver:Se.func,onDrop:Se.func,onDropAccepted:Se.func,onDropRejected:Se.func,onError:Se.func,validator:Se.func};var Ml={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function Hp(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=Fe(Fe({},zp),e),n=t.accept,r=t.disabled,s=t.getFilesFromEvent,a=t.maxSize,i=t.minSize,l=t.multiple,c=t.maxFiles,d=t.onDragEnter,u=t.onDragLeave,f=t.onDragOver,m=t.onDrop,p=t.onDropAccepted,g=t.onDropRejected,h=t.onFileDialogCancel,v=t.onFileDialogOpen,b=t.useFsAccessApi,w=t.autoFocus,j=t.preventDropOnDocument,N=t.noClick,S=t.noKeyboard,E=t.noDrag,I=t.noDragEventsBubbling,A=t.onError,M=t.validator,O=y.useMemo(function(){return jj(n)},[n]),L=y.useMemo(function(){return wj(n)},[n]),$=y.useMemo(function(){return typeof v=="function"?v:cf},[v]),P=y.useMemo(function(){return typeof h=="function"?h:cf},[h]),C=y.useRef(null),T=y.useRef(null),D=y.useReducer(Lj,Ml),_=Yi(D,2),F=_[0],k=_[1],R=F.isFocused,H=F.isFileDialogActive,B=y.useRef(typeof window<"u"&&window.isSecureContext&&b&&bj()),G=function(){!B.current&&H&&setTimeout(function(){if(T.current){var oe=T.current.files;oe.length||(k({type:"closeDialog"}),P())}},300)};y.useEffect(function(){return window.addEventListener("focus",G,!1),function(){window.removeEventListener("focus",G,!1)}},[T,H,P,B]);var z=y.useRef([]),Z=function(oe){C.current&&C.current.contains(oe.target)||(oe.preventDefault(),z.current=[])};y.useEffect(function(){return j&&(document.addEventListener("dragover",af,!1),document.addEventListener("drop",Z,!1)),function(){j&&(document.removeEventListener("dragover",af),document.removeEventListener("drop",Z))}},[C,j]),y.useEffect(function(){return!r&&w&&C.current&&C.current.focus(),function(){}},[C,w,r]);var q=y.useCallback(function(te){A?A(te):console.error(te)},[A]),V=y.useCallback(function(te){te.preventDefault(),te.persist(),it(te),z.current=[].concat(Dj(z.current),[te.target]),Mo(te)&&Promise.resolve(s(te)).then(function(oe){if(!(Jo(te)&&!I)){var Ie=oe.length,_e=Ie>0&&gj({files:oe,accept:O,minSize:i,maxSize:a,multiple:l,maxFiles:c,validator:M}),lt=Ie>0&&!_e;k({isDragAccept:_e,isDragReject:lt,isDragActive:!0,type:"setDraggedFiles"}),d&&d(te)}}).catch(function(oe){return q(oe)})},[s,d,q,I,O,i,a,l,c,M]),U=y.useCallback(function(te){te.preventDefault(),te.persist(),it(te);var oe=Mo(te);if(oe&&te.dataTransfer)try{te.dataTransfer.dropEffect="copy"}catch{}return oe&&f&&f(te),!1},[f,I]),Q=y.useCallback(function(te){te.preventDefault(),te.persist(),it(te);var oe=z.current.filter(function(_e){return C.current&&C.current.contains(_e)}),Ie=oe.indexOf(te.target);Ie!==-1&&oe.splice(Ie,1),z.current=oe,!(oe.length>0)&&(k({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Mo(te)&&u&&u(te))},[C,u,I]),K=y.useCallback(function(te,oe){var Ie=[],_e=[];te.forEach(function(lt){var an=Lp(lt,O),Cn=Yi(an,2),ps=Cn[0],hs=Cn[1],gs=$p(lt,i,a),Sr=Yi(gs,2),xs=Sr[0],ys=Sr[1],vs=M?M(lt):null;if(ps&&xs&&!vs)Ie.push(lt);else{var bs=[hs,ys];vs&&(bs=bs.concat(vs)),_e.push({file:lt,errors:bs.filter(function(Gi){return Gi})})}}),(!l&&Ie.length>1||l&&c>=1&&Ie.length>c)&&(Ie.forEach(function(lt){_e.push({file:lt,errors:[hj]})}),Ie.splice(0)),k({acceptedFiles:Ie,fileRejections:_e,type:"setFiles"}),m&&m(Ie,_e,oe),_e.length>0&&g&&g(_e,oe),Ie.length>0&&p&&p(Ie,oe)},[k,l,O,i,a,c,m,p,g,M]),ee=y.useCallback(function(te){te.preventDefault(),te.persist(),it(te),z.current=[],Mo(te)&&Promise.resolve(s(te)).then(function(oe){Jo(te)&&!I||K(oe,te)}).catch(function(oe){return q(oe)}),k({type:"reset"})},[s,K,q,I]),W=y.useCallback(function(){if(B.current){k({type:"openDialog"}),$();var te={multiple:l,types:L};window.showOpenFilePicker(te).then(function(oe){return s(oe)}).then(function(oe){K(oe,null),k({type:"closeDialog"})}).catch(function(oe){Nj(oe)?(P(oe),k({type:"closeDialog"})):Ej(oe)?(B.current=!1,T.current?(T.current.value=null,T.current.click()):q(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):q(oe)});return}T.current&&(k({type:"openDialog"}),$(),T.current.value=null,T.current.click())},[k,$,P,b,K,q,L,l]),ne=y.useCallback(function(te){!C.current||!C.current.isEqualNode(te.target)||(te.key===" "||te.key==="Enter"||te.keyCode===32||te.keyCode===13)&&(te.preventDefault(),W())},[C,W]),ue=y.useCallback(function(){k({type:"focus"})},[]),Te=y.useCallback(function(){k({type:"blur"})},[]),Ye=y.useCallback(function(){N||(vj()?setTimeout(W,0):W())},[N,W]),at=function(oe){return r?null:oe},Sn=function(oe){return S?null:at(oe)},de=function(oe){return E?null:at(oe)},it=function(oe){I&&oe.stopPropagation()},ms=y.useMemo(function(){return function(){var te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},oe=te.refKey,Ie=oe===void 0?"ref":oe,_e=te.role,lt=te.onKeyDown,an=te.onFocus,Cn=te.onBlur,ps=te.onClick,hs=te.onDragEnter,gs=te.onDragOver,Sr=te.onDragLeave,xs=te.onDrop,ys=Qo(te,Ij);return Fe(Fe(Dl({onKeyDown:Sn(Yt(lt,ne)),onFocus:Sn(Yt(an,ue)),onBlur:Sn(Yt(Cn,Te)),onClick:at(Yt(ps,Ye)),onDragEnter:de(Yt(hs,V)),onDragOver:de(Yt(gs,U)),onDragLeave:de(Yt(Sr,Q)),onDrop:de(Yt(xs,ee)),role:typeof _e=="string"&&_e!==""?_e:"presentation"},Ie,C),!r&&!S?{tabIndex:0}:{}),ys)}},[C,ne,ue,Te,Ye,V,U,Q,ee,S,E,r]),Kn=y.useCallback(function(te){te.stopPropagation()},[]),Yn=y.useMemo(function(){return function(){var te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},oe=te.refKey,Ie=oe===void 0?"ref":oe,_e=te.onChange,lt=te.onClick,an=Qo(te,Aj),Cn=Dl({accept:O,multiple:l,type:"file",style:{display:"none"},onChange:at(Yt(_e,ee)),onClick:at(Yt(lt,Kn)),tabIndex:-1},Ie,T);return Fe(Fe({},Cn),an)}},[T,n,l,ee,r]);return Fe(Fe({},F),{},{isFocused:R&&!r,getRootProps:ms,getInputProps:Yn,rootRef:C,inputRef:T,open:at(W)})}function Lj(e,t){switch(t.type){case"focus":return Fe(Fe({},e),{},{isFocused:!0});case"blur":return Fe(Fe({},e),{},{isFocused:!1});case"openDialog":return Fe(Fe({},Ml),{},{isFileDialogActive:!0});case"closeDialog":return Fe(Fe({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return Fe(Fe({},e),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return Fe(Fe({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections});case"reset":return Fe({},Ml);default:return e}}function cf(){}function Za({accept:e,className:t,disabled:n=!1,dragHintText:r,hintText:s,maxSize:a,onSelect:i,returnFile:l=!1}){const c=y.useCallback((p,g)=>{for(const h of p)if(h instanceof File){if(l)return i(h,h.name);const v=new FileReader;v.onabort=()=>console.log("file reading was aborted"),v.onerror=()=>console.log("file reading has failed"),v.onload=()=>{const b=v.result;typeof b=="string"?i(b,h.name):i()},v.readAsDataURL(h)}for(const h of g)for(const v of h.errors)v.code===rf.FileTooLarge&&a&&le({title:`O tamanho do arquivo é maior do que o permitido de ${a/1e6}MB`}),v.code===rf.FileInvalidType&&le({title:"O tipo do arquivo não é permitido.",description:e?o.jsxs("span",{children:["Formatos aceitos:"," ",Object.values(e).map(b=>b.map(w=>o.jsxs("span",{className:"text-primary",children:[w," "]},w)))]}):void 0})},[e,a,i,l]),{getRootProps:d,getInputProps:u,isDragActive:f}=Hp({onDrop:c,accept:e,maxSize:a,preventDropOnDocument:!0}),m=y.useMemo(()=>ze("border border-dashed p-4 text-center rounded-md max-h-44 items-center flex justify-center overflow-y-auto",f&&"bg-primary-200/80 text-white h-24"),[f]);return o.jsx("div",{"aria-disabled":n,className:ze("flex w-full max-w-3xl flex-col gap-2 bg-background text-center transition-all duration-300",n&&"pointer-events-none bg-muted text-muted-foreground opacity-50"),children:o.jsxs("div",{...d(),className:ze(m,t),children:[o.jsx("input",{...u()}),f?typeof r=="string"?o.jsx("p",{className:"text-base",children:r}):r:typeof s=="string"?o.jsx("p",{className:"text-base",children:s}):s]})})}function $j({fileName:e,onRemoveUploaded:t}){return o.jsxs("span",{className:"flex w-full items-center justify-center gap-2 text-primary",children:[e,o.jsx(X,{variant:"actionDestructive",icon:o.jsx(yt,{size:24}),childrenVariant:"no-dark",size:"sm",onClick:t,children:"Remover"})]})}function Rj({actionName:e,fileName:t,hasAudio:n,onRemoveUploaded:r,onSelectAudio:s,errorMessage:a}){return o.jsxs("div",{children:[o.jsx(Za,{className:J(e==="inserir"&&!n&&"border-destructive zv-dark:border-destructive-foreground"),accept:{"audio/*":[".mp3",".ogg"]},onSelect:s,dragHintText:o.jsx("p",{className:"text-base",children:"Solte o áudio aqui..."}),hintText:o.jsxs("p",{className:"text-base leading-8",children:[n?o.jsx($j,{fileName:t,onRemoveUploaded:r}):o.jsxs(o.Fragment,{children:[o.jsxs("span",{children:["Para ",e," o áudio, clique aqui ou arraste o arquivo para esta área."]}),o.jsx("br",{})]}),o.jsx("span",{children:"Formatos aceitos: “.ogg” e “.mp3”"})]})}),a?typeof a=="string"?o.jsx("span",{className:"m-0 ml-2 text-start text-sm font-light text-destructive zv-dark:text-red-400",children:a}):a:""]})}function Zp({itemId:e,audioIsForwarded:t=!1,audioName:n="",mode:r="create",trigger:s,viewOnce:a=!1}){const{base64:i,clearAllState:l,fileName:c,handleModalAction:d,handleOpenChange:u,handleRemoveUploadedAudio:f,handleUploadedAudio:m,hasAudio:p,nameHandler:g,notReady:h,forwardedHandler:v,title:b,viewOnceHandler:w}=H3({itemId:e,audioIsForwarded:t,audioName:n,mode:r,viewOnce:a});return o.jsx(we,{onCancel:l,onAction:d,action:"Salvar",actionProps:{icon:o.jsx(en,{}),disabled:h},description:o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[o.jsx(ce,{htmlFor:"audioName",className:"max-sm:hidden",children:"Nome"}),o.jsx($e,{required:!0,className:"bg-background text-base",id:"audioName",placeholder:"Nome do áudio",ref:Vn,...g,errorMessage:!g.value.trim()&&"Campo obrigatório"})]}),o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsxs("div",{className:"flex items-center space-x-2 text-base",children:[o.jsx(gt,{id:"as-forwarded",...v}),o.jsxs(ce,{htmlFor:"as-forwarded",children:["Enviar áudio como"," ",o.jsx("span",{className:"text-primary",children:"encaminhado"})]})]}),o.jsxs("div",{className:"flex items-center space-x-2 text-base",children:[o.jsx(gt,{id:"as-view-once",...w}),o.jsxs(ce,{htmlFor:"as-view-once",children:["Enviar áudio como"," ",o.jsx("span",{className:"text-primary",children:"visualização única"})]})]})]}),o.jsx(Rj,{actionName:r==="create"?"inserir":"alterar",fileName:c,hasAudio:p,onRemoveUploaded:f,onSelectAudio:m,errorMessage:r==="create"&&!p&&"Campo obrigatório"}),o.jsx(wa,{data:i})]}),onOpenChange:u,title:b,trigger:s,cancel:"Cancelar"})}function Up({audio:e}){return o.jsxs(xe,{children:[o.jsx(ye,{asChild:!0,children:o.jsx("div",{children:o.jsx(Zp,{mode:"edit",itemId:e.id,audioIsForwarded:!e.isPtt,audioName:e.name,viewOnce:e.asViewOnce,trigger:o.jsx(X,{onClick:t=>t.stopPropagation(),icon:o.jsx(Wt,{size:24}),variant:"action",size:"action"})},`edit_${e.id}`)})}),o.jsx(ve,{children:"Editar"})]})}function Wp({audio:e}){const t=Pb(new Ut);return o.jsxs(xe,{children:[o.jsx(ye,{asChild:!0,children:o.jsx(X,{onClick:n=>{n.stopPropagation(),t(e==null?void 0:e.id),ie({title:`Áudio "${e==null?void 0:e.name}" ${e!=null&&e.isFavorite?"desmarcado":"marcado"} como favorito com sucesso.`})},icon:o.jsx(Yr,{size:24,weight:e!=null&&e.isFavorite?"fill":"regular"}),variant:"action",size:"action"})}),o.jsx(ve,{children:"Favoritar"})]})}function Mc({size:e}){return o.jsx(Zp,{trigger:o.jsx(X,{size:e,icon:o.jsx(tn,{weight:"bold"}),children:"Adicionar"})})}function Vj({url:e,icon:t,text:n}){return o.jsx("a",{href:e,target:"_blank",rel:"noreferrer",children:o.jsx(X,{variant:"outline",icon:t,children:n})})}function Ct({tutorial:e}){var n;const t=(n=e==null?void 0:e.payload)==null?void 0:n["video-url"];return!(e!=null&&e.enabled)||!t?null:o.jsx(Vj,{icon:o.jsx(Nv,{}),text:"Ver vídeo",url:t})}function Bj(){const[e]=fe("dashboard-audio-help-video",ae);return o.jsxs("div",{className:"flex w-[416px] flex-col justify-center gap-6 py-4 text-center",children:[o.jsx("img",{src:"./audio.svg",alt:"Imagem indicativa de que não há áudios cadastrados",className:"m-auto w-[280px]"}),o.jsxs("div",{className:"flex w-[416px] flex-col items-center gap-6 text-base",children:[o.jsxs("p",{children:[o.jsx("span",{children:"Selecione um áudio para visualizar ou clique em "}),o.jsx(Mc,{size:"sm"}),o.jsx("span",{children:" para criar um novo áudio."})]}),(e==null?void 0:e.enabled)&&o.jsx("p",{children:"Dúvidas?"})]}),o.jsx("div",{className:"flex justify-center gap-6",children:(e==null?void 0:e.enabled)&&o.jsx(Ct,{tutorial:e})})]})}function zj(){const{selectedAudioId:e,dummyTrigger:t}=Qe.useGetSelectedAudioId(),n=Qe.audioList,r=po(new Ut),[s,a]=y.useState(null);return y.useEffect(()=>{const i=n.find(c=>c.id===e);a(c=>({asViewOnce:(i==null?void 0:i.asViewOnce)??!1,id:(i==null?void 0:i.id)??"",isFavorite:(i==null?void 0:i.isFavorite)??!1,name:(i==null?void 0:i.name)??"",isPtt:(i==null?void 0:i.isPtt)??!1,data:(c==null?void 0:c.id)===(i==null?void 0:i.id)?(c==null?void 0:c.data)??"":""}));async function l(){const c=await r(e);c&&a(d=>({asViewOnce:(d==null?void 0:d.asViewOnce)??!1,id:(d==null?void 0:d.id)??"",isFavorite:(d==null?void 0:d.isFavorite)??!1,name:(d==null?void 0:d.name)??"",isPtt:(d==null?void 0:d.isPtt)??!1,data:c.data===(d==null?void 0:d.data)?d.data:c.data}))}l()},[e,t]),o.jsx("div",{className:ze("flex h-fit w-1/2 flex-1 rounded-lg bg-card shadow-sm lg:min-w-[500px]",!e&&"justify-center"),children:e?o.jsx(Qr,{actions:s&&o.jsxs(o.Fragment,{children:[o.jsx(V3,{audio:s}),o.jsx(B3,{audio:s}),o.jsx(Up,{audio:s}),o.jsx(Wp,{audio:s})]}),body:s&&o.jsxs("div",{children:[o.jsx("p",{className:"text-base",children:s.isPtt?"Enviando áudio como gravado":"Enviando áudio como encaminhado"}),o.jsx("p",{className:"text-base",children:s.asViewOnce&&o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(fc,{size:20,weight:"duotone",className:"text-primary"}),"Enviando áudio como visualização única"]})}),o.jsx(wa,{data:s.data,className:"mt-1"})]}),title:s==null?void 0:s.name}):o.jsx(Bj,{})})}function df(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function uf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?df(Object(n),!0).forEach(function(r){Ev(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):df(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ut(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var ff=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Xi=function(){return Math.random().toString(36).substring(7).split("").join(".")},mf={INIT:"@@redux/INIT"+Xi(),REPLACE:"@@redux/REPLACE"+Xi(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Xi()}};function Hj(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Gp(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(ut(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(ut(1));return n(Gp)(e,t)}if(typeof e!="function")throw new Error(ut(2));var s=e,a=t,i=[],l=i,c=!1;function d(){l===i&&(l=i.slice())}function u(){if(c)throw new Error(ut(3));return a}function f(h){if(typeof h!="function")throw new Error(ut(4));if(c)throw new Error(ut(5));var v=!0;return d(),l.push(h),function(){if(v){if(c)throw new Error(ut(6));v=!1,d();var w=l.indexOf(h);l.splice(w,1),i=null}}}function m(h){if(!Hj(h))throw new Error(ut(7));if(typeof h.type>"u")throw new Error(ut(8));if(c)throw new Error(ut(9));try{c=!0,a=s(a,h)}finally{c=!1}for(var v=i=l,b=0;b<v.length;b++){var w=v[b];w()}return h}function p(h){if(typeof h!="function")throw new Error(ut(10));s=h,m({type:mf.REPLACE})}function g(){var h,v=f;return h={subscribe:function(w){if(typeof w!="object"||w===null)throw new Error(ut(11));function j(){w.next&&w.next(u())}j();var N=v(j);return{unsubscribe:N}}},h[ff]=function(){return this},h}return m({type:mf.INIT}),r={dispatch:m,subscribe:f,getState:u,replaceReducer:p},r[ff]=g,r}function pf(e,t){return function(){return t(e.apply(this,arguments))}}function hf(e,t){if(typeof e=="function")return pf(e,t);if(typeof e!="object"||e===null)throw new Error(ut(16));var n={};for(var r in e){var s=e[r];typeof s=="function"&&(n[r]=pf(s,t))}return n}function qp(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,s){return function(){return r(s.apply(void 0,arguments))}})}function Zj(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var s=r.apply(void 0,arguments),a=function(){throw new Error(ut(15))},i={getState:s.getState,dispatch:function(){return a.apply(void 0,arguments)}},l=t.map(function(c){return c(i)});return a=qp.apply(void 0,l)(s.dispatch),uf(uf({},s),{},{dispatch:a})}}}function Uj(e){e()}let Kp=Uj;const Wj=e=>Kp=e,Gj=()=>Kp,gf=Symbol.for("react-redux-context"),xf=typeof globalThis<"u"?globalThis:{};function qj(){var e;if(!y.createContext)return{};const t=(e=xf[gf])!=null?e:xf[gf]=new Map;let n=t.get(y.createContext);return n||(n=y.createContext(null),t.set(y.createContext,n)),n}const Yp=qj(),Kj=()=>{throw new Error("uSES not initialized!")};function Xp(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}var Jp={exports:{}},je={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qe=typeof Symbol=="function"&&Symbol.for,kc=qe?Symbol.for("react.element"):60103,Oc=qe?Symbol.for("react.portal"):60106,Ua=qe?Symbol.for("react.fragment"):60107,Wa=qe?Symbol.for("react.strict_mode"):60108,Ga=qe?Symbol.for("react.profiler"):60114,qa=qe?Symbol.for("react.provider"):60109,Ka=qe?Symbol.for("react.context"):60110,Tc=qe?Symbol.for("react.async_mode"):60111,Ya=qe?Symbol.for("react.concurrent_mode"):60111,Xa=qe?Symbol.for("react.forward_ref"):60112,Ja=qe?Symbol.for("react.suspense"):60113,Yj=qe?Symbol.for("react.suspense_list"):60120,Qa=qe?Symbol.for("react.memo"):60115,ei=qe?Symbol.for("react.lazy"):60116,Xj=qe?Symbol.for("react.block"):60121,Jj=qe?Symbol.for("react.fundamental"):60117,Qj=qe?Symbol.for("react.responder"):60118,e5=qe?Symbol.for("react.scope"):60119;function It(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case kc:switch(e=e.type,e){case Tc:case Ya:case Ua:case Ga:case Wa:case Ja:return e;default:switch(e=e&&e.$$typeof,e){case Ka:case Xa:case ei:case Qa:case qa:return e;default:return t}}case Oc:return t}}}function Qp(e){return It(e)===Ya}je.AsyncMode=Tc;je.ConcurrentMode=Ya;je.ContextConsumer=Ka;je.ContextProvider=qa;je.Element=kc;je.ForwardRef=Xa;je.Fragment=Ua;je.Lazy=ei;je.Memo=Qa;je.Portal=Oc;je.Profiler=Ga;je.StrictMode=Wa;je.Suspense=Ja;je.isAsyncMode=function(e){return Qp(e)||It(e)===Tc};je.isConcurrentMode=Qp;je.isContextConsumer=function(e){return It(e)===Ka};je.isContextProvider=function(e){return It(e)===qa};je.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===kc};je.isForwardRef=function(e){return It(e)===Xa};je.isFragment=function(e){return It(e)===Ua};je.isLazy=function(e){return It(e)===ei};je.isMemo=function(e){return It(e)===Qa};je.isPortal=function(e){return It(e)===Oc};je.isProfiler=function(e){return It(e)===Ga};je.isStrictMode=function(e){return It(e)===Wa};je.isSuspense=function(e){return It(e)===Ja};je.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Ua||e===Ya||e===Ga||e===Wa||e===Ja||e===Yj||typeof e=="object"&&e!==null&&(e.$$typeof===ei||e.$$typeof===Qa||e.$$typeof===qa||e.$$typeof===Ka||e.$$typeof===Xa||e.$$typeof===Jj||e.$$typeof===Qj||e.$$typeof===e5||e.$$typeof===Xj)};je.typeOf=It;Jp.exports=je;var t5=Jp.exports,Fc=t5,n5={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r5={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s5={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},eh={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},_c={};_c[Fc.ForwardRef]=s5;_c[Fc.Memo]=eh;function yf(e){return Fc.isMemo(e)?eh:_c[e.$$typeof]||n5}var o5=Object.defineProperty,a5=Object.getOwnPropertyNames,vf=Object.getOwnPropertySymbols,i5=Object.getOwnPropertyDescriptor,l5=Object.getPrototypeOf,bf=Object.prototype;function th(e,t,n){if(typeof t!="string"){if(bf){var r=l5(t);r&&r!==bf&&th(e,r,n)}var s=a5(t);vf&&(s=s.concat(vf(t)));for(var a=yf(e),i=yf(t),l=0;l<s.length;++l){var c=s[l];if(!r5[c]&&!(n&&n[c])&&!(i&&i[c])&&!(a&&a[c])){var d=i5(t,c);try{o5(e,c,d)}catch{}}}}return e}var c5=th;const wf=uc(c5);var nh={exports:{}},Ne={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pc=Symbol.for("react.element"),Lc=Symbol.for("react.portal"),ti=Symbol.for("react.fragment"),ni=Symbol.for("react.strict_mode"),ri=Symbol.for("react.profiler"),si=Symbol.for("react.provider"),oi=Symbol.for("react.context"),d5=Symbol.for("react.server_context"),ai=Symbol.for("react.forward_ref"),ii=Symbol.for("react.suspense"),li=Symbol.for("react.suspense_list"),ci=Symbol.for("react.memo"),di=Symbol.for("react.lazy"),u5=Symbol.for("react.offscreen"),rh;rh=Symbol.for("react.module.reference");function Pt(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Pc:switch(e=e.type,e){case ti:case ri:case ni:case ii:case li:return e;default:switch(e=e&&e.$$typeof,e){case d5:case oi:case ai:case di:case ci:case si:return e;default:return t}}case Lc:return t}}}Ne.ContextConsumer=oi;Ne.ContextProvider=si;Ne.Element=Pc;Ne.ForwardRef=ai;Ne.Fragment=ti;Ne.Lazy=di;Ne.Memo=ci;Ne.Portal=Lc;Ne.Profiler=ri;Ne.StrictMode=ni;Ne.Suspense=ii;Ne.SuspenseList=li;Ne.isAsyncMode=function(){return!1};Ne.isConcurrentMode=function(){return!1};Ne.isContextConsumer=function(e){return Pt(e)===oi};Ne.isContextProvider=function(e){return Pt(e)===si};Ne.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Pc};Ne.isForwardRef=function(e){return Pt(e)===ai};Ne.isFragment=function(e){return Pt(e)===ti};Ne.isLazy=function(e){return Pt(e)===di};Ne.isMemo=function(e){return Pt(e)===ci};Ne.isPortal=function(e){return Pt(e)===Lc};Ne.isProfiler=function(e){return Pt(e)===ri};Ne.isStrictMode=function(e){return Pt(e)===ni};Ne.isSuspense=function(e){return Pt(e)===ii};Ne.isSuspenseList=function(e){return Pt(e)===li};Ne.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===ti||e===ri||e===ni||e===ii||e===li||e===u5||typeof e=="object"&&e!==null&&(e.$$typeof===di||e.$$typeof===ci||e.$$typeof===si||e.$$typeof===oi||e.$$typeof===ai||e.$$typeof===rh||e.getModuleId!==void 0)};Ne.typeOf=Pt;nh.exports=Ne;var f5=nh.exports;const m5=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function p5(e,t,n,r,{areStatesEqual:s,areOwnPropsEqual:a,areStatePropsEqual:i}){let l=!1,c,d,u,f,m;function p(w,j){return c=w,d=j,u=e(c,d),f=t(r,d),m=n(u,f,d),l=!0,m}function g(){return u=e(c,d),t.dependsOnOwnProps&&(f=t(r,d)),m=n(u,f,d),m}function h(){return e.dependsOnOwnProps&&(u=e(c,d)),t.dependsOnOwnProps&&(f=t(r,d)),m=n(u,f,d),m}function v(){const w=e(c,d),j=!i(w,u);return u=w,j&&(m=n(u,f,d)),m}function b(w,j){const N=!a(j,d),S=!s(w,c,j,d);return c=w,d=j,N&&S?g():N?h():S?v():m}return function(j,N){return l?b(j,N):p(j,N)}}function h5(e,t){let{initMapStateToProps:n,initMapDispatchToProps:r,initMergeProps:s}=t,a=Xp(t,m5);const i=n(e,a),l=r(e,a),c=s(e,a);return p5(i,l,c,e,a)}function g5(e,t){const n={};for(const r in e){const s=e[r];typeof s=="function"&&(n[r]=(...a)=>t(s(...a)))}return n}function kl(e){return function(n){const r=e(n);function s(){return r}return s.dependsOnOwnProps=!1,s}}function jf(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function sh(e,t){return function(r,{displayName:s}){const a=function(l,c){return a.dependsOnOwnProps?a.mapToProps(l,c):a.mapToProps(l,void 0)};return a.dependsOnOwnProps=!0,a.mapToProps=function(l,c){a.mapToProps=e,a.dependsOnOwnProps=jf(e);let d=a(l,c);return typeof d=="function"&&(a.mapToProps=d,a.dependsOnOwnProps=jf(d),d=a(l,c)),d},a}}function $c(e,t){return(n,r)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${r.wrappedComponentName}.`)}}function x5(e){return e&&typeof e=="object"?kl(t=>g5(e,t)):e?typeof e=="function"?sh(e):$c(e,"mapDispatchToProps"):kl(t=>({dispatch:t}))}function y5(e){return e?typeof e=="function"?sh(e):$c(e,"mapStateToProps"):kl(()=>({}))}function v5(e,t,n){return Or({},n,e,t)}function b5(e){return function(n,{displayName:r,areMergedPropsEqual:s}){let a=!1,i;return function(c,d,u){const f=e(c,d,u);return a?s(f,i)||(i=f):(a=!0,i=f),i}}}function w5(e){return e?typeof e=="function"?b5(e):$c(e,"mergeProps"):()=>v5}function j5(){const e=Gj();let t=null,n=null;return{clear(){t=null,n=null},notify(){e(()=>{let r=t;for(;r;)r.callback(),r=r.next})},get(){let r=[],s=t;for(;s;)r.push(s),s=s.next;return r},subscribe(r){let s=!0,a=n={callback:r,next:null,prev:n};return a.prev?a.prev.next=a:t=a,function(){!s||t===null||(s=!1,a.next?a.next.prev=a.prev:n=a.prev,a.prev?a.prev.next=a.next:t=a.next)}}}}const Nf={notify(){},get:()=>[]};function oh(e,t){let n,r=Nf,s=0,a=!1;function i(h){u();const v=r.subscribe(h);let b=!1;return()=>{b||(b=!0,v(),f())}}function l(){r.notify()}function c(){g.onStateChange&&g.onStateChange()}function d(){return a}function u(){s++,n||(n=t?t.addNestedSub(c):e.subscribe(c),r=j5())}function f(){s--,n&&s===0&&(n(),n=void 0,r.clear(),r=Nf)}function m(){a||(a=!0,u())}function p(){a&&(a=!1,f())}const g={addNestedSub:i,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:d,trySubscribe:m,tryUnsubscribe:p,getListeners:()=>r};return g}const N5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ea=N5?y.useLayoutEffect:y.useEffect;function Ef(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function Ji(e,t){if(Ef(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(!Object.prototype.hasOwnProperty.call(t,n[s])||!Ef(e[n[s]],t[n[s]]))return!1;return!0}const E5=["reactReduxForwardedRef"];let ah=Kj;const S5=e=>{ah=e},C5=[null,null];function I5(e,t,n){ea(()=>e(...t),n)}function A5(e,t,n,r,s,a){e.current=r,n.current=!1,s.current&&(s.current=null,a())}function D5(e,t,n,r,s,a,i,l,c,d,u){if(!e)return()=>{};let f=!1,m=null;const p=()=>{if(f||!l.current)return;const h=t.getState();let v,b;try{v=r(h,s.current)}catch(w){b=w,m=w}b||(m=null),v===a.current?i.current||d():(a.current=v,c.current=v,i.current=!0,u())};return n.onStateChange=p,n.trySubscribe(),p(),()=>{if(f=!0,n.tryUnsubscribe(),n.onStateChange=null,m)throw m}}function M5(e,t){return e===t}function ih(e,t,n,{pure:r,areStatesEqual:s=M5,areOwnPropsEqual:a=Ji,areStatePropsEqual:i=Ji,areMergedPropsEqual:l=Ji,forwardRef:c=!1,context:d=Yp}={}){const u=d,f=y5(e),m=x5(t),p=w5(n),g=!!e;return v=>{const b=v.displayName||v.name||"Component",w=`Connect(${b})`,j={shouldHandleStateChanges:g,displayName:w,wrappedComponentName:b,WrappedComponent:v,initMapStateToProps:f,initMapDispatchToProps:m,initMergeProps:p,areStatesEqual:s,areStatePropsEqual:i,areOwnPropsEqual:a,areMergedPropsEqual:l};function N(I){const[A,M,O]=y.useMemo(()=>{const{reactReduxForwardedRef:W}=I,ne=Xp(I,E5);return[I.context,W,ne]},[I]),L=y.useMemo(()=>A&&A.Consumer&&f5.isContextConsumer(y.createElement(A.Consumer,null))?A:u,[A,u]),$=y.useContext(L),P=!!I.store&&!!I.store.getState&&!!I.store.dispatch,C=!!$&&!!$.store,T=P?I.store:$.store,D=C?$.getServerState:T.getState,_=y.useMemo(()=>h5(T.dispatch,j),[T]),[F,k]=y.useMemo(()=>{if(!g)return C5;const W=oh(T,P?void 0:$.subscription),ne=W.notifyNestedSubs.bind(W);return[W,ne]},[T,P,$]),R=y.useMemo(()=>P?$:Or({},$,{subscription:F}),[P,$,F]),H=y.useRef(),B=y.useRef(O),G=y.useRef(),z=y.useRef(!1);y.useRef(!1);const Z=y.useRef(!1),q=y.useRef();ea(()=>(Z.current=!0,()=>{Z.current=!1}),[]);const V=y.useMemo(()=>()=>G.current&&O===B.current?G.current:_(T.getState(),O),[T,O]),U=y.useMemo(()=>ne=>F?D5(g,T,F,_,B,H,z,Z,G,k,ne):()=>{},[F]);I5(A5,[B,H,z,O,G,k]);let Q;try{Q=ah(U,V,D?()=>_(D(),O):V)}catch(W){throw q.current&&(W.message+=`
The error may be correlated with this previous error:
${q.current.stack}

`),W}ea(()=>{q.current=void 0,G.current=void 0,H.current=Q});const K=y.useMemo(()=>y.createElement(v,Or({},Q,{ref:M})),[M,v,Q]);return y.useMemo(()=>g?y.createElement(L.Provider,{value:R},K):K,[L,K,R])}const E=y.memo(N);if(E.WrappedComponent=v,E.displayName=N.displayName=w,c){const A=y.forwardRef(function(O,L){return y.createElement(E,Or({},O,{reactReduxForwardedRef:L}))});return A.displayName=w,A.WrappedComponent=v,wf(A,v)}return wf(E,v)}}function k5({store:e,context:t,children:n,serverState:r,stabilityCheck:s="once",noopCheck:a="once"}){const i=y.useMemo(()=>{const d=oh(e);return{store:e,subscription:d,getServerState:r?()=>r:void 0,stabilityCheck:s,noopCheck:a}},[e,r,s,a]),l=y.useMemo(()=>e.getState(),[e]);ea(()=>{const{subscription:d}=i;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),l!==e.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[i,l]);const c=t||Yp;return y.createElement(c.Provider,{value:i},n)}S5(mv.useSyncExternalStore);Wj(mn.unstable_batchedUpdates);function O5(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function lh(e,t){var n=y.useState(function(){return{inputs:t,result:e()}})[0],r=y.useRef(!0),s=y.useRef(n),a=r.current||!!(t&&s.current.inputs&&O5(t,s.current.inputs)),i=a?s.current:{inputs:t,result:e()};return y.useEffect(function(){r.current=!1,s.current=i},[i]),i.result}function T5(e,t){return lh(function(){return e},t)}var ge=lh,se=T5,F5="Invariant failed";function _5(e,t){throw new Error(F5)}var Vt=function(t){var n=t.top,r=t.right,s=t.bottom,a=t.left,i=r-a,l=s-n,c={top:n,right:r,bottom:s,left:a,width:i,height:l,x:a,y:n,center:{x:(r+a)/2,y:(s+n)/2}};return c},Rc=function(t,n){return{top:t.top-n.top,left:t.left-n.left,bottom:t.bottom+n.bottom,right:t.right+n.right}},Sf=function(t,n){return{top:t.top+n.top,left:t.left+n.left,bottom:t.bottom-n.bottom,right:t.right-n.right}},P5=function(t,n){return{top:t.top+n.y,left:t.left+n.x,bottom:t.bottom+n.y,right:t.right+n.x}},Qi={top:0,right:0,bottom:0,left:0},Vc=function(t){var n=t.borderBox,r=t.margin,s=r===void 0?Qi:r,a=t.border,i=a===void 0?Qi:a,l=t.padding,c=l===void 0?Qi:l,d=Vt(Rc(n,s)),u=Vt(Sf(n,i)),f=Vt(Sf(u,c));return{marginBox:d,borderBox:Vt(n),paddingBox:u,contentBox:f,margin:s,border:i,padding:c}},At=function(t){var n=t.slice(0,-2),r=t.slice(-2);if(r!=="px")return 0;var s=Number(n);return isNaN(s)&&_5(),s},L5=function(){return{x:window.pageXOffset,y:window.pageYOffset}},ta=function(t,n){var r=t.borderBox,s=t.border,a=t.margin,i=t.padding,l=P5(r,n);return Vc({borderBox:l,border:s,margin:a,padding:i})},na=function(t,n){return n===void 0&&(n=L5()),ta(t,n)},ch=function(t,n){var r={top:At(n.marginTop),right:At(n.marginRight),bottom:At(n.marginBottom),left:At(n.marginLeft)},s={top:At(n.paddingTop),right:At(n.paddingRight),bottom:At(n.paddingBottom),left:At(n.paddingLeft)},a={top:At(n.borderTopWidth),right:At(n.borderRightWidth),bottom:At(n.borderBottomWidth),left:At(n.borderLeftWidth)};return Vc({borderBox:t,margin:r,padding:s,border:a})},dh=function(t){var n=t.getBoundingClientRect(),r=window.getComputedStyle(t);return ch(n,r)},Cf=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function $5(e,t){return!!(e===t||Cf(e)&&Cf(t))}function R5(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!$5(e[n],t[n]))return!1;return!0}function We(e,t){t===void 0&&(t=R5);var n=null;function r(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];if(n&&n.lastThis===this&&t(s,n.lastArgs))return n.lastResult;var i=e.apply(this,s);return n={lastResult:i,lastArgs:s,lastThis:this},i}return r.clear=function(){n=null},r}var Vs=function(t){var n=[],r=null,s=function(){for(var i=arguments.length,l=new Array(i),c=0;c<i;c++)l[c]=arguments[c];n=l,!r&&(r=requestAnimationFrame(function(){r=null,t.apply(void 0,n)}))};return s.cancel=function(){r&&(cancelAnimationFrame(r),r=null)},s};function uh(e,t){}uh.bind(null,"warn");uh.bind(null,"error");function Fn(){}function V5(e,t){return{...e,...t}}function Mt(e,t,n){const r=t.map(s=>{const a=V5(n,s.options);return e.addEventListener(s.eventName,s.fn,a),function(){e.removeEventListener(s.eventName,s.fn,a)}});return function(){r.forEach(a=>{a()})}}const B5="Invariant failed";class ra extends Error{}ra.prototype.toString=function(){return this.message};function Y(e,t){throw new ra(B5)}class z5 extends x.Component{constructor(...t){super(...t),this.callbacks=null,this.unbind=Fn,this.onWindowError=n=>{const r=this.getCallbacks();r.isDragging()&&r.tryAbort(),n.error instanceof ra&&n.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=n=>{this.callbacks=n}}componentDidMount(){this.unbind=Mt(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(t){if(t instanceof ra){this.setState({});return}throw t}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const H5=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,sa=e=>e+1,Z5=e=>`
  You have lifted an item in position ${sa(e.source.index)}
`,fh=(e,t)=>{const n=e.droppableId===t.droppableId,r=sa(e.index),s=sa(t.index);return n?`
      You have moved the item from position ${r}
      to position ${s}
    `:`
    You have moved the item from position ${r}
    in list ${e.droppableId}
    to list ${t.droppableId}
    in position ${s}
  `},mh=(e,t,n)=>t.droppableId===n.droppableId?`
      The item ${e}
      has been combined with ${n.draggableId}`:`
      The item ${e}
      in list ${t.droppableId}
      has been combined with ${n.draggableId}
      in list ${n.droppableId}
    `,U5=e=>{const t=e.destination;if(t)return fh(e.source,t);const n=e.combine;return n?mh(e.draggableId,e.source,n):"You are over an area that cannot be dropped on"},If=e=>`
  The item has returned to its starting position
  of ${sa(e.index)}
`,W5=e=>{if(e.reason==="CANCEL")return`
      Movement cancelled.
      ${If(e.source)}
    `;const t=e.destination,n=e.combine;return t?`
      You have dropped the item.
      ${fh(e.source,t)}
    `:n?`
      You have dropped the item.
      ${mh(e.draggableId,e.source,n)}
    `:`
    The item has been dropped while not over a drop area.
    ${If(e.source)}
  `},G5={dragHandleUsageInstructions:H5,onDragStart:Z5,onDragUpdate:U5,onDragEnd:W5};var Zo=G5;const Ge={x:0,y:0},Je=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),wt=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),_n=(e,t)=>e.x===t.x&&e.y===t.y,ts=e=>({x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}),dr=(e,t,n=0)=>e==="x"?{x:t,y:n}:{x:n,y:t},Bs=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),Af=(e,t)=>Math.min(...t.map(n=>Bs(e,n))),ph=e=>t=>({x:e(t.x),y:e(t.y)});var q5=(e,t)=>{const n=Vt({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n};const go=(e,t)=>({top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}),Df=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],K5={top:0,right:0,bottom:0,left:0},Y5=(e,t)=>t?go(e,t.scroll.diff.displacement):e,X5=(e,t,n)=>n&&n.increasedBy?{...e,[t.end]:e[t.end]+n.increasedBy[t.line]}:e,J5=(e,t)=>t&&t.shouldClipSubject?q5(t.pageMarginBox,e):Vt(e);var $r=({page:e,withPlaceholder:t,axis:n,frame:r})=>{const s=Y5(e.marginBox,r),a=X5(s,n,t),i=J5(a,r);return{page:e,withPlaceholder:t,active:i}},Bc=(e,t)=>{e.frame||Y();const n=e.frame,r=wt(t,n.scroll.initial),s=ts(r),a={...n,scroll:{initial:n.scroll.initial,current:t,diff:{value:r,displacement:s},max:n.scroll.max}},i=$r({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:a});return{...e,frame:a,subject:i}};const hh=We(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),gh=We(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),ui=We(e=>Object.values(e)),Q5=We(e=>Object.values(e));var ns=We((e,t)=>Q5(t).filter(r=>e===r.descriptor.droppableId).sort((r,s)=>r.descriptor.index-s.descriptor.index));function zc(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function fi(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var mi=We((e,t)=>t.filter(n=>n.descriptor.id!==e.descriptor.id)),eN=({isMovingForward:e,draggable:t,destination:n,insideDestination:r,previousImpact:s})=>{if(!n.isCombineEnabled||!zc(s))return null;function i(p){const g={type:"COMBINE",combine:{draggableId:p,droppableId:n.descriptor.id}};return{...s,at:g}}const l=s.displaced.all,c=l.length?l[0]:null;if(e)return c?i(c):null;const d=mi(t,r);if(!c){if(!d.length)return null;const p=d[d.length-1];return i(p.descriptor.id)}const u=d.findIndex(p=>p.descriptor.id===c);u===-1&&Y();const f=u-1;if(f<0)return null;const m=d[f];return i(m.descriptor.id)},rs=(e,t)=>e.descriptor.droppableId===t.descriptor.id;const xh={point:Ge,value:0},zs={invisible:{},visible:{},all:[]},tN={displaced:zs,displacedBy:xh,at:null};var nN=tN,kt=(e,t)=>n=>e<=n&&n<=t,yh=e=>{const t=kt(e.top,e.bottom),n=kt(e.left,e.right);return r=>{if(t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right))return!0;const a=t(r.top)||t(r.bottom),i=n(r.left)||n(r.right);if(a&&i)return!0;const c=r.top<e.top&&r.bottom>e.bottom,d=r.left<e.left&&r.right>e.right;return c&&d?!0:c&&i||d&&a}},rN=e=>{const t=kt(e.top,e.bottom),n=kt(e.left,e.right);return r=>t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right)};const Hc={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},vh={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var sN=e=>t=>{const n=kt(t.top,t.bottom),r=kt(t.left,t.right);return s=>e===Hc?n(s.top)&&n(s.bottom):r(s.left)&&r(s.right)};const oN=(e,t)=>{const n=t.frame?t.frame.scroll.diff.displacement:Ge;return go(e,n)},aN=(e,t,n)=>t.subject.active?n(t.subject.active)(e):!1,iN=(e,t,n)=>n(t)(e),Zc=({target:e,destination:t,viewport:n,withDroppableDisplacement:r,isVisibleThroughFrameFn:s})=>{const a=r?oN(e,t):e;return aN(a,t,s)&&iN(a,n,s)},lN=e=>Zc({...e,isVisibleThroughFrameFn:yh}),bh=e=>Zc({...e,isVisibleThroughFrameFn:rN}),cN=e=>Zc({...e,isVisibleThroughFrameFn:sN(e.destination.axis)}),dN=(e,t,n)=>{if(typeof n=="boolean")return n;if(!t)return!0;const{invisible:r,visible:s}=t;if(r[e])return!1;const a=s[e];return a?a.shouldAnimate:!0};function uN(e,t){const n=e.page.marginBox,r={top:t.point.y,right:0,bottom:0,left:t.point.x};return Vt(Rc(n,r))}function Hs({afterDragging:e,destination:t,displacedBy:n,viewport:r,forceShouldAnimate:s,last:a}){return e.reduce(function(l,c){const d=uN(c,n),u=c.descriptor.id;if(l.all.push(u),!lN({target:d,destination:t,viewport:r,withDroppableDisplacement:!0}))return l.invisible[c.descriptor.id]=!0,l;const m=dN(u,a,s),p={draggableId:u,shouldAnimate:m};return l.visible[u]=p,l},{all:[],visible:{},invisible:{}})}function fN(e,t){if(!e.length)return 0;const n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}function Mf({insideDestination:e,inHomeList:t,displacedBy:n,destination:r}){const s=fN(e,{inHomeList:t});return{displaced:zs,displacedBy:n,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:s}}}}function oa({draggable:e,insideDestination:t,destination:n,viewport:r,displacedBy:s,last:a,index:i,forceShouldAnimate:l}){const c=rs(e,n);if(i==null)return Mf({insideDestination:t,inHomeList:c,displacedBy:s,destination:n});const d=t.find(g=>g.descriptor.index===i);if(!d)return Mf({insideDestination:t,inHomeList:c,displacedBy:s,destination:n});const u=mi(e,t),f=t.indexOf(d),m=u.slice(f);return{displaced:Hs({afterDragging:m,destination:n,displacedBy:s,last:a,viewport:r.frame,forceShouldAnimate:l}),displacedBy:s,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:i}}}}function Rn(e,t){return!!t.effected[e]}var mN=({isMovingForward:e,destination:t,draggables:n,combine:r,afterCritical:s})=>{if(!t.isCombineEnabled)return null;const a=r.draggableId,l=n[a].descriptor.index;return Rn(a,s)?e?l:l-1:e?l+1:l},pN=({isMovingForward:e,isInHomeList:t,insideDestination:n,location:r})=>{if(!n.length)return null;const s=r.index,a=e?s+1:s-1,i=n[0].descriptor.index,l=n[n.length-1].descriptor.index,c=t?l:l+1;return a<i||a>c?null:a},hN=({isMovingForward:e,isInHomeList:t,draggable:n,draggables:r,destination:s,insideDestination:a,previousImpact:i,viewport:l,afterCritical:c})=>{const d=i.at;if(d||Y(),d.type==="REORDER"){const f=pN({isMovingForward:e,isInHomeList:t,location:d.destination,insideDestination:a});return f==null?null:oa({draggable:n,insideDestination:a,destination:s,viewport:l,last:i.displaced,displacedBy:i.displacedBy,index:f})}const u=mN({isMovingForward:e,destination:s,displaced:i.displaced,draggables:r,combine:d.combine,afterCritical:c});return u==null?null:oa({draggable:n,insideDestination:a,destination:s,viewport:l,last:i.displaced,displacedBy:i.displacedBy,index:u})},gN=({displaced:e,afterCritical:t,combineWith:n,displacedBy:r})=>{const s=!!(e.visible[n]||e.invisible[n]);return Rn(n,t)?s?Ge:ts(r.point):s?r.point:Ge},xN=({afterCritical:e,impact:t,draggables:n})=>{const r=fi(t);r||Y();const s=r.draggableId,a=n[s].page.borderBox.center,i=gN({displaced:t.displaced,afterCritical:e,combineWith:s,displacedBy:t.displacedBy});return Je(a,i)};const wh=(e,t)=>t.margin[e.start]+t.borderBox[e.size]/2,yN=(e,t)=>t.margin[e.end]+t.borderBox[e.size]/2,Uc=(e,t,n)=>t[e.crossAxisStart]+n.margin[e.crossAxisStart]+n.borderBox[e.crossAxisSize]/2,kf=({axis:e,moveRelativeTo:t,isMoving:n})=>dr(e.line,t.marginBox[e.end]+wh(e,n),Uc(e,t.marginBox,n)),Of=({axis:e,moveRelativeTo:t,isMoving:n})=>dr(e.line,t.marginBox[e.start]-yN(e,n),Uc(e,t.marginBox,n)),vN=({axis:e,moveInto:t,isMoving:n})=>dr(e.line,t.contentBox[e.start]+wh(e,n),Uc(e,t.contentBox,n));var bN=({impact:e,draggable:t,draggables:n,droppable:r,afterCritical:s})=>{const a=ns(r.descriptor.id,n),i=t.page,l=r.axis;if(!a.length)return vN({axis:l,moveInto:r.page,isMoving:i});const{displaced:c,displacedBy:d}=e,u=c.all[0];if(u){const m=n[u];if(Rn(u,s))return Of({axis:l,moveRelativeTo:m.page,isMoving:i});const p=ta(m.page,d.point);return Of({axis:l,moveRelativeTo:p,isMoving:i})}const f=a[a.length-1];if(f.descriptor.id===t.descriptor.id)return i.borderBox.center;if(Rn(f.descriptor.id,s)){const m=ta(f.page,ts(s.displacedBy.point));return kf({axis:l,moveRelativeTo:m,isMoving:i})}return kf({axis:l,moveRelativeTo:f.page,isMoving:i})},Ol=(e,t)=>{const n=e.frame;return n?Je(t,n.scroll.diff.displacement):t};const wN=({impact:e,draggable:t,droppable:n,draggables:r,afterCritical:s})=>{const a=t.page.borderBox.center,i=e.at;return!n||!i?a:i.type==="REORDER"?bN({impact:e,draggable:t,draggables:r,droppable:n,afterCritical:s}):xN({impact:e,draggables:r,afterCritical:s})};var pi=e=>{const t=wN(e),n=e.droppable;return n?Ol(n,t):t},jh=(e,t)=>{const n=wt(t,e.scroll.initial),r=ts(n);return{frame:Vt({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:r}}}};function Tf(e,t){return e.map(n=>t[n])}function jN(e,t){for(let n=0;n<t.length;n++){const r=t[n].visible[e];if(r)return r}return null}var NN=({impact:e,viewport:t,destination:n,draggables:r,maxScrollChange:s})=>{const a=jh(t,Je(t.scroll.current,s)),i=n.frame?Bc(n,Je(n.frame.scroll.current,s)):n,l=e.displaced,c=Hs({afterDragging:Tf(l.all,r),destination:n,displacedBy:e.displacedBy,viewport:a.frame,last:l,forceShouldAnimate:!1}),d=Hs({afterDragging:Tf(l.all,r),destination:i,displacedBy:e.displacedBy,viewport:t.frame,last:l,forceShouldAnimate:!1}),u={},f={},m=[l,c,d];return l.all.forEach(g=>{const h=jN(g,m);if(h){f[g]=h;return}u[g]=!0}),{...e,displaced:{all:l.all,invisible:u,visible:f}}},EN=(e,t)=>Je(e.scroll.diff.displacement,t),Wc=({pageBorderBoxCenter:e,draggable:t,viewport:n})=>{const r=EN(n,e),s=wt(r,t.page.borderBox.center);return Je(t.client.borderBox.center,s)},Nh=({draggable:e,destination:t,newPageBorderBoxCenter:n,viewport:r,withDroppableDisplacement:s,onlyOnMainAxis:a=!1})=>{const i=wt(n,e.page.borderBox.center),c={target:go(e.page.borderBox,i),destination:t,withDroppableDisplacement:s,viewport:r};return a?cN(c):bh(c)},SN=({isMovingForward:e,draggable:t,destination:n,draggables:r,previousImpact:s,viewport:a,previousPageBorderBoxCenter:i,previousClientSelection:l,afterCritical:c})=>{if(!n.isEnabled)return null;const d=ns(n.descriptor.id,r),u=rs(t,n),f=eN({isMovingForward:e,draggable:t,destination:n,insideDestination:d,previousImpact:s})||hN({isMovingForward:e,isInHomeList:u,draggable:t,draggables:r,destination:n,insideDestination:d,previousImpact:s,viewport:a,afterCritical:c});if(!f)return null;const m=pi({impact:f,draggable:t,droppable:n,draggables:r,afterCritical:c});if(Nh({draggable:t,destination:n,newPageBorderBoxCenter:m,viewport:a.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:Wc({pageBorderBoxCenter:m,draggable:t,viewport:a}),impact:f,scrollJumpRequest:null};const g=wt(m,i),h=NN({impact:f,viewport:a,destination:n,draggables:r,maxScrollChange:g});return{clientSelection:l,impact:h,scrollJumpRequest:g}};const ct=e=>{const t=e.subject.active;return t||Y(),t};var CN=({isMovingForward:e,pageBorderBoxCenter:t,source:n,droppables:r,viewport:s})=>{const a=n.subject.active;if(!a)return null;const i=n.axis,l=kt(a[i.start],a[i.end]),c=ui(r).filter(u=>u!==n).filter(u=>u.isEnabled).filter(u=>!!u.subject.active).filter(u=>yh(s.frame)(ct(u))).filter(u=>{const f=ct(u);return e?a[i.crossAxisEnd]<f[i.crossAxisEnd]:f[i.crossAxisStart]<a[i.crossAxisStart]}).filter(u=>{const f=ct(u),m=kt(f[i.start],f[i.end]);return l(f[i.start])||l(f[i.end])||m(a[i.start])||m(a[i.end])}).sort((u,f)=>{const m=ct(u)[i.crossAxisStart],p=ct(f)[i.crossAxisStart];return e?m-p:p-m}).filter((u,f,m)=>ct(u)[i.crossAxisStart]===ct(m[0])[i.crossAxisStart]);if(!c.length)return null;if(c.length===1)return c[0];const d=c.filter(u=>kt(ct(u)[i.start],ct(u)[i.end])(t[i.line]));return d.length===1?d[0]:d.length>1?d.sort((u,f)=>ct(u)[i.start]-ct(f)[i.start])[0]:c.sort((u,f)=>{const m=Af(t,Df(ct(u))),p=Af(t,Df(ct(f)));return m!==p?m-p:ct(u)[i.start]-ct(f)[i.start]})[0]};const Ff=(e,t)=>{const n=e.page.borderBox.center;return Rn(e.descriptor.id,t)?wt(n,t.displacedBy.point):n},IN=(e,t)=>{const n=e.page.borderBox;return Rn(e.descriptor.id,t)?go(n,ts(t.displacedBy.point)):n};var AN=({pageBorderBoxCenter:e,viewport:t,destination:n,insideDestination:r,afterCritical:s})=>r.filter(i=>bh({target:IN(i,s),destination:n,viewport:t.frame,withDroppableDisplacement:!0})).sort((i,l)=>{const c=Bs(e,Ol(n,Ff(i,s))),d=Bs(e,Ol(n,Ff(l,s)));return c<d?-1:d<c?1:i.descriptor.index-l.descriptor.index})[0]||null,xo=We(function(t,n){const r=n[t.line];return{value:r,point:dr(t.line,r)}});const DN=(e,t,n)=>{const r=e.axis;if(e.descriptor.mode==="virtual")return dr(r.line,t[r.line]);const s=e.subject.page.contentBox[r.size],c=ns(e.descriptor.id,n).reduce((d,u)=>d+u.client.marginBox[r.size],0)+t[r.line]-s;return c<=0?null:dr(r.line,c)},Eh=(e,t)=>({...e,scroll:{...e.scroll,max:t}}),Sh=(e,t,n)=>{const r=e.frame;rs(t,e)&&Y(),e.subject.withPlaceholder&&Y();const s=xo(e.axis,t.displaceBy).point,a=DN(e,s,n),i={placeholderSize:s,increasedBy:a,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!r){const u=$r({page:e.subject.page,withPlaceholder:i,axis:e.axis,frame:e.frame});return{...e,subject:u}}const l=a?Je(r.scroll.max,a):r.scroll.max,c=Eh(r,l),d=$r({page:e.subject.page,withPlaceholder:i,axis:e.axis,frame:c});return{...e,subject:d,frame:c}},MN=e=>{const t=e.subject.withPlaceholder;t||Y();const n=e.frame;if(!n){const i=$r({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:i}}const r=t.oldFrameMaxScroll;r||Y();const s=Eh(n,r),a=$r({page:e.subject.page,axis:e.axis,frame:s,withPlaceholder:null});return{...e,subject:a,frame:s}};var kN=({previousPageBorderBoxCenter:e,moveRelativeTo:t,insideDestination:n,draggable:r,draggables:s,destination:a,viewport:i,afterCritical:l})=>{if(!t){if(n.length)return null;const f={displaced:zs,displacedBy:xh,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:0}}},m=pi({impact:f,draggable:r,droppable:a,draggables:s,afterCritical:l}),p=rs(r,a)?a:Sh(a,r,s);return Nh({draggable:r,destination:p,newPageBorderBoxCenter:m,viewport:i.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?f:null}const c=e[a.axis.line]<=t.page.borderBox.center[a.axis.line],d=(()=>{const f=t.descriptor.index;return t.descriptor.id===r.descriptor.id||c?f:f+1})(),u=xo(a.axis,r.displaceBy);return oa({draggable:r,insideDestination:n,destination:a,viewport:i,displacedBy:u,last:zs,index:d})},ON=({isMovingForward:e,previousPageBorderBoxCenter:t,draggable:n,isOver:r,draggables:s,droppables:a,viewport:i,afterCritical:l})=>{const c=CN({isMovingForward:e,pageBorderBoxCenter:t,source:r,droppables:a,viewport:i});if(!c)return null;const d=ns(c.descriptor.id,s),u=AN({pageBorderBoxCenter:t,viewport:i,destination:c,insideDestination:d,afterCritical:l}),f=kN({previousPageBorderBoxCenter:t,destination:c,draggable:n,draggables:s,moveRelativeTo:u,insideDestination:d,viewport:i,afterCritical:l});if(!f)return null;const m=pi({impact:f,draggable:n,droppable:c,draggables:s,afterCritical:l});return{clientSelection:Wc({pageBorderBoxCenter:m,draggable:n,viewport:i}),impact:f,scrollJumpRequest:null}},jt=e=>{const t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null};const TN=(e,t)=>{const n=jt(e);return n?t[n]:null};var FN=({state:e,type:t})=>{const n=TN(e.impact,e.dimensions.droppables),r=!!n,s=e.dimensions.droppables[e.critical.droppable.id],a=n||s,i=a.axis.direction,l=i==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||i==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(l&&!r)return null;const c=t==="MOVE_DOWN"||t==="MOVE_RIGHT",d=e.dimensions.draggables[e.critical.draggable.id],u=e.current.page.borderBoxCenter,{draggables:f,droppables:m}=e.dimensions;return l?SN({isMovingForward:c,previousPageBorderBoxCenter:u,draggable:d,destination:a,draggables:f,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):ON({isMovingForward:c,previousPageBorderBoxCenter:u,draggable:d,isOver:a,draggables:f,droppables:m,viewport:e.viewport,afterCritical:e.afterCritical})};function nr(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function Ch(e){const t=kt(e.top,e.bottom),n=kt(e.left,e.right);return function(s){return t(s.y)&&n(s.x)}}function _N(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function PN({pageBorderBox:e,draggable:t,candidates:n}){const r=t.page.borderBox.center,s=n.map(a=>{const i=a.axis,l=dr(a.axis.line,e.center[i.line],a.page.borderBox.center[i.crossAxisLine]);return{id:a.descriptor.id,distance:Bs(r,l)}}).sort((a,i)=>i.distance-a.distance);return s[0]?s[0].id:null}function LN({pageBorderBox:e,draggable:t,droppables:n}){const r=ui(n).filter(s=>{if(!s.isEnabled)return!1;const a=s.subject.active;if(!a||!_N(e,a))return!1;if(Ch(a)(e.center))return!0;const i=s.axis,l=a.center[i.crossAxisLine],c=e[i.crossAxisStart],d=e[i.crossAxisEnd],u=kt(a[i.crossAxisStart],a[i.crossAxisEnd]),f=u(c),m=u(d);return!f&&!m?!0:f?c<l:d>l});return r.length?r.length===1?r[0].descriptor.id:PN({pageBorderBox:e,draggable:t,candidates:r}):null}const Ih=(e,t)=>Vt(go(e,t));var $N=(e,t)=>{const n=e.frame;return n?Ih(t,n.scroll.diff.value):t};function Ah({displaced:e,id:t}){return!!(e.visible[t]||e.invisible[t])}function RN({draggable:e,closest:t,inHomeList:n}){return t?n&&t.descriptor.index>e.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var VN=({pageBorderBoxWithDroppableScroll:e,draggable:t,destination:n,insideDestination:r,last:s,viewport:a,afterCritical:i})=>{const l=n.axis,c=xo(n.axis,t.displaceBy),d=c.value,u=e[l.start],f=e[l.end],p=mi(t,r).find(h=>{const v=h.descriptor.id,b=h.page.borderBox.center[l.line],w=Rn(v,i),j=Ah({displaced:s,id:v});return w?j?f<=b:u<b-d:j?f<=b+d:u<b})||null,g=RN({draggable:t,closest:p,inHomeList:rs(t,n)});return oa({draggable:t,insideDestination:r,destination:n,viewport:a,last:s,displacedBy:c,index:g})};const BN=4;var zN=({draggable:e,pageBorderBoxWithDroppableScroll:t,previousImpact:n,destination:r,insideDestination:s,afterCritical:a})=>{if(!r.isCombineEnabled)return null;const i=r.axis,l=xo(r.axis,e.displaceBy),c=l.value,d=t[i.start],u=t[i.end],m=mi(e,s).find(g=>{const h=g.descriptor.id,v=g.page.borderBox,w=v[i.size]/BN,j=Rn(h,a),N=Ah({displaced:n.displaced,id:h});return j?N?u>v[i.start]+w&&u<v[i.end]-w:d>v[i.start]-c+w&&d<v[i.end]-c-w:N?u>v[i.start]+c+w&&u<v[i.end]+c-w:d>v[i.start]+w&&d<v[i.end]-w});return m?{displacedBy:l,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:m.descriptor.id,droppableId:r.descriptor.id}}}:null},Dh=({pageOffset:e,draggable:t,draggables:n,droppables:r,previousImpact:s,viewport:a,afterCritical:i})=>{const l=Ih(t.page.borderBox,e),c=LN({pageBorderBox:l,draggable:t,droppables:r});if(!c)return nN;const d=r[c],u=ns(d.descriptor.id,n),f=$N(d,l);return zN({pageBorderBoxWithDroppableScroll:f,draggable:t,previousImpact:s,destination:d,insideDestination:u,afterCritical:i})||VN({pageBorderBoxWithDroppableScroll:f,draggable:t,destination:d,insideDestination:u,last:s.displaced,viewport:a,afterCritical:i})},Gc=(e,t)=>({...e,[t.descriptor.id]:t});const HN=({previousImpact:e,impact:t,droppables:n})=>{const r=jt(e),s=jt(t);if(!r||r===s)return n;const a=n[r];if(!a.subject.withPlaceholder)return n;const i=MN(a);return Gc(n,i)};var ZN=({draggable:e,draggables:t,droppables:n,previousImpact:r,impact:s})=>{const a=HN({previousImpact:r,impact:s,droppables:n}),i=jt(s);if(!i)return a;const l=n[i];if(rs(e,l)||l.subject.withPlaceholder)return a;const c=Sh(l,e,t);return Gc(a,c)},Ts=({state:e,clientSelection:t,dimensions:n,viewport:r,impact:s,scrollJumpRequest:a})=>{const i=r||e.viewport,l=n||e.dimensions,c=t||e.current.client.selection,d=wt(c,e.initial.client.selection),u={offset:d,selection:c,borderBoxCenter:Je(e.initial.client.borderBoxCenter,d)},f={selection:Je(u.selection,i.scroll.current),borderBoxCenter:Je(u.borderBoxCenter,i.scroll.current),offset:Je(u.offset,i.scroll.diff.value)},m={client:u,page:f};if(e.phase==="COLLECTING")return{...e,dimensions:l,viewport:i,current:m};const p=l.draggables[e.critical.draggable.id],g=s||Dh({pageOffset:f.offset,draggable:p,draggables:l.draggables,droppables:l.droppables,previousImpact:e.impact,viewport:i,afterCritical:e.afterCritical}),h=ZN({draggable:p,impact:g,previousImpact:e.impact,draggables:l.draggables,droppables:l.droppables});return{...e,current:m,dimensions:{draggables:l.draggables,droppables:h},impact:g,viewport:i,scrollJumpRequest:a||null,forceShouldAnimate:a?!1:null}};function UN(e,t){return e.map(n=>t[n])}var Mh=({impact:e,viewport:t,draggables:n,destination:r,forceShouldAnimate:s})=>{const a=e.displaced,i=UN(a.all,n),l=Hs({afterDragging:i,destination:r,displacedBy:e.displacedBy,viewport:t.frame,forceShouldAnimate:s,last:a});return{...e,displaced:l}},kh=({impact:e,draggable:t,droppable:n,draggables:r,viewport:s,afterCritical:a})=>{const i=pi({impact:e,draggable:t,draggables:r,droppable:n,afterCritical:a});return Wc({pageBorderBoxCenter:i,draggable:t,viewport:s})},Oh=({state:e,dimensions:t,viewport:n})=>{e.movementMode!=="SNAP"&&Y();const r=e.impact,s=n||e.viewport,a=t||e.dimensions,{draggables:i,droppables:l}=a,c=i[e.critical.draggable.id],d=jt(r);d||Y();const u=l[d],f=Mh({impact:r,viewport:s,destination:u,draggables:i}),m=kh({impact:f,draggable:c,droppable:u,draggables:i,viewport:s,afterCritical:e.afterCritical});return Ts({impact:f,clientSelection:m,state:e,dimensions:a,viewport:s})},WN=e=>({index:e.index,droppableId:e.droppableId}),Th=({draggable:e,home:t,draggables:n,viewport:r})=>{const s=xo(t.axis,e.displaceBy),a=ns(t.descriptor.id,n),i=a.indexOf(e);i===-1&&Y();const l=a.slice(i+1),c=l.reduce((m,p)=>(m[p.descriptor.id]=!0,m),{}),d={inVirtualList:t.descriptor.mode==="virtual",displacedBy:s,effected:c};return{impact:{displaced:Hs({afterDragging:l,destination:t,displacedBy:s,last:null,viewport:r.frame,forceShouldAnimate:!1}),displacedBy:s,at:{type:"REORDER",destination:WN(e.descriptor)}},afterCritical:d}},GN=(e,t)=>({draggables:e.draggables,droppables:Gc(e.droppables,t)}),qN=({draggable:e,offset:t,initialWindowScroll:n})=>{const r=ta(e.client,t),s=na(r,n);return{...e,placeholder:{...e.placeholder,client:r},client:r,page:s}},KN=e=>{const t=e.frame;return t||Y(),t},YN=({additions:e,updatedDroppables:t,viewport:n})=>{const r=n.scroll.diff.value;return e.map(s=>{const a=s.descriptor.droppableId,i=t[a],c=KN(i).scroll.diff.value,d=Je(r,c);return qN({draggable:s,offset:d,initialWindowScroll:n.scroll.initial})})},XN=({state:e,published:t})=>{const n=t.modified.map(b=>{const w=e.dimensions.droppables[b.droppableId];return Bc(w,b.scroll)}),r={...e.dimensions.droppables,...hh(n)},s=gh(YN({additions:t.additions,updatedDroppables:r,viewport:e.viewport})),a={...e.dimensions.draggables,...s};t.removals.forEach(b=>{delete a[b]});const i={droppables:r,draggables:a},l=jt(e.impact),c=l?i.droppables[l]:null,d=i.draggables[e.critical.draggable.id],u=i.droppables[e.critical.droppable.id],{impact:f,afterCritical:m}=Th({draggable:d,home:u,draggables:a,viewport:e.viewport}),p=c&&c.isCombineEnabled?e.impact:f,g=Dh({pageOffset:e.current.page.offset,draggable:i.draggables[e.critical.draggable.id],draggables:i.draggables,droppables:i.droppables,previousImpact:p,viewport:e.viewport,afterCritical:m}),h={...e,phase:"DRAGGING",impact:g,onLiftImpact:f,dimensions:i,afterCritical:m,forceShouldAnimate:!1};return e.phase==="COLLECTING"?h:{...h,phase:"DROP_PENDING",reason:e.reason,isWaiting:!1}};const Tl=e=>e.movementMode==="SNAP",el=(e,t,n)=>{const r=GN(e.dimensions,t);return!Tl(e)||n?Ts({state:e,dimensions:r}):Oh({state:e,dimensions:r})};function tl(e){return e.isDragging&&e.movementMode==="SNAP"?{...e,scrollJumpRequest:null}:e}const _f={phase:"IDLE",completed:null,shouldFlush:!1};var JN=(e=_f,t)=>{if(t.type==="FLUSH")return{..._f,shouldFlush:!0};if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&Y();const{critical:n,clientSelection:r,viewport:s,dimensions:a,movementMode:i}=t.payload,l=a.draggables[n.draggable.id],c=a.droppables[n.droppable.id],d={selection:r,borderBoxCenter:l.client.borderBox.center,offset:Ge},u={client:d,page:{selection:Je(d.selection,s.scroll.initial),borderBoxCenter:Je(d.selection,s.scroll.initial),offset:Je(d.selection,s.scroll.diff.value)}},f=ui(a.droppables).every(h=>!h.isFixedOnPage),{impact:m,afterCritical:p}=Th({draggable:l,home:c,draggables:a.draggables,viewport:s});return{phase:"DRAGGING",isDragging:!0,critical:n,movementMode:i,dimensions:a,initial:u,current:u,isWindowScrollAllowed:f,impact:m,afterCritical:p,onLiftImpact:m,viewport:s,scrollJumpRequest:null,forceShouldAnimate:null}}if(t.type==="COLLECTION_STARTING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"?e:(e.phase!=="DRAGGING"&&Y(),{...e,phase:"COLLECTING"});if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||Y(),XN({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;nr(e)||Y();const{client:n}=t.payload;return _n(n,e.current.client.selection)?e:Ts({state:e,clientSelection:n,impact:Tl(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return tl(e);nr(e)||Y();const{id:n,newScroll:r}=t.payload,s=e.dimensions.droppables[n];if(!s)return e;const a=Bc(s,r);return el(e,a,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;nr(e)||Y();const{id:n,isEnabled:r}=t.payload,s=e.dimensions.droppables[n];s||Y(),s.isEnabled===r&&Y();const a={...s,isEnabled:r};return el(e,a,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;nr(e)||Y();const{id:n,isCombineEnabled:r}=t.payload,s=e.dimensions.droppables[n];s||Y(),s.isCombineEnabled===r&&Y();const a={...s,isCombineEnabled:r};return el(e,a,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;nr(e)||Y(),e.isWindowScrollAllowed||Y();const n=t.payload.newScroll;if(_n(e.viewport.scroll.current,n))return tl(e);const r=jh(e.viewport,n);return Tl(e)?Oh({state:e,viewport:r}):Ts({state:e,viewport:r})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!nr(e))return e;const n=t.payload.maxScroll;if(_n(n,e.viewport.scroll.max))return e;const r={...e.viewport,scroll:{...e.viewport.scroll,max:n}};return{...e,viewport:r}}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&Y();const n=FN({state:e,type:t.type});return n?Ts({state:e,impact:n.impact,clientSelection:n.clientSelection,scrollJumpRequest:n.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){const n=t.payload.reason;return e.phase!=="COLLECTING"&&Y(),{...e,phase:"DROP_PENDING",isWaiting:!0,reason:n}}if(t.type==="DROP_ANIMATE"){const{completed:n,dropDuration:r,newHomeClientOffset:s}=t.payload;return e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||Y(),{phase:"DROP_ANIMATING",completed:n,dropDuration:r,newHomeClientOffset:s,dimensions:e.dimensions}}if(t.type==="DROP_COMPLETE"){const{completed:n}=t.payload;return{phase:"IDLE",completed:n,shouldFlush:!1}}return e};const QN=e=>({type:"BEFORE_INITIAL_CAPTURE",payload:e}),eE=e=>({type:"LIFT",payload:e}),tE=e=>({type:"INITIAL_PUBLISH",payload:e}),nE=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),rE=()=>({type:"COLLECTION_STARTING",payload:null}),sE=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),oE=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),aE=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),Fh=e=>({type:"MOVE",payload:e}),iE=e=>({type:"MOVE_BY_WINDOW_SCROLL",payload:e}),lE=e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}),cE=()=>({type:"MOVE_UP",payload:null}),dE=()=>({type:"MOVE_DOWN",payload:null}),uE=()=>({type:"MOVE_RIGHT",payload:null}),fE=()=>({type:"MOVE_LEFT",payload:null}),qc=()=>({type:"FLUSH",payload:null}),mE=e=>({type:"DROP_ANIMATE",payload:e}),Kc=e=>({type:"DROP_COMPLETE",payload:e}),_h=e=>({type:"DROP",payload:e}),pE=e=>({type:"DROP_PENDING",payload:e}),Ph=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var hE=e=>({getState:t,dispatch:n})=>r=>s=>{if(s.type!=="LIFT"){r(s);return}const{id:a,clientSelection:i,movementMode:l}=s.payload,c=t();c.phase==="DROP_ANIMATING"&&n(Kc({completed:c.completed})),t().phase!=="IDLE"&&Y(),n(qc()),n(QN({draggableId:a,movementMode:l}));const u={draggableId:a,scrollOptions:{shouldPublishImmediately:l==="SNAP"}},{critical:f,dimensions:m,viewport:p}=e.startPublishing(u);n(tE({critical:f,dimensions:m,clientSelection:i,movementMode:l,viewport:p}))},gE=e=>()=>t=>n=>{n.type==="INITIAL_PUBLISH"&&e.dragging(),n.type==="DROP_ANIMATE"&&e.dropping(n.payload.completed.result.reason),(n.type==="FLUSH"||n.type==="DROP_COMPLETE")&&e.resting(),t(n)};const Yc={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},Zs={opacity:{drop:0,combining:.7},scale:{drop:.75}},Lh={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Xn=`${Lh.outOfTheWay}s ${Yc.outOfTheWay}`,Fs={fluid:`opacity ${Xn}`,snap:`transform ${Xn}, opacity ${Xn}`,drop:e=>{const t=`${e}s ${Yc.drop}`;return`transform ${t}, opacity ${t}`},outOfTheWay:`transform ${Xn}`,placeholder:`height ${Xn}, width ${Xn}, margin ${Xn}`},Pf=e=>_n(e,Ge)?void 0:`translate(${e.x}px, ${e.y}px)`,Fl={moveTo:Pf,drop:(e,t)=>{const n=Pf(e);if(n)return t?`${n} scale(${Zs.scale.drop})`:n}},{minDropTime:_l,maxDropTime:$h}=Lh,xE=$h-_l,Lf=1500,yE=.6;var vE=({current:e,destination:t,reason:n})=>{const r=Bs(e,t);if(r<=0)return _l;if(r>=Lf)return $h;const s=r/Lf,a=_l+xE*s,i=n==="CANCEL"?a*yE:a;return Number(i.toFixed(2))},bE=({impact:e,draggable:t,dimensions:n,viewport:r,afterCritical:s})=>{const{draggables:a,droppables:i}=n,l=jt(e),c=l?i[l]:null,d=i[t.descriptor.droppableId],u=kh({impact:e,draggable:t,draggables:a,afterCritical:s,droppable:c||d,viewport:r});return wt(u,t.client.borderBox.center)},wE=({draggables:e,reason:t,lastImpact:n,home:r,viewport:s,onLiftImpact:a})=>!n.at||t!=="DROP"?{impact:Mh({draggables:e,impact:a,destination:r,viewport:s,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:n.at.type==="REORDER"?{impact:n,didDropInsideDroppable:!0}:{impact:{...n,displaced:zs},didDropInsideDroppable:!0};const jE=({getState:e,dispatch:t})=>n=>r=>{if(r.type!=="DROP"){n(r);return}const s=e(),a=r.payload.reason;if(s.phase==="COLLECTING"){t(pE({reason:a}));return}if(s.phase==="IDLE")return;s.phase==="DROP_PENDING"&&s.isWaiting&&Y(),s.phase==="DRAGGING"||s.phase==="DROP_PENDING"||Y();const l=s.critical,c=s.dimensions,d=c.draggables[s.critical.draggable.id],{impact:u,didDropInsideDroppable:f}=wE({reason:a,lastImpact:s.impact,afterCritical:s.afterCritical,onLiftImpact:s.onLiftImpact,home:s.dimensions.droppables[s.critical.droppable.id],viewport:s.viewport,draggables:s.dimensions.draggables}),m=f?zc(u):null,p=f?fi(u):null,g={index:l.draggable.index,droppableId:l.droppable.id},h={draggableId:d.descriptor.id,type:d.descriptor.type,source:g,reason:a,mode:s.movementMode,destination:m,combine:p},v=bE({impact:u,draggable:d,dimensions:c,viewport:s.viewport,afterCritical:s.afterCritical}),b={critical:s.critical,afterCritical:s.afterCritical,result:h,impact:u};if(!(!_n(s.current.client.offset,v)||!!h.combine)){t(Kc({completed:b}));return}const j=vE({current:s.current.client.offset,destination:v,reason:a});t(mE({newHomeClientOffset:v,dropDuration:j,completed:b}))};var NE=jE,Rh=()=>({x:window.pageXOffset,y:window.pageYOffset});function EE(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:t=>{t.target!==window&&t.target!==window.document||e()}}}function SE({onWindowScroll:e}){function t(){e(Rh())}const n=Vs(t),r=EE(n);let s=Fn;function a(){return s!==Fn}function i(){a()&&Y(),s=Mt(window,[r])}function l(){a()||Y(),n.cancel(),s(),s=Fn}return{start:i,stop:l,isActive:a}}const CE=e=>e.type==="DROP_COMPLETE"||e.type==="DROP_ANIMATE"||e.type==="FLUSH",IE=e=>{const t=SE({onWindowScroll:n=>{e.dispatch(iE({newScroll:n}))}});return n=>r=>{!t.isActive()&&r.type==="INITIAL_PUBLISH"&&t.start(),t.isActive()&&CE(r)&&t.stop(),n(r)}};var AE=IE,DE=e=>{let t=!1,n=!1;const r=setTimeout(()=>{n=!0}),s=a=>{t||n||(t=!0,e(a),clearTimeout(r))};return s.wasCalled=()=>t,s},ME=()=>{const e=[],t=s=>{const a=e.findIndex(l=>l.timerId===s);a===-1&&Y();const[i]=e.splice(a,1);i.callback()};return{add:s=>{const a=setTimeout(()=>t(a)),i={timerId:a,callback:s};e.push(i)},flush:()=>{if(!e.length)return;const s=[...e];e.length=0,s.forEach(a=>{clearTimeout(a.timerId),a.callback()})}}};const kE=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.droppableId===t.droppableId&&e.index===t.index,OE=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.draggableId===t.draggableId&&e.droppableId===t.droppableId,TE=(e,t)=>{if(e===t)return!0;const n=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,r=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return n&&r},ws=(e,t)=>{t()},ko=(e,t)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t});function nl(e,t,n,r){if(!e){n(r(t));return}const s=DE(n);e(t,{announce:s}),s.wasCalled()||n(r(t))}var FE=(e,t)=>{const n=ME();let r=null;const s=(f,m)=>{r&&Y(),ws("onBeforeCapture",()=>{const p=e().onBeforeCapture;p&&p({draggableId:f,mode:m})})},a=(f,m)=>{r&&Y(),ws("onBeforeDragStart",()=>{const p=e().onBeforeDragStart;p&&p(ko(f,m))})},i=(f,m)=>{r&&Y();const p=ko(f,m);r={mode:m,lastCritical:f,lastLocation:p.source,lastCombine:null},n.add(()=>{ws("onDragStart",()=>nl(e().onDragStart,p,t,Zo.onDragStart))})},l=(f,m)=>{const p=zc(m),g=fi(m);r||Y();const h=!TE(f,r.lastCritical);h&&(r.lastCritical=f);const v=!kE(r.lastLocation,p);v&&(r.lastLocation=p);const b=!OE(r.lastCombine,g);if(b&&(r.lastCombine=g),!h&&!v&&!b)return;const w={...ko(f,r.mode),combine:g,destination:p};n.add(()=>{ws("onDragUpdate",()=>nl(e().onDragUpdate,w,t,Zo.onDragUpdate))})},c=()=>{r||Y(),n.flush()},d=f=>{r||Y(),r=null,ws("onDragEnd",()=>nl(e().onDragEnd,f,t,Zo.onDragEnd))};return{beforeCapture:s,beforeStart:a,start:i,update:l,flush:c,drop:d,abort:()=>{if(!r)return;const f={...ko(r.lastCritical,r.mode),combine:null,destination:null,reason:"CANCEL"};d(f)}}},_E=(e,t)=>{const n=FE(e,t);return r=>s=>a=>{if(a.type==="BEFORE_INITIAL_CAPTURE"){n.beforeCapture(a.payload.draggableId,a.payload.movementMode);return}if(a.type==="INITIAL_PUBLISH"){const l=a.payload.critical;n.beforeStart(l,a.payload.movementMode),s(a),n.start(l,a.payload.movementMode);return}if(a.type==="DROP_COMPLETE"){const l=a.payload.completed.result;n.flush(),s(a),n.drop(l);return}if(s(a),a.type==="FLUSH"){n.abort();return}const i=r.getState();i.phase==="DRAGGING"&&n.update(i.critical,i.impact)}};const PE=e=>t=>n=>{if(n.type!=="DROP_ANIMATION_FINISHED"){t(n);return}const r=e.getState();r.phase!=="DROP_ANIMATING"&&Y(),e.dispatch(Kc({completed:r.completed}))};var LE=PE;const $E=e=>{let t=null,n=null;function r(){n&&(cancelAnimationFrame(n),n=null),t&&(t(),t=null)}return s=>a=>{if((a.type==="FLUSH"||a.type==="DROP_COMPLETE"||a.type==="DROP_ANIMATION_FINISHED")&&r(),s(a),a.type!=="DROP_ANIMATE")return;const i={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){e.getState().phase==="DROP_ANIMATING"&&e.dispatch(Ph())}};n=requestAnimationFrame(()=>{n=null,t=Mt(window,[i])})}};var RE=$E,VE=e=>()=>t=>n=>{(n.type==="DROP_COMPLETE"||n.type==="FLUSH"||n.type==="DROP_ANIMATE")&&e.stopPublishing(),t(n)},BE=e=>{let t=!1;return()=>n=>r=>{if(r.type==="INITIAL_PUBLISH"){t=!0,e.tryRecordFocus(r.payload.critical.draggable.id),n(r),e.tryRestoreFocusRecorded();return}if(n(r),!!t){if(r.type==="FLUSH"){t=!1,e.tryRestoreFocusRecorded();return}if(r.type==="DROP_COMPLETE"){t=!1;const s=r.payload.completed.result;s.combine&&e.tryShiftRecord(s.draggableId,s.combine.draggableId),e.tryRestoreFocusRecorded()}}}};const zE=e=>e.type==="DROP_COMPLETE"||e.type==="DROP_ANIMATE"||e.type==="FLUSH";var HE=e=>t=>n=>r=>{if(zE(r)){e.stop(),n(r);return}if(r.type==="INITIAL_PUBLISH"){n(r);const s=t.getState();s.phase!=="DRAGGING"&&Y(),e.start(s);return}n(r),e.scroll(t.getState())};const ZE=e=>t=>n=>{if(t(n),n.type!=="PUBLISH_WHILE_DRAGGING")return;const r=e.getState();r.phase==="DROP_PENDING"&&(r.isWaiting||e.dispatch(_h({reason:r.reason})))};var UE=ZE;const WE=qp;var GE=({dimensionMarshal:e,focusMarshal:t,styleMarshal:n,getResponders:r,announce:s,autoScroller:a})=>Gp(JN,WE(Zj(gE(n),VE(e),hE(e),NE,LE,RE,UE,HE(a),AE,BE(t),_E(r,s))));const rl=()=>({additions:{},removals:{},modified:{}});function qE({registry:e,callbacks:t}){let n=rl(),r=null;const s=()=>{r||(t.collectionStarting(),r=requestAnimationFrame(()=>{r=null;const{additions:c,removals:d,modified:u}=n,f=Object.keys(c).map(g=>e.draggable.getById(g).getDimension(Ge)).sort((g,h)=>g.descriptor.index-h.descriptor.index),m=Object.keys(u).map(g=>{const v=e.droppable.getById(g).callbacks.getScrollWhileDragging();return{droppableId:g,scroll:v}}),p={additions:f,removals:Object.keys(d),modified:m};n=rl(),t.publish(p)}))};return{add:c=>{const d=c.descriptor.id;n.additions[d]=c,n.modified[c.descriptor.droppableId]=!0,n.removals[d]&&delete n.removals[d],s()},remove:c=>{const d=c.descriptor;n.removals[d.id]=!0,n.modified[d.droppableId]=!0,n.additions[d.id]&&delete n.additions[d.id],s()},stop:()=>{r&&(cancelAnimationFrame(r),r=null,n=rl())}}}var Vh=({scrollHeight:e,scrollWidth:t,height:n,width:r})=>{const s=wt({x:t,y:e},{x:r,y:n});return{x:Math.max(0,s.x),y:Math.max(0,s.y)}},Bh=()=>{const e=document.documentElement;return e||Y(),e},zh=()=>{const e=Bh();return Vh({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},KE=()=>{const e=Rh(),t=zh(),n=e.y,r=e.x,s=Bh(),a=s.clientWidth,i=s.clientHeight,l=r+a,c=n+i;return{frame:Vt({top:n,left:r,right:l,bottom:c}),scroll:{initial:e,current:e,max:t,diff:{value:Ge,displacement:Ge}}}},YE=({critical:e,scrollOptions:t,registry:n})=>{const r=KE(),s=r.scroll.current,a=e.droppable,i=n.droppable.getAllByType(a.type).map(u=>u.callbacks.getDimensionAndWatchScroll(s,t)),l=n.draggable.getAllByType(e.draggable.type).map(u=>u.getDimension(s));return{dimensions:{draggables:gh(l),droppables:hh(i)},critical:e,viewport:r}};function $f(e,t,n){return!(n.descriptor.id===t.id||n.descriptor.type!==t.type||e.droppable.getById(n.descriptor.droppableId).descriptor.mode!=="virtual")}var XE=(e,t)=>{let n=null;const r=qE({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),s=(m,p)=>{e.droppable.exists(m)||Y(),n&&t.updateDroppableIsEnabled({id:m,isEnabled:p})},a=(m,p)=>{n&&(e.droppable.exists(m)||Y(),t.updateDroppableIsCombineEnabled({id:m,isCombineEnabled:p}))},i=(m,p)=>{n&&(e.droppable.exists(m)||Y(),t.updateDroppableScroll({id:m,newScroll:p}))},l=(m,p)=>{n&&e.droppable.getById(m).callbacks.scroll(p)},c=()=>{if(!n)return;r.stop();const m=n.critical.droppable;e.droppable.getAllByType(m.type).forEach(p=>p.callbacks.dragStopped()),n.unsubscribe(),n=null},d=m=>{n||Y();const p=n.critical.draggable;m.type==="ADDITION"&&$f(e,p,m.value)&&r.add(m.value),m.type==="REMOVAL"&&$f(e,p,m.value)&&r.remove(m.value)};return{updateDroppableIsEnabled:s,updateDroppableIsCombineEnabled:a,scrollDroppable:l,updateDroppableScroll:i,startPublishing:m=>{n&&Y();const p=e.draggable.getById(m.draggableId),g=e.droppable.getById(p.descriptor.droppableId),h={draggable:p.descriptor,droppable:g.descriptor},v=e.subscribe(d);return n={critical:h,unsubscribe:v},YE({critical:h,registry:e,scrollOptions:m.scrollOptions})},stopPublishing:c}},Hh=(e,t)=>e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP",JE=e=>{window.scrollBy(e.x,e.y)};const QE=We(e=>ui(e).filter(t=>!(!t.isEnabled||!t.frame))),eS=(e,t)=>QE(t).find(r=>(r.frame||Y(),Ch(r.frame.pageMarginBox)(e)))||null;var tS=({center:e,destination:t,droppables:n})=>{if(t){const s=n[t];return s.frame?s:null}return eS(e,n)};const Us={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var nS=(e,t,n=()=>Us)=>{const r=n(),s=e[t.size]*r.startFromPercentage,a=e[t.size]*r.maxScrollAtPercentage;return{startScrollingFrom:s,maxScrollValueAt:a}},Zh=({startOfRange:e,endOfRange:t,current:n})=>{const r=t-e;return r===0?0:(n-e)/r},Xc=1,rS=(e,t,n=()=>Us)=>{const r=n();if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return r.maxPixelScroll;if(e===t.startScrollingFrom)return Xc;const a=1-Zh({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),i=r.maxPixelScroll*r.ease(a);return Math.ceil(i)},sS=(e,t,n)=>{const r=n(),s=r.durationDampening.accelerateAt,a=r.durationDampening.stopDampeningAt,i=t,l=a,d=Date.now()-i;if(d>=a)return e;if(d<s)return Xc;const u=Zh({startOfRange:s,endOfRange:l,current:d}),f=e*r.ease(u);return Math.ceil(f)},Rf=({distanceToEdge:e,thresholds:t,dragStartTime:n,shouldUseTimeDampening:r,getAutoScrollerOptions:s})=>{const a=rS(e,t,s);return a===0?0:r?Math.max(sS(a,n,s),Xc):a},Vf=({container:e,distanceToEdges:t,dragStartTime:n,axis:r,shouldUseTimeDampening:s,getAutoScrollerOptions:a})=>{const i=nS(e,r,a);return t[r.end]<t[r.start]?Rf({distanceToEdge:t[r.end],thresholds:i,dragStartTime:n,shouldUseTimeDampening:s,getAutoScrollerOptions:a}):-1*Rf({distanceToEdge:t[r.start],thresholds:i,dragStartTime:n,shouldUseTimeDampening:s,getAutoScrollerOptions:a})},oS=({container:e,subject:t,proposedScroll:n})=>{const r=t.height>e.height,s=t.width>e.width;return!s&&!r?n:s&&r?null:{x:s?0:n.x,y:r?0:n.y}};const aS=ph(e=>e===0?0:e);var Uh=({dragStartTime:e,container:t,subject:n,center:r,shouldUseTimeDampening:s,getAutoScrollerOptions:a})=>{const i={top:r.y-t.top,right:t.right-r.x,bottom:t.bottom-r.y,left:r.x-t.left},l=Vf({container:t,distanceToEdges:i,dragStartTime:e,axis:Hc,shouldUseTimeDampening:s,getAutoScrollerOptions:a}),c=Vf({container:t,distanceToEdges:i,dragStartTime:e,axis:vh,shouldUseTimeDampening:s,getAutoScrollerOptions:a}),d=aS({x:c,y:l});if(_n(d,Ge))return null;const u=oS({container:t,subject:n,proposedScroll:d});return u?_n(u,Ge)?null:u:null};const iS=ph(e=>e===0?0:e>0?1:-1),Jc=(()=>{const e=(t,n)=>t<0?t:t>n?t-n:0;return({current:t,max:n,change:r})=>{const s=Je(t,r),a={x:e(s.x,n.x),y:e(s.y,n.y)};return _n(a,Ge)?null:a}})(),Wh=({max:e,current:t,change:n})=>{const r={x:Math.max(t.x,e.x),y:Math.max(t.y,e.y)},s=iS(n),a=Jc({max:r,current:t,change:s});return!a||s.x!==0&&a.x===0||s.y!==0&&a.y===0},Qc=(e,t)=>Wh({current:e.scroll.current,max:e.scroll.max,change:t}),lS=(e,t)=>{if(!Qc(e,t))return null;const n=e.scroll.max,r=e.scroll.current;return Jc({current:r,max:n,change:t})},ed=(e,t)=>{const n=e.frame;return n?Wh({current:n.scroll.current,max:n.scroll.max,change:t}):!1},cS=(e,t)=>{const n=e.frame;return!n||!ed(e,t)?null:Jc({current:n.scroll.current,max:n.scroll.max,change:t})};var dS=({viewport:e,subject:t,center:n,dragStartTime:r,shouldUseTimeDampening:s,getAutoScrollerOptions:a})=>{const i=Uh({dragStartTime:r,container:e.frame,subject:t,center:n,shouldUseTimeDampening:s,getAutoScrollerOptions:a});return i&&Qc(e,i)?i:null},uS=({droppable:e,subject:t,center:n,dragStartTime:r,shouldUseTimeDampening:s,getAutoScrollerOptions:a})=>{const i=e.frame;if(!i)return null;const l=Uh({dragStartTime:r,container:i.pageMarginBox,subject:t,center:n,shouldUseTimeDampening:s,getAutoScrollerOptions:a});return l&&ed(e,l)?l:null},Bf=({state:e,dragStartTime:t,shouldUseTimeDampening:n,scrollWindow:r,scrollDroppable:s,getAutoScrollerOptions:a})=>{const i=e.current.page.borderBoxCenter,c=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){const f=e.viewport,m=dS({dragStartTime:t,viewport:f,subject:c,center:i,shouldUseTimeDampening:n,getAutoScrollerOptions:a});if(m){r(m);return}}const d=tS({center:i,destination:jt(e.impact),droppables:e.dimensions.droppables});if(!d)return;const u=uS({dragStartTime:t,droppable:d,subject:c,center:i,shouldUseTimeDampening:n,getAutoScrollerOptions:a});u&&s(d.descriptor.id,u)},fS=({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:n=()=>Us})=>{const r=Vs(e),s=Vs(t);let a=null;const i=d=>{a||Y();const{shouldUseTimeDampening:u,dragStartTime:f}=a;Bf({state:d,scrollWindow:r,scrollDroppable:s,dragStartTime:f,shouldUseTimeDampening:u,getAutoScrollerOptions:n})};return{start:d=>{a&&Y();const u=Date.now();let f=!1;const m=()=>{f=!0};Bf({state:d,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:m,scrollDroppable:m,getAutoScrollerOptions:n}),a={dragStartTime:u,shouldUseTimeDampening:f},f&&i(d)},stop:()=>{a&&(r.cancel(),s.cancel(),a=null)},scroll:i}},mS=({move:e,scrollDroppable:t,scrollWindow:n})=>{const r=(l,c)=>{const d=Je(l.current.client.selection,c);e({client:d})},s=(l,c)=>{if(!ed(l,c))return c;const d=cS(l,c);if(!d)return t(l.descriptor.id,c),null;const u=wt(c,d);return t(l.descriptor.id,u),wt(c,u)},a=(l,c,d)=>{if(!l||!Qc(c,d))return d;const u=lS(c,d);if(!u)return n(d),null;const f=wt(d,u);return n(f),wt(d,f)};return l=>{const c=l.scrollJumpRequest;if(!c)return;const d=jt(l.impact);d||Y();const u=s(l.dimensions.droppables[d],c);if(!u)return;const f=l.viewport,m=a(l.isWindowScrollAllowed,f,u);m&&r(l,m)}},pS=({scrollDroppable:e,scrollWindow:t,move:n,getAutoScrollerOptions:r})=>{const s=fS({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:r}),a=mS({move:n,scrollWindow:t,scrollDroppable:e});return{scroll:c=>{if(!(r().disabled||c.phase!=="DRAGGING")){if(c.movementMode==="FLUID"){s.scroll(c);return}c.scrollJumpRequest&&a(c)}},start:s.start,stop:s.stop}};const Rr="data-rfd",Vr=(()=>{const e=`${Rr}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),Pl=(()=>{const e=`${Rr}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),hS=(()=>{const e=`${Rr}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),zf={contextId:`${Rr}-scroll-container-context-id`},gS=e=>t=>`[${t}="${e}"]`,js=(e,t)=>e.map(n=>{const r=n.styles[t];return r?`${n.selector} { ${r} }`:""}).join(" "),xS="pointer-events: none;";var yS=e=>{const t=gS(e),n=(()=>{const l=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(Vr.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:l,dragging:xS,dropAnimating:l}}})(),r=(()=>{const l=`
      transition: ${Fs.outOfTheWay};
    `;return{selector:t(Pl.contextId),styles:{dragging:l,dropAnimating:l,userCancel:l}}})(),s={selector:t(hS.contextId),styles:{always:"overflow-anchor: none;"}},i=[r,n,s,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:js(i,"always"),resting:js(i,"resting"),dragging:js(i,"dragging"),dropAnimating:js(i,"dropAnimating"),userCancel:js(i,"userCancel")}};const vS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?y.useLayoutEffect:y.useEffect;var Nt=vS;const sl=()=>{const e=document.querySelector("head");return e||Y(),e},Hf=e=>{const t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function bS(e,t){const n=ge(()=>yS(e),[e]),r=y.useRef(null),s=y.useRef(null),a=se(We(f=>{const m=s.current;m||Y(),m.textContent=f}),[]),i=se(f=>{const m=r.current;m||Y(),m.textContent=f},[]);Nt(()=>{!r.current&&!s.current||Y();const f=Hf(t),m=Hf(t);return r.current=f,s.current=m,f.setAttribute(`${Rr}-always`,e),m.setAttribute(`${Rr}-dynamic`,e),sl().appendChild(f),sl().appendChild(m),i(n.always),a(n.resting),()=>{const p=g=>{const h=g.current;h||Y(),sl().removeChild(h),g.current=null};p(r),p(s)}},[t,i,a,n.always,n.resting,e]);const l=se(()=>a(n.dragging),[a,n.dragging]),c=se(f=>{if(f==="DROP"){a(n.dropAnimating);return}a(n.userCancel)},[a,n.dropAnimating,n.userCancel]),d=se(()=>{s.current&&a(n.resting)},[a,n.resting]);return ge(()=>({dragging:l,dropping:c,resting:d}),[l,c,d])}function Gh(e,t){return Array.from(e.querySelectorAll(t))}var qh=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function hi(e){return e instanceof qh(e).HTMLElement}function wS(e,t){const n=`[${Vr.contextId}="${e}"]`,r=Gh(document,n);if(!r.length)return null;const s=r.find(a=>a.getAttribute(Vr.draggableId)===t);return!s||!hi(s)?null:s}function jS(e){const t=y.useRef({}),n=y.useRef(null),r=y.useRef(null),s=y.useRef(!1),a=se(function(m,p){const g={id:m,focus:p};return t.current[m]=g,function(){const v=t.current;v[m]!==g&&delete v[m]}},[]),i=se(function(m){const p=wS(e,m);p&&p!==document.activeElement&&p.focus()},[e]),l=se(function(m,p){n.current===m&&(n.current=p)},[]),c=se(function(){r.current||s.current&&(r.current=requestAnimationFrame(()=>{r.current=null;const m=n.current;m&&i(m)}))},[i]),d=se(function(m){n.current=null;const p=document.activeElement;p&&p.getAttribute(Vr.draggableId)===m&&(n.current=m)},[]);return Nt(()=>(s.current=!0,function(){s.current=!1;const m=r.current;m&&cancelAnimationFrame(m)}),[]),ge(()=>({register:a,tryRecordFocus:d,tryRestoreFocusRecorded:c,tryShiftRecord:l}),[a,d,c,l])}function NS(){const e={draggables:{},droppables:{}},t=[];function n(f){return t.push(f),function(){const p=t.indexOf(f);p!==-1&&t.splice(p,1)}}function r(f){t.length&&t.forEach(m=>m(f))}function s(f){return e.draggables[f]||null}function a(f){const m=s(f);return m||Y(),m}const i={register:f=>{e.draggables[f.descriptor.id]=f,r({type:"ADDITION",value:f})},update:(f,m)=>{const p=e.draggables[m.descriptor.id];p&&p.uniqueId===f.uniqueId&&(delete e.draggables[m.descriptor.id],e.draggables[f.descriptor.id]=f)},unregister:f=>{const m=f.descriptor.id,p=s(m);p&&f.uniqueId===p.uniqueId&&(delete e.draggables[m],e.droppables[f.descriptor.droppableId]&&r({type:"REMOVAL",value:f}))},getById:a,findById:s,exists:f=>!!s(f),getAllByType:f=>Object.values(e.draggables).filter(m=>m.descriptor.type===f)};function l(f){return e.droppables[f]||null}function c(f){const m=l(f);return m||Y(),m}const d={register:f=>{e.droppables[f.descriptor.id]=f},unregister:f=>{const m=l(f.descriptor.id);m&&f.uniqueId===m.uniqueId&&delete e.droppables[f.descriptor.id]},getById:c,findById:l,exists:f=>!!l(f),getAllByType:f=>Object.values(e.droppables).filter(m=>m.descriptor.type===f)};function u(){e.draggables={},e.droppables={},t.length=0}return{draggable:i,droppable:d,subscribe:n,clean:u}}function ES(){const e=ge(NS,[]);return y.useEffect(()=>function(){x.version.startsWith("16")||x.version.startsWith("17")?requestAnimationFrame(e.clean):e.clean()},[e]),e}var td=x.createContext(null),aa=()=>{const e=document.body;return e||Y(),e};const SS={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"};var CS=SS;const IS=e=>`rfd-announcement-${e}`;function AS(e){const t=ge(()=>IS(e),[e]),n=y.useRef(null);return y.useEffect(function(){const a=document.createElement("div");return n.current=a,a.id=t,a.setAttribute("aria-live","assertive"),a.setAttribute("aria-atomic","true"),Or(a.style,CS),aa().appendChild(a),function(){setTimeout(function(){const c=aa();c.contains(a)&&c.removeChild(a),a===n.current&&(n.current=null)})}},[t]),se(s=>{const a=n.current;if(a){a.textContent=s;return}},[])}let DS=0;const Kh={separator:"::"};function MS(e,t=Kh){return ge(()=>`${e}${t.separator}${DS++}`,[t.separator,e])}function kS(e,t=Kh){const n=x.useId();return ge(()=>`${e}${t.separator}${n}`,[t.separator,e,n])}var nd="useId"in x?kS:MS;function OS({contextId:e,uniqueId:t}){return`rfd-hidden-text-${e}-${t}`}function TS({contextId:e,text:t}){const n=nd("hidden-text",{separator:"-"}),r=ge(()=>OS({contextId:e,uniqueId:n}),[n,e]);return y.useEffect(function(){const a=document.createElement("div");return a.id=r,a.textContent=t,a.style.display="none",aa().appendChild(a),function(){const l=aa();l.contains(a)&&l.removeChild(a)}},[r,t]),r}var gi=x.createContext(null);function Yh(e){const t=y.useRef(e);return y.useEffect(()=>{t.current=e}),t}function FS(){let e=null;function t(){return!!e}function n(i){return i===e}function r(i){e&&Y();const l={abandon:i};return e=l,l}function s(){e||Y(),e=null}function a(){e&&(e.abandon(),s())}return{isClaimed:t,isActive:n,claim:r,release:s,tryAbandon:a}}function Ws(e){return e.phase==="IDLE"||e.phase==="DROP_ANIMATING"?!1:e.isDragging}const _S=9,PS=13,rd=27,Xh=32,LS=33,$S=34,RS=35,VS=36,BS=37,zS=38,HS=39,ZS=40,US={[PS]:!0,[_S]:!0};var Jh=e=>{US[e.keyCode]&&e.preventDefault()};const WS=(()=>{const e="visibilitychange";return typeof document>"u"?e:[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find(r=>`on${r}`in document)||e})();var xi=WS;const Qh=0,Zf=5;function GS(e,t){return Math.abs(t.x-e.x)>=Zf||Math.abs(t.y-e.y)>=Zf}const Uf={type:"IDLE"};function qS({cancel:e,completed:t,getPhase:n,setPhase:r}){return[{eventName:"mousemove",fn:s=>{const{button:a,clientX:i,clientY:l}=s;if(a!==Qh)return;const c={x:i,y:l},d=n();if(d.type==="DRAGGING"){s.preventDefault(),d.actions.move(c);return}d.type!=="PENDING"&&Y();const u=d.point;if(!GS(u,c))return;s.preventDefault();const f=d.actions.fluidLift(c);r({type:"DRAGGING",actions:f})}},{eventName:"mouseup",fn:s=>{const a=n();if(a.type!=="DRAGGING"){e();return}s.preventDefault(),a.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:s=>{n().type==="DRAGGING"&&s.preventDefault(),e()}},{eventName:"keydown",fn:s=>{if(n().type==="PENDING"){e();return}if(s.keyCode===rd){s.preventDefault(),e();return}Jh(s)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{n().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:s=>{const a=n();if(a.type==="IDLE"&&Y(),a.actions.shouldRespectForcePress()){e();return}s.preventDefault()}},{eventName:xi,fn:e}]}function KS(e){const t=y.useRef(Uf),n=y.useRef(Fn),r=ge(()=>({eventName:"mousedown",fn:function(f){if(f.defaultPrevented||f.button!==Qh||f.ctrlKey||f.metaKey||f.shiftKey||f.altKey)return;const m=e.findClosestDraggableId(f);if(!m)return;const p=e.tryGetLock(m,i,{sourceEvent:f});if(!p)return;f.preventDefault();const g={x:f.clientX,y:f.clientY};n.current(),d(p,g)}}),[e]),s=ge(()=>({eventName:"webkitmouseforcewillbegin",fn:u=>{if(u.defaultPrevented)return;const f=e.findClosestDraggableId(u);if(!f)return;const m=e.findOptionsForDraggable(f);m&&(m.shouldRespectForcePress||e.canGetLock(f)&&u.preventDefault())}}),[e]),a=se(function(){const f={passive:!1,capture:!0};n.current=Mt(window,[s,r],f)},[s,r]),i=se(()=>{t.current.type!=="IDLE"&&(t.current=Uf,n.current(),a())},[a]),l=se(()=>{const u=t.current;i(),u.type==="DRAGGING"&&u.actions.cancel({shouldBlockNextClick:!0}),u.type==="PENDING"&&u.actions.abort()},[i]),c=se(function(){const f={capture:!0,passive:!1},m=qS({cancel:l,completed:i,getPhase:()=>t.current,setPhase:p=>{t.current=p}});n.current=Mt(window,m,f)},[l,i]),d=se(function(f,m){t.current.type!=="IDLE"&&Y(),t.current={type:"PENDING",point:m,actions:f},c()},[c]);Nt(function(){return a(),function(){n.current()}},[a])}function YS(){}const XS={[$S]:!0,[LS]:!0,[VS]:!0,[RS]:!0};function JS(e,t){function n(){t(),e.cancel()}function r(){t(),e.drop()}return[{eventName:"keydown",fn:s=>{if(s.keyCode===rd){s.preventDefault(),n();return}if(s.keyCode===Xh){s.preventDefault(),r();return}if(s.keyCode===ZS){s.preventDefault(),e.moveDown();return}if(s.keyCode===zS){s.preventDefault(),e.moveUp();return}if(s.keyCode===HS){s.preventDefault(),e.moveRight();return}if(s.keyCode===BS){s.preventDefault(),e.moveLeft();return}if(XS[s.keyCode]){s.preventDefault();return}Jh(s)}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:xi,fn:n}]}function QS(e){const t=y.useRef(YS),n=ge(()=>({eventName:"keydown",fn:function(a){if(a.defaultPrevented||a.keyCode!==Xh)return;const i=e.findClosestDraggableId(a);if(!i)return;const l=e.tryGetLock(i,u,{sourceEvent:a});if(!l)return;a.preventDefault();let c=!0;const d=l.snapLift();t.current();function u(){c||Y(),c=!1,t.current(),r()}t.current=Mt(window,JS(d,u),{capture:!0,passive:!1})}}),[e]),r=se(function(){const a={passive:!1,capture:!0};t.current=Mt(window,[n],a)},[n]);Nt(function(){return r(),function(){t.current()}},[r])}const ol={type:"IDLE"},eC=120,tC=.15;function nC({cancel:e,getPhase:t}){return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:n=>{n.preventDefault()}},{eventName:"keydown",fn:n=>{if(t().type!=="DRAGGING"){e();return}n.keyCode===rd&&n.preventDefault(),e()}},{eventName:xi,fn:e}]}function rC({cancel:e,completed:t,getPhase:n}){return[{eventName:"touchmove",options:{capture:!1},fn:r=>{const s=n();if(s.type!=="DRAGGING"){e();return}s.hasMoved=!0;const{clientX:a,clientY:i}=r.touches[0],l={x:a,y:i};r.preventDefault(),s.actions.move(l)}},{eventName:"touchend",fn:r=>{const s=n();if(s.type!=="DRAGGING"){e();return}r.preventDefault(),s.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:r=>{if(n().type!=="DRAGGING"){e();return}r.preventDefault(),e()}},{eventName:"touchforcechange",fn:r=>{const s=n();s.type==="IDLE"&&Y();const a=r.touches[0];if(!a||!(a.force>=tC))return;const l=s.actions.shouldRespectForcePress();if(s.type==="PENDING"){l&&e();return}if(l){if(s.hasMoved){r.preventDefault();return}e();return}r.preventDefault()}},{eventName:xi,fn:e}]}function sC(e){const t=y.useRef(ol),n=y.useRef(Fn),r=se(function(){return t.current},[]),s=se(function(p){t.current=p},[]),a=ge(()=>({eventName:"touchstart",fn:function(p){if(p.defaultPrevented)return;const g=e.findClosestDraggableId(p);if(!g)return;const h=e.tryGetLock(g,l,{sourceEvent:p});if(!h)return;const v=p.touches[0],{clientX:b,clientY:w}=v,j={x:b,y:w};n.current(),f(h,j)}}),[e]),i=se(function(){const p={capture:!0,passive:!1};n.current=Mt(window,[a],p)},[a]),l=se(()=>{const m=t.current;m.type!=="IDLE"&&(m.type==="PENDING"&&clearTimeout(m.longPressTimerId),s(ol),n.current(),i())},[i,s]),c=se(()=>{const m=t.current;l(),m.type==="DRAGGING"&&m.actions.cancel({shouldBlockNextClick:!0}),m.type==="PENDING"&&m.actions.abort()},[l]),d=se(function(){const p={capture:!0,passive:!1},g={cancel:c,completed:l,getPhase:r},h=Mt(window,rC(g),p),v=Mt(window,nC(g),p);n.current=function(){h(),v()}},[c,r,l]),u=se(function(){const p=r();p.type!=="PENDING"&&Y();const g=p.actions.fluidLift(p.point);s({type:"DRAGGING",actions:g,hasMoved:!1})},[r,s]),f=se(function(p,g){r().type!=="IDLE"&&Y();const h=setTimeout(u,eC);s({type:"PENDING",point:g,actions:p,longPressTimerId:h}),d()},[d,r,s,u]);Nt(function(){return i(),function(){n.current();const g=r();g.type==="PENDING"&&(clearTimeout(g.longPressTimerId),s(ol))}},[r,i,s]),Nt(function(){return Mt(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const oC=["input","button","textarea","select","option","optgroup","video","audio"];function e1(e,t){if(t==null)return!1;if(oC.includes(t.tagName.toLowerCase()))return!0;const r=t.getAttribute("contenteditable");return r==="true"||r===""?!0:t===e?!1:e1(e,t.parentElement)}function aC(e,t){const n=t.target;return hi(n)?e1(e,n):!1}var iC=e=>Vt(e.getBoundingClientRect()).center;function lC(e){return e instanceof qh(e).Element}const cC=(()=>{const e="matches";return typeof document>"u"?e:[e,"msMatchesSelector","webkitMatchesSelector"].find(r=>r in Element.prototype)||e})();function t1(e,t){return e==null?null:e[cC](t)?e:t1(e.parentElement,t)}function dC(e,t){return e.closest?e.closest(t):t1(e,t)}function uC(e){return`[${Vr.contextId}="${e}"]`}function fC(e,t){const n=t.target;if(!lC(n))return null;const r=uC(e),s=dC(n,r);return!s||!hi(s)?null:s}function mC(e,t){const n=fC(e,t);return n?n.getAttribute(Vr.draggableId):null}function pC(e,t){const n=`[${Pl.contextId}="${e}"]`,s=Gh(document,n).find(a=>a.getAttribute(Pl.id)===t);return!s||!hi(s)?null:s}function hC(e){e.preventDefault()}function Oo({expected:e,phase:t,isLockActive:n,shouldWarn:r}){return!(!n()||e!==t)}function n1({lockAPI:e,store:t,registry:n,draggableId:r}){if(e.isClaimed())return!1;const s=n.draggable.findById(r);return!(!s||!s.options.isEnabled||!Hh(t.getState(),r))}function gC({lockAPI:e,contextId:t,store:n,registry:r,draggableId:s,forceSensorStop:a,sourceEvent:i}){if(!n1({lockAPI:e,store:n,registry:r,draggableId:s}))return null;const c=r.draggable.getById(s),d=pC(t,c.descriptor.id);if(!d||i&&!c.options.canDragInteractiveElements&&aC(d,i))return null;const u=e.claim(a||Fn);let f="PRE_DRAG";function m(){return c.options.shouldRespectForcePress}function p(){return e.isActive(u)}function g(S,E){Oo({expected:S,phase:f,isLockActive:p,shouldWarn:!0})&&n.dispatch(E())}const h=g.bind(null,"DRAGGING");function v(S){function E(){e.release(),f="COMPLETED"}f!=="PRE_DRAG"&&(E(),Y()),n.dispatch(eE(S.liftActionArgs)),f="DRAGGING";function I(A,M={shouldBlockNextClick:!1}){if(S.cleanup(),M.shouldBlockNextClick){const O=Mt(window,[{eventName:"click",fn:hC,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(O)}E(),n.dispatch(_h({reason:A}))}return{isActive:()=>Oo({expected:"DRAGGING",phase:f,isLockActive:p,shouldWarn:!1}),shouldRespectForcePress:m,drop:A=>I("DROP",A),cancel:A=>I("CANCEL",A),...S.actions}}function b(S){const E=Vs(A=>{h(()=>Fh({client:A}))});return{...v({liftActionArgs:{id:s,clientSelection:S,movementMode:"FLUID"},cleanup:()=>E.cancel(),actions:{move:E}}),move:E}}function w(){const S={moveUp:()=>h(cE),moveRight:()=>h(uE),moveDown:()=>h(dE),moveLeft:()=>h(fE)};return v({liftActionArgs:{id:s,clientSelection:iC(d),movementMode:"SNAP"},cleanup:Fn,actions:S})}function j(){Oo({expected:"PRE_DRAG",phase:f,isLockActive:p,shouldWarn:!0})&&e.release()}return{isActive:()=>Oo({expected:"PRE_DRAG",phase:f,isLockActive:p,shouldWarn:!1}),shouldRespectForcePress:m,fluidLift:b,snapLift:w,abort:j}}const xC=[KS,QS,sC];function yC({contextId:e,store:t,registry:n,customSensors:r,enableDefaultSensors:s}){const a=[...s?xC:[],...r||[]],i=y.useState(()=>FS())[0],l=se(function(v,b){Ws(v)&&!Ws(b)&&i.tryAbandon()},[i]);Nt(function(){let v=t.getState();return t.subscribe(()=>{const w=t.getState();l(v,w),v=w})},[i,t,l]),Nt(()=>i.tryAbandon,[i.tryAbandon]);const c=se(h=>n1({lockAPI:i,registry:n,store:t,draggableId:h}),[i,n,t]),d=se((h,v,b)=>gC({lockAPI:i,registry:n,contextId:e,store:t,draggableId:h,forceSensorStop:v||null,sourceEvent:b&&b.sourceEvent?b.sourceEvent:null}),[e,i,n,t]),u=se(h=>mC(e,h),[e]),f=se(h=>{const v=n.draggable.findById(h);return v?v.options:null},[n.draggable]),m=se(function(){i.isClaimed()&&(i.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch(qc()))},[i,t]),p=se(()=>i.isClaimed(),[i]),g=ge(()=>({canGetLock:c,tryGetLock:d,findClosestDraggableId:u,findOptionsForDraggable:f,tryReleaseLock:m,isLockClaimed:p}),[c,d,u,f,m,p]);for(let h=0;h<a.length;h++)a[h](g)}const vC=e=>({onBeforeCapture:t=>{const n=()=>{e.onBeforeCapture&&e.onBeforeCapture(t)};x.version.startsWith("16")||x.version.startsWith("17")?n():mn.flushSync(n)},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}),bC=e=>({...Us,...e.autoScrollerOptions,durationDampening:{...Us.durationDampening,...e.autoScrollerOptions}});function Ns(e){return e.current||Y(),e.current}function wC(e){const{contextId:t,setCallbacks:n,sensors:r,nonce:s,dragHandleUsageInstructions:a}=e,i=y.useRef(null),l=Yh(e),c=se(()=>vC(l.current),[l]),d=se(()=>bC(l.current),[l]),u=AS(t),f=TS({contextId:t,text:a}),m=bS(t,s),p=se(O=>{Ns(i).dispatch(O)},[]),g=ge(()=>hf({publishWhileDragging:nE,updateDroppableScroll:sE,updateDroppableIsEnabled:oE,updateDroppableIsCombineEnabled:aE,collectionStarting:rE},p),[p]),h=ES(),v=ge(()=>XE(h,g),[h,g]),b=ge(()=>pS({scrollWindow:JE,scrollDroppable:v.scrollDroppable,getAutoScrollerOptions:d,...hf({move:Fh},p)}),[v.scrollDroppable,p,d]),w=jS(t),j=ge(()=>GE({announce:u,autoScroller:b,dimensionMarshal:v,focusMarshal:w,getResponders:c,styleMarshal:m}),[u,b,v,w,c,m]);i.current=j;const N=se(()=>{const O=Ns(i);O.getState().phase!=="IDLE"&&O.dispatch(qc())},[]),S=se(()=>{const O=Ns(i).getState();return O.phase==="DROP_ANIMATING"?!0:O.phase==="IDLE"?!1:O.isDragging},[]),E=ge(()=>({isDragging:S,tryAbort:N}),[S,N]);n(E);const I=se(O=>Hh(Ns(i).getState(),O),[]),A=se(()=>nr(Ns(i).getState()),[]),M=ge(()=>({marshal:v,focus:w,contextId:t,canLift:I,isMovementAllowed:A,dragHandleUsageInstructionsId:f,registry:h}),[t,v,f,w,I,A,h]);return yC({contextId:t,store:j,registry:h,customSensors:r||null,enableDefaultSensors:e.enableDefaultSensors!==!1}),y.useEffect(()=>N,[N]),x.createElement(gi.Provider,{value:M},x.createElement(k5,{context:td,store:j},e.children))}let jC=0;function NC(){return ge(()=>`${jC++}`,[])}function EC(){return x.useId()}var SC="useId"in x?EC:NC;function CC(e){const t=SC(),n=e.dragHandleUsageInstructions||Zo.dragHandleUsageInstructions;return x.createElement(z5,null,r=>x.createElement(wC,{nonce:e.nonce,contextId:t,setCallbacks:r,dragHandleUsageInstructions:n,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children))}const Wf={dragging:5e3,dropAnimating:4500},IC=(e,t)=>t?Fs.drop(t.duration):e?Fs.snap:Fs.fluid,AC=(e,t)=>{if(e)return t?Zs.opacity.drop:Zs.opacity.combining},DC=e=>e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP";function MC(e){const n=e.dimension.client,{offset:r,combineWith:s,dropping:a}=e,i=!!s,l=DC(e),c=!!a,d=c?Fl.drop(r,i):Fl.moveTo(r);return{position:"fixed",top:n.marginBox.top,left:n.marginBox.left,boxSizing:"border-box",width:n.borderBox.width,height:n.borderBox.height,transition:IC(l,a),transform:d,opacity:AC(i,c),zIndex:c?Wf.dropAnimating:Wf.dragging,pointerEvents:"none"}}function kC(e){return{transform:Fl.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:"none"}}function OC(e){return e.type==="DRAGGING"?MC(e):kC(e)}function TC(e,t,n=Ge){const r=window.getComputedStyle(t),s=t.getBoundingClientRect(),a=ch(s,r),i=na(a,n),l={client:a,tagName:t.tagName.toLowerCase(),display:r.display},c={x:a.marginBox.width,y:a.marginBox.height};return{descriptor:e,placeholder:l,displaceBy:c,client:a,page:i}}function FC(e){const t=nd("draggable"),{descriptor:n,registry:r,getDraggableRef:s,canDragInteractiveElements:a,shouldRespectForcePress:i,isEnabled:l}=e,c=ge(()=>({canDragInteractiveElements:a,shouldRespectForcePress:i,isEnabled:l}),[a,l,i]),d=se(p=>{const g=s();return g||Y(),TC(n,g,p)},[n,s]),u=ge(()=>({uniqueId:t,descriptor:n,options:c,getDimension:d}),[n,d,c,t]),f=y.useRef(u),m=y.useRef(!0);Nt(()=>(r.draggable.register(f.current),()=>r.draggable.unregister(f.current)),[r.draggable]),Nt(()=>{if(m.current){m.current=!1;return}const p=f.current;f.current=u,r.draggable.update(u,p)},[u,r.draggable])}var sd=x.createContext(null);function ia(e){const t=y.useContext(e);return t||Y(),t}function _C(e){e.preventDefault()}const PC=e=>{const t=y.useRef(null),n=se((E=null)=>{t.current=E},[]),r=se(()=>t.current,[]),{contextId:s,dragHandleUsageInstructionsId:a,registry:i}=ia(gi),{type:l,droppableId:c}=ia(sd),d=ge(()=>({id:e.draggableId,index:e.index,type:l,droppableId:c}),[e.draggableId,e.index,l,c]),{children:u,draggableId:f,isEnabled:m,shouldRespectForcePress:p,canDragInteractiveElements:g,isClone:h,mapped:v,dropAnimationFinished:b}=e;if(!h){const E=ge(()=>({descriptor:d,registry:i,getDraggableRef:r,canDragInteractiveElements:g,shouldRespectForcePress:p,isEnabled:m}),[d,i,r,g,p,m]);FC(E)}const w=ge(()=>m?{tabIndex:0,role:"button","aria-describedby":a,"data-rfd-drag-handle-draggable-id":f,"data-rfd-drag-handle-context-id":s,draggable:!1,onDragStart:_C}:null,[s,a,f,m]),j=se(E=>{v.type==="DRAGGING"&&v.dropping&&E.propertyName==="transform"&&(x.version.startsWith("16")||x.version.startsWith("17")?b():mn.flushSync(b))},[b,v]),N=ge(()=>{const E=OC(v),I=v.type==="DRAGGING"&&v.dropping?j:void 0;return{innerRef:n,draggableProps:{"data-rfd-draggable-context-id":s,"data-rfd-draggable-id":f,style:E,onTransitionEnd:I},dragHandleProps:w}},[s,w,f,v,j,n]),S=ge(()=>({draggableId:d.id,type:d.type,source:{index:d.index,droppableId:d.droppableId}}),[d.droppableId,d.id,d.index,d.type]);return x.createElement(x.Fragment,null,u(N,v.snapshot,S))};var LC=PC,r1=(e,t)=>e===t,s1=e=>{const{combine:t,destination:n}=e;return n?n.droppableId:t?t.droppableId:null};const $C=e=>e.combine?e.combine.draggableId:null,RC=e=>e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null;function VC(){const e=We((s,a)=>({x:s,y:a})),t=We((s,a,i=null,l=null,c=null)=>({isDragging:!0,isClone:a,isDropAnimating:!!c,dropAnimation:c,mode:s,draggingOver:i,combineWith:l,combineTargetFor:null})),n=We((s,a,i,l,c=null,d=null,u=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:c,combineWith:d,mode:a,offset:s,dimension:i,forceShouldAnimate:u,snapshot:t(a,l,c,d,null)}}));return(s,a)=>{if(Ws(s)){if(s.critical.draggable.id!==a.draggableId)return null;const i=s.current.client.offset,l=s.dimensions.draggables[a.draggableId],c=jt(s.impact),d=RC(s.impact),u=s.forceShouldAnimate;return n(e(i.x,i.y),s.movementMode,l,a.isClone,c,d,u)}if(s.phase==="DROP_ANIMATING"){const i=s.completed;if(i.result.draggableId!==a.draggableId)return null;const l=a.isClone,c=s.dimensions.draggables[a.draggableId],d=i.result,u=d.mode,f=s1(d),m=$C(d),g={duration:s.dropDuration,curve:Yc.drop,moveTo:s.newHomeClientOffset,opacity:m?Zs.opacity.drop:null,scale:m?Zs.scale.drop:null};return{mapped:{type:"DRAGGING",offset:s.newHomeClientOffset,dimension:c,dropping:g,draggingOver:f,combineWith:m,mode:u,forceShouldAnimate:null,snapshot:t(u,l,f,m,g)}}}return null}}function o1(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const BC={mapped:{type:"SECONDARY",offset:Ge,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:o1(null)}};function zC(){const e=We((i,l)=>({x:i,y:l})),t=We(o1),n=We((i,l=null,c)=>({mapped:{type:"SECONDARY",offset:i,combineTargetFor:l,shouldAnimateDisplacement:c,snapshot:t(l)}})),r=i=>i?n(Ge,i,!0):null,s=(i,l,c,d)=>{const u=c.displaced.visible[i],f=!!(d.inVirtualList&&d.effected[i]),m=fi(c),p=m&&m.draggableId===i?l:null;if(!u){if(!f)return r(p);if(c.displaced.invisible[i])return null;const v=ts(d.displacedBy.point),b=e(v.x,v.y);return n(b,p,!0)}if(f)return r(p);const g=c.displacedBy.point,h=e(g.x,g.y);return n(h,p,u.shouldAnimate)};return(i,l)=>{if(Ws(i))return i.critical.draggable.id===l.draggableId?null:s(l.draggableId,i.critical.draggable.id,i.impact,i.afterCritical);if(i.phase==="DROP_ANIMATING"){const c=i.completed;return c.result.draggableId===l.draggableId?null:s(l.draggableId,c.result.draggableId,c.impact,c.afterCritical)}return null}}const HC=()=>{const e=VC(),t=zC();return(r,s)=>e(r,s)||t(r,s)||BC},ZC={dropAnimationFinished:Ph},UC=ih(HC,ZC,null,{context:td,areStatePropsEqual:r1})(LC);var WC=UC;function a1(e){return ia(sd).isUsingCloneFor===e.draggableId&&!e.isClone?null:x.createElement(WC,e)}function GC(e){const t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,n=!!e.disableInteractiveElementBlocking,r=!!e.shouldRespectForcePress;return x.createElement(a1,Or({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:n,shouldRespectForcePress:r}))}const i1=e=>t=>e===t,qC=i1("scroll"),KC=i1("auto"),Gf=(e,t)=>t(e.overflowX)||t(e.overflowY),YC=e=>{const t=window.getComputedStyle(e),n={overflowX:t.overflowX,overflowY:t.overflowY};return Gf(n,qC)||Gf(n,KC)},XC=()=>!1,l1=e=>e==null?null:e===document.body?XC()?e:null:e===document.documentElement?null:YC(e)?e:l1(e.parentElement);var Ll=e=>({x:e.scrollLeft,y:e.scrollTop});const c1=e=>e?window.getComputedStyle(e).position==="fixed"?!0:c1(e.parentElement):!1;var JC=e=>{const t=l1(e),n=c1(e);return{closestScrollable:t,isFixedOnPage:n}},QC=({descriptor:e,isEnabled:t,isCombineEnabled:n,isFixedOnPage:r,direction:s,client:a,page:i,closest:l})=>{const c=(()=>{if(!l)return null;const{scrollSize:m,client:p}=l,g=Vh({scrollHeight:m.scrollHeight,scrollWidth:m.scrollWidth,height:p.paddingBox.height,width:p.paddingBox.width});return{pageMarginBox:l.page.marginBox,frameClient:p,scrollSize:m,shouldClipSubject:l.shouldClipSubject,scroll:{initial:l.scroll,current:l.scroll,max:g,diff:{value:Ge,displacement:Ge}}}})(),d=s==="vertical"?Hc:vh,u=$r({page:i,withPlaceholder:null,axis:d,frame:c});return{descriptor:e,isCombineEnabled:n,isFixedOnPage:r,axis:d,isEnabled:t,client:a,page:i,frame:c,subject:u}};const eI=(e,t)=>{const n=dh(e);if(!t||e!==t)return n;const r=n.paddingBox.top-t.scrollTop,s=n.paddingBox.left-t.scrollLeft,a=r+t.scrollHeight,i=s+t.scrollWidth,c=Rc({top:r,right:i,bottom:a,left:s},n.border);return Vc({borderBox:c,margin:n.margin,border:n.border,padding:n.padding})};var tI=({ref:e,descriptor:t,env:n,windowScroll:r,direction:s,isDropDisabled:a,isCombineEnabled:i,shouldClipSubject:l})=>{const c=n.closestScrollable,d=eI(e,c),u=na(d,r),f=(()=>{if(!c)return null;const p=dh(c),g={scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth};return{client:p,page:na(p,r),scroll:Ll(c),scrollSize:g,shouldClipSubject:l}})();return QC({descriptor:t,isEnabled:!a,isCombineEnabled:i,isFixedOnPage:n.isFixedOnPage,direction:s,client:d,page:u,closest:f})};const nI={passive:!1},rI={passive:!0};var qf=e=>e.shouldPublishImmediately?nI:rI;const To=e=>e&&e.env.closestScrollable||null;function sI(e){const t=y.useRef(null),n=ia(gi),r=nd("droppable"),{registry:s,marshal:a}=n,i=Yh(e),l=ge(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),c=y.useRef(l),d=ge(()=>We((N,S)=>{t.current||Y();const E={x:N,y:S};a.updateDroppableScroll(l.id,E)}),[l.id,a]),u=se(()=>{const N=t.current;return!N||!N.env.closestScrollable?Ge:Ll(N.env.closestScrollable)},[]),f=se(()=>{const N=u();d(N.x,N.y)},[u,d]),m=ge(()=>Vs(f),[f]),p=se(()=>{const N=t.current,S=To(N);if(N&&S||Y(),N.scrollOptions.shouldPublishImmediately){f();return}m()},[m,f]),g=se((N,S)=>{t.current&&Y();const E=i.current,I=E.getDroppableRef();I||Y();const A=JC(I),M={ref:I,descriptor:l,env:A,scrollOptions:S};t.current=M;const O=tI({ref:I,descriptor:l,env:A,windowScroll:N,direction:E.direction,isDropDisabled:E.isDropDisabled,isCombineEnabled:E.isCombineEnabled,shouldClipSubject:!E.ignoreContainerClipping}),L=A.closestScrollable;return L&&(L.setAttribute(zf.contextId,n.contextId),L.addEventListener("scroll",p,qf(M.scrollOptions))),O},[n.contextId,l,p,i]),h=se(()=>{const N=t.current,S=To(N);return N&&S||Y(),Ll(S)},[]),v=se(()=>{const N=t.current;N||Y();const S=To(N);t.current=null,S&&(m.cancel(),S.removeAttribute(zf.contextId),S.removeEventListener("scroll",p,qf(N.scrollOptions)))},[p,m]),b=se(N=>{const S=t.current;S||Y();const E=To(S);E||Y(),E.scrollTop+=N.y,E.scrollLeft+=N.x},[]),w=ge(()=>({getDimensionAndWatchScroll:g,getScrollWhileDragging:h,dragStopped:v,scroll:b}),[v,g,h,b]),j=ge(()=>({uniqueId:r,descriptor:l,callbacks:w}),[w,l,r]);Nt(()=>(c.current=j.descriptor,s.droppable.register(j),()=>{t.current&&v(),s.droppable.unregister(j)}),[w,l,v,j,a,s.droppable]),Nt(()=>{t.current&&a.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)},[e.isDropDisabled,a]),Nt(()=>{t.current&&a.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)},[e.isCombineEnabled,a])}function al(){}const Kf={width:0,height:0,margin:K5},oI=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>e||n==="close"?Kf:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin},aI=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>{const r=oI({isAnimatingOpenOnMount:e,placeholder:t,animate:n});return{display:t.display,boxSizing:"border-box",width:r.width,height:r.height,marginTop:r.margin.top,marginRight:r.margin.right,marginBottom:r.margin.bottom,marginLeft:r.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:n!=="none"?Fs.placeholder:null}},iI=e=>{const t=y.useRef(null),n=se(()=>{t.current&&(clearTimeout(t.current),t.current=null)},[]),{animate:r,onTransitionEnd:s,onClose:a,contextId:i}=e,[l,c]=y.useState(e.animate==="open");y.useEffect(()=>l?r!=="open"?(n(),c(!1),al):t.current?al:(t.current=setTimeout(()=>{t.current=null,c(!1)}),n):al,[r,l,n]);const d=se(f=>{f.propertyName==="height"&&(s(),r==="close"&&a())},[r,a,s]),u=aI({isAnimatingOpenOnMount:l,animate:e.animate,placeholder:e.placeholder});return x.createElement(e.placeholder.tagName,{style:u,"data-rfd-placeholder-context-id":i,onTransitionEnd:d,ref:e.innerRef})};var lI=x.memo(iI);class cI extends x.PureComponent{constructor(...t){super(...t),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(t,n){return t.shouldAnimate?t.on?{isVisible:!0,data:t.on,animate:"open"}:n.isVisible?{isVisible:!0,data:n.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!t.on,data:t.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const t={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(t)}}const dI=e=>{const t=y.useContext(gi);t||Y();const{contextId:n,isMovementAllowed:r}=t,s=y.useRef(null),a=y.useRef(null),{children:i,droppableId:l,type:c,mode:d,direction:u,ignoreContainerClipping:f,isDropDisabled:m,isCombineEnabled:p,snapshot:g,useClone:h,updateViewportMaxScroll:v,getContainerForClone:b}=e,w=se(()=>s.current,[]),j=se((L=null)=>{s.current=L},[]);se(()=>a.current,[]);const N=se((L=null)=>{a.current=L},[]),S=se(()=>{r()&&v({maxScroll:zh()})},[r,v]);sI({droppableId:l,type:c,mode:d,direction:u,isDropDisabled:m,isCombineEnabled:p,ignoreContainerClipping:f,getDroppableRef:w});const E=ge(()=>x.createElement(cI,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:L,data:$,animate:P})=>x.createElement(lI,{placeholder:$,onClose:L,innerRef:N,animate:P,contextId:n,onTransitionEnd:S})),[n,S,e.placeholder,e.shouldAnimatePlaceholder,N]),I=ge(()=>({innerRef:j,placeholder:E,droppableProps:{"data-rfd-droppable-id":l,"data-rfd-droppable-context-id":n}}),[n,l,E,j]),A=h?h.dragging.draggableId:null,M=ge(()=>({droppableId:l,type:c,isUsingCloneFor:A}),[l,A,c]);function O(){if(!h)return null;const{dragging:L,render:$}=h,P=x.createElement(a1,{draggableId:L.draggableId,index:L.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(C,T)=>$(C,T,L));return pv.createPortal(P,b())}return x.createElement(sd.Provider,{value:M},i(I,g),O())};var uI=dI;function fI(){return document.body||Y(),document.body}const Yf={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:fI},d1=e=>{let t={...e},n;for(n in Yf)e[n]===void 0&&(t={...t,[n]:Yf[n]});return t},il=(e,t)=>e===t.droppable.type,Xf=(e,t)=>t.draggables[e.draggable.id],mI=()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t={...e,shouldAnimatePlaceholder:!1},n=We(a=>({draggableId:a.id,type:a.type,source:{index:a.index,droppableId:a.droppableId}})),r=We((a,i,l,c,d,u)=>{const f=d.descriptor.id;if(d.descriptor.droppableId===a){const g=u?{render:u,dragging:n(d.descriptor)}:null,h={isDraggingOver:l,draggingOverWith:l?f:null,draggingFromThisWith:f,isUsingPlaceholder:!0};return{placeholder:d.placeholder,shouldAnimatePlaceholder:!1,snapshot:h,useClone:g}}if(!i)return t;if(!c)return e;const p={isDraggingOver:l,draggingOverWith:f,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:d.placeholder,shouldAnimatePlaceholder:!0,snapshot:p,useClone:null}});return(a,i)=>{const l=d1(i),c=l.droppableId,d=l.type,u=!l.isDropDisabled,f=l.renderClone;if(Ws(a)){const m=a.critical;if(!il(d,m))return t;const p=Xf(m,a.dimensions),g=jt(a.impact)===c;return r(c,u,g,g,p,f)}if(a.phase==="DROP_ANIMATING"){const m=a.completed;if(!il(d,m.critical))return t;const p=Xf(m.critical,a.dimensions);return r(c,u,s1(m.result)===c,jt(m.impact)===c,p,f)}if(a.phase==="IDLE"&&a.completed&&!a.shouldFlush){const m=a.completed;if(!il(d,m.critical))return t;const p=jt(m.impact)===c,g=!!(m.impact.at&&m.impact.at.type==="COMBINE"),h=m.critical.droppable.id===c;return p?g?e:t:h?e:t}return t}},pI={updateViewportMaxScroll:lE},hI=ih(mI,pI,(e,t,n)=>({...d1(n),...e,...t}),{context:td,areStatePropsEqual:r1})(uI);var gI=hI;const Hn=y.forwardRef(({bgColor:e,children:t,droppableId:n,onDragEnd:r,className:s},a)=>o.jsx(CC,{onDragEnd:r,children:o.jsx(gI,{droppableId:n,children:(i,l)=>o.jsx("div",{ref:i.innerRef,...i.droppableProps,children:o.jsxs("ul",{ref:a,className:J("flex h-full flex-col gap-5 rounded-md p-4 pb-5 transition-all duration-300",l.isDraggingOver&&e,s),children:[t,i.placeholder]})})})}));Hn.displayName="DraggableList";function jr({children:e,className:t,color:n,customHandle:r=!1,customHandleColor:s,draggableId:a,index:i}){return o.jsx(GC,{draggableId:a,index:i,children:(l,c)=>r?o.jsxs("div",{...l.draggableProps,ref:l.innerRef,className:ze(c.isDragging&&`rounded-lg ring-2 ${n}`,"flex items-center",t),children:[o.jsx("div",{...l.dragHandleProps,className:"flex h-full items-center",children:o.jsx(yp,{size:32,weight:"duotone",className:ze(s)})}),e]}):o.jsx("div",{...l.draggableProps,...l.dragHandleProps,ref:l.innerRef,className:ze(c.isDragging&&`rounded-lg ring-2 ${n}`,t),children:e})})}const ss=e=>{const[t,n]=y.useState(e),r=y.useRef(null);return y.useEffect(()=>{setTimeout(()=>{e>t&&r.current&&r.current.scrollIntoView({behavior:"smooth",block:"end"}),n(e)},200)},[e]),{listRef:r}};function Nr({actions:e,cardBgColor:t="bg-card",cardSpacing:n="p-4",className:r,mediaData:s,noShadow:a=!1,onClick:i,subtitle:l,title:c,variant:d="default"}){return o.jsx("div",{className:r,children:d==="default"?o.jsxs("div",{onClick:i,className:ze("flex cursor-pointer items-center space-x-4 rounded-lg",!a&&"shadow-sm",t,n),children:[o.jsxs("div",{className:"flex-1 space-y-2",children:[o.jsx("div",{className:"break-all text-start text-sm font-medium leading-none",children:c}),o.jsx("div",{className:"text-sm text-muted-foreground",children:l})]}),o.jsx("div",{className:"flex gap-4",children:e})]}):d==="media"?o.jsxs("div",{onClick:i,className:ze("relative flex aspect-square cursor-pointer flex-col overflow-hidden rounded-lg p-[2px] shadow-md",t),children:[o.jsx(oo,{data:s}),o.jsxs("main",{className:"absolute inset-x-0 bottom-0 top-auto flex h-full flex-col justify-end gap-2 bg-gradient-to-t from-background via-card/80 via-60% to-card/10 p-4",children:[o.jsx("h1",{className:"text-base font-bold",children:c}),o.jsx("div",{className:"flex gap-2 self-end",children:e})]})]}):""})}const xI=function({audio:e,className:t,isSelected:n}){const r=Ob(new Ut);return o.jsx(Nr,{cardBgColor:J(n?"bg-item-audio/5":"bg-card"),className:J(n&&"rounded-sm ring-1 ring-item-audio",t),onClick:()=>r(e.id),actions:o.jsxs(o.Fragment,{children:[o.jsx(Up,{audio:e}),o.jsx(Wp,{audio:e})]}),subtitle:e.isPtt?"Enviando áudio como gravado":"Enviando áudio como encaminhado",title:e.name})},yI=y.memo(xI,(e,t)=>e.audio.id===t.audio.id&&e.audio.name===t.audio.name&&e.audio.isPtt===t.audio.isPtt&&e.audio.isFavorite===t.audio.isFavorite&&e.isSelected===t.isSelected);function vI(){const{filterTerm:e,filteredAudioList:t,selectedAudioId:n}=Qe.useDashboardAudioList(),{authError:r,isPremium:s}=rt.useGetAuthData(),a=Fb(new Ut),i=Mb(new Ut),{listRef:l}=ss(t.length),c=!s||r;return o.jsxs("div",{className:"flex w-full min-w-[300px] flex-1 flex-col overflow-y-auto max-md:h-[calc(100vh_-_300px)] lg:h-full",children:[o.jsxs("div",{className:"sticky top-0 z-[2] flex gap-5 pb-5 pt-4",children:[o.jsx(Xr,{className:"flex-1",onSearch:a,storeSearchTerm:e}),o.jsx(Mc,{})]}),t.length>0?o.jsx(Bn,{className:J(c?"h-[calc(100vh_-_450px)] md:h-[calc(100vh_-_315px)]":"h-full"),children:o.jsx(Hn,{className:"pb-0",ref:l,onDragEnd:d=>{d.destination&&i({destinationIndex:d.destination.index,sourceIndex:d.source.index})},droppableId:"audio-list",bgColor:"bg-item-audio-light/70 zv-dark:bg-item-audio-light/15",children:t.map((d,u)=>o.jsx(jr,{className:"p-0.5",color:"ring-item-audio",draggableId:d.id,index:u,customHandle:!0,customHandleColor:"text-item-audio",children:o.jsx(yI,{audio:d,className:"w-full",isSelected:n===d.id},d.id)},d.id))})}):o.jsx(hr,{description:o.jsxs("p",{className:"text-center text-2xl",children:["Nenhum áudio encontrado",o.jsx("br",{}),"Tente alterar a busca"]}),iconClasses:"text-item-audio/70"})]})}async function bI(e){if(chrome.tabs){const t=await L8();t!=null&&t.id?(await chrome.tabs.update(t.id,{active:!0}),chrome.tabs.sendMessage(t.id,{type:hv["Util:Request:OpenSupportChat"],data:e})):await chrome.tabs.create({url:"https://web.whatsapp.com/send/?phone=5514991238006",active:!0})}}const wI={sendOpenSupportChatRequest:bI},od={util:wI};class jI{constructor(t,n){this.repository=t,this.tracker=n}async execute({key:t,keyId:n,managerId:r,ownerId:s,shouldGetUsage:a}={key:null,keyId:null,managerId:null,ownerId:null,shouldGetUsage:!1}){try{const i=await this.repository.login({key:t,keyId:n,managerId:r,ownerId:s,shouldGetUsage:a});i.isLoggedIn?(i.userName&&ie({title:`Olá, ${i.userName}!`}),i.authError==="expiredKey"&&he({action:o.jsx(Yo,{secretKey:i.key??""}),title:i.authErrorMessage,description:"Renove a assinatura ou entre em contato com nosso suporte."}),i.authError==="restrictedKey"&&he({action:o.jsx(Yo,{secretKey:i.key??""}),title:i.authErrorMessage,description:"Renove a assinatura ou entre em contato com nosso suporte."}),i.authError==="inactiveKey"&&he({action:o.jsx(As,{}),title:i.authErrorMessage,description:"Ative sua chave no gerenciador de chaves ou entre em contato com nosso suporte."}),i.authError==="unknown"&&he({action:o.jsx(As,{}),title:i.authErrorMessage,description:"Verifique no gerenciador de chaves ou entre em contato com nosso suporte."}),this.tracker.trackEvent("auth:login:end")):(i.authError==="userNotFound"&&he({className:"",custom:!0,action:o.jsx(As,{}),title:i.authErrorMessage,description:"Verifique no gerenciador de chaves se a chave está ativa ou entre em contato com nosso suporte."}),i.authError==="managerNotFound"&&he({action:o.jsx(As,{}),title:i.authErrorMessage,description:"Verifique no gerenciador de chaves ou entre em contato com nosso suporte."}),this.tracker.trackException("exception:auth:not_logged_in",{exc_auth_error:i.authError??"",exc_auth_error_message:i.authErrorMessage??"",fatal:!1}))}catch(i){i instanceof $8?(le({title:"Ops! Algo deu errado...",description:o.jsxs("div",{children:[o.jsx("div",{children:"Estamos com problemas... Tente novamente em alguns minutos."}),o.jsx("div",{children:"Se o error persistir, entre em contato com o nosso suporte."})]})}),this.tracker.trackException("exception:auth",{exc_message:`fetch_failed|${i.message}`,fatal:!0})):i instanceof Error?(le({title:i.toString()}),this.tracker.trackException("exception:auth",{exc_message:i.message,fatal:!0})):(le({title:JSON.stringify(i)}),this.tracker.trackException("exception:auth",{exc_message:JSON.stringify(i),fatal:!0}))}}}function NI(e,t){const n=new jI(e,t);return n.execute.bind(n)}class EI{constructor(t){this.repository=t}async execute(){await this.repository.logout()}}function u1(e){const t=new EI(e);return t.execute.bind(t)}class yo{constructor(){pe(this,"authStore",rt)}async checkItemUsageLimit(...t){return await this.authStore.checkItemUsageLimit(...t)}async getAuthData(){return this.authStore.getAuthData()}getUsageLimit(){return this.authStore.store.getState().usageLimit}async getAuthError(){return this.authStore.authError}async getAuthErrorMessage(){return this.authStore.authErrorMessage}async getIsPremium(){return this.authStore.isPremium}async login(...t){return await this.authStore.login(...t)}async updateItemUsageLimit(...t){return await this.authStore.updateItemUsageLimit(...t)}async logout(...t){return await this.authStore.logout(...t)}async refreshPremium(...t){return await this.authStore.refreshPremium(...t)}async setPhoneNumber(...t){const[n]=t,r=await this.authStore.getAuthData(),s=ae.flags["usage-limit"];await this.authStore.setPhoneNumber(n),await this.login({key:r.key,keyId:r.keyId,managerId:r.managerId,ownerId:r.ownerId,shouldGetUsage:s})}async setWppVersion(...t){await this.authStore.setWppVersion(...t)}async setUserProfilePic(...t){await this.authStore.setUserProfilePic(...t)}}const os=()=>{const e=new yo,[t]=fe("key-warning-ad-block",ae),[n]=fe("flow",ae),[r]=fe("item-scheduling",ae),[s]=fe("remarketing",ae),[a]=fe("renew-plan-redirect",ae),[i]=fe("usage-limit",ae),l=hn.useSetRoute(),{authError:c,isPremium:d,key:u,unauthorizedNumber:f,userName:m,ownerId:p,keyId:g}=rt.useGetAuthData(),h=rt.useGetPhoneNumber(),v=I=>{od.util.sendOpenSupportChatRequest({message:I,trackParams:{zv_help_details:"banner",zv_help_type:"chat",zv_scope:"dashboard"}})},b=_8(t.payload.max_date).endOf("day"),w=t.payload.banner,j=t.enabled&&f,N="banner_dashboard",S=u??h??"",E=()=>{l("/flows")};return o.jsxs(o.Fragment,{children:[j&&o.jsx(Sv,{accessKey:u,bannerData:w,eventFunction:async()=>{await R8({data:{key:u,name:m,phone:h,tracking:{utm_source:"chrome_extension",utm_medium:N,utm_campaign:"zv_unauthorized_key",utm_content:S}},eventName:"button_click_action_unauth_banner_dashboard",keyId:g,userId:p})},iconSize:18,keyId:g,maxDate:b,ownerId:p,phoneNumber:h,userName:m,utmContent:S,utmMedium:N}),!d&&!j&&o.jsx(Cv,{authRepository:e,isEnableFlowFlag:n,keyId:g??"",onFlowUsageLimitClick:E,openSupportChat:()=>v("Olá! Estou com um plano gratuito, e gostaria de comprar um novo plano."),phoneNumber:h??"",secretKey:u??"",showActionsOnTitle:!0,showBulkMessagesLimit:s,showFlowLimit:n,showScheduleItemLimit:r,showUsageLimit:i,userId:p??"",userName:m??"",utmCampaign:"extension_premium_upgrade",utmMedium:"buy_plan_button_dash"}),d&&c==="expiredKey"&&o.jsx(Iv,{authRepository:e,isEnableFlowFlag:n,onFlowUsageLimitClick:E,openSupportChat:()=>v("Olá! Estou no painel de controle, com a chave expirada, e gostaria de ajuda, por favor."),secretKey:u??"",showActionsOnTitle:!0,showBulkMessagesLimit:s,showFlowLimit:n,showRenewButton:a,showScheduleItemLimit:r,showUsageLimit:i}),d&&c==="restrictedKey"&&o.jsx(Av,{authRepository:e,isEnableFlowFlag:n,onFlowUsageLimitClick:E,openSupportChat:()=>v("Olá! Estou no painel de controle, com a chave restrita, e gostaria de ajuda, por favor."),secretKey:u??"",showActionsOnTitle:!0,showBulkMessagesLimit:s,showFlowLimit:n,showRenewButton:a,showScheduleItemLimit:r,showUsageLimit:i}),d&&c==="inactiveKey"&&o.jsx(Dv,{authRepository:e,isEnableFlowFlag:n,onFlowUsageLimitClick:E,openSupportChat:()=>v("Olá! Estou no painel de controle, com a chave inativa, e gostaria de ajuda, por favor."),showActionsOnTitle:!0,showBulkMessagesLimit:s,showFlowLimit:n,showScheduleItemLimit:r,showUsageLimit:i}),d&&c==="unknown"&&o.jsx(Mv,{authRepository:e,openSupportChat:()=>v("Olá! Estou no painel de controle, com um erro desconhecido, e gostaria de ajuda, por favor."),showActionsOnTitle:!0,showUsageLimit:i})]})};function SI(){const[e]=fe("dashboard-audio-help-video",ae);return o.jsxs("div",{className:"flex flex-col justify-center gap-6 p-8 text-center",children:[o.jsx("img",{src:"./audio.svg",alt:"Imagem indicativa de que não há áudios cadastrados",className:"m-auto w-[280px]"}),o.jsxs("div",{children:[o.jsx("p",{children:"Ainda não há nenhum áudio cadastrado aqui."}),o.jsx("p",{children:"Que tal adicionar o seu primeiro áudio?"})]}),o.jsxs("div",{className:"flex justify-center gap-6",children:[(e==null?void 0:e.enabled)&&o.jsx(Ct,{tutorial:e}),o.jsx(Mc,{})]})]})}function CI(){const e=Qe.useGetHasAudios();return o.jsxs(o.Fragment,{children:[o.jsx(os,{}),e?o.jsx("div",{className:"flex h-full justify-center overflow-auto px-1 md:p-8 md:px-3",children:o.jsxs("div",{className:"relative flex h-full w-full max-w-[1400px] gap-5 max-md:flex-wrap",children:[o.jsx(vI,{}),o.jsx(zj,{})]})}):o.jsx(SI,{})]})}class II{constructor(t){this.backupDataRepository=t}async execute(){const t=Qe.audioList,n=He.documentList,r=dt.flowList,s=Ot.funnelList,a=Ze.mediaList,i=Ue.textMessageList,l=zt.triggerList,c=[];for(const h of t){const v={id:h.id,name:h.name,size:await De(h,{itemDataGetter:Qe.getAudioDataById})};c.push(v)}const d=[];for(const h of n){const v={id:h.id,name:h.name,size:await De(h,{itemDataGetter:He.getDocumentDataById})};d.push(v)}const u=[];for(const h of a){const v={id:h.id,name:h.name,size:await De(h,{itemDataGetter:Ze.getMediaDataById})};u.push(v)}const f=[];for(const h of i){const v={id:h.id,name:h.name,size:await De(h,{itemDataGetter:Ue.getTextMessageDataById})};f.push(v)}const m=[];for(const h of r){const v={id:h.id,name:h.published.name,size:await De(h)};m.push(v)}const p=[];for(const h of s){const v={id:h.id,name:h.name,size:await De(h)};p.push(v)}const g=[];for(const h of l){const v={id:h.id,name:h.name,size:await De(h)};g.push(v)}return await this.backupDataRepository.setOptions({audios:c,docs:d,flows:m,funnels:p,medias:u,messages:f,triggers:g})}}const f1=e=>{const t=new II(e);return t.execute.bind(t)},gn="3.0.0";async function $l({exportAll:e,selectedBackupOptions:t}){const n=Qe.store.getState().audioList,r=He.store.getState().documentList,s=dt.store.getState().flowList,a=Ot.store.getState().funnelList,i=Ze.store.getState().mediaList,l=Ue.store.getState().textMessageList,c=zt.store.getState().triggerList,d=n.filter(A=>e||t.find(M=>M.id===A.id)),u=r.filter(A=>e||t.find(M=>M.id===A.id)),f=s.filter(A=>e||t.find(M=>M.id===A.id)),m=a.filter(A=>e||t.find(M=>M.id===A.id)),p=i.filter(A=>e||t.find(M=>M.id===A.id)),g=l.filter(A=>e||t.find(M=>M.id===A.id)),h=c.filter(A=>e||t.find(M=>M.id===A.id));if(n.length===0&&r.length===0&&i.length===0&&l.length===0&&a.length===0&&c.length===0)throw Error("Sem dados para exportar");const v=[];for(const A of d){const M=await Qe.getAudioDataById(A.id);M&&v.push({data:M.data,id:A.id,isPtt:M.isPtt})}const b=[];for(const A of p){const M=await Ze.getMediaDataById(A.id);M&&b.push({caption:M.caption,data:M.data,id:A.id})}const w=[];for(const A of u){const M=await He.getDocumentDataById(A.id);M&&w.push({data:M.data,id:A.id,fileName:M.fileName})}const j=[];for(const A of g){const M=await Ue.getTextMessageDataById(A.id);M&&j.push({data:M.data,id:A.id})}const N=[...v,...w,...b,...j],E=JSON.stringify({audios:d,docs:u,medias:p,messages:g,flows:f,funnels:m,triggers:h,objectsList:N,version:gn,type:"partial"}),I=new Blob([E],{type:"application/json"});return{downloadLink:window.URL.createObjectURL(I)}}async function AI({exportAll:e,selectedBackupOptions:t}){const n=so(new Jr,ae,navigator.sendBeacon);return new Promise((r,s)=>{try{e?$l({exportAll:e}).then(a=>r(a)).catch(a=>{n.trackException("exception:backup_export:versioned",{exc_backup_version:gn,exc_message:a.message,fatal:!1}),s(a.message)}):$l({exportAll:e,selectedBackupOptions:t}).then(a=>r(a)).catch(a=>{n.trackException("exception:backup_export:partial",{exc_backup_version:gn,exc_message:a.message,fatal:!1}),s(a.message)})}catch(a){a instanceof Error?n.trackException("exception:backup_export:invalid",{exc_message:a.message,fatal:!1}):n.trackException("exception:backup_export:invalid",{exc_message:JSON.stringify(a),fatal:!1}),s(new Error("Falha ao exportar backup"))}})}class DI extends P8{constructor(t,n){super(t,n)}}class MI extends DI{constructor(t){super(t,"IMPORT_FAILED")}}function kI({objectsList:e,partialAudios:t}){let n=0;const r={},s=(l,c)=>{var u;r[c]||(r[c]=[]);const d=r[c].findIndex(f=>f.startsWith(l));if(d===-1)r[c]=[...r[c],l];else{const f=(u=r[c][d].split(" ").at(-1))==null?void 0:u.split("x")[1],m=Number.isNaN(Number(f))?1:Number(f);r[c].splice(d,1,`${l} x${m+1}`)}},a=t.filter((l,c)=>!l.id||l.id.trim()===""?(s("Áudio inexistente (removido)",l.name?l.name:`Áudio ${c+1}`),!1):!0).map(l=>{const c=Object.keys(l);let d=l.name;const u=l.asViewOnce??!1,f=l.isFavorite??!1,m=l.isPtt??!0;if(!c.includes("name")||l.name.trim()===""){n++;const p=`Áudio (corrigido) ${n}`;s("Áudio sem nome",p),d=p}return c.includes("asViewOnce")||s("Áudio sem opção definida (Visualização única)",d),c.includes("isFavorite")||s("Áudio sem opção definida (Favorito)",d),c.includes("isPtt")||s("Áudio sem opção definida (Gravado/encaminhado)",d),{asViewOnce:u,id:l.id,isFavorite:f,isPtt:m,name:d}}),i=a.reduce((l,c)=>(l.find(d=>d.id===c.id)||(l.push({data:"",id:c.id,isPtt:!0}),s("Áudio não encontrado (criado um vazio)",c.name)),l),e);return{audios:a,audiosObjectsList:i,audioWarns:r}}function OI({objectsList:e,partialDocuments:t}){let n=0;const r={},s=(l,c)=>{var u;r[c]||(r[c]=[]);const d=r[c].findIndex(f=>f.startsWith(l));if(d===-1)r[c]=[...r[c],l];else{const f=(u=r[c][d].split(" ").at(-1))==null?void 0:u.split("x")[1],m=Number.isNaN(Number(f))?1:Number(f);r[c].splice(d,1,`${l} x${m+1}`)}},a=t.filter((l,c)=>!l.id||l.id.trim()===""?(s("Documento inexistente (removido)",l.name?l.name:`Documento ${c+1}`),!1):!0).map(l=>{const c=Object.keys(l);let d=l.name;const u=l.isFavorite??!1;if(!c.includes("name")||l.name.trim()===""){n++;const f=`Documento (corrigido) ${n}`;s("Documento sem nome",f),d=f}return c.includes("isFavorite")||s("Documento sem opção definida (Favorito)",d),{id:l.id,name:d,isFavorite:u}}),i=a.reduce((l,c)=>(l.find(d=>d.id===c.id)||(l.push({data:"",fileName:"",id:c.id}),s("Documento não encontrado (criado um vazio)",c.name)),l),e);return{documents:a,documentsObjectsList:i,documentWarns:r}}const Jf=864e5;function TI({partialFunnels:e}){let t=0;const n={},r=(a,i)=>{var c;n[i]||(n[i]=[]);const l=n[i].findIndex(d=>d.startsWith(a));if(l===-1)n[i]=[...n[i],a];else{const d=(c=n[i][l].split(" ").at(-1))==null?void 0:c.split("x")[1],u=Number.isNaN(Number(d))?1:Number(d);n[i].splice(l,1,`${a} x${u+1}`)}};return{funnels:e.filter((a,i)=>!a.id||a.id.trim()===""?(r("Funil inexistente (removido)",a.name?a.name:`Funil ${i+1}`),!1):!0).map(a=>{const i=Object.keys(a);let l=a.name;const c=a.itemsSequence??[],d=a.isFavorite??!1;if(a.itemsSequence||r("Funil sem itens (vazio)",l),i.includes("isFavorite")||r("Funil sem opção definida (Favorito)",l),!i.includes("name")||l.trim()===""){t++;const f=`Funil (corrigido) ${t}`;r("Funil sem nome",f),l=f}return{itemsSequence:c.filter(f=>{const m=Object.keys(f);return!m.includes("id")||f.id.trim()===""?(r("Item de funil inexistente (removido)",l),!1):!m.includes("type")||f.id.trim()===""?(r("Item de funil sem tipo definido (removido)",l),!1):!0}).map(f=>{f.delayBeforeSend!==0&&!f.delayBeforeSend&&r("Item de funil sem delay",l),f.delayBeforeSend<0&&r("Item de funil com delay negativo",l),f.delayBeforeSend>Jf&&r("Item de funil com delay maior que o permitido",l);const m=f.delayBeforeSend?Math.min(Math.max(f.delayBeforeSend,0),Jf):0;return{...f,delayBeforeSend:m}}),id:a.id,name:l,isFavorite:d}}),funnelWarns:n}}function FI({objectsList:e,partialMedias:t}){let n=0;const r={},s=(l,c)=>{var u;r[c]||(r[c]=[]);const d=r[c].findIndex(f=>f.startsWith(l));if(d===-1)r[c]=[...r[c],l];else{const f=(u=r[c][d].split(" ").at(-1))==null?void 0:u.split("x")[1],m=Number.isNaN(Number(f))?1:Number(f);r[c].splice(d,1,`${l} x${m+1}`)}},a=t.filter((l,c)=>!l.id||l.id.trim()===""?(s("Mídia inexistente (removida)",l.name?l.name:`Mídia ${c+1}`),!1):!0).map(l=>{const c=Object.keys(l);let d=l.name;const u=l.asViewOnce??!1,f=l.isFavorite??!1;if(!c.includes("name")||l.name.trim()===""){n++;const m=`Mídia (corrigida) ${n}`;s("Mídia sem nome",m),d=m}return c.includes("asViewOnce")||s("Mídia sem opção definida (Visualização única)",d),c.includes("isFavorite")||s("Mídia sem opção definida (Favorito)",d),{id:l.id,name:d,asViewOnce:u,isFavorite:f}}),i=a.reduce((l,c)=>(l.find(d=>d.id===c.id)||(l.push({caption:"",data:"",id:c.id}),s("Mídia não encontrada (criada uma vazia)",c.name)),l),e);return{medias:a,mediasObjectsList:i,mediaWarns:r}}function _I({objectsList:e,partialMessages:t}){let n=0;const r={},s=(l,c)=>{var u;r[c]||(r[c]=[]);const d=r[c].findIndex(f=>f.startsWith(l));if(d===-1)r[c]=[...r[c],l];else{const f=(u=r[c][d].split(" ").at(-1))==null?void 0:u.split("x")[1],m=Number.isNaN(Number(f))?1:Number(f);r[c].splice(d,1,`${l} x${m+1}`)}},a=t.filter((l,c)=>!l.id||l.id.trim()===""?(s("Mensagem inexistente (removida)",l.name?l.name:`Mensagem ${c+1}`),!1):!0).map(l=>{const c=Object.keys(l);let d=l.name;const u=l.isFavorite??!1;if(!c.includes("name")||l.name.trim()===""){n++;const f=`Mensagem (corrigida) ${n}`;s("Mensagem sem nome",f),d=f}return c.includes("isFavorite")||s("Mensagem sem opção definida (Favorito)",d),{id:l.id,name:d,isFavorite:u}}),i=a.reduce((l,c)=>(l.find(d=>d.id===c.id)||(l.push({data:"",id:c.id}),s("Mensagem não encontrada (criada uma vazia)",c.name)),l),e);return{messages:a,messagesObjectsList:i,messageWarns:r}}const Qf=864e5;function PI({partialTriggers:e}){let t=0;const n={},r=(a,i)=>{var c;n[i]||(n[i]=[]);const l=n[i].findIndex(d=>d.startsWith(a));if(l===-1)n[i]=[...n[i],a];else{const d=(c=n[i][l].split(" ").at(-1))==null?void 0:c.split("x")[1],u=Number.isNaN(Number(d))?1:Number(d);n[i].splice(l,1,`${a} x${u+1}`)}};return{triggers:e.filter((a,i)=>!a.id||a.id.trim()===""?(r("Gatilho inexistente (removido)",a.name?a.name:`Gatilho ${i+1}`),!1):!0).map(a=>{const i=Object.keys(a),l=a.keywordRules??[];let c=a.funnelId;const d=a.isCaseSensitive??!1,u=a.isEnabled??!1;let f=a.millisecondsBeforeSend,m=a.name;const p=a.sendToContacts??!0,g=a.sendToGroups??!0,h=a.isFavorite??!1,v=a.triggeredAt||null,b=a.webhook||"";if(a.keywordRules||r("Gatilho sem regras",m),!i.includes("name")||a.name.trim()===""){t++;const N=`Gatilho (corrigido) ${t}`;r("Gatilho sem nome",N),m=N}i.includes("sendToContacts")||r("Gatilho sem opção definida (Enviar para contatos)",m),i.includes("sendToGroups")||r("Gatilho sem opção definida (Enviar para grupos)",m),i.includes("isEnabled")||r("Gatilho sem opção definida (Ativo)",m),i.includes("isCaseSensitive")||r("Gatilho sem opção definida (Ignorar maiúsculas e minúsculas)",m),i.includes("millisecondsBeforeSend")?a.millisecondsBeforeSend<0?r("Gatilho com delay negativo",m):a.millisecondsBeforeSend>Qf&&r("Gatilho com delay maior que o permitido",m):r("Gatilho sem opção definida (Delay)",m),f=a.millisecondsBeforeSend?Math.min(Math.max(a.millisecondsBeforeSend,0),Qf):5e3,i.includes("isFavorite")||r("Gatilho sem opção definida (Favorito)",m),i.includes("triggeredAt")||r("Gatilho sem opção definida (Data de disparo)",m),i.includes("webhook")||r("Gatilho sem opção definida (Webhook)",m),i.includes("funnelId")||(r("Gatilho sem funil associado",m),c="");const w=["contains","equals","notContains","startsWith"],j=l.filter(N=>!N.id||N.id.trim()===""?(r("Regra de gatilho inexistente (removida)",a.name),!1):!0).map(N=>{let S=N.type;!N.type||N.type.trim()===""?(r("Regra de gatilho sem tipo definido",a.name),S="contains"):w.includes(S)||(r("Regra de gatilho com tipo inválido",a.name),S="contains"),N.keywords||r("Regra de gatilho sem palavras-chave",a.name);const E=N.keywords??[];return{id:N.id,keywords:E,type:S}});return{sendToContacts:p,sendToGroups:g,isEnabled:u,funnelId:c,id:a.id,isCaseSensitive:d,keywordRules:j,name:m,millisecondsBeforeSend:f,isFavorite:h,triggeredAt:v,webhook:b}}),triggerWarns:n}}class ad extends Error{constructor(t){super(t),this.name="BackupMalformattedError"}}const Fo=864e5,m1=(e,t,n)=>{const r=[],s=(i,l)=>r.push([i,l]);return{repairedFlowNodes:e.filter(i=>!Object.keys(i).includes("id")||i.id.trim()===""?(s("Item de fluxo inexistente (removido)",n),!1):!be.isAudioNode(i)&&!be.isTextNode(i)&&!be.isContactNode(i)&&!be.isDocumentNode(i)&&!be.isMediaNode(i)&&!be.isDelayNode(i)&&!be.isUserInputNode(i)?(s("Item de fluxo com tipo inválido (removido)",n),!1):!0).map(i=>{if(be.isAudioNode(i)){i.type!=="audio"&&(s("Item de fluxo do tipo áudio com tipo errado",n),i.type="audio"),(!i.flowId||i.flowId.trim()==="")&&(s("Item de fluxo do tipo áudio desassociado de um fluxo",n),i.flowId=t),(!i.itemId||i.itemId.trim()==="")&&s("Item de fluxo do tipo áudio sem item associado",n),i.nextNodeId!==null&&(!i.nextNodeId||i.nextNodeId.trim()==="")&&(s("Item de fluxo do tipo áudio com próximo item associado errado",n),i.nextNodeId=null),i.position||(s("Item de fluxo do tipo áudio sem posição",n),i.position={x:0,y:0}),i.simulationDelay!==0&&!i.simulationDelay&&s("Item de fluxo do tipo áudio sem delay",n),i.simulationDelay<0&&s("Item de fluxo do tipo áudio com delay negativo",n),i.simulationDelay>Fo&&s("Item de fluxo do tipo áudio com delay maior que o permitido",n);const l=i.simulationDelay?Math.min(Math.max(i.simulationDelay,0),Fo):0;return{...i,simulationDelay:l}}if(be.isTextNode(i)){i.type!=="text"&&(s("Item de fluxo do tipo mensagem de texto com tipo errado",n),i.type="text"),(!i.flowId||i.flowId.trim()==="")&&(s("Item de fluxo do tipo mensagem de texto desassociado de um fluxo",n),i.flowId=t),(!i.itemId||i.itemId.trim()==="")&&s("Item de fluxo do tipo mensagem de texto sem item associado",n),i.nextNodeId!==null&&(!i.nextNodeId||i.nextNodeId.trim()==="")&&(s("Item de fluxo do tipo mensagem de texto com próximo item associado errado",n),i.nextNodeId=null),i.position||(s("Item de fluxo do tipo mensagem de texto sem posição",n),i.position={x:0,y:0}),i.simulationDelay!==0&&!i.simulationDelay&&s("Item de fluxo do tipo mensagem de texto sem delay",n),i.simulationDelay<0&&s("Item de fluxo do tipo mensagem de texto com delay negativo",n),i.simulationDelay>Fo&&s("Item de fluxo do tipo mensagem de texto com delay maior que o permitido",n);const l=i.simulationDelay?Math.min(Math.max(i.simulationDelay,0),Fo):0;return{...i,simulationDelay:l}}if(be.isContactNode(i))return i.type!=="contact"&&(s("Item de fluxo do tipo contato com tipo errado",n),i.type="contact"),(!i.flowId||i.flowId.trim()==="")&&(s("Item de fluxo do tipo contato desassociado de um fluxo",n),i.flowId=t),i.nextNodeId!==null&&(!i.nextNodeId||i.nextNodeId.trim()==="")&&(s("Item de fluxo do tipo contato com próximo item associado errado",n),i.nextNodeId=null),i.position||(s("Item de fluxo do tipo contato sem posição",n),i.position={x:0,y:0}),(!i.contactName||i.contactName.trim()==="")&&s("Item de fluxo do tipo contato sem nome de contato",n),(!i.contactPhone||i.contactPhone.trim()==="")&&s("Item de fluxo do tipo contato sem número de telefone",n),{...i};if(be.isDocumentNode(i))return i.type!=="document"&&(s("Item de fluxo do tipo documento com tipo errado",n),i.type="document"),(!i.flowId||i.flowId.trim()==="")&&(s("Item de fluxo do tipo documento desassociado de um fluxo",n),i.flowId=t),i.nextNodeId!==null&&(!i.nextNodeId||i.nextNodeId.trim()==="")&&(s("Item de fluxo do tipo documento com próximo item associado errado",n),i.nextNodeId=null),i.position||(s("Item de fluxo do tipo documento sem posição",n),i.position={x:0,y:0}),{...i};if(be.isMediaNode(i))return i.type!=="media"&&(s("Item de fluxo do tipo mídia com tipo errado",n),i.type="media"),(!i.flowId||i.flowId.trim()==="")&&(s("Item de fluxo do tipo mídia desassociado de um fluxo",n),i.flowId=t),i.nextNodeId!==null&&(!i.nextNodeId||i.nextNodeId.trim()==="")&&(s("Item de fluxo do tipo mídia com próximo item associado errado",n),i.nextNodeId=null),i.position||(s("Item de fluxo do tipo mídia sem posição",n),i.position={x:0,y:0}),{...i};if(be.isDelayNode(i)){i.type!=="delay"&&(s("Item de fluxo do tipo delay com tipo errado",n),i.type="delay"),(!i.flowId||i.flowId.trim()==="")&&(s("Item de fluxo do tipo delay desassociado de um fluxo",n),i.flowId=t),i.nextNodeId!==null&&(!i.nextNodeId||i.nextNodeId.trim()==="")&&(s("Item de fluxo do tipo delay com próximo item associado errado",n),i.nextNodeId=null),i.position||(s("Item de fluxo do tipo delay sem posição",n),i.position={x:0,y:0});const l=["seconds","minutes","hours","days"];(!i.timeUnitType||!l.includes(i.timeUnitType))&&(s("Item de fluxo do tipo delay com unidade de delay incorreta",n),i.timeUnitType="seconds"),i.delayInMs!==0&&!i.delayInMs&&s("Item de fluxo do tipo delay sem delay",n),i.delayInMs<1&&s("Item de fluxo do tipo delay com delay negativo",n),i.delayInMs>Number.MAX_SAFE_INTEGER&&s("Item de fluxo do tipo delay com delay maior que o suportado",n);const c=i.delayInMs?Math.min(Math.max(i.delayInMs,1),Number.MAX_SAFE_INTEGER):1;return{...i,delayInMs:c}}if(be.isUserInputNode(i)){i.type!=="user-input"&&(s("Item de fluxo do tipo resposta do usuário com tipo errado",n),i.type="user-input"),(!i.flowId||i.flowId.trim()==="")&&(s("Item de fluxo do tipo resposta do usuário desassociado de um fluxo",n),i.flowId=t),i.nextNodeId!==null&&(!i.nextNodeId||i.nextNodeId.trim()==="")&&(s("Item de fluxo do tipo resposta do usuário com próximo item associado errado",n),i.nextNodeId=null),i.position||(s("Item de fluxo do tipo resposta do usuário sem posição",n),i.position={x:0,y:0});const l=["anyTextMessage","anything","contains","equals","startsWith"];(!i.compareRule||!l.includes(i.compareRule))&&(s("Item de fluxo do tipo resposta do usuário com regra incorreta",n),i.compareRule="anything"),l.includes(i.compareRule)&&i.compareRule!=="anyTextMessage"&&i.compareRule!=="anything"&&(!i.expectedMessage||i.expectedMessage.trim()==="")&&(s("Item de fluxo do tipo resposta do usuário com mensagem esperada incorreta",n),i.compareRule="anything",i.expectedMessage=void 0);const c=["seconds","minutes","hours","days"];return(!i.timeUnitType||!c.includes(i.timeUnitType))&&(s("Item de fluxo do tipo resposta do usuário com unidade de resposta do usuário incorreta",n),i.timeUnitType="seconds"),{...i}}throw new Error(`Item de fluxo com formato inválido: ${i.type}`)}),warns:r}},p1=(e,t,n)=>{if(!e)return{repairedFlowStartNode:t,warns:[]};const r=[],s=(i,l)=>r.push([i,l]),a=e;return typeof a.enabledSchedule!="boolean"&&!a.enabledSchedule&&(s("Nó inicial do fluxo sem opção definida (Agendamento habilitado)",n),a.enabledSchedule=t.enabledSchedule),typeof a.enabledTrigger!="boolean"&&!a.enabledTrigger&&(s("Nó inicial do fluxo sem opção definida (Gatilho habilitado)",n),a.enabledTrigger=t.enabledTrigger),(!a.flowId||a.flowId.trim()==="")&&(s("Nó inicial do fluxo sem opção definida (Id do fluxo)",n),a.flowId=t.flowId),a.nextNodeId!==null&&(!a.nextNodeId||a.nextNodeId.trim()==="")&&(s("Nó inicial do fluxo sem opção definida (Id do próximo nó)",n),a.nextNodeId=t.nextNodeId),(!a.position||!a.position.x||!a.position.y)&&(s("Nó inicial do fluxo sem opção definida (Posição)",n),a.position=t.position),(!a.type||a.type!=="start")&&(s("Nó inicial do fluxo com opção incorreta (Tipo)",n),a.type=t.type),a.schedule||(s("Nó inicial do fluxo sem opção definida (Agendamento)",n),a.schedule=t.schedule),a.schedule&&(!a.schedule.days||!Array.isArray(a.schedule.days))&&(s("Nó inicial do fluxo com opção incorreta (Dias do agendamento)",n),a.schedule.days=t.schedule.days),a.schedule&&(!a.schedule.maxTime||typeof a.schedule.maxTime!="string")&&(s("Nó inicial do fluxo com opção incorreta (Hora máxima do agendamento)",n),a.schedule.maxTime=t.schedule.maxTime),a.schedule&&(!a.schedule.minTime||typeof a.schedule.minTime!="string")&&(s("Nó inicial do fluxo com opção incorreta (Hora máxima do agendamento)",n),a.schedule.minTime=t.schedule.minTime),a.trigger||(s("Nó inicial do fluxo sem opção definida (Gatilho)",n),a.trigger=t.trigger),a.trigger&&typeof a.trigger.isCaseSensitive!="boolean"&&!a.trigger.isCaseSensitive&&(s("Nó inicial do fluxo com opção incorreta (Ignorar caixa do gatilho)",n),a.trigger.isCaseSensitive=t.trigger.isCaseSensitive),a.trigger&&typeof a.trigger.sendToContacts!="boolean"&&!a.trigger.sendToContacts&&(s("Nó inicial do fluxo com opção incorreta (Enviar para contatos do gatilho)",n),a.trigger.sendToContacts=t.trigger.sendToContacts),a.trigger&&typeof a.trigger.sendToGroups!="boolean"&&!a.trigger.sendToGroups&&(s("Nó inicial do fluxo com opção incorreta (Enviar para grupos do gatilho)",n),a.trigger.sendToGroups=t.trigger.sendToGroups),a.trigger&&(!a.trigger.keywordRules||!Array.isArray(a.trigger.keywordRules))&&(s("Nó inicial do fluxo com opção incorreta (Regras do gatilho)",n),a.trigger.keywordRules=t.trigger.keywordRules),{repairedFlowStartNode:a,warns:r}},e0=(e,t,n,r)=>{let s=0;const a=[],i=(w,j)=>a.push([w,j]),l=Object.keys(e),c=e.enabled??!1,d=e.isFavorite??!1,u=e.nodes??[],f=e.updatedAt??new Date;let m=e.name,p=e.startNode;if(!l.includes("name")||m.trim()===""){s++;const w=`Fluxo (${r}) (corrigido) ${s}`;i(`Dados de fluxo (${r}) sem nome`,w),m=w}l.includes("updatedAt")||i(`Dados de fluxo (${r}) sem opção definida (Data de atualização)`,m),l.includes("enabled")||i(`Dados de fluxo (${r}) sem opção definida (Habilitado)`,m),l.includes("isFavorite")||i(`Dados de fluxo (${r}) sem opção definida (Favorito)`,m),(!l.includes("nodes")||!e.nodes)&&i(`Dados de fluxo (${r}) sem nós (vazio)`,m),(!l.includes("startNode")||!e.startNode)&&(i(`Dados de fluxo (${r}) sem nó inicial`,m),p=t);const{repairedFlowStartNode:g,warns:h}=p1(p,t,m);for(const w of h)i(...w);const{repairedFlowNodes:v,warns:b}=m1(u,n,m);for(const w of b)i(...w);return{repairedFlowData:{enabled:c,isFavorite:d,name:m,nodes:v,startNode:g,updatedAt:f},warns:a}},h1=e=>ja.create({flowId:e,schedule:{days:[],maxTime:"00:00",minTime:"00:00"},enabledSchedule:!1,enabledTrigger:!1,trigger:{isCaseSensitive:!1,keywordRules:[],sendToContacts:!0,sendToGroups:!0},nextNodeId:null,position:{x:250,y:250},type:"start"},new Me).metadata,LI=(e,t)=>({enabled:!0,isFavorite:!1,name:t,nodes:[],startNode:h1(e),updatedAt:new Date});function $I({partialFlows:e}){let t=0;const n={},r=(a,i)=>{var c;n[i]||(n[i]=[]);const l=n[i].findIndex(d=>d.startsWith(a));if(l===-1)n[i]=[...n[i],a];else{const d=(c=n[i][l].split(" ").at(-1))==null?void 0:c.split("x")[1],u=Number.isNaN(Number(d))?1:Number(d);n[i].splice(l,1,`${a} x${u+1}`)}};return{flows:e.filter((a,i)=>{var l,c;return!a.id||a.id.trim()===""?(r("Fluxo inexistente (removido)",((l=a.draft)==null?void 0:l.name)??((c=a.published)==null?void 0:c.name)??`Fluxo ${i+1}`),!1):!0}).map(a=>{const i=Object.keys(a),l=a.createdAt??new Date,c=a.updatedAt??new Date;let d=a.draft,u=a.published;const f=h1(a.id);if(!i.includes("draft")&&!i.includes("published")){t++;const m="enabled"in a&&typeof a.enabled=="boolean"?a.enabled??!1:null,p="isFavorite"in a&&typeof a.isFavorite=="boolean"?a.isFavorite??!1:null,g="nodes"in a&&Array.isArray(a.nodes)?a.nodes??[]:null,h="updatedAt"in a?a.updatedAt??new Date:null,v="name"in a&&typeof a.name=="string"?a.name:null,b="startNode"in a&&be.isStartNode(a.startNode)?a.startNode:null,w=v??`Fluxo (corrigido) ${t}`,j=LI(a.id,w),{repairedFlowStartNode:N,warns:S}=p1(b,f,w);for(const M of S)r(...M);const{repairedFlowNodes:E,warns:I}=m1(g??[],a.id,w);for(const M of I)r(...M);const A={enabled:m??j.enabled,isFavorite:p??j.isFavorite,name:w,nodes:g?E:j.nodes,startNode:b?N:j.startNode,updatedAt:h??j.updatedAt};r("Fluxo sem rascunho e sem dados publicados",w),d=A,u=A}if(i.includes("draft")){const{repairedFlowData:m,warns:p}=e0(a.draft,f,a.id,"Rascunho");d=m;for(const g of p)r(...g)}if(i.includes("published")){const{repairedFlowData:m,warns:p}=e0(a.published,f,a.id,"Publicado");u=m;for(const g of p)r(...g)}return i.includes("draft")&&!i.includes("published")&&(u=d),!i.includes("draft")&&i.includes("published")&&(d=u),i.includes("createdAt")||r("Fluxo sem opção definida (Data de criação)",u.name),i.includes("updatedAt")||r("Fluxo sem opção definida (Data de atualização)",u.name),{createdAt:l,id:a.id,updatedAt:c,draft:d,published:u}}),flowWarns:n}}const g1=e=>typeof e=="object"&&e!==null&&"version"in e&&typeof e.version=="string"&&e.version>=gn&&"audios"in e&&Array.isArray(e.audios)&&"docs"in e&&Array.isArray(e.docs)&&"funnels"in e&&Array.isArray(e.funnels)&&"medias"in e&&Array.isArray(e.medias)&&"messages"in e&&Array.isArray(e.messages)&&"triggers"in e&&Array.isArray(e.triggers)&&"objectsList"in e&&Array.isArray(e.objectsList)&&(!("type"in e)||"type"in e&&e.type==="partial")&&(!("flows"in e)||"flows"in e&&Array.isArray(e.flows));async function yi(e,t,n){t==="replace"&&await ap({awaitAfter:5e3});const{flows:r,flowWarns:s}=$I({partialFlows:e.flows??[]}),{funnels:a,funnelWarns:i}=TI({partialFunnels:e.funnels}),{triggers:l,triggerWarns:c}=PI({partialTriggers:e.triggers}),{audiosObjectsList:d,audios:u,audioWarns:f}=kI({objectsList:e.objectsList,partialAudios:e.audios}),{documents:m,documentsObjectsList:p,documentWarns:g}=OI({objectsList:d,partialDocuments:e.docs}),{mediasObjectsList:h,medias:v,mediaWarns:b}=FI({partialMedias:e.medias,objectsList:p}),{messages:w,messagesObjectsList:j,messageWarns:N}=_I({partialMessages:e.messages,objectsList:h});u.length>0&&Qe.store.setState(k=>({audioList:k.audioList.map(R=>u.find(B=>B.id===R.id)||R).concat(...u.filter(R=>!k.audioList.find(H=>H.id===R.id))),selectedAudioId:"",filterTerm:""})),m.length>0&&He.store.setState(k=>({documentList:k.documentList.map(R=>m.find(B=>B.id===R.id)||R).concat(...m.filter(R=>!k.documentList.find(H=>H.id===R.id))),selectedDocumentId:"",filterTerm:""})),v.length>0&&Ze.store.setState(k=>({mediaList:k.mediaList.map(R=>v.find(B=>B.id===R.id)||R).concat(...v.filter(R=>!k.mediaList.find(H=>H.id===R.id))),selectedMediaId:"",filterTerm:""})),w.length>0&&Ue.store.setState(k=>({textMessageList:k.textMessageList.map(R=>w.find(B=>B.id===R.id)||R).concat(...w.filter(R=>!k.textMessageList.find(H=>H.id===R.id))),selectedTextMessageId:"",filterTerm:""})),a.length>0&&Ot.store.setState(k=>({funnelList:k.funnelList.map(R=>a.find(B=>B.id===R.id)||R).concat(...a.filter(R=>!k.funnelList.find(H=>H.id===R.id))),selectedFunnelId:"",filterTerm:""})),l.length>0&&zt.store.setState(k=>({triggerList:k.triggerList.map(R=>l.find(B=>B.id===R.id)||R).concat(...l.filter(R=>!k.triggerList.find(H=>H.id===R.id))),selectedTriggerId:"",filterTerm:""})),r.length>0&&dt.store.setState(k=>({flowList:k.flowList.map(R=>r.find(B=>B.id===R.id)||R).concat(...r.filter(R=>!k.flowList.find(H=>H.id===R.id)))}));for(const k of j){if(!(k!=null&&k.id))return;const{id:R,...H}=structuredClone(k);Sl.setOnStorage({[R]:H})}await Sl.getParsedFromStorage("LocalStorageReady");const S={...f,...n.audioWarns},E={...g,...n.documentWarns},I={...s,...n.flowWarns},A={...i,...n.funnelWarns},M={...b,...n.mediaWarns},O={...N,...n.messageWarns},L={...c,...n.triggerWarns},$=Object.keys(S).length>0&&Object.values(S).some(k=>k.length>0),P=Object.keys(E).length>0&&Object.values(E).some(k=>k.length>0),C=Object.keys(I).length>0&&Object.values(I).some(k=>k.length>0),T=Object.keys(A).length>0&&Object.values(A).some(k=>k.length>0),D=Object.keys(M).length>0&&Object.values(M).some(k=>k.length>0),_=Object.keys(O).length>0&&Object.values(O).some(k=>k.length>0),F=Object.keys(L).length>0&&Object.values(L).some(k=>k.length>0);if($||P||C||T||D||_||F)throw new ad(JSON.stringify({audiosWithProblem:S,docsWithProblem:E,flowsWithProblem:I,funnelsWithProblem:A,mediasWithProblem:M,messagesWithProblem:O,triggersWithProblem:L}))}const RI=e=>typeof e=="object"&&e!==null&&Array.isArray(e),t0=({objectsList:e,oldAudios:t})=>{let n=0;const r={},s=(a,i)=>{var c;r[i]||(r[i]=[]);const l=r[i].findIndex(d=>d.startsWith(a));if(l===-1)r[i]=[...r[i],a];else{const d=(c=r[i][l].split(" ").at(-1))==null?void 0:c.split("x")[1],u=Number.isNaN(Number(d))?1:Number(d);r[i].splice(l,1,`${a} x${u+1}`)}};try{if(!t)throw new Error("Backup sem áudios");const a=JSON.parse(t);if(!RI(a))throw new Error("Lista de áudios em formato incorreto");const i=a.filter((d,u)=>!d.id||d.id.trim()===""?(s("Áudio inexistente (removido)",d.name?d.name:`Áudio ${u+1}`),!1):!0).map(d=>{const u=Object.keys(d);let f=d.name,m=d.type;if(!u.includes("name")||d.name.trim()===""){n++;const p=`Áudio (corrigido) ${n}`;s("Áudio sem nome",p),f=p}return u.includes("type")?m!=="audios"&&(s("Áudio com tipo errado",f),m="audios"):(s("Áudio sem opção definida (Tipo)",f),m="audios"),{id:d.id,name:f,type:m}}),l=i.map(d=>{var u;return{id:d.id,isFavorite:!1,name:d.name,asViewOnce:!1,isPtt:((u=e==null?void 0:e.find(f=>f.id===d.id&&f.type==="audios"))==null?void 0:u.sendAsForwarded)??!0}}),c=i.reduce((d,u)=>(d.find(f=>f.id===u.id)||(d.push({data:"",name:u.name,id:u.id,sendAsForwarded:!0,type:u.type}),s("Áudio não encontrado (criado um vazio)",u.name)),d),e);return{audios:l,audiosObjectsList:c,audioWarns:r}}catch(a){return console.log(a),a instanceof Error?{audios:[],audiosObjectsList:e,audioWarns:{"Todos os áudios":[a.message]}}:{audios:[],audiosObjectsList:e,audioWarns:{"Todos os áudios":[JSON.stringify(a)]}}}},VI=e=>typeof e=="object"&&e!==null&&Array.isArray(e),BI={audios:"audio",medias:"media",mensagens:"message"},n0=864e5,r0=({oldFunnels:e})=>{let t=0;const n={},r=(s,a)=>{var l;n[a]||(n[a]=[]);const i=n[a].findIndex(c=>c.startsWith(s));if(i===-1)n[a]=[...n[a],s];else{const c=(l=n[a][i].split(" ").at(-1))==null?void 0:l.split("x")[1],d=Number.isNaN(Number(c))?1:Number(c);n[a].splice(i,1,`${s} x${d+1}`)}};try{if(!e)throw new Error("Backup sem funis");const s=JSON.parse(e);if(!VI(s))throw new Error("Lista de funis em formato incorreto");return{funnels:s.filter((l,c)=>!l.id||l.id.trim()===""?(r("Funil inexistente (removido)",l.name?l.name:`Funil ${c+1}`),!1):!0).map(l=>{const c=Object.keys(l);let d=l.name;const u=l.data??[];let f=l.type;if(l.data||r("Funil sem itens (vazio)",d),c.includes("type")?f!=="funis"&&(r("Funil com tipo errado",d),f="funis"):(r("Funil sem opção definida (Tipo)",d),f="funis"),!c.includes("name")||d.trim()===""){t++;const p=`Funil (corrigido) ${t}`;r("Funil sem nome",p),d=p}return{data:u.filter(p=>{const g=Object.keys(p);return!g.includes("id")||p.id.trim()===""?(r("Item de funil inexistente (removido)",d),!1):!g.includes("type")||p.type.trim()===""?(r("Item de funil sem tipo definido (removido)",d),!1):!0}).map(p=>{p.delay!==0&&!p.delay&&r("Item de funil sem delay",d),p.delay<0&&r("Item de funil com delay negativo",d),p.delay>n0&&r("Item de funil com delay maior que o permitido",d);const g=p.delay?Math.min(Math.max(p.delay,0),n0):0;return{...p,delay:g}}),id:l.id,name:d,type:f}}).map(l=>{var c;return{id:l.id,isFavorite:!1,name:l.name,itemsSequence:((c=l.data)==null?void 0:c.map(d=>({delayBeforeSend:d.delay,funnelId:l.id,id:new Me().toString(),itemId:d.id,type:BI[d.type]})))??[]}}),funnelWarns:n}}catch(s){return console.log(s),s instanceof Error?{funnels:[],funnelWarns:{"Todos os funis":[s.message]}}:{funnels:[],funnelWarns:{"Todos os funis":[JSON.stringify(s)]}}}},zI=e=>typeof e=="object"&&e!==null&&Array.isArray(e),s0=({objectsList:e,oldMedias:t})=>{let n=0;const r={},s=(a,i)=>{var c;r[i]||(r[i]=[]);const l=r[i].findIndex(d=>d.startsWith(a));if(l===-1)r[i]=[...r[i],a];else{const d=(c=r[i][l].split(" ").at(-1))==null?void 0:c.split("x")[1],u=Number.isNaN(Number(d))?1:Number(d);r[i].splice(l,1,`${a} x${u+1}`)}};try{if(!t)throw new Error("Backup sem mídias");const a=JSON.parse(t);if(!zI(a))throw new Error("Lista de mídias em formato incorreto");const i=a.filter((d,u)=>!d.id||d.id.trim()===""?(s("Mídia inexistente (removida)",d.name?d.name:`Mídia ${u+1}`),!1):!0).map(d=>{const u=Object.keys(d);let f=d.name,m=d.type;if(!u.includes("name")||d.name.trim()===""){n++;const p=`Mídia (corrigida) ${n}`;s("Mídia sem nome",p),f=p}return u.includes("type")?m!=="medias"&&(s("Mídia com tipo errado",f),m="medias"):(s("Mídia sem opção definida (Tipo)",f),m="medias"),{id:d.id,name:f,type:m}}),l=i.map(d=>({id:d.id,isFavorite:!1,name:d.name,asViewOnce:!1})),c=i.reduce((d,u)=>(d.find(f=>f.id===u.id)||(d.push({data:"",name:u.name,id:u.id,type:u.type}),s("Mídia não encontrado (criada uma vazia)",u.name)),d),e);return{medias:l,mediasObjectsList:c,mediaWarns:r}}catch(a){return console.log(a),a instanceof Error?{medias:[],mediasObjectsList:e,mediaWarns:{"Todas as mídias":[a.message]}}:{medias:[],mediasObjectsList:e,mediaWarns:{"Todas as mídias":[JSON.stringify(a)]}}}},HI=e=>typeof e=="object"&&e!==null&&Array.isArray(e),o0=({objectsList:e,oldMessages:t})=>{let n=0;const r={},s=(a,i)=>{var c;r[i]||(r[i]=[]);const l=r[i].findIndex(d=>d.startsWith(a));if(l===-1)r[i]=[...r[i],a];else{const d=(c=r[i][l].split(" ").at(-1))==null?void 0:c.split("x")[1],u=Number.isNaN(Number(d))?1:Number(d);r[i].splice(l,1,`${a} x${u+1}`)}};try{if(!t)throw new Error("Backup sem mensagens");const a=JSON.parse(t);if(!HI(a))throw new Error("Lista de mensagens em formato incorreto");const i=a.filter((d,u)=>!d.id||d.id.trim()===""?(s("Mensagem inexistente (removida)",d.name?d.name:`Mensagem ${u+1}`),!1):!0).map(d=>{const u=Object.keys(d);let f=d.name,m=d.type;if(!u.includes("name")||d.name.trim()===""){n++;const p=`Mensagem (corrigida) ${n}`;s("Mensagem sem nome",p),f=p}return u.includes("type")?m!=="mensagens"&&(s("Mensagem com tipo errado",f),m="mensagens"):(s("Mensagem sem opção definida (Tipo)",f),m="mensagens"),{id:d.id,name:f,type:m}}),l=i.map(d=>({id:d.id,isFavorite:!1,name:d.name})),c=i.reduce((d,u)=>(d.find(f=>f.id===u.id)||(d.push({data:"",name:u.name,id:u.id,type:u.type}),s("Mensagem não encontrada (criada uma vazia)",u.name)),d),e);return{messages:l,messagesObjectsList:c,messageWarns:r}}catch(a){return console.log(a),a instanceof Error?{messages:[],messagesObjectsList:e,messageWarns:{"Todas as mensagens":[a.message]}}:{messages:[],messagesObjectsList:e,messageWarns:{"Todas as mensagens":[JSON.stringify(a)]}}}},x1=e=>typeof e=="object"&&e!==null&&"audios"in e&&typeof e.audios=="string"&&"medias"in e&&typeof e.medias=="string"&&"mensagens"in e&&typeof e.mensagens=="string"&&(!("funis"in e)||"funis"in e&&typeof e.funis=="string"),y1=e=>typeof e=="object"&&e!==null&&"audiosIndex"in e&&typeof e.audiosIndex=="string"&&"mediasIndex"in e&&typeof e.mediasIndex=="string"&&"mensagensIndex"in e&&typeof e.mensagensIndex=="string"&&(!("funis"in e)||"funis"in e&&typeof e.funis=="string"),ZI=e=>{if(x1(e)){if(!e.audios&&!e.medias&&!e.mensagens&&!e.funis)throw Rl;const{funnels:t,funnelWarns:n}=r0({oldFunnels:e.funis}),{audios:r,audioWarns:s,audiosObjectsList:a}=t0({objectsList:e.objectsList,oldAudios:e.audios}),{medias:i,mediaWarns:l,mediasObjectsList:c}=s0({objectsList:a,oldMedias:e.medias}),{messages:d,messageWarns:u,messagesObjectsList:f}=o0({objectsList:c,oldMessages:e.mensagens}),m=f.map(p=>{switch(p.type){case"audios":return{data:p.data??"",id:p.id,isPtt:!p.sendAsForwarded};case"medias":return{caption:"",data:p.data??"",id:p.id};case"mensagens":return{data:p.data??"",id:p.id};default:throw new Error(`Unexpected item type for item: ${p}`)}});return{migratedBackup:{audios:r,docs:[],flows:[],funnels:t,medias:i,messages:d,objectsList:m,triggers:[],type:"partial",version:gn},warns:{audioWarns:s,funnelWarns:n,mediaWarns:l,messageWarns:u}}}if(y1(e)){if(!e.audiosIndex&&!e.mediasIndex&&!e.mensagensIndex&&!e.funis)throw Rl;const{funnels:t,funnelWarns:n}=r0({oldFunnels:e.funis}),{audios:r,audioWarns:s,audiosObjectsList:a}=t0({objectsList:e.objectsList,oldAudios:e.audiosIndex}),{medias:i,mediaWarns:l,mediasObjectsList:c}=s0({objectsList:a,oldMedias:e.mediasIndex}),{messages:d,messageWarns:u,messagesObjectsList:f}=o0({objectsList:c,oldMessages:e.mensagensIndex}),m=f.map(p=>{switch(p.type){case"audios":return{data:p.data??"",id:p.id,isPtt:!p.sendAsForwarded};case"medias":return{caption:"",data:p.data??"",id:p.id};case"mensagens":return{data:p.data??"",id:p.id};default:throw new Error(`Unexpected item type for item: ${p}`)}});return{migratedBackup:{audios:r,docs:[],flows:[],funnels:t,medias:i,messages:d,objectsList:m,triggers:[],type:"partial",version:gn},warns:{audioWarns:s,funnelWarns:n,mediaWarns:l,messageWarns:u}}}throw new Error("Backup em formato inválido")};async function UI(e,t){const{migratedBackup:n,warns:r}=ZI(e);yi(n,t,r)}function WI({objectsList:e,oldAudios:t}){let n=0;const r={},s=(c,d)=>{var f;r[d]||(r[d]=[]);const u=r[d].findIndex(m=>m.startsWith(c));if(u===-1)r[d]=[...r[d],c];else{const m=(f=r[d][u].split(" ").at(-1))==null?void 0:f.split("x")[1],p=Number.isNaN(Number(m))?1:Number(m);r[d].splice(u,1,`${c} x${p+1}`)}},a=t.filter((c,d)=>!c.id||c.id.trim()===""?(s("Áudio inexistente (removido)",c.name?c.name:`Áudio ${d+1}`),!1):!0).map(c=>{const d=Object.keys(c);let u=c.name,f=c.type;if(!d.includes("name")||c.name.trim()===""){n++;const m=`Áudio (corrigido) ${n}`;s("Áudio sem nome",m),u=m}return d.includes("type")?f!=="audios"&&(s("Áudio com tipo errado",u),f="audios"):(s("Áudio sem opção definida (Tipo)",u),f="audios"),{id:c.id,name:u,type:f}}),i=a.reduce((c,d)=>(c.find(u=>u.id===d.id)||(c.push({data:"",id:d.id,sendAsForwarded:!0,type:d.type}),s("Áudio não encontrado (criado um vazio)",d.name)),c),e);return{audios:a.map(c=>({asViewOnce:!1,id:c.id,isFavorite:!1,isPtt:!0,name:c.name})),audiosObjectsList:i,audioWarns:r}}function GI({objectsList:e,oldDocuments:t}){let n=0;const r={},s=(c,d)=>{var f;r[d]||(r[d]=[]);const u=r[d].findIndex(m=>m.startsWith(c));if(u===-1)r[d]=[...r[d],c];else{const m=(f=r[d][u].split(" ").at(-1))==null?void 0:f.split("x")[1],p=Number.isNaN(Number(m))?1:Number(m);r[d].splice(u,1,`${c} x${p+1}`)}},a=t.filter((c,d)=>!c.id||c.id.trim()===""?(s("Documento inexistente (removido)",c.name?c.name:`Documento ${d+1}`),!1):!0).map(c=>{const d=Object.keys(c);let u=c.name,f=c.type;if(!d.includes("name")||c.name.trim()===""){n++;const m=`Documento (corrigido) ${n}`;s("Documento sem nome",m),u=m}return d.includes("type")?f!=="docs"&&(s("Documento com tipo errado",u),f="docs"):(s("Documento sem opção definida (Tipo)",u),f="docs"),{id:c.id,name:u,type:f}}),i=a.reduce((c,d)=>(c.find(u=>u.id===d.id)||(c.push({data:"",fileName:"",id:d.id,type:d.type}),s("Documento não encontrado (criado um vazio)",d.name)),c),e);return{documents:a.map(c=>({id:c.id,name:c.name,isFavorite:!1})),documentsObjectsList:i,documentWarns:r}}const a0=864e5;function qI({oldFunnels:e}){let t=0;const n={},r=(i,l)=>{var d;n[l]||(n[l]=[]);const c=n[l].findIndex(u=>u.startsWith(i));if(c===-1)n[l]=[...n[l],i];else{const u=(d=n[l][c].split(" ").at(-1))==null?void 0:d.split("x")[1],f=Number.isNaN(Number(u))?1:Number(u);n[l].splice(c,1,`${i} x${f+1}`)}};return{funnels:e.filter((i,l)=>!i.id||i.id.trim()===""?(r("Funil inexistente (removido)",i.name?i.name:`Funil ${l+1}`),!1):!0).map(i=>{const l=Object.keys(i);let c=i.name;const d=i.data??[];let u=i.type;if(i.data||r("Funil sem itens (vazio)",c),l.includes("type")?u!=="funis"&&(r("Funil com tipo errado",c),u="funis"):(r("Funil sem opção definida (Tipo)",c),u="funis"),!l.includes("name")||c.trim()===""){t++;const m=`Funil (corrigido) ${t}`;r("Funil sem nome",m),c=m}return{data:d.filter(m=>{const p=Object.keys(m);return!p.includes("id")||m.id.trim()===""?(r("Item de funil inexistente (removido)",c),!1):!p.includes("type")||m.type.trim()===""?(r("Item de funil sem tipo definido (removido)",c),!1):!0}).map(m=>{m.delay!==0&&!m.delay&&r("Item de funil sem delay",c),m.delay<0&&r("Item de funil com delay negativo",c),m.delay>a0&&r("Item de funil com delay maior que o permitido",c);const p=m.delay?Math.min(Math.max(m.delay,0),a0):0;return{...m,delay:p}}),id:i.id,name:c,type:u}}).map(i=>{var l;return{id:i.id,name:i.name,itemsSequence:((l=i.data)==null?void 0:l.map(c=>{switch(c.type){case"medias":return ep.create({id:new Me().toString(),itemId:c.id,funnelId:i.id,delayBeforeSend:c.delay}).metadata;case"audios":return Qm.create({id:new Me().toString(),itemId:c.id,funnelId:i.id,delayBeforeSend:c.delay}).metadata;case"docs":return Jm.create({id:new Me().toString(),itemId:c.id,funnelId:i.id,delayBeforeSend:c.delay}).metadata;case"mensagens":return Xm.create({id:new Me().toString(),itemId:c.id,funnelId:i.id,delayBeforeSend:c.delay}).metadata;default:throw new Error(`Wrong funnel item type: ${c.type}`)}}))??[],isFavorite:!1}}),funnelWarns:n}}function KI({oldMedias:e,objectsList:t}){let n=0;const r={},s=(c,d)=>{var f;r[d]||(r[d]=[]);const u=r[d].findIndex(m=>m.startsWith(c));if(u===-1)r[d]=[...r[d],c];else{const m=(f=r[d][u].split(" ").at(-1))==null?void 0:f.split("x")[1],p=Number.isNaN(Number(m))?1:Number(m);r[d].splice(u,1,`${c} x${p+1}`)}},a=e.filter((c,d)=>!c.id||c.id.trim()===""?(s("Mídia inexistente (removida)",c.name?c.name:`Mídia ${d+1}`),!1):!0).map(c=>{const d=Object.keys(c);let u=c.name,f=c.type;if(!d.includes("name")||c.name.trim()===""){n++;const m=`Mídia (corrigida) ${n}`;s("Mídia sem nome",m),u=m}return d.includes("type")?f!=="medias"&&(s("Mídia com tipo errado",u),f="medias"):(s("Mídia sem opção definida (Tipo)",u),f="medias"),{id:c.id,name:u,type:f}}),i=a.reduce((c,d)=>(c.find(u=>u.id===d.id)||(c.push({caption:"",data:"",id:d.id,type:d.type}),s("Mídia não encontrada (criada uma vazia)",d.name)),c),t);return{medias:a.map(c=>({id:c.id.toString(),isFavorite:!1,name:c.name,asViewOnce:!1})),mediasObjectsList:i,mediaWarns:r}}function YI({objectsList:e,oldMessages:t}){let n=0;const r={},s=(c,d)=>{var f;r[d]||(r[d]=[]);const u=r[d].findIndex(m=>m.startsWith(c));if(u===-1)r[d]=[...r[d],c];else{const m=(f=r[d][u].split(" ").at(-1))==null?void 0:f.split("x")[1],p=Number.isNaN(Number(m))?1:Number(m);r[d].splice(u,1,`${c} x${p+1}`)}},a=t.filter((c,d)=>!c.id||c.id.trim()===""?(s("Mensagem inexistente (removida)",c.name?c.name:`Mensagem ${d+1}`),!1):!0).map(c=>{const d=Object.keys(c);let u=c.name,f=c.type;if(!d.includes("name")||c.name.trim()===""){n++;const m=`Mensagem (corrigida) ${n}`;s("Mensagem sem nome",m),u=m}return d.includes("type")?f!=="mensagens"&&(s("Mensagem com tipo errado",u),f="mensagens"):(s("Mensagem sem opção definida (Tipo)",u),f="mensagens"),{id:c.id,name:u,type:f}}),i=a.reduce((c,d)=>(c.find(u=>u.id===d.id)||(c.push({data:"",id:d.id,type:d.type}),s("Mensagem não encontrada (criada uma vazia)",d.name)),c),e);return{messages:a.map(c=>({id:c.id,name:c.name,isFavorite:!1})),messagesObjectsList:i,messageWarns:r}}const i0=86400;function XI({oldTriggers:e}){let t=0;const n={},r=(i,l)=>{var d;n[l]||(n[l]=[]);const c=n[l].findIndex(u=>u.startsWith(i));if(c===-1)n[l]=[...n[l],i];else{const u=(d=n[l][c].split(" ").at(-1))==null?void 0:d.split("x")[1],f=Number.isNaN(Number(u))?1:Number(u);n[l].splice(c,1,`${i} x${f+1}`)}};return{triggers:e.filter((i,l)=>!i.id||i.id.trim()===""?(r("Gatilho inexistente (removido)",i.name?i.name:`Gatilho ${l+1}`),!1):!0).map(i=>{const l=Object.keys(i),c=i.dontSendToContact??!1,d=i.dontSendToGroups??!1,u=i.enabled??!1,f=i.ignoreCaseSensitive??!0,m=i.keywordRules??[];let p=i.funnelId,g=i.name,h=i.secondsBeforeSend,v=i.type;if(i.keywordRules||r("Gatilho sem regras",g),!l.includes("name")||i.name.trim()===""){t++;const w=`Gatilho (corrigido) ${t}`;r("Gatilho sem nome",w),g=w}l.includes("dontSendToContact")||r("Gatilho sem opção definida (Não enviar para contatos)",g),l.includes("dontSendToGroups")||r("Gatilho sem opção definida (Não enviar para grupos)",g),l.includes("enabled")||r("Gatilho sem opção definida (Ativo)",g),l.includes("ignoreCaseSensitive")||r("Gatilho sem opção definida (Ignorar maiúsculas e minúsculas)",g),l.includes("secondsBeforeSend")?i.secondsBeforeSend<0?r("Gatilho com delay negativo",g):i.secondsBeforeSend>i0&&r("Gatilho com delay maior que o permitido",g):r("Gatilho sem opção definida (Delay)",g),h=i.secondsBeforeSend?Math.min(Math.max(i.secondsBeforeSend,0),i0):5,l.includes("type")?v!=="trigger"&&(r("Gatilho com tipo errado",g),v="trigger"):(r("Gatilho sem opção definida (Tipo)",g),v="trigger"),l.includes("funnelId")||(r("Gatilho sem funil associado",g),p="");const b=m.filter(w=>!w.id||w.id.trim()===""?(r("Regra de gatilho inexistente (removida)",i.name),!1):!0).map(w=>{let j=w.type;!w.type||w.type.trim()===""?(r("Regra de gatilho sem tipo definido",i.name),j="contains"):["equals","contains","starts","not_contains"].includes(j)||(r("Regra de gatilho com tipo inválido",i.name),j="contains"),w.keywords||r("Regra de gatilho sem palavras-chave",i.name);const N=w.keywords??[];return{id:w.id,keywords:N,type:j}});return{dontSendToContact:c,dontSendToGroups:d,enabled:u,funnelId:p,id:i.id,ignoreCaseSensitive:f,keywordRules:b,name:g,secondsBeforeSend:h,type:v}}).map(i=>({id:i.id.toString(),name:i.name,isFavorite:!1,funnelId:i.funnelId??null,isCaseSensitive:!i.ignoreCaseSensitive,isEnabled:!!i.enabled,keywordRules:i.keywordRules.map(l=>({id:l.id,keywords:l.keywords.map(c=>c.trim()),type:[l.type].map(c=>{switch(c){case"equals":return"equals";case"contains":return"contains";case"starts":return"startsWith";case"not_contains":return"notContains";default:throw new Error(`Rule type not recognized: ${c}`)}})[0]})),millisecondsBeforeSend:(i.secondsBeforeSend??0)*1e3,sendToContacts:!i.dontSendToContact,sendToGroups:!i.dontSendToGroups,triggeredAt:null,webhook:""})),triggerWarns:n}}const v1=e=>typeof e=="object"&&e!==null&&"audiosIndex"in e&&Array.isArray(e.audiosIndex)&&"docsIndex"in e&&Array.isArray(e.docsIndex)&&"mediasIndex"in e&&Array.isArray(e.mediasIndex)&&"mensagensIndex"in e&&Array.isArray(e.mensagensIndex)&&"funis"in e&&Array.isArray(e.funis)&&"triggers"in e&&Array.isArray(e.triggers)&&"objectsList"in e&&Array.isArray(e.objectsList),JI=e=>{if(v1(e)){if(!e.audiosIndex&&!e.docsIndex&&!e.funis&&!e.mediasIndex&&!e.mensagensIndex&&!e.objectsList&&!e.triggers)throw Rl;const{funnels:t,funnelWarns:n}=qI({oldFunnels:e.funis}),{triggers:r,triggerWarns:s}=XI({oldTriggers:e.triggers}),{audios:a,audioWarns:i,audiosObjectsList:l}=WI({objectsList:e.objectsList,oldAudios:e.audiosIndex}),{documents:c,documentWarns:d,documentsObjectsList:u}=GI({objectsList:l,oldDocuments:e.docsIndex}),{medias:f,mediaWarns:m,mediasObjectsList:p}=KI({objectsList:u,oldMedias:e.mediasIndex}),{messages:g,messageWarns:h,messagesObjectsList:v}=YI({objectsList:p,oldMessages:e.mensagensIndex});return{migratedBackup:{audios:a,docs:c,flows:[],funnels:t,medias:f,messages:g,objectsList:v,triggers:r,type:"partial",version:gn},warns:{audioWarns:i,documentWarns:d,funnelWarns:n,mediaWarns:m,messageWarns:h,triggerWarns:s}}}throw new Error("Backup em formato inválido")};async function QI(e,t){const{migratedBackup:n,warns:r}=JI(e);yi(n,t,r)}const Rl=new MI("O backup está vazio. Por favor verifique o arquivo."),e7=(e,t)=>{const n=so(new Jr,ae,navigator.sendBeacon);return new Promise((r,s)=>{try{g1(e)?(n.trackEvent("backup:import",{zv_backup_format:"partial",zv_backup_version:gn}),yi(e,t,{}).then(r).catch(a=>{n.trackException("exception:backup_import:partial",{exc_backup_version:gn,exc_message:a.message,fatal:!1}),s(a)})):v1(e)?(n.trackEvent("backup:import",{zv_backup_format:"old"}),QI(e,t).then(r).catch(async a=>{n.trackException("exception:backup_import:old",{exc_message:a.message,fatal:!1}),s(a)})):x1(e)||y1(e)?(n.trackEvent("backup:import",{zv_backup_format:"legacy"}),UI(e,t).then(r).catch(async a=>{n.trackException("exception:backup_import:legacy",{exc_message:a.message,fatal:!1}),s(a)})):s(new Error("Formato de backup inválido"))}catch(a){a instanceof Error?n.trackException("exception:backup_import:invalid",{exc_message:a.message,fatal:!1}):n.trackException("exception:backup_import:invalid",{exc_message:JSON.stringify(a),fatal:!1}),s(new Error("Arquivo de backup inválido"))}})},t7={autoSelectItems:!0,downloadLink:"",exportAll:!0,exportBackup:async()=>{},exportFileName:"",file:void 0,fileName:void 0,generateExportBackupOptions:async()=>{},handleRemoveUploadedBackup:()=>{},handleToggleOptionGroupSelection:()=>{},handleToggleOptionSelection:()=>{},handleToggleRootSelection:()=>{},handleUploadedBackup:()=>{},hasBackup:!1,importBackup:async()=>{},importStrategy:"merge",isGeneratingOptions:!1,optionsEntries:[],rootSelectedState:!1,selectedExportOptions:[],setAutoSelectItems:()=>{},setDownloadLink:()=>{},setExportAll:async()=>{},setExportFileName:()=>{},setFile:()=>{},setFileName:()=>{},setImportStrategy:()=>{},setSelectedExportOptions:()=>{},totalSelectedSize:0,totalSize:0},b1=y.createContext(t7),n7=({children:e,exportOptions:t})=>{const{setIsBusy:n}=fo(),r=f1(new Be),s=dt.store.getState().flowList,a=Ot.store.getState().funnelList,i=zt.store.getState().triggerList,[l,c]=y.useState(!0),[d,u]=y.useState(""),[f,m]=y.useState(!0),[p,g]=y.useState(""),[h,v]=y.useState(void 0),[b,w]=y.useState(void 0),[j,N]=y.useState("merge"),[S,E]=y.useState(!1),[I,A]=y.useState([]),M=Object.entries(t).filter(([,z])=>z.length>0),O=M.filter(z=>z.length>0).flatMap(([,z])=>z),L=O.reduce((z,Z)=>Z.size+z,0),$=O.every(z=>I.find(Z=>Z.id===z.id)),P=O.some(z=>I.find(Z=>Z.id===z.id))&&"indeterminate",C=$||P,T=(z,Z)=>{v(z),w(Z)},D=z=>(z.stopPropagation(),w(void 0),v(void 0));async function _(){return n(!0),new Promise((z,Z)=>{const q=new FileReader;q.onload=async V=>{var Q;const U=(Q=V==null?void 0:V.target)!=null&&Q.result&&String(V.target.result).length>0?JSON.parse(String(V.target.result)):[];try{return await e7(U,j),z(hn.setRoute("/home"))}catch(K){return Z(K)}},q.onerror=V=>{Z(V)},q.readAsText(h)}).finally(async()=>{await r(),n(!1)})}async function F(z){return n(!0),AI(z).then(({downloadLink:Z})=>u(Z)).finally(()=>n(!1))}const k=z=>{const Z=[...z];if(l)for(const q of z){const V=i.find(K=>K.id===q.id),U=a.find(K=>K.id===((V==null?void 0:V.funnelId)??q.id)),Q=s.find(K=>K.id===q.id);if(V){const K=O.find(ee=>ee.id===V.funnelId);K&&Z.push(K)}if(U){for(const K of U.itemsSequence)if(!Z.find(W=>W.id===K.itemId)){const W=O.find(ne=>ne.id===K.itemId);W&&Z.push(W)}}if(Q){for(const K of Q.draft.nodes)if((be.isAudioNode(K)||be.isDocumentNode(K)||be.isMediaNode(K)||be.isTextNode(K))&&!Z.find(ne=>ne.id===K.itemId)){const ne=O.find(ue=>ue.id===K.itemId);ne&&Z.push(ne)}for(const K of Q.published.nodes)if((be.isAudioNode(K)||be.isDocumentNode(K)||be.isMediaNode(K)||be.isTextNode(K))&&!Z.find(ne=>ne.id===K.itemId)){const ne=O.find(ue=>ue.id===K.itemId);ne&&Z.push(ne)}}}A(Z)},R=()=>{const z=$?[]:Array.from(new Set(I.concat(...Object.values(t))));k(z)},H=(z,Z,q)=>{const V=z?I.filter(U=>!q.find(Q=>Q.id===U.id)):I.filter(U=>!q.find(Q=>Q.id===U.id)).concat(t[Z]);k(V)},B=(z,Z)=>{const q=z?I.filter(V=>V.id!==Z.id):I.filter(V=>V.id!==Z.id).concat(Z);k(q)},G=async z=>{m(z),z||(E(!0),await r(),E(!1))};return o.jsx(b1.Provider,{value:{autoSelectItems:l,downloadLink:d,exportAll:f,exportBackup:F,exportFileName:p,file:h,fileName:b,generateExportBackupOptions:r,handleRemoveUploadedBackup:D,handleToggleOptionGroupSelection:H,handleToggleOptionSelection:B,handleToggleRootSelection:R,handleUploadedBackup:T,hasBackup:!!h&&!!b,importBackup:_,importStrategy:j,isGeneratingOptions:S,optionsEntries:M,rootSelectedState:C,selectedExportOptions:I,setAutoSelectItems:c,setDownloadLink:u,setExportAll:G,setExportFileName:g,setImportStrategy:N,setFile:v,setFileName:w,setSelectedExportOptions:k,totalSelectedSize:I.reduce((z,Z)=>Z.size+z,0),totalSize:L},children:e})},id=()=>y.useContext(b1);function Es(e){let t=e;const n=1e3,r=["B","KB","MB","GB","TB","PB","EB"];let s=0;for(;t>=n&&s<r.length-1;)t/=n,s++;return`${t.toFixed(2)} ${r[s]}`}function r7(){const[e,t]=y.useState(!1),[n,r]=y.useState(!1),{autoSelectItems:s,downloadLink:a,exportAll:i,exportBackup:l,exportFileName:c,generateExportBackupOptions:d,handleToggleOptionGroupSelection:u,handleToggleOptionSelection:f,handleToggleRootSelection:m,isGeneratingOptions:p,optionsEntries:g,rootSelectedState:h,selectedExportOptions:v,setAutoSelectItems:b,setExportAll:w,setExportFileName:j,setSelectedExportOptions:N,totalSelectedSize:S,totalSize:E}=id(),I=()=>{r(!0);const P=mt.loading("Preparando backup para o download... não mude, recarregue ou feche a página.",{duration:Number.POSITIVE_INFINITY});i?l({exportAll:i}).then(()=>{ie({id:P,title:'Backup gerado com sucesso, clique em "Fazer download"',duration:4e3})}).catch(C=>{le({id:P,title:`Falha ao exportar backup: ${C}`,duration:4e3})}).finally(()=>{setTimeout(()=>mt.dismiss(P),4e3),r(!1)}):l({exportAll:i,selectedBackupOptions:v}).then(()=>{ie({id:P,title:'Backup gerado com sucesso, clique em "Fazer download"',duration:4e3})}).catch(C=>{le({id:P,title:`Falha ao exportar backup: ${C}`,duration:4e3})}).finally(()=>{setTimeout(()=>mt.dismiss(P),4e3),r(!1)})},A=async()=>{if(g.length===0){const P=mt.loading("Procurando items para o backup...",{duration:Number.POSITIVE_INFINITY});await d(),setTimeout(()=>mt.dismiss(P),0)}w(!0),t(!0),j(`ZV_backup ${zm.format(new Date).replace(/\//g,"_")}`)},M=Es(E),O=Es(S),L=P=>P>1024*1024*500?"text-destructive zv-dark:text-destructive-foreground brightness-200 drop-shadow-md":P>1024*1024*300?"text-item-trigger/90":P>1024*1024*200?"text-item-funnel/90":P>1024*1024*100?"text-item-audio/80":P>1024*1024*10?"text-item-media/80":"text-neutral-60",$=P=>{switch(P){case"audios":return"Áudios";case"docs":return"Documentos";case"flows":return"Fluxos";case"funnels":return"Funis";case"medias":return"Mídias";case"messages":return"Texto";case"triggers":return"Gatilhos"}};return o.jsx(o.Fragment,{children:o.jsxs("div",{className:"mt-10 flex flex-col items-center gap-4",children:[o.jsx(Pr,{open:e,onCancel:()=>{t(!1),N([]),j("")},action:"Exportar backup",actionProps:{disabled:!i&&(v.length===0||c.trim()==="")},description:g.length>0?o.jsx(o.Fragment,{children:o.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[o.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[o.jsx(ce,{className:"max-sm:hidden",htmlFor:"backup-file-name",children:"Nome do backup"}),o.jsx($e,{required:!0,className:"bg-background text-base",id:"backup-file-name",value:Zt(c,{toLowerCase:!1}),onChange:P=>j(P.target.value),errorMessage:!c.trim()&&"Campo não pode ser vazio."})]}),o.jsxs("div",{className:"mt-4 flex flex-col gap-1",children:[o.jsxs("div",{className:"flex items-center gap-2 text-base",children:[o.jsx(gt,{id:"auto-select-items",checked:i,onCheckedChange:async P=>await w(P)}),o.jsx(ce,{htmlFor:"auto-select-items",children:"Exportar tudo"})]}),o.jsx("p",{className:"text-sm opacity-60",children:"Exportar todos os itens. Desativando essa opção você pode selecionar quais itens serão exportados"})]}),p&&o.jsxs("div",{className:"mb-4 flex flex-col gap-1",children:[o.jsx("h2",{className:"text-lg",children:"Procurando items para o backup..."}),o.jsx("p",{className:"text-base opacity-60",children:"O tempo pode variar de acordo com a quantidade de itens que você tem cadastrados. Por favor, aguarde..."})]}),!i&&!p&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"mb-4 flex flex-col gap-1",children:[o.jsxs("div",{className:"flex items-center gap-2 text-base",children:[o.jsx(gt,{id:"auto-select-items",checked:s,onCheckedChange:P=>b(P)}),o.jsx(ce,{htmlFor:"auto-select-items",children:"Autoseleção de itens"})]}),o.jsx("p",{className:"text-sm opacity-60",children:"Permite que áudios, textos, mídias e documentos sejam marcados automaticamente ao selecionar funis, gatilhos e fluxos, e impede que os mesmos sejam desmarcados"})]}),o.jsx("div",{className:"text-lg font-bold",children:o.jsxs("div",{className:"mt-2 flex w-full items-center space-x-2 text-muted-foreground",children:[o.jsx(On,{id:"partial-backup-select-all",checked:h,onClick:P=>{P.preventDefault(),m()}}),o.jsxs("div",{className:"flex w-full items-center justify-between gap-1.5 text-sm leading-none",children:[o.jsx(ce,{htmlFor:"partial-backup-select-all",children:"Selecionar tudo"}),o.jsxs("div",{className:"mr-5 flex flex-col items-end gap-1",children:[o.jsxs("p",{children:["Selecionado:"," ",o.jsxs("span",{className:L(S),children:["~",O]})]}),o.jsxs("p",{children:["Total:"," ",o.jsxs("span",{className:L(E),children:["~",M]})]})]})]})]})}),o.jsx("hr",{}),o.jsx("div",{className:"max-h-[50vh] overflow-y-auto",children:o.jsx(gr,{type:"single",collapsible:!0,className:"w-full divide-y",children:g.map(([P,C])=>{const T=C.every(B=>v.find(G=>G.id===B.id)),D=C.some(B=>v.find(G=>G.id===B.id))&&"indeterminate",_=T||D,F=C.reduce((B,G)=>G.size+B,0),k=C.filter(B=>v.find(G=>G.id===B.id)).reduce((B,G)=>G.size+B,0),R=Es(F),H=Es(k);return o.jsxs(xr,{value:P,className:"mx-4 border-dashed",children:[o.jsx(yr,{asChild:!0,className:"py-2 hover:no-underline",children:o.jsxs("div",{className:"mt-2 flex w-full items-center space-x-2 text-muted-foreground",children:[o.jsx(On,{id:P,checked:_,onClick:B=>{B.preventDefault(),u(T,P,C)}}),o.jsxs("div",{className:"flex w-full items-center justify-between gap-1.5 text-sm leading-none",children:[o.jsx("p",{children:$(P)}),o.jsxs("div",{className:"mr-5 flex flex-col items-end gap-1",children:[o.jsxs("p",{children:["Selecionado:"," ",o.jsxs("span",{className:L(k),children:["~",H]})]}),o.jsxs("p",{children:["Total:"," ",o.jsxs("span",{className:L(F),children:["~",R]})]})]})]})]})}),o.jsx(vr,{className:"mb-2 rounded-md bg-main-background p-2",children:o.jsx("ul",{className:"space-y-2",children:C.map(B=>{const G=!!v.find(z=>z.id===B.id);return o.jsx("li",{children:o.jsxs("div",{className:"items-top flex space-x-2 text-muted-foreground",children:[o.jsx(On,{id:`${B.id}-${B.name}`,checked:G,onClick:()=>{f(G,B)}}),o.jsxs(ce,{htmlFor:`${B.id}-${B.name}`,className:"flex cursor-pointer gap-2 text-sm",children:[o.jsx("span",{children:B.name}),o.jsxs("span",{children:["(~",Es(B.size),")"]})]})]})},B.id)})})})]},P)})})})]})]})}):o.jsx("div",{children:"Nenhum item encontrado. Crie novos itens ou importe um backup primeiro."}),title:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Lr,{size:32,className:"text-status-caution zv-dark:text-status-caution-foreground"}),"Confirmação de exportação"]}),onAction:()=>{t(!1),N([]),I()},cancel:"Cancelar"}),o.jsx(X,{className:"w-64 rounded-sm py-7",size:"lg",disabled:n,onClick:A,icon:o.jsx(Sc,{size:24}),children:n?"Gerando backup...":"Gerar backup"}),!n&&a&&o.jsx("a",{href:a,download:`${Zt(c,{toLowerCase:!1})}.json`,className:"rounded-sm bg-black",children:o.jsx(X,{className:"w-64 rounded-sm bg-status-success py-7 hover:bg-status-success/90 zv-dark:bg-status-success-foreground zv-dark:hover:bg-status-success-foreground/90",size:"lg",disabled:n,icon:o.jsx(es,{size:24}),children:"Fazer download"})}),o.jsx("div",{className:"w-10/12 min-w-[300px] rounded-md bg-card p-0 text-foreground md:max-w-[500px]",children:o.jsxs("section",{className:"flex flex-col gap-4 rounded-md p-4",children:[o.jsxs("h1",{className:"flex items-center gap-2 text-start text-sm font-bold text-foreground",children:[o.jsx(ao,{size:20,weight:"regular"})," Informação"]}),o.jsx("p",{className:"text-start text-sm font-light",children:"Aqui você pode exportar um backup de todos os seus dados, é importante que você faça backup regularmente para que você não perca suas configurações e dados"}),o.jsx("p",{className:"mt-2 rounded-md bg-background/65 px-2 py-1 text-start text-sm font-light",children:"A ZapVoice Crack não armazena seus dados de forma permanente, portanto em caso de perda de dados, não será possível recuperá-los."})]})})]})})}function s7({fileName:e,onRemoveUploaded:t}){return o.jsxs("span",{className:"flex w-full items-center justify-center gap-2 text-primary",children:[e,o.jsx(X,{variant:"actionDestructive",icon:o.jsx(yt,{size:24}),childrenVariant:"no-dark",size:"sm",onClick:t,children:"Remover"})]})}function w1({actionName:e,className:t,fileName:n,hasBackup:r,onRemoveUploaded:s,onSelectBackup:a,isFile:i}){return o.jsx(Za,{className:J("mx-auto h-36 w-1/2 border-primary-200 bg-card max-lg:w-full",t),returnFile:!0,accept:{"application/json":[".json"]},onSelect:a,dragHintText:o.jsx("p",{className:"text-base",children:"Solte o backup aqui..."}),hintText:o.jsxs("div",{className:"flex h-full items-center gap-4",children:[i&&o.jsx(Ht,{size:64,className:"text-primary"}),o.jsxs("p",{className:"text-base leading-8",children:[r?o.jsx(s7,{fileName:n,onRemoveUploaded:s}):o.jsxs(o.Fragment,{children:[o.jsxs("span",{children:["Para ",e," um backup, clique aqui ou arraste o arquivo para esta área."]}),o.jsx("br",{})]}),o.jsxs("span",{children:["Formatos aceitos:"," ",o.jsx("span",{className:"font-bold text-primary",children:".json"})]})]})]})})}function o7(){const[e,t]=y.useState(!1),{file:n,fileName:r,handleRemoveUploadedBackup:s,handleUploadedBackup:a,hasBackup:i,importBackup:l,importStrategy:c,setFile:d,setFileName:u,setImportStrategy:f}=id(),[m,p]=y.useState(!1),[g,h]=y.useState(),[v,b]=y.useState(!1);function w(){if(b(!1),t(!0),r&&n){const j=mt.loading("Importando backup... não mude, recarregue ou feche a página.",{duration:Number.POSITIVE_INFINITY});l().then(()=>{ie({id:j,title:"Backup importado com sucesso",duration:4e3})}).catch(N=>{let S="";if(N instanceof ad){const E=JSON.parse(N.message);S=E.message,h({flowsWithProblem:E.flowsWithProblem,funnelsWithProblem:E.funnelsWithProblem,triggersWithProblem:E.triggersWithProblem,audiosWithProblem:E.audiosWithProblem,mediasWithProblem:E.mediasWithProblem,messagesWithProblem:E.messagesWithProblem,docsWithProblem:E.docsWithProblem}),he({id:j,title:"Backup corrigido automaticamente",duration:Number.POSITIVE_INFINITY,classNames:{cancelButton:"!bg-status-info-foreground/40 !text-status-info"},cancel:{label:"Ver problemas",onClick:()=>{p(!0),mt.dismiss(j)}},description:o.jsxs("div",{children:["Identificamos algumas ",o.jsx("strong",{children:"inconsistências"})," no backup, e tomamos a liberdade de corrigir para você o que conseguimos.",o.jsx("br",{}),o.jsx("span",{className:"underline",children:"Por favor, verifique se está tudo certo."}),o.jsx("br",{}),o.jsx("br",{}),"Clique em ",o.jsx("strong",{children:"Ver problemas"})," para mais detalhes"]}),className:"flex flex-wrap"}),t(!1);return}N instanceof Error?S=N.message:S=JSON.stringify(N),le({id:j,title:"Falha ao importar backup",duration:4e3,description:o.jsx("div",{className:"break-words",children:S})}),t(!1)}).finally(()=>{d(void 0),setTimeout(()=>mt.dismiss(j),4e3)})}else le({title:"Selecione um arquivo para importar",duration:4e3});t(!1)}return o.jsxs("div",{className:"flex flex-col items-center gap-4 p-10 ",children:[o.jsxs("div",{className:"flex items-center space-x-2 text-base",children:[o.jsx(gt,{id:"export-strategy",checked:c==="replace",onCheckedChange:j=>f(j?"replace":"merge")}),o.jsxs(ce,{htmlFor:"export-strategy",children:["Ao importar um backup"," ",o.jsx(nt,{variant:c==="replace"?"destructive":"outline",children:"SUBSTITUIR TODOS OS ITENS EXISTENTES"})]})]}),o.jsx("div",{className:J(c==="replace"&&"animate-bounce"),children:o.jsx(nt,{variant:c==="replace"?"destructive":"outline",className:J(c==="replace"&&"mt-4 animate-shakeX text-xl"),children:"ATENÇÃO: Se a opção acima (SUBSTITUIR TODOS OS ITENS EXISTENTES) estiver habilitada, os seus dados atuais serão perdidos"})}),o.jsx(w1,{className:"w-full",actionName:"inserir",fileName:r,hasBackup:i,onRemoveUploaded:s,onSelectBackup:a,isFile:!!n}),o.jsx(Pr,{open:m,className:"overflow-y-hidden md:w-fit",action:"Entendi",description:o.jsxs("div",{className:"max-h-[50vh] gap-3 overflow-y-auto",children:[g&&Object.keys(g.messagesWithProblem).length>0&&o.jsxs("article",{children:[o.jsx("h1",{className:"text-lg font-semibold ",children:"Mensagens de texto com problemas:"}),o.jsx("ul",{className:"list-decimal divide-y",children:Object.entries(g.messagesWithProblem).map(([j,N],S)=>o.jsxs("li",{className:"ms-4 text-sm font-light",children:[o.jsxs("div",{children:[j,":"]}),o.jsx("ul",{className:"ml-4 list-disc divide-y",children:N.map((E,I)=>o.jsx("li",{children:E},`${I}-${E}`))})]},`${S}-${j}`))})]}),g&&Object.keys(g.audiosWithProblem).length>0&&o.jsxs("article",{children:[o.jsx("h1",{className:"text-lg font-semibold ",children:"Áudios com problemas:"}),o.jsx("ul",{className:"list-decimal divide-y",children:Object.entries(g.audiosWithProblem).map(([j,N],S)=>o.jsxs("li",{className:"ms-4 text-sm font-light",children:[o.jsxs("div",{children:[j,":"]}),o.jsx("ul",{className:"ml-4 list-disc divide-y",children:N.map((E,I)=>o.jsx("li",{children:E},`${I}-${E}`))})]},`${S}-${j}`))})]}),g&&Object.keys(g.mediasWithProblem).length>0&&o.jsxs("article",{children:[o.jsx("h1",{className:"text-lg font-semibold ",children:"Mídias com problemas:"}),o.jsx("ul",{className:"list-decimal divide-y",children:Object.entries(g.mediasWithProblem).map(([j,N],S)=>o.jsxs("li",{className:"ms-4 text-sm font-light",children:[o.jsxs("div",{children:[j,":"]}),o.jsx("ul",{className:"ml-4 list-disc divide-y",children:N.map((E,I)=>o.jsx("li",{children:E},`${I}-${E}`))})]},`${S}-${j}`))})]}),g&&Object.keys(g.docsWithProblem).length>0&&o.jsxs("article",{children:[o.jsx("h1",{className:"text-lg font-semibold ",children:"Documentos com problemas:"}),o.jsx("ul",{className:"list-decimal divide-y",children:Object.entries(g.docsWithProblem).map(([j,N],S)=>o.jsxs("li",{className:"ms-4 text-sm font-light",children:[o.jsxs("div",{children:[j,":"]}),o.jsx("ul",{className:"ml-4 list-disc divide-y",children:N.map((E,I)=>o.jsx("li",{children:E},`${I}-${E}`))})]},`${S}-${j}`))})]}),g&&Object.keys(g.funnelsWithProblem).length>0&&o.jsxs("article",{children:[o.jsx("h1",{className:"text-lg font-semibold ",children:"Funis com problemas:"}),o.jsx("ul",{className:"list-decimal divide-y",children:Object.entries(g.funnelsWithProblem).map(([j,N],S)=>o.jsxs("li",{className:"ms-4 text-sm font-light",children:[o.jsxs("div",{children:[j,":"]}),o.jsx("ul",{className:"ml-4 list-disc divide-y",children:N.map((E,I)=>o.jsx("li",{children:E},`${I}-${E}`))})]},`${S}-${j}`))})]}),g&&Object.keys(g.triggersWithProblem).length>0&&o.jsxs("article",{children:[o.jsx("h1",{className:"text-lg font-semibold",children:"Gatilhos com problemas:"}),o.jsx("ul",{className:"list-decimal divide-y",children:Object.entries(g.triggersWithProblem).map(([j,N],S)=>o.jsxs("li",{className:"ms-4 text-sm font-light",children:[o.jsxs("div",{children:[j,":"]}),o.jsx("ul",{className:"ml-4 list-disc divide-y",children:N.map((E,I)=>o.jsx("li",{children:E},`${I}-${E}`))})]},`${S}-${j}`))})]}),g&&Object.keys(g.flowsWithProblem).length>0&&o.jsxs("article",{children:[o.jsx("h1",{className:"text-lg font-semibold",children:"Fluxos com problemas:"}),o.jsx("ul",{className:"list-decimal divide-y",children:Object.entries(g.flowsWithProblem).map(([j,N],S)=>o.jsxs("li",{className:"ms-4 text-sm font-light",children:[o.jsxs("div",{children:[j,":"]}),o.jsx("ul",{className:"ml-4 list-disc divide-y",children:N.map((E,I)=>o.jsx("li",{children:E},`${I}-${E}`))})]},`${S}-${j}`))})]})]}),title:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Lr,{size:32,className:"text-status-info"}),"Problemas identificados no arquivo de backup"]}),onCancel:()=>{p(!1)},onAction:()=>{p(!1)}}),o.jsx(X,{disabled:!r||!n||e,icon:o.jsx(Ba,{size:24}),onClick:()=>b(!0),children:"Importar"}),o.jsx(Pr,{open:v,onCancel:()=>{d(void 0),u(void 0),b(!1)},className:"md:w-fit",action:"Importar backup",description:o.jsxs("div",{children:[o.jsxs("p",{children:["Tem certeza que deseja importar o backup",o.jsxs("span",{className:"text-item-audio drop-shadow-audio",children:[" ",r]}),"?"]}),o.jsx(nt,{className:J("mx-auto w-fit text-center",c==="replace"?"text-2xl":"text-lg"),size:"item",variant:c==="replace"?"destructive":"secondary",children:c==="replace"?"Esta ação não poderá ser desfeita, e os seus dados atuais serão perdidos.":"Esta ação não poderá ser desfeita."}),o.jsx("p",{children:"Em caso de dúvida, por favor realize o backup dos dados atuais."})]}),descriptionProps:{className:"gap-5 text-lg"},title:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Lr,{size:32,className:"text-status-caution zv-dark:text-status-caution-foreground"}),"Confirmação de importação"]}),onAction:w,cancel:"Cancelar"}),o.jsx("div",{className:"w-10/12 min-w-[300px] rounded-md bg-card p-0 text-foreground md:max-w-[500px]",children:o.jsxs("section",{className:"flex flex-col gap-4 rounded-md p-4",children:[o.jsxs("h1",{className:"flex items-center gap-2 text-start text-sm font-bold text-foreground",children:[o.jsx(ao,{size:20,weight:"regular"})," Informação"]}),o.jsx("p",{className:"text-start text-sm font-light",children:"Aqui você pode importar um backup de todos os seus dados, é importante que você faça backup regularmente para que você não perca suas configurações e dados"}),o.jsx("p",{className:"mt-2 rounded-md bg-background/65 px-2 py-1 text-start text-sm font-light",children:"A ZapVoice Crack não armazena seus dados de forma permanente, portanto em caso de perda de dados, não será possível recuperá-los."})]})})]})}const l0="flex w-full flex-1 gap-3 rounded-none border-2 border-solid border-transparent text-muted-foreground data-[state=active]:bg-primary data-[state=active]:text-primary-foreground";function a7(){return o.jsxs(o.Fragment,{children:[o.jsx(os,{}),o.jsxs(kv,{defaultValue:"download",className:"mt-6 flex flex-col items-center justify-center ",children:[o.jsxs(Ov,{className:" h-auto flex-wrap overflow-hidden rounded-sm border-solid border-border bg-card p-0 [transition:background-color_150ms_ease-in-out_150ms]",children:[o.jsxs(Wd,{value:"upload",className:l0,children:[o.jsx(Ba,{size:24})," Importar backup"]}),o.jsxs(Wd,{value:"download",className:l0,children:[o.jsx(Ec,{size:24}),"Gerar backup"]})]}),o.jsx(Gd,{value:"upload",className:"w-full",children:o.jsx(o7,{})}),o.jsx(Gd,{value:"download",className:"w-full",children:o.jsx(r7,{})})]})]})}class nn{constructor(){pe(this,"documentStore",He)}async addDocument(...t){await this.documentStore.addDocument(...t)}async deleteDocument(...t){await this.documentStore.deleteDocument(...t)}async findById(...t){return await this.documentStore.findById(...t)}async getDocumentDataById(...t){return await this.documentStore.getDocumentDataById(...t)}async getDocumentList(){return this.documentStore.documentList}async reorderDocumentList(...t){await this.documentStore.reorderDocumentList(...t)}async saveDocument(...t){await this.documentStore.saveDocument(...t)}async selectDocument(...t){await this.documentStore.selectDocument(...t)}async setDocumentFilter(...t){await this.documentStore.setDocumentFilter(...t)}async toggleDocumentIsFavorite(...t){await this.documentStore.toggleDocumentIsFavorite(...t)}}class i7{constructor(t,n,r){this.documentRepository=t,this.funnelRepository=n,this.flowRepository=r}async execute(t){if(!t)throw new Error("DeleteDocument: Id must be provided");await $a(this.funnelRepository)({itemId:t}),await Ra(this.flowRepository)({itemId:t}),await this.documentRepository.deleteDocument(t)}}function l7(e,t,n){const r=new i7(e,t,n);return r.execute.bind(r)}class c7{constructor(t){this.repository=t}async execute(t){await this.repository.reorderDocumentList(t)}}function d7(e){const t=new c7(e);return t.execute.bind(t)}class u7{constructor(t){this.repository=t}async execute(t){if(!t)throw new Error("SelectDocument: Id must be provided");await this.repository.selectDocument(t)}}function f7(e){const t=new u7(e);return t.execute.bind(t)}class m7{constructor(t){this.repository=t}async execute(t){await this.repository.setDocumentFilter(t)}}function p7(e){return y.useMemo(()=>{const t=new m7(e);return t.execute.bind(t)},[e])}class h7{constructor(t){this.repository=t}async execute(t){if(!t)throw new Error("ToggleDocumentIsFavorite: Id must be provided");const n=await this.repository.findById(t);if(!n)throw new Error("ToggleDocumentIsFavorite: Document not found");const r=tp.create({data:n.data,fileName:n.fileName,isFavorite:!n.isFavorite,name:n.name},n.idEntity);await this.repository.saveDocument(r)}}function g7(e){const t=new h7(e);return t.execute.bind(t)}class x7{constructor(t){this.repository=t}async execute({id:t,base64:n,isFavorite:r,fileName:s,name:a}){if(!t)throw new Error("UpdateDocumentData: Id must be provided");const i=await this.repository.findById(t);if(!i)throw new Error("UpdateDocumentData: Document not found");const l=tp.create({data:n??i.data,fileName:s??i.fileName,isFavorite:r??i.isFavorite,name:a??i.name},i.idEntity);return await this.repository.saveDocument(l),{document:l}}}function y7(e){const t=new x7(e);return t.execute.bind(t)}const v7=({itemId:e,documentName:t,mode:n})=>{const[r,s]=y.useState(void 0),[a,i]=y.useState(""),[l,c]=y.useState(t),d=new Be,u=new nn,f=yn(d),m=Tv(u),p=io(u),g=y7(u),h=zn(d);y.useEffect(()=>{t!==l&&c(t)},[t]);const v=()=>{n==="edit"?c(t):(c(""),s(void 0))};return{fileName:a,handleModalAction:async()=>{if(n==="create"&&r){const{document:E}=await m({base64:r,fileName:a.trim(),name:l.trim()});await f({optionKey:"docs",optionToAdd:{id:E.id,name:E.name,size:await De(E,{itemData:E.data})}}),ie({title:`Documento "${l.trim()}" adicionado com sucesso.`}),v()}else if(n==="edit"&&e){const{document:E}=await g({base64:r,fileName:a.trim(),id:e,name:l.trim()});await h({optionKey:"docs",optionToUpdate:{id:E.id,name:E.name,size:await De(E,{itemData:E.data})}}),ie({title:`Documento "${l.trim()}" atualizado com sucesso.`})}},handleOpenChange:async E=>{if(E&&n==="edit"&&e){const I=await p(e);I&&(s(I.data),i(I.fileName))}},handleUploadedDocument:(E,I)=>{s(E),i(I??""),c((I==null?void 0:I.split(/\.([^.]*)$/)[0])??"")},handleRemoveUploadedDocument:E=>{E.stopPropagation(),s(void 0),i("")},hasDocument:!!r&&!!a,nameHandler:{value:l,onChange:E=>c(E.target.value)},notReady:l.trim()===""||a.trim()===""||!r||r==="",title:n==="create"?"Adicionar documento":"Editar documento",clearAllState:v}};function b7({fileName:e,onRemoveUploaded:t}){return o.jsxs("span",{className:"flex w-full max-w-[500px] flex-wrap items-center justify-center gap-2 text-primary",children:[e,o.jsx(X,{variant:"actionDestructive",icon:o.jsx(yt,{size:24}),childrenVariant:"no-dark",size:"sm",onClick:t,children:"Remover"})]})}function w7({actionName:e,fileName:t,hasDocument:n,onRemoveUploaded:r,onSelectDocument:s,errorMessage:a}){return o.jsxs("div",{children:[o.jsx(Za,{className:J(e==="inserir"&&!n&&"border-destructive zv-dark:border-destructive-foreground"),onSelect:s,dragHintText:o.jsx("p",{className:"text-base",children:"Solte o documento aqui..."}),hintText:o.jsx("p",{className:"break-all text-base leading-8",children:n?o.jsx(b7,{fileName:t,onRemoveUploaded:r}):o.jsxs(o.Fragment,{children:[o.jsxs("span",{children:["Para ",e," o documento, clique aqui ou arraste o arquivo para esta área."]}),o.jsx("br",{})]})})}),a?typeof a=="string"?o.jsx("span",{className:"m-0 ml-2 text-start text-sm font-light text-destructive zv-dark:text-red-400",children:a}):a:""]})}function j1({itemId:e,documentName:t="",mode:n="create",trigger:r}){const{fileName:s,handleModalAction:a,handleOpenChange:i,handleUploadedDocument:l,handleRemoveUploadedDocument:c,hasDocument:d,nameHandler:u,notReady:f,title:m,clearAllState:p}=v7({itemId:e,documentName:t,mode:n});return o.jsx(we,{onCancel:p,onAction:a,action:"Salvar",actionProps:{disabled:f,icon:o.jsx(en,{})},description:o.jsxs(o.Fragment,{children:[o.jsxs(xe,{children:[o.jsx(ye,{asChild:!0,children:o.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[o.jsx(ce,{htmlFor:"documentName",className:"max-sm:hidden",children:"Nome"}),o.jsx($e,{required:!0,disabled:!d,className:"bg-background text-base",id:"documentName",placeholder:"Nome do documento",ref:Vn,...u,errorMessage:u.value.trim().length===0&&d?"Campo obrigatório":""})]})}),o.jsxs(ve,{className:"max-w-[562px] break-words max-md:w-screen",children:["Você pode editar o nome do documento depois de realizar o upload.",o.jsx("br",{}),"Essa alteração é apenas para exibição na ZapVoice Crack, o nome do arquivo a ser enviado/baixado permanecerá o mesmo."]})]}),o.jsx(w7,{actionName:n==="create"?"inserir":"alterar",fileName:s,hasDocument:d,onRemoveUploaded:c,onSelectDocument:l,errorMessage:n==="create"&&!d&&"Campo obrigatório"})]}),onOpenChange:i,title:m,trigger:r,cancel:"Cancelar"})}const j7=function({document:e}){return o.jsxs(xe,{children:[o.jsx(ye,{asChild:!0,children:o.jsx("div",{children:o.jsx(j1,{mode:"edit",itemId:e==null?void 0:e.id,documentName:e==null?void 0:e.name,trigger:o.jsx(X,{onClick:t=>t.stopPropagation(),icon:o.jsx(Wt,{size:24}),variant:"action",size:"action"})},`edit_${e==null?void 0:e.id}`)})}),o.jsx(ve,{children:"Editar"})]})},N1=y.memo(j7,(e,t)=>e.document.id===t.document.id&&e.document.name===t.document.name);function E1({document:e}){const t=g7(new nn);return o.jsxs(xe,{children:[o.jsx(ye,{asChild:!0,children:o.jsx(X,{onClick:n=>{n.stopPropagation(),t(e==null?void 0:e.id),ie({title:`Documento "${e==null?void 0:e.name}" ${e!=null&&e.isFavorite?"desmarcado":"marcado"} como favorito com sucesso.`})},icon:o.jsx(Yr,{size:24,weight:e!=null&&e.isFavorite?"fill":"regular"}),variant:"action",size:"action"})}),o.jsx(ve,{children:"Favoritar"})]})}function N7({document:e,className:t,isSelected:n}){const r=f7(new nn);return o.jsx(Nr,{cardBgColor:J(n?"bg-item-document/5":"bg-card"),className:J(n&&"rounded-sm ring-1 ring-item-document",t),onClick:()=>{r(e.id)},actions:o.jsxs(o.Fragment,{children:[o.jsx(N1,{document:e}),o.jsx(E1,{document:e})]}),subtitle:"",title:e.name})}const E7=y.memo(N7,(e,t)=>e.document.id===t.document.id&&e.document.name===t.document.name&&e.document.isFavorite===t.document.isFavorite&&e.isSelected===t.isSelected);function ld({size:e}){return o.jsx(j1,{trigger:o.jsx(X,{size:e,icon:o.jsx(tn,{weight:"bold"}),children:"Adicionar"})})}function S7(){const e=new nn,t=p7(e),n=d7(e),{filterTerm:r,filteredDocumentList:s,selectedDocumentId:a}=He.useDashboardDocumentList(),{listRef:i}=ss(s.length);return o.jsxs("div",{className:"flex w-full min-w-[300px] flex-1 flex-col overflow-y-auto max-md:h-[calc(100vh_-_300px)] lg:h-full",children:[o.jsxs("div",{className:"sticky top-0 z-[2] flex gap-5  pb-5 pt-4",children:[o.jsx(Xr,{className:"flex-1",onSearch:t,storeSearchTerm:r}),o.jsx(ld,{})]}),s.length>0?o.jsx(Bn,{className:"h-full",children:o.jsx(Hn,{className:"pb-0",ref:i,onDragEnd:l=>{l.destination&&n({destinationIndex:l.destination.index,sourceIndex:l.source.index})},droppableId:"document-list",bgColor:"bg-item-document-light/70 zv-dark:bg-item-document-light/15",children:s.map((l,c)=>o.jsx(jr,{className:"p-0.5",color:"ring-item-document",draggableId:l.id,index:c,customHandle:!0,customHandleColor:"text-item-document",children:o.jsx(E7,{document:l,className:"w-full",isSelected:a===l.id},l.id)},l.id))})}):o.jsx(hr,{description:o.jsxs("p",{className:"text-center text-2xl",children:["Nenhum documento encontrado",o.jsx("br",{}),"Tente alterar a busca"]}),iconClasses:"text-item-document/70"})]})}function C7({document:e}){const t=l7(new nn,new St,new Ee),n=wr(new Be);return o.jsxs(xe,{children:[o.jsx(ye,{asChild:!0,children:o.jsx("div",{children:o.jsx(we,{className:"md:w-fit",actionVariant:"actionDestructive",actionProps:{childrenVariant:"no-dark"},onAction:()=>{t(e==null?void 0:e.id).then(()=>{n({optionKey:"docs",optionIdToRemove:e.id})}).then(()=>{ie({title:`Documento "${e==null?void 0:e.name}" excluído com sucesso.`})},r=>{r instanceof Error&&he({title:"Atenção",description:o.jsxs("div",{className:"flex flex-col gap-1",children:[`Não foi possível excluir o documento "${e==null?void 0:e.name}":`,o.jsx("p",{children:" "}),r.message.split(`
`).map((s,a)=>o.jsx("pre",{className:"min-h-[1ch] whitespace-pre-wrap font-sans text-sm",children:s},a))]}),duration:5e3})})},action:"Excluir",cancel:"Cancelar",description:o.jsx("div",{children:o.jsxs("div",{className:"mb-3 text-center",children:[o.jsxs("span",{children:["Tem certeza que deseja excluir o documento"," ",o.jsxs("span",{className:"break-all font-bold",children:["“",e==null?void 0:e.name,"”"]}),"?"]}),o.jsx("br",{}),o.jsx("span",{children:"Essa ação é irreversível."})]})}),title:o.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[o.jsx(xt,{size:32}),o.jsx("p",{children:"Excluir documento"})]}),trigger:o.jsx(X,{icon:o.jsx(yt,{size:24}),variant:"actionDestructive",childrenVariant:"no-dark",size:"action"})})})}),o.jsx(ve,{className:"bg-destructive text-destructive-foreground",children:"Excluir"})]})}function I7({document:e}){return o.jsxs(xe,{children:[o.jsx(ye,{asChild:!0,children:o.jsx("a",{download:e==null?void 0:e.fileName,href:e==null?void 0:e.data,target:"_blank",rel:"noopener noreferrer",children:o.jsx(X,{icon:o.jsx(es,{size:24}),variant:"action",size:"action"})})}),o.jsx(ve,{children:"Baixar"})]})}function A7(){const[e]=fe("dashboard-document-help-video",ae);return o.jsxs("div",{className:"flex w-[416px] flex-col justify-center gap-6 py-4 text-center",children:[o.jsx("img",{src:"./document.svg",alt:"Imagem indicativa de que não há documentos cadastrados",className:"m-auto w-[280px]"}),o.jsxs("div",{className:"flex w-[416px] flex-col items-center gap-6 text-base",children:[o.jsxs("p",{children:[o.jsx("span",{children:"Selecione um documento para visualizar ou clique em "}),o.jsx(ld,{size:"sm"}),o.jsx("span",{children:" para criar um novo documento."})]}),(e==null?void 0:e.enabled)&&o.jsx("p",{children:"Dúvidas?"})]}),o.jsx("div",{className:"flex justify-center gap-6",children:(e==null?void 0:e.enabled)&&o.jsx(Ct,{tutorial:e})})]})}function D7(){const e=He.useGetDocumentList(),{dummyTrigger:t}=He.useGetSelectedDocument(),{selectedDocumentId:n}=He.useGetSelectedDocument(),r=io(new nn),[s,a]=y.useState(null);return y.useEffect(()=>{const i=e.find(c=>c.id===n);a(c=>({id:(i==null?void 0:i.id)??"",isFavorite:(i==null?void 0:i.isFavorite)??!1,name:(i==null?void 0:i.name)??"",fileName:(c==null?void 0:c.id)===(i==null?void 0:i.id)?(c==null?void 0:c.fileName)??"":"",data:(c==null?void 0:c.id)===(i==null?void 0:i.id)?(c==null?void 0:c.data)??"":""}));async function l(){const c=await r(n);c&&a(d=>({id:(d==null?void 0:d.id)??"",isFavorite:(d==null?void 0:d.isFavorite)??!1,name:(d==null?void 0:d.name)??"",fileName:c.fileName??"",data:c.data===(d==null?void 0:d.data)?d.data:c.data}))}l()},[n,t]),o.jsx("div",{className:ze("flex h-fit w-1/2 flex-1 rounded-lg bg-card shadow-sm lg:min-w-[500px]",!n&&"justify-center"),children:n?o.jsx(Qr,{actions:s&&o.jsxs(o.Fragment,{children:[o.jsx(C7,{document:s}),o.jsx(I7,{document:s}),o.jsx(N1,{document:s}),o.jsx(E1,{document:s})]}),body:s&&o.jsxs("div",{className:"h-full space-y-1 bg-background p-2 text-base",children:[o.jsx(nt,{variant:"outline",children:"Nome do arquivo: "}),o.jsx("p",{className:"break-words",children:s.fileName})]}),title:s==null?void 0:s.name}):o.jsx(A7,{})})}function M7(){const[e]=fe("dashboard-document-help-video",ae);return o.jsxs("div",{className:"flex flex-col justify-center gap-6 p-8 text-center",children:[o.jsx("img",{src:"./document.svg",alt:"Imagem indicativa de que não há documentos cadastrados",className:"m-auto w-[280px]"}),o.jsxs("div",{children:[o.jsx("p",{children:"Ainda não há nenhum documento cadastrado aqui."}),o.jsx("p",{children:"Que tal adicionar o seu primeiro documento?"})]}),o.jsxs("div",{className:"flex justify-center gap-6",children:[(e==null?void 0:e.enabled)&&o.jsx(Ct,{tutorial:e}),o.jsx(ld,{})]})]})}function k7(){return He.useGetHasDocuments()?o.jsx("div",{className:"flex h-full justify-center overflow-auto px-1 md:p-8 md:px-3",children:o.jsxs("div",{className:"relative flex h-full w-full max-w-[1400px] gap-5 max-md:flex-wrap",children:[o.jsx(S7,{}),o.jsx(D7,{})]})}):o.jsx(M7,{})}var O7=[" ","Enter","ArrowUp","ArrowDown"],T7=[" ","Enter"],vo="Select",[vi,bi,F7]=Fv(vo),[as,DH]=_v(vo,[F7,Hm]),wi=Hm(),[_7,Zn]=as(vo),[P7,L7]=as(vo),S1=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:s,onOpenChange:a,value:i,defaultValue:l,onValueChange:c,dir:d,name:u,autoComplete:f,disabled:m,required:p,form:g}=e,h=wi(t),[v,b]=y.useState(null),[w,j]=y.useState(null),[N,S]=y.useState(!1),E=qv(d),[I=!1,A]=Kd({prop:r,defaultProp:s,onChange:a}),[M,O]=Kd({prop:i,defaultProp:l,onChange:c}),L=y.useRef(null),$=v?g||!!v.closest("form"):!0,[P,C]=y.useState(new Set),T=Array.from(P).map(D=>D.props.value).join(";");return o.jsx(Kv,{...h,children:o.jsxs(_7,{required:p,scope:t,trigger:v,onTriggerChange:b,valueNode:w,onValueNodeChange:j,valueNodeHasChildren:N,onValueNodeHasChildrenChange:S,contentId:mc(),value:M,onValueChange:O,open:I,onOpenChange:A,dir:E,triggerPointerDownPosRef:L,disabled:m,children:[o.jsx(vi.Provider,{scope:t,children:o.jsx(P7,{scope:e.__scopeSelect,onNativeOptionAdd:y.useCallback(D=>{C(_=>new Set(_).add(D))},[]),onNativeOptionRemove:y.useCallback(D=>{C(_=>{const F=new Set(_);return F.delete(D),F})},[]),children:n})}),$?o.jsxs(Y1,{"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:f,value:M,onChange:D=>O(D.target.value),disabled:m,form:g,children:[M===void 0?o.jsx("option",{value:""}):null,Array.from(P)]},T):null]})})};S1.displayName=vo;var C1="SelectTrigger",I1=y.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...s}=e,a=wi(n),i=Zn(C1,n),l=i.disabled||r,c=Qt(t,i.onTriggerChange),d=bi(n),u=y.useRef("touch"),[f,m,p]=X1(h=>{const v=d().filter(j=>!j.disabled),b=v.find(j=>j.value===i.value),w=J1(v,h,b);w!==void 0&&i.onValueChange(w.value)}),g=h=>{l||(i.onOpenChange(!0),p()),h&&(i.triggerPointerDownPosRef.current={x:Math.round(h.pageX),y:Math.round(h.pageY)})};return o.jsx(Pv,{asChild:!0,...a,children:o.jsx(Ft.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":K1(i.value)?"":void 0,...s,ref:c,onClick:Xe(s.onClick,h=>{h.currentTarget.focus(),u.current!=="mouse"&&g(h)}),onPointerDown:Xe(s.onPointerDown,h=>{u.current=h.pointerType;const v=h.target;v.hasPointerCapture(h.pointerId)&&v.releasePointerCapture(h.pointerId),h.button===0&&h.ctrlKey===!1&&h.pointerType==="mouse"&&(g(h),h.preventDefault())}),onKeyDown:Xe(s.onKeyDown,h=>{const v=f.current!=="";!(h.ctrlKey||h.altKey||h.metaKey)&&h.key.length===1&&m(h.key),!(v&&h.key===" ")&&O7.includes(h.key)&&(g(),h.preventDefault())})})})});I1.displayName=C1;var A1="SelectValue",D1=y.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,children:a,placeholder:i="",...l}=e,c=Zn(A1,n),{onValueNodeHasChildrenChange:d}=c,u=a!==void 0,f=Qt(t,c.onValueNodeChange);return Ln(()=>{d(u)},[d,u]),o.jsx(Ft.span,{...l,ref:f,style:{pointerEvents:"none"},children:K1(c.value)?o.jsx(o.Fragment,{children:i}):a})});D1.displayName=A1;var $7="SelectIcon",M1=y.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...s}=e;return o.jsx(Ft.span,{"aria-hidden":!0,...s,ref:t,children:r||"▼"})});M1.displayName=$7;var R7="SelectPortal",k1=e=>o.jsx(Gv,{asChild:!0,...e});k1.displayName=R7;var ur="SelectContent",O1=y.forwardRef((e,t)=>{const n=Zn(ur,e.__scopeSelect),[r,s]=y.useState();if(Ln(()=>{s(new DocumentFragment)},[]),!n.open){const a=r;return a?mn.createPortal(o.jsx(T1,{scope:e.__scopeSelect,children:o.jsx(vi.Slot,{scope:e.__scopeSelect,children:o.jsx("div",{children:e.children})})}),a):null}return o.jsx(F1,{...e,ref:t})});O1.displayName=ur;var Lt=10,[T1,Un]=as(ur),V7="SelectContentImpl",F1=y.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:a,onPointerDownOutside:i,side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:f,collisionBoundary:m,collisionPadding:p,sticky:g,hideWhenDetached:h,avoidCollisions:v,...b}=e,w=Zn(ur,n),[j,N]=y.useState(null),[S,E]=y.useState(null),I=Qt(t,V=>N(V)),[A,M]=y.useState(null),[O,L]=y.useState(null),$=bi(n),[P,C]=y.useState(!1),T=y.useRef(!1);y.useEffect(()=>{if(j)return Lv(j)},[j]),$v();const D=y.useCallback(V=>{const[U,...Q]=$().map(W=>W.ref.current),[K]=Q.slice(-1),ee=document.activeElement;for(const W of V)if(W===ee||(W==null||W.scrollIntoView({block:"nearest"}),W===U&&S&&(S.scrollTop=0),W===K&&S&&(S.scrollTop=S.scrollHeight),W==null||W.focus(),document.activeElement!==ee))return},[$,S]),_=y.useCallback(()=>D([A,j]),[D,A,j]);y.useEffect(()=>{P&&_()},[P,_]);const{onOpenChange:F,triggerPointerDownPosRef:k}=w;y.useEffect(()=>{if(j){let V={x:0,y:0};const U=K=>{var ee,W;V={x:Math.abs(Math.round(K.pageX)-(((ee=k.current)==null?void 0:ee.x)??0)),y:Math.abs(Math.round(K.pageY)-(((W=k.current)==null?void 0:W.y)??0))}},Q=K=>{V.x<=10&&V.y<=10?K.preventDefault():j.contains(K.target)||F(!1),document.removeEventListener("pointermove",U),k.current=null};return k.current!==null&&(document.addEventListener("pointermove",U),document.addEventListener("pointerup",Q,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",U),document.removeEventListener("pointerup",Q,{capture:!0})}}},[j,F,k]),y.useEffect(()=>{const V=()=>F(!1);return window.addEventListener("blur",V),window.addEventListener("resize",V),()=>{window.removeEventListener("blur",V),window.removeEventListener("resize",V)}},[F]);const[R,H]=X1(V=>{const U=$().filter(ee=>!ee.disabled),Q=U.find(ee=>ee.ref.current===document.activeElement),K=J1(U,V,Q);K&&setTimeout(()=>K.ref.current.focus())}),B=y.useCallback((V,U,Q)=>{const K=!T.current&&!Q;(w.value!==void 0&&w.value===U||K)&&(M(V),K&&(T.current=!0))},[w.value]),G=y.useCallback(()=>j==null?void 0:j.focus(),[j]),z=y.useCallback((V,U,Q)=>{const K=!T.current&&!Q;(w.value!==void 0&&w.value===U||K)&&L(V)},[w.value]),Z=r==="popper"?Vl:_1,q=Z===Vl?{side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:f,collisionBoundary:m,collisionPadding:p,sticky:g,hideWhenDetached:h,avoidCollisions:v}:{};return o.jsx(T1,{scope:n,content:j,viewport:S,onViewportChange:E,itemRefCallback:B,selectedItem:A,onItemLeave:G,itemTextRefCallback:z,focusSelectedItem:_,selectedItemText:O,position:r,isPositioned:P,searchRef:R,children:o.jsx(Rv,{as:iv,allowPinchZoom:!0,children:o.jsx(Vv,{asChild:!0,trapped:w.open,onMountAutoFocus:V=>{V.preventDefault()},onUnmountAutoFocus:Xe(s,V=>{var U;(U=w.trigger)==null||U.focus({preventScroll:!0}),V.preventDefault()}),children:o.jsx(Bv,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:V=>V.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:o.jsx(Z,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:V=>V.preventDefault(),...b,...q,onPlaced:()=>C(!0),ref:I,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:Xe(b.onKeyDown,V=>{const U=V.ctrlKey||V.altKey||V.metaKey;if(V.key==="Tab"&&V.preventDefault(),!U&&V.key.length===1&&H(V.key),["ArrowUp","ArrowDown","Home","End"].includes(V.key)){let K=$().filter(ee=>!ee.disabled).map(ee=>ee.ref.current);if(["ArrowUp","End"].includes(V.key)&&(K=K.slice().reverse()),["ArrowUp","ArrowDown"].includes(V.key)){const ee=V.target,W=K.indexOf(ee);K=K.slice(W+1)}setTimeout(()=>D(K)),V.preventDefault()}})})})})})})});F1.displayName=V7;var B7="SelectItemAlignedPosition",_1=y.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...s}=e,a=Zn(ur,n),i=Un(ur,n),[l,c]=y.useState(null),[d,u]=y.useState(null),f=Qt(t,I=>u(I)),m=bi(n),p=y.useRef(!1),g=y.useRef(!0),{viewport:h,selectedItem:v,selectedItemText:b,focusSelectedItem:w}=i,j=y.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&d&&h&&v&&b){const I=a.trigger.getBoundingClientRect(),A=d.getBoundingClientRect(),M=a.valueNode.getBoundingClientRect(),O=b.getBoundingClientRect();if(a.dir!=="rtl"){const ee=O.left-A.left,W=M.left-ee,ne=I.left-W,ue=I.width+ne,Te=Math.max(ue,A.width),Ye=window.innerWidth-Lt,at=qd(W,[Lt,Math.max(Lt,Ye-Te)]);l.style.minWidth=ue+"px",l.style.left=at+"px"}else{const ee=A.right-O.right,W=window.innerWidth-M.right-ee,ne=window.innerWidth-I.right-W,ue=I.width+ne,Te=Math.max(ue,A.width),Ye=window.innerWidth-Lt,at=qd(W,[Lt,Math.max(Lt,Ye-Te)]);l.style.minWidth=ue+"px",l.style.right=at+"px"}const L=m(),$=window.innerHeight-Lt*2,P=h.scrollHeight,C=window.getComputedStyle(d),T=parseInt(C.borderTopWidth,10),D=parseInt(C.paddingTop,10),_=parseInt(C.borderBottomWidth,10),F=parseInt(C.paddingBottom,10),k=T+D+P+F+_,R=Math.min(v.offsetHeight*5,k),H=window.getComputedStyle(h),B=parseInt(H.paddingTop,10),G=parseInt(H.paddingBottom,10),z=I.top+I.height/2-Lt,Z=$-z,q=v.offsetHeight/2,V=v.offsetTop+q,U=T+D+V,Q=k-U;if(U<=z){const ee=L.length>0&&v===L[L.length-1].ref.current;l.style.bottom="0px";const W=d.clientHeight-h.offsetTop-h.offsetHeight,ne=Math.max(Z,q+(ee?G:0)+W+_),ue=U+ne;l.style.height=ue+"px"}else{const ee=L.length>0&&v===L[0].ref.current;l.style.top="0px";const ne=Math.max(z,T+h.offsetTop+(ee?B:0)+q)+Q;l.style.height=ne+"px",h.scrollTop=U-z+h.offsetTop}l.style.margin=`${Lt}px 0`,l.style.minHeight=R+"px",l.style.maxHeight=$+"px",r==null||r(),requestAnimationFrame(()=>p.current=!0)}},[m,a.trigger,a.valueNode,l,d,h,v,b,a.dir,r]);Ln(()=>j(),[j]);const[N,S]=y.useState();Ln(()=>{d&&S(window.getComputedStyle(d).zIndex)},[d]);const E=y.useCallback(I=>{I&&g.current===!0&&(j(),w==null||w(),g.current=!1)},[j,w]);return o.jsx(H7,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:p,onScrollButtonChange:E,children:o.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:N},children:o.jsx(Ft.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});_1.displayName=B7;var z7="SelectPopperPosition",Vl=y.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=Lt,...a}=e,i=wi(n);return o.jsx(zv,{...i,...a,ref:t,align:r,collisionPadding:s,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Vl.displayName=z7;var[H7,cd]=as(ur,{}),Bl="SelectViewport",P1=y.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...s}=e,a=Un(Bl,n),i=cd(Bl,n),l=Qt(t,a.onViewportChange),c=y.useRef(0);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),o.jsx(vi.Slot,{scope:n,children:o.jsx(Ft.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Xe(s.onScroll,d=>{const u=d.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:m}=i;if(m!=null&&m.current&&f){const p=Math.abs(c.current-u.scrollTop);if(p>0){const g=window.innerHeight-Lt*2,h=parseFloat(f.style.minHeight),v=parseFloat(f.style.height),b=Math.max(h,v);if(b<g){const w=b+p,j=Math.min(g,w),N=w-j;f.style.height=j+"px",f.style.bottom==="0px"&&(u.scrollTop=N>0?N:0,f.style.justifyContent="flex-end")}}}c.current=u.scrollTop})})})]})});P1.displayName=Bl;var L1="SelectGroup",[Z7,U7]=as(L1),W7=y.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=mc();return o.jsx(Z7,{scope:n,id:s,children:o.jsx(Ft.div,{role:"group","aria-labelledby":s,...r,ref:t})})});W7.displayName=L1;var $1="SelectLabel",R1=y.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=U7($1,n);return o.jsx(Ft.div,{id:s.id,...r,ref:t})});R1.displayName=$1;var la="SelectItem",[G7,V1]=as(la),B1=y.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:a,...i}=e,l=Zn(la,n),c=Un(la,n),d=l.value===r,[u,f]=y.useState(a??""),[m,p]=y.useState(!1),g=Qt(t,w=>{var j;return(j=c.itemRefCallback)==null?void 0:j.call(c,w,r,s)}),h=mc(),v=y.useRef("touch"),b=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return o.jsx(G7,{scope:n,value:r,disabled:s,textId:h,isSelected:d,onItemTextChange:y.useCallback(w=>{f(j=>j||((w==null?void 0:w.textContent)??"").trim())},[]),children:o.jsx(vi.ItemSlot,{scope:n,value:r,disabled:s,textValue:u,children:o.jsx(Ft.div,{role:"option","aria-labelledby":h,"data-highlighted":m?"":void 0,"aria-selected":d&&m,"data-state":d?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...i,ref:g,onFocus:Xe(i.onFocus,()=>p(!0)),onBlur:Xe(i.onBlur,()=>p(!1)),onClick:Xe(i.onClick,()=>{v.current!=="mouse"&&b()}),onPointerUp:Xe(i.onPointerUp,()=>{v.current==="mouse"&&b()}),onPointerDown:Xe(i.onPointerDown,w=>{v.current=w.pointerType}),onPointerMove:Xe(i.onPointerMove,w=>{var j;v.current=w.pointerType,s?(j=c.onItemLeave)==null||j.call(c):v.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Xe(i.onPointerLeave,w=>{var j;w.currentTarget===document.activeElement&&((j=c.onItemLeave)==null||j.call(c))}),onKeyDown:Xe(i.onKeyDown,w=>{var N;((N=c.searchRef)==null?void 0:N.current)!==""&&w.key===" "||(T7.includes(w.key)&&b(),w.key===" "&&w.preventDefault())})})})})});B1.displayName=la;var Ds="SelectItemText",z1=y.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,...a}=e,i=Zn(Ds,n),l=Un(Ds,n),c=V1(Ds,n),d=L7(Ds,n),[u,f]=y.useState(null),m=Qt(t,b=>f(b),c.onItemTextChange,b=>{var w;return(w=l.itemTextRefCallback)==null?void 0:w.call(l,b,c.value,c.disabled)}),p=u==null?void 0:u.textContent,g=y.useMemo(()=>o.jsx("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:h,onNativeOptionRemove:v}=d;return Ln(()=>(h(g),()=>v(g)),[h,v,g]),o.jsxs(o.Fragment,{children:[o.jsx(Ft.span,{id:c.textId,...a,ref:m}),c.isSelected&&i.valueNode&&!i.valueNodeHasChildren?mn.createPortal(a.children,i.valueNode):null]})});z1.displayName=Ds;var H1="SelectItemIndicator",Z1=y.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return V1(H1,n).isSelected?o.jsx(Ft.span,{"aria-hidden":!0,...r,ref:t}):null});Z1.displayName=H1;var zl="SelectScrollUpButton",U1=y.forwardRef((e,t)=>{const n=Un(zl,e.__scopeSelect),r=cd(zl,e.__scopeSelect),[s,a]=y.useState(!1),i=Qt(t,r.onScrollButtonChange);return Ln(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollTop>0;a(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?o.jsx(G1,{...e,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});U1.displayName=zl;var Hl="SelectScrollDownButton",W1=y.forwardRef((e,t)=>{const n=Un(Hl,e.__scopeSelect),r=cd(Hl,e.__scopeSelect),[s,a]=y.useState(!1),i=Qt(t,r.onScrollButtonChange);return Ln(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<d;a(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?o.jsx(G1,{...e,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});W1.displayName=Hl;var G1=y.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=e,a=Un("SelectScrollButton",n),i=y.useRef(null),l=bi(n),c=y.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return y.useEffect(()=>()=>c(),[c]),Ln(()=>{var u;const d=l().find(f=>f.ref.current===document.activeElement);(u=d==null?void 0:d.ref.current)==null||u.scrollIntoView({block:"nearest"})},[l]),o.jsx(Ft.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:Xe(s.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(r,50))}),onPointerMove:Xe(s.onPointerMove,()=>{var d;(d=a.onItemLeave)==null||d.call(a),i.current===null&&(i.current=window.setInterval(r,50))}),onPointerLeave:Xe(s.onPointerLeave,()=>{c()})})}),q7="SelectSeparator",q1=y.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return o.jsx(Ft.div,{"aria-hidden":!0,...r,ref:t})});q1.displayName=q7;var Zl="SelectArrow",K7=y.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=wi(n),a=Zn(Zl,n),i=Un(Zl,n);return a.open&&i.position==="popper"?o.jsx(Hv,{...s,...r,ref:t}):null});K7.displayName=Zl;function K1(e){return e===""||e===void 0}var Y1=y.forwardRef((e,t)=>{const{value:n,...r}=e,s=y.useRef(null),a=Qt(t,s),i=Zv(n);return y.useEffect(()=>{const l=s.current,c=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(i!==n&&u){const f=new Event("change",{bubbles:!0});u.call(l,n),l.dispatchEvent(f)}},[i,n]),o.jsx(Uv,{asChild:!0,children:o.jsx("select",{...r,ref:a,defaultValue:n})})});Y1.displayName="BubbleSelect";function X1(e){const t=Wv(e),n=y.useRef(""),r=y.useRef(0),s=y.useCallback(i=>{const l=n.current+i;t(l),function c(d){n.current=d,window.clearTimeout(r.current),d!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),a=y.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return y.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,a]}function J1(e,t,n){const s=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,a=n?e.indexOf(n):-1;let i=Y7(e,Math.max(a,0));s.length===1&&(i=i.filter(d=>d!==n));const c=i.find(d=>d.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function Y7(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var X7=S1,Q1=I1,J7=D1,Q7=M1,eA=k1,eg=O1,tA=P1,tg=R1,ng=B1,nA=z1,rA=Z1,rg=U1,sg=W1,og=q1;const Wn=X7,is=J7,bn=y.forwardRef(({className:e,children:t,icon:n=o.jsx(lo,{className:"h-4 w-4 shrink-0 opacity-50"}),...r},s)=>o.jsxs(Q1,{ref:s,className:J("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,o.jsx(Q7,{asChild:!0,children:n})]}));bn.displayName=Q1.displayName;const ag=y.forwardRef(({className:e,...t},n)=>o.jsx(rg,{ref:n,className:J("flex cursor-default items-center justify-center py-1",e),...t,children:o.jsx(Yv,{})}));ag.displayName=rg.displayName;const ig=y.forwardRef(({className:e,...t},n)=>o.jsx(sg,{ref:n,className:J("flex cursor-default items-center justify-center py-1",e),...t,children:o.jsx(Xv,{})}));ig.displayName=sg.displayName;const wn=y.forwardRef(({className:e,children:t,position:n="popper",...r},s)=>o.jsx(eA,{children:o.jsxs(eg,{ref:s,className:J("zv_scope relative z-50 max-h-fit min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[o.jsx(ag,{}),o.jsx(tA,{className:J("p-1 pr-[0.375rem]",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),o.jsx(ig,{})]})}));wn.displayName=eg.displayName;const sA=y.forwardRef(({className:e,...t},n)=>o.jsx(tg,{ref:n,className:J("px-2 py-1.5 text-sm font-semibold",e),...t}));sA.displayName=tg.displayName;const Le=y.forwardRef(({children:e,className:t,icon:n=o.jsx(co,{className:"h-4 w-4"}),previewData:r,...s},a)=>o.jsxs(ng,{ref:a,className:J("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...s,children:[o.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(rA,{children:n})}),r&&o.jsxs(pc,{closeDelay:200,openDelay:200,children:[o.jsx(hc,{className:"absolute right-8",children:o.jsx(Zm,{size:20})}),o.jsx(gc,{className:"max-h-[50dvh] w-auto max-w-[80dvw] overflow-hidden",children:r})]}),o.jsx(nA,{children:e})]}));Le.displayName=ng.displayName;const oA=y.forwardRef(({className:e,...t},n)=>o.jsx(og,{ref:n,className:J("-mx-1 my-1 h-px bg-muted",e),...t}));oA.displayName=og.displayName;class aA{constructor(t){this.flowRepo=t}async execute({data:t,flowId:n}){await this.flowRepo.updateNode({data:t,flowId:n})}}const ke={days:"Dias",hours:"Horas",minutes:"Minutos",seconds:"Segundos"};function ji(e,t){switch(e){case"seconds":return Math.floor(t/1e3);case"minutes":return Math.floor(t/1e3/60);case"hours":return Math.floor(t/1e3/60/60);case"days":return Math.floor(t/1e3/60/60/24)}}function ca(e,t){let n;switch(e){case"seconds":n=Math.floor(t*1e3);break;case"minutes":n=Math.floor(t*1e3*60);break;case"hours":n=Math.floor(t*1e3*60*60);break;case"days":n=Math.floor(t*1e3*60*60*24);break}return n}function iA({delayInMs:e,flowId:t,timeUnitType:n,nodeId:r}){const s=new Ee,[a,i]=y.useState(n),[l,c]=y.useState(()=>ji(n,e)),d={value:String(l),onValueChange:({valueAsNumber:u})=>{isNaN(u)&&(u=1),c(u)}};return o.jsx(we,{className:"md:w-fit",actionVariant:"action",actionProps:{childrenVariant:"no-dark"},onAction:async()=>{await new aA(s).execute({flowId:t,data:{id:r,props:{delayInMs:ca(a,l),timeUnitType:a}}})},action:"Salvar",cancel:"Cancelar",description:o.jsx("div",{children:o.jsxs("div",{className:"flex items-center justify-start gap-6 max-sm:items-center",children:[o.jsx(ce,{htmlFor:"delay-min",className:"flex w-full flex-wrap gap-x-1.5 text-base",children:"Esperar antes de continuar o fluxo"}),o.jsx(st,{inputClasses:"w-14",max:999,min:1,...d}),o.jsxs(Wn,{value:a,onValueChange:u=>{i(u)},children:[o.jsx(bn,{className:"h-full w-56 p-3.5",children:o.jsx(is,{placeholder:ke.seconds})}),o.jsxs(wn,{className:"z-[9999]",children:[o.jsx(Le,{value:"seconds",children:ke.seconds}),o.jsx(Le,{value:"minutes",children:ke.minutes}),o.jsx(Le,{value:"hours",children:ke.hours}),o.jsx(Le,{value:"days",children:ke.days})]})]})]})}),title:o.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[o.jsx(ot,{size:32}),o.jsx("p",{children:"Configurações"})]}),trigger:o.jsx(X,{icon:o.jsx(ot,{size:24}),variant:"action",childrenVariant:"no-dark",className:"w-full",children:"Configurar"})})}const lg=y.createContext({openModalState:!1,handleCloseModal:()=>null,handleOpenModal:()=>null,checkPermission:async()=>({checked:{create_limited_flow:!1,create_full_flow:!1},authError:null}),triedFunctionality:void 0,setTriedFunctionality:()=>null}),lA=({children:e})=>{const[t,n]=y.useState(!1),[r,s]=y.useState(),a=y.useCallback(()=>{n(!0)},[]);function i(){n(!1)}const l=y.useCallback(async(c,d=!0)=>{const{permissions:u,authError:f}=await rt.getAuthData(),m={};for(const p of c)m[p]=void 0;if(f){const p=Jv(new yo),g=ae.flags["usage-limit"],h=await p(g),v=h.authError;if(!!h.authError){if(!d)return{checked:m,authError:v};const w=h.key;return v==="inactiveKey"?le({action:o.jsx(As,{}),style:{width:"600px",left:"-250px"},title:"Sua chave está inativa, por isso você não pode fazer isso "}):v==="unathorizedNumber"?le({style:{width:"600px",left:"-300px"},title:"Sua chave está atrelada a outro número de telefone, por isso você não pode fazer isso"}):v==="restrictedKey"?le({action:o.jsx(Yo,{secretKey:w??""}),style:{width:"600px",left:"-250px"},title:"Sua chave está bloqueada, por isso você não pode fazer isso "}):v==="expiredKey"?le({action:o.jsx(Yo,{secretKey:w??""}),style:{width:"600px",left:"-250px"},title:"Sua chave está expirada, por isso você não pode fazer isso "}):le({action:o.jsx(Qv,{}),style:{width:"600px",left:"-250px"},title:"Sua chave está com algum problema, por isso você não pode fazer isso "}),{checked:m,authError:v}}for(const w of c)m[w]=h.permissions.includes(w);return c.length===0&&!m[c[0]]&&a(),{checked:m,authError:v}}for(const p of c)m[p]=u.includes(p);return{checked:m,authError:f}},[a]);return o.jsx(lg.Provider,{value:{openModalState:t,handleCloseModal:i,handleOpenModal:a,checkPermission:l,setTriedFunctionality:s,triedFunctionality:r},children:e})};function cg(){return y.useContext(lg)}const cA={clearAllState:()=>null,closeOnAction:!0,closeOnCancel:!0,delayTimeUnitHandler:{onValueChange:()=>null,value:""},handleModalAction:()=>null,handleModalCancel:()=>null,handleOpenChange:()=>null,isLastStep:!1,isLimitedFlowState:!0,isOpen:!1,itemId:"",itemTypeSelected:null,notReady:!0,selectFlowNodeType:()=>null,selectedDelayTimeUnitTypeHandler:{onValueChange:()=>null,value:"seconds"},setAction:()=>{},setFlowId:()=>null,setFromHandle:()=>null,setFromNodeId:()=>null,setIsLimitedFlowState:()=>{},setIsOpen:()=>{},setItemId:()=>{},setPosition:()=>null,setReady:()=>{},simulationMinutesHandler:{onValueChange:()=>null,value:""},simulationSecondsHandler:{onValueChange:()=>null,value:""},step:0,title:""},dg=y.createContext(cA),dA=({children:e})=>{const[t,n]=y.useState(null),[r,s]=y.useState(1),[a,i]=y.useState(""),[l,c]=y.useState(null),[d,u]=y.useState(null),[f,m]=y.useState(!1),[p,g]=y.useState(""),[h,v]=y.useState(null),[b,w]=y.useState({x:0,y:0}),[j,N]=y.useState(!1),[S,E]=y.useState("seconds"),[I,A]=y.useState(0),[M,O]=y.useState(0),[L,$]=y.useState(0),[P,C]=y.useState(!1),{checkPermission:T}=cg(),D=y.useCallback(async()=>{const{checked:V}=await T(["create_full_flow","create_limited_flow"],!1),U=V.create_full_flow;return C(!U),!U},[T]),_=({isClosing:V}={isClosing:!0})=>{n(null),s(1),g(""),v(null),N(!1),E("seconds"),A(0),O(0),V&&(i(""),c(null),u(null),m(!1),w({x:0,y:0}),$(0))},F=async()=>{L===0?$(1):t&&(t.type==="text"&&await t.execute({delayMinutes:I,delaySeconds:M,flowId:a,fromHandle:l,fromNodeId:d??"",itemIdState:p,position:b}),t.type==="delay"&&await t.execute({delayInMs:ca(S,r),timeUnitType:S,flowId:a??"",fromHandle:l,fromNodeId:d??"",position:b}),t.type==="document"&&await t.execute({flowId:a??"",fromHandle:l,fromNodeId:d??"",position:b,itemIdState:p}),t.type==="audio"&&await t.execute({delayMinutes:I,delaySeconds:M,flowId:a??"",fromHandle:l,fromNodeId:d??"",position:b,itemIdState:p}),t.type==="media"&&await t.execute({flowId:a??"",fromHandle:l,fromNodeId:d??"",position:b,itemIdState:p}),t.type==="contact"&&await t.execute({flowId:a??"",fromHandle:l,fromNodeId:d??"",position:b,itemIdState:p}),t.type==="user-input"&&await t.execute({delayInMs:ca(S,r),timeUnitType:S,flowId:a??"",fromHandle:l,fromNodeId:d??"",position:b}))},k=()=>{_({isClosing:!1}),L===1?$(0):m(!1)},R=V=>{V&&$(0),m(V)},H={value:String(r),onValueChange:({valueAsNumber:V})=>{Number.isNaN(V)&&(V=1),s(V)}},B={value:S,onValueChange:V=>{E(V)}},G={value:String(I),onValueChange:({valueAsNumber:V})=>{Number.isNaN(V)&&(V=0),A(V)}},z={value:String(M),onValueChange:({valueAsNumber:V})=>{Number.isNaN(V)&&(V=0),O(V)}},Z=L===1;function q(V){V&&(v(V),$(1))}return y.useEffect(()=>{D()},[D]),o.jsx(dg.Provider,{value:{clearAllState:_,closeOnAction:Z,closeOnCancel:!Z,delayTimeUnitHandler:H,handleModalAction:F,handleModalCancel:k,handleOpenChange:R,isLastStep:Z,isLimitedFlowState:P,isOpen:f,itemId:p,itemTypeSelected:h,notReady:Z&&!j,selectFlowNodeType:q,selectedDelayTimeUnitTypeHandler:B,setAction:n,setFlowId:i,setFromHandle:c,setFromNodeId:u,setIsLimitedFlowState:C,setIsOpen:m,setItemId:g,setPosition:w,setReady:N,simulationMinutesHandler:G,simulationSecondsHandler:z,step:L,title:`Adicionar item ${L+1}/2`},children:e})},Ke=()=>y.useContext(dg),uA={setType:()=>null,type:null},ug=y.createContext(uA),fA=({children:e})=>{const[t,n]=y.useState(null);return o.jsx(ug.Provider,{value:{type:t,setType:n},children:e})},fg=()=>y.useContext(ug);var Gn=[["Afghanistan","af","93"],["Albania","al","355"],["Algeria","dz","213"],["Andorra","ad","376"],["Angola","ao","244"],["Antigua and Barbuda","ag","1268"],["Argentina","ar","54","(..) ........",0],["Armenia","am","374",".. ......"],["Aruba","aw","297"],["Australia","au","61",{default:". .... ....","/^4/":"... ... ...","/^5(?!50)/":"... ... ...","/^1(3|8)00/":".... ... ...","/^13/":".. .. ..","/^180/":"... ...."},0,[]],["Austria","at","43"],["Azerbaijan","az","994","(..) ... .. .."],["Bahamas","bs","1242"],["Bahrain","bh","973"],["Bangladesh","bd","880"],["Barbados","bb","1246"],["Belarus","by","375","(..) ... .. .."],["Belgium","be","32","... .. .. .."],["Belize","bz","501"],["Benin","bj","229"],["Bhutan","bt","975"],["Bolivia","bo","591"],["Bosnia and Herzegovina","ba","387"],["Botswana","bw","267"],["Brazil","br","55","(..) ........."],["British Indian Ocean Territory","io","246"],["Brunei","bn","673"],["Bulgaria","bg","359"],["Burkina Faso","bf","226"],["Burundi","bi","257"],["Cambodia","kh","855"],["Cameroon","cm","237"],["Canada","ca","1","(...) ...-....",1,["204","226","236","249","250","289","306","343","365","387","403","416","418","431","437","438","450","506","514","519","548","579","581","587","604","613","639","647","672","705","709","742","778","780","782","807","819","825","867","873","902","905"]],["Cape Verde","cv","238"],["Caribbean Netherlands","bq","599","",1],["Cayman Islands","ky","1","... ... ....",4,["345"]],["Central African Republic","cf","236"],["Chad","td","235"],["Chile","cl","56"],["China","cn","86","... .... ...."],["Colombia","co","57","... ... ...."],["Comoros","km","269"],["Congo","cd","243"],["Congo","cg","242"],["Costa Rica","cr","506","....-...."],["Côte d'Ivoire","ci","225",".. .. .. .. .."],["Croatia","hr","385"],["Cuba","cu","53"],["Curaçao","cw","599","",0],["Cyprus","cy","357",".. ......"],["Czech Republic","cz","420","... ... ..."],["Denmark","dk","45",".. .. .. .."],["Djibouti","dj","253"],["Dominica","dm","1767"],["Dominican Republic","do","1","(...) ...-....",2,["809","829","849"]],["Ecuador","ec","593"],["Egypt","eg","20"],["El Salvador","sv","503","....-...."],["Equatorial Guinea","gq","240"],["Eritrea","er","291"],["Estonia","ee","372",".... ......"],["Ethiopia","et","251"],["Fiji","fj","679"],["Finland","fi","358",".. ... .. .."],["France","fr","33",". .. .. .. .."],["French Guiana","gf","594"],["French Polynesia","pf","689"],["Gabon","ga","241"],["Gambia","gm","220"],["Georgia","ge","995"],["Germany","de","49","... ........."],["Ghana","gh","233"],["Greece","gr","30"],["Greenland","gl","299",".. .. .."],["Grenada","gd","1473"],["Guadeloupe","gp","590","",0],["Guam","gu","1671"],["Guatemala","gt","502","....-...."],["Guinea","gn","224"],["Guinea-Bissau","gw","245"],["Guyana","gy","592"],["Haiti","ht","509","....-...."],["Honduras","hn","504"],["Hong Kong","hk","852",".... ...."],["Hungary","hu","36"],["Iceland","is","354","... ...."],["India","in","91",".....-....."],["Indonesia","id","62"],["Iran","ir","98","... ... ...."],["Iraq","iq","964"],["Ireland","ie","353",".. ......."],["Israel","il","972","... ... ...."],["Italy","it","39","... .......",0],["Jamaica","jm","1876"],["Japan","jp","81",".. .... ...."],["Jordan","jo","962"],["Kazakhstan","kz","7","... ...-..-..",0],["Kenya","ke","254"],["Kiribati","ki","686"],["Kosovo","xk","383"],["Kuwait","kw","965"],["Kyrgyzstan","kg","996","... ... ..."],["Laos","la","856"],["Latvia","lv","371",".. ... ..."],["Lebanon","lb","961"],["Lesotho","ls","266"],["Liberia","lr","231"],["Libya","ly","218"],["Liechtenstein","li","423"],["Lithuania","lt","370"],["Luxembourg","lu","352"],["Macau","mo","853"],["Macedonia","mk","389"],["Madagascar","mg","261"],["Malawi","mw","265"],["Malaysia","my","60","..-....-...."],["Maldives","mv","960"],["Mali","ml","223"],["Malta","mt","356"],["Marshall Islands","mh","692"],["Martinique","mq","596"],["Mauritania","mr","222"],["Mauritius","mu","230"],["Mexico","mx","52","... ... ....",0],["Micronesia","fm","691"],["Moldova","md","373","(..) ..-..-.."],["Monaco","mc","377"],["Mongolia","mn","976"],["Montenegro","me","382"],["Morocco","ma","212"],["Mozambique","mz","258"],["Myanmar","mm","95"],["Namibia","na","264"],["Nauru","nr","674"],["Nepal","np","977"],["Netherlands","nl","31",{"/^06/":"(.). .........","/^6/":". .........","/^0(10|13|14|15|20|23|24|26|30|33|35|36|38|40|43|44|45|46|50|53|55|58|70|71|72|73|74|75|76|77|78|79|82|84|85|87|88|91)/":"(.).. ........","/^(10|13|14|15|20|23|24|26|30|33|35|36|38|40|43|44|45|46|50|53|55|58|70|71|72|73|74|75|76|77|78|79|82|84|85|87|88|91)/":".. ........","/^0/":"(.)... .......",default:"... ......."}],["New Caledonia","nc","687"],["New Zealand","nz","64","...-...-...."],["Nicaragua","ni","505"],["Niger","ne","227"],["Nigeria","ng","234"],["North Korea","kp","850"],["Norway","no","47","... .. ..."],["Oman","om","968"],["Pakistan","pk","92","...-......."],["Palau","pw","680"],["Palestine","ps","970"],["Panama","pa","507"],["Papua New Guinea","pg","675"],["Paraguay","py","595"],["Peru","pe","51"],["Philippines","ph","63",".... ......."],["Poland","pl","48","...-...-..."],["Portugal","pt","351"],["Puerto Rico","pr","1","(...) ...-....",3,["787","939"]],["Qatar","qa","974"],["Réunion","re","262"],["Romania","ro","40"],["Russia","ru","7","(...) ...-..-..",1],["Rwanda","rw","250"],["Saint Kitts and Nevis","kn","1869"],["Saint Lucia","lc","1758"],["Saint Vincent and the Grenadines","vc","1784"],["Samoa","ws","685"],["San Marino","sm","378"],["São Tomé and Príncipe","st","239"],["Saudi Arabia","sa","966"],["Senegal","sn","221"],["Serbia","rs","381"],["Seychelles","sc","248"],["Sierra Leone","sl","232"],["Singapore","sg","65","....-...."],["Slovakia","sk","421"],["Slovenia","si","386"],["Solomon Islands","sb","677"],["Somalia","so","252"],["South Africa","za","27"],["South Korea","kr","82","... .... ...."],["South Sudan","ss","211"],["Spain","es","34","... ... ..."],["Sri Lanka","lk","94"],["Sudan","sd","249"],["Suriname","sr","597"],["Swaziland","sz","268"],["Sweden","se","46","... ... ..."],["Switzerland","ch","41",".. ... .. .."],["Syria","sy","963"],["Taiwan","tw","886"],["Tajikistan","tj","992"],["Tanzania","tz","255"],["Thailand","th","66"],["Timor-Leste","tl","670"],["Togo","tg","228"],["Tonga","to","676"],["Trinidad and Tobago","tt","1868"],["Tunisia","tn","216"],["Turkey","tr","90","... ... .. .."],["Turkmenistan","tm","993"],["Tuvalu","tv","688"],["Uganda","ug","256"],["Ukraine","ua","380","(..) ... .. .."],["United Arab Emirates","ae","971"],["United Kingdom","gb","44",".... ......"],["United States","us","1","(...) ...-....",0],["Uruguay","uy","598"],["Uzbekistan","uz","998",".. ... .. .."],["Vanuatu","vu","678"],["Vatican City","va","39",".. .... ....",1],["Venezuela","ve","58"],["Vietnam","vn","84"],["Yemen","ye","967"],["Zambia","zm","260"],["Zimbabwe","zw","263"]],mA="react-international-phone-",mg=(...e)=>e.filter(t=>!!t).join(" ").trim(),pA=(...e)=>mg(...e).split(" ").map(t=>`${mA}${t}`).join(" "),tt=({addPrefix:e,rawClassNames:t})=>mg(pA(...e),...t),hA=({value:e,mask:t,maskSymbol:n,offset:r=0,trimNonMaskCharsLeftover:s=!1})=>{if(e.length<r)return e;let a=e.slice(0,r),i=e.slice(r),l=a,c=0;for(let d of t.split("")){if(c>=i.length){if(!s&&d!==n){l+=d;continue}break}d===n?(l+=i[c],c+=1):l+=d}return l},Ir=e=>e?/^\d+$/.test(e):!1,Ni=e=>e.replace(/\D/g,""),gA=(e,t)=>{let n=e.style.display;n!=="block"&&(e.style.display="block");let r=e.getBoundingClientRect(),s=t.getBoundingClientRect(),a=s.top-r.top,i=r.bottom-s.bottom;a>=0&&i>=0||(Math.abs(a)<Math.abs(i)?e.scrollTop+=a:e.scrollTop-=i),e.style.display=n},xA=()=>typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().includes("macintosh"),yA=(e,t)=>{let n=t.disableDialCodeAndPrefix?!1:t.forceDialCode,r=t.disableDialCodeAndPrefix?!1:t.insertDialCodeOnEmpty,s=e,a=d=>t.trimNonDigitsEnd?d.trim():d;if(!s)return r&&!s.length||n?a(`${t.prefix}${t.dialCode}${t.charAfterDialCode}`):a(s);if(s=Ni(s),s===t.dialCode&&!t.disableDialCodeAndPrefix)return a(`${t.prefix}${t.dialCode}${t.charAfterDialCode}`);if(t.dialCode.startsWith(s)&&!t.disableDialCodeAndPrefix)return a(n?`${t.prefix}${t.dialCode}${t.charAfterDialCode}`:`${t.prefix}${s}`);if(!s.startsWith(t.dialCode)&&!t.disableDialCodeAndPrefix){if(n)return a(`${t.prefix}${t.dialCode}${t.charAfterDialCode}`);if(s.length<t.dialCode.length)return a(`${t.prefix}${s}`)}let i=()=>{let d=t.dialCode.length,u=s.slice(0,d),f=s.slice(d);return{phoneLeftSide:u,phoneRightSide:f}},{phoneLeftSide:l,phoneRightSide:c}=i();return l=`${t.prefix}${l}${t.charAfterDialCode}`,c=hA({value:c,mask:t.mask,maskSymbol:t.maskChar,trimNonMaskCharsLeftover:t.trimNonDigitsEnd||t.disableDialCodeAndPrefix&&c.length===0}),t.disableDialCodeAndPrefix&&(l=""),a(`${l}${c}`)},vA=({phoneBeforeInput:e,phoneAfterInput:t,phoneAfterFormatted:n,cursorPositionAfterInput:r,leftOffset:s=0,deletion:a})=>{if(r<s)return s;if(!e)return n.length;let i=null;for(let u=r-1;u>=0;u-=1)if(Ir(t[u])){i=u;break}if(i===null){for(let u=0;u<t.length;u+=1)if(Ir(n[u]))return u;return t.length}let l=0;for(let u=0;u<i;u+=1)Ir(t[u])&&(l+=1);let c=0,d=0;for(let u=0;u<n.length&&(c+=1,Ir(n[u])&&(d+=1),!(d>=l+1));u+=1);if(a!=="backward")for(;!Ir(n[c])&&c<n.length;)c+=1;return c},Uo=({phone:e,prefix:t})=>e?`${t}${Ni(e)}`:"";function Ul({value:e,country:t,insertDialCodeOnEmpty:n,trimNonDigitsEnd:r,countries:s,prefix:a,charAfterDialCode:i,forceDialCode:l,disableDialCodeAndPrefix:c,defaultMask:d,countryGuessingEnabled:u,disableFormatting:f}){let m=e;c&&(m=m.startsWith(`${a}`)?m:`${a}${t.dialCode}${m}`);let p=u?AA({phone:m,countries:s,currentCountryIso2:t==null?void 0:t.iso2}):void 0,g=(p==null?void 0:p.country)??t,h=yA(m,{prefix:a,mask:CA({phone:m,country:g,defaultMask:d,disableFormatting:f}),maskChar:pg,dialCode:g.dialCode,trimNonDigitsEnd:r,charAfterDialCode:i,forceDialCode:l,insertDialCodeOnEmpty:n,disableDialCodeAndPrefix:c}),v=u&&!(p!=null&&p.fullDialCodeMatch)?t:g;return{phone:Uo({phone:c?`${v.dialCode}${h}`:h,prefix:a}),inputValue:h,country:v}}var bA=e=>{if((e==null?void 0:e.toLocaleLowerCase().includes("delete"))??!1)return e!=null&&e.toLocaleLowerCase().includes("forward")?"forward":"backward"},wA=(e,{country:t,insertDialCodeOnEmpty:n,phoneBeforeInput:r,prefix:s,charAfterDialCode:a,forceDialCode:i,disableDialCodeAndPrefix:l,countryGuessingEnabled:c,defaultMask:d,disableFormatting:u,countries:f})=>{let m=e.nativeEvent,p=m.inputType,g=bA(p),h=!!(p!=null&&p.startsWith("insertFrom")),v=p==="insertText",b=(m==null?void 0:m.data)||void 0,w=e.target.value,j=e.target.selectionStart??0;if(p!=null&&p.includes("history"))return{inputValue:r,phone:Uo({phone:r,prefix:s}),cursorPosition:r.length,country:t};if(v&&!Ir(b)&&w!==s)return{inputValue:r,phone:Uo({phone:l?`${t.dialCode}${r}`:r,prefix:s}),cursorPosition:j-((b==null?void 0:b.length)??0),country:t};if(i&&!w.startsWith(`${s}${t.dialCode}`)&&!h){let A=w?r:`${s}${t.dialCode}${a}`;return{inputValue:A,phone:Uo({phone:A,prefix:s}),cursorPosition:s.length+t.dialCode.length+a.length,country:t}}let{phone:N,inputValue:S,country:E}=Ul({value:w,country:t,trimNonDigitsEnd:g==="backward",insertDialCodeOnEmpty:n,countryGuessingEnabled:c,countries:f,prefix:s,charAfterDialCode:a,forceDialCode:i,disableDialCodeAndPrefix:l,disableFormatting:u,defaultMask:d}),I=vA({cursorPositionAfterInput:j,phoneBeforeInput:r,phoneAfterInput:w,phoneAfterFormatted:S,leftOffset:i?s.length+t.dialCode.length+a.length:0,deletion:g});return{phone:N,inputValue:S,cursorPosition:I,country:E}},jA=(e,t)=>{let n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let s of n)if(e[s]!==t[s])return!1;return!0},NA=()=>{let e=y.useRef(),t=y.useRef(Date.now());return{check:()=>{let n=Date.now(),r=e.current?n-t.current:void 0;return e.current=t.current,t.current=n,r}}},EA={size:20,overrideLastItemDebounceMS:-1};function SA(e,t){let{size:n,overrideLastItemDebounceMS:r,onChange:s}={...EA,...t},[a,i]=y.useState(e),[l,c]=y.useState([a]),[d,u]=y.useState(0),f=NA();return[a,(m,p)=>{if(typeof m=="object"&&typeof a=="object"&&jA(m,a)||m===a)return;let g=r>0,h=f.check(),v=g&&h!==void 0?h>r:!0;if((p==null?void 0:p.overrideLastItem)!==void 0?p.overrideLastItem:!v)c(b=>[...b.slice(0,d),m]);else{let b=l.length>=n;c(w=>[...w.slice(b?1:0,d+1),m]),b||u(w=>w+1)}i(m),s==null||s(m)},()=>{if(d<=0)return{success:!1};let m=l[d-1];return i(m),u(p=>p-1),s==null||s(m),{success:!0,value:m}},()=>{if(d+1>=l.length)return{success:!1};let m=l[d+1];return i(m),u(p=>p+1),s==null||s(m),{success:!0,value:m}}]}var pg=".",Dt={defaultCountry:"us",value:"",prefix:"+",defaultMask:"............",charAfterDialCode:" ",historySaveDebounceMS:200,disableCountryGuess:!1,disableDialCodePrefill:!1,forceDialCode:!1,disableDialCodeAndPrefix:!1,disableFormatting:!1,countries:Gn,preferredCountries:[]},Ei=({defaultCountry:e=Dt.defaultCountry,value:t=Dt.value,countries:n=Dt.countries,prefix:r=Dt.prefix,defaultMask:s=Dt.defaultMask,charAfterDialCode:a=Dt.charAfterDialCode,historySaveDebounceMS:i=Dt.historySaveDebounceMS,disableCountryGuess:l=Dt.disableCountryGuess,disableDialCodePrefill:c=Dt.disableDialCodePrefill,forceDialCode:d=Dt.forceDialCode,disableDialCodeAndPrefix:u=Dt.disableDialCodeAndPrefix,disableFormatting:f=Dt.disableFormatting,onChange:m,inputRef:p})=>{let g={countries:n,prefix:r,charAfterDialCode:a,forceDialCode:u?!1:d,disableDialCodeAndPrefix:u,defaultMask:s,countryGuessingEnabled:!l,disableFormatting:f},h=y.useRef(null),v=p||h,b=C=>{Promise.resolve().then(()=>{var T;typeof window>"u"||v.current!==(document==null?void 0:document.activeElement)||((T=v.current)==null||T.setSelectionRange(C,C))})},[{phone:w,inputValue:j,country:N},S,E,I]=SA(()=>{let C=Dr({value:e,field:"iso2",countries:n});C||console.error(`[react-international-phone]: can not find a country with "${e}" iso2 code`);let T=C||Dr({value:"us",field:"iso2",countries:n}),{phone:D,inputValue:_,country:F}=Ul({value:t,country:T,insertDialCodeOnEmpty:!c,...g});return b(_.length),{phone:D,inputValue:_,country:F.iso2}},{overrideLastItemDebounceMS:i,onChange:({inputValue:C,phone:T,country:D})=>{if(!m)return;let _=A(D);m({phone:T,inputValue:C,country:_})}}),A=y.useCallback(C=>Dr({value:C,field:"iso2",countries:n}),[n]),M=y.useMemo(()=>A(N),[N,A]);y.useEffect(()=>{let C=v.current;if(!C)return;let T=D=>{if(!D.key)return;let _=D.ctrlKey,F=D.metaKey,k=D.shiftKey;if(D.key.toLowerCase()==="z"){if(xA()){if(!F)return}else if(!_)return;k?I():E()}};return C.addEventListener("keydown",T),()=>{C.removeEventListener("keydown",T)}},[v,E,I]);let O=C=>{C.preventDefault();let{phone:T,inputValue:D,country:_,cursorPosition:F}=wA(C,{country:M,phoneBeforeInput:j,insertDialCodeOnEmpty:!1,...g});return S({inputValue:D,phone:T,country:_.iso2}),b(F),t},L=(C,T={focusOnInput:!1})=>{let D=Dr({value:C,field:"iso2",countries:n});if(!D){console.error(`[react-international-phone]: can not find a country with "${C}" iso2 code`);return}let _=u?"":`${r}${D.dialCode}${a}`;S({inputValue:_,phone:`${r}${D.dialCode}`,country:D.iso2}),T.focusOnInput&&Promise.resolve().then(()=>{var F;(F=v.current)==null||F.focus()})},[$,P]=y.useState(!1);return y.useEffect(()=>{if(!$){P(!0),t!==w&&(m==null||m({inputValue:j,phone:w,country:M}));return}if(t===w)return;let{phone:C,inputValue:T,country:D}=Ul({value:t,country:M,insertDialCodeOnEmpty:!c,...g});S({phone:C,inputValue:T,country:D.iso2})},[t]),{phone:w,inputValue:j,country:M,setCountry:L,handlePhoneValueChange:O,inputRef:v}},CA=({phone:e,country:t,defaultMask:n="............",disableFormatting:r=!1})=>{let s=t.format,a=l=>r?l.replace(new RegExp(`[^${pg}]`,"g"),""):l;if(!s)return a(n);if(typeof s=="string")return a(s);if(!s.default)return console.error(`[react-international-phone]: default mask for ${t.iso2} is not provided`),a(n);let i=Object.keys(s).find(l=>{if(l==="default")return!1;if(!(l.charAt(0)==="/"&&l.charAt(l.length-1)==="/"))return console.error(`[react-international-phone]: format regex "${l}" for ${t.iso2} is not valid`),!1;let c=new RegExp(l.substring(1,l.length-1)),d=e.replace(t.dialCode,"");return c.test(Ni(d))});return a(i?s[i]:s.default)},vt=e=>{let[t,n,r,s,a,i]=e;return{name:t,iso2:n,dialCode:r,format:s,priority:a,areaCodes:i}},IA=e=>`Field "${e}" is not supported`,Dr=({field:e,value:t,countries:n=Gn})=>{if(["priority"].includes(e))throw new Error(IA(e));let r=n.find(s=>{let a=vt(s);return t===a[e]});if(r)return vt(r)},AA=({phone:e,countries:t=Gn,currentCountryIso2:n})=>{var l;let r={country:void 0,fullDialCodeMatch:!1};if(!e)return r;let s=Ni(e);if(!s)return r;let a=r,i=({country:c,fullDialCodeMatch:d})=>{var m,p;let u=c.dialCode===((m=a.country)==null?void 0:m.dialCode),f=(c.priority??0)<(((p=a.country)==null?void 0:p.priority)??0);(!u||f)&&(a={country:c,fullDialCodeMatch:d})};for(let c of t){let d=vt(c),{dialCode:u,areaCodes:f}=d;if(s.startsWith(u)){let m=a.country?Number(u)>=Number(a.country.dialCode):!0;if(f){let p=s.substring(u.length);for(let g of f)if(p.startsWith(g))return{country:d,fullDialCodeMatch:!0}}(m||u===s||!a.fullDialCodeMatch)&&i({country:d,fullDialCodeMatch:!0})}a.fullDialCodeMatch||s.length<u.length&&u.startsWith(s)&&(!a.country||Number(u)<=Number(a.country.dialCode))&&i({country:d,fullDialCodeMatch:!1})}if(n){let c=Dr({value:n,field:"iso2",countries:t});if(!c)return a;let d=c?(u=>{if(!(u!=null&&u.areaCodes))return!1;let f=s.substring(u.dialCode.length);return u.areaCodes.some(m=>m.startsWith(f))})(c):!1;a&&((l=a.country)==null?void 0:l.dialCode)===c.dialCode&&a.country!==c&&a.fullDialCodeMatch&&(!c.areaCodes||d)&&(a={country:c,fullDialCodeMatch:!0})}return a},DA=(e,t)=>{let n=parseInt(e,16);return Number(n+t).toString(16)},MA="abcdefghijklmnopqrstuvwxyz",kA="1f1e6",c0=MA.split("").reduce((e,t,n)=>({...e,[t]:DA(kA,n)}),{}),OA=e=>[c0[e[0]],c0[e[1]]].join("-"),Br=({iso2:e,size:t,src:n,protocol:r="https",disableLazyLoading:s,className:a,style:i,...l})=>{if(!e)return x.createElement("img",{className:tt({addPrefix:["flag-emoji"],rawClassNames:[a]}),width:t,height:t,...l});let c=()=>{if(n)return n;let d=OA(e);return`${r}://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/${d}.svg`};return x.createElement("img",{className:tt({addPrefix:["flag-emoji"],rawClassNames:[a]}),src:c(),width:t,height:t,draggable:!1,"data-country":e,loading:s?void 0:"lazy",style:{width:t,height:t,...i},alt:"",...l})},TA=1e3,FA=({show:e,dialCodePrefix:t="+",selectedCountry:n,countries:r=Gn,preferredCountries:s=[],flags:a,onSelect:i,onClose:l,...c})=>{let d=y.useRef(null),u=y.useRef(),f=y.useMemo(()=>{if(!s||!s.length)return r;let E=[],I=[...r];for(let A of s){let M=I.findIndex(O=>vt(O).iso2===A);if(M!==-1){let O=I.splice(M,1)[0];E.push(O)}}return E.concat(I)},[r,s]),m=y.useRef({updatedAt:void 0,value:""}),p=E=>{let I=m.current.updatedAt&&new Date().getTime()-m.current.updatedAt.getTime()>TA;m.current={value:I?E:`${m.current.value}${E}`,updatedAt:new Date};let A=f.findIndex(M=>vt(M).name.toLowerCase().startsWith(m.current.value));A!==-1&&v(A)},g=y.useCallback(E=>f.findIndex(I=>vt(I).iso2===E),[f]),[h,v]=y.useState(g(n)),b=()=>{u.current!==n&&v(g(n))},w=y.useCallback(E=>{v(g(E.iso2)),i==null||i(E)},[i,g]),j=E=>{let I=f.length-1,A=M=>E==="prev"?M-1:E==="next"?M+1:E==="last"?I:0;v(M=>{let O=A(M);return O<0?0:O>I?I:O})},N=E=>{if(E.stopPropagation(),E.key==="Enter"){E.preventDefault();let I=vt(f[h]);w(I);return}if(E.key==="Escape"){l==null||l();return}if(E.key==="ArrowUp"){E.preventDefault(),j("prev");return}if(E.key==="ArrowDown"){E.preventDefault(),j("next");return}if(E.key==="PageUp"){E.preventDefault(),j("first");return}if(E.key==="PageDown"){E.preventDefault(),j("last");return}E.key===" "&&E.preventDefault(),E.key.length===1&&!E.altKey&&!E.ctrlKey&&!E.metaKey&&p(E.key.toLocaleLowerCase())},S=y.useCallback(()=>{if(!d.current||h===void 0)return;let E=vt(f[h]).iso2;if(E===u.current)return;let I=d.current.querySelector(`[data-country="${E}"]`);I&&(gA(d.current,I),u.current=E)},[h,f]);return y.useEffect(()=>{S()},[h,S]),y.useEffect(()=>{d.current&&(e?d.current.focus():b())},[e]),y.useEffect(()=>{b()},[n]),x.createElement("ul",{ref:d,role:"listbox",className:tt({addPrefix:["country-selector-dropdown"],rawClassNames:[c.className]}),style:{display:e?"block":"none",...c.style},onKeyDown:N,onBlur:l,tabIndex:-1,"aria-activedescendant":`react-international-phone__${vt(f[h]).iso2}-option`},f.map((E,I)=>{let A=vt(E),M=A.iso2===n,O=I===h,L=s.includes(A.iso2),$=I===s.length-1,P=a==null?void 0:a.find(C=>C.iso2===A.iso2);return x.createElement(x.Fragment,{key:A.iso2},x.createElement("li",{"data-country":A.iso2,role:"option","aria-selected":M,"aria-label":`${A.name} ${t}${A.dialCode}`,id:`react-international-phone__${A.iso2}-option`,className:tt({addPrefix:["country-selector-dropdown__list-item",L&&"country-selector-dropdown__list-item--preferred",M&&"country-selector-dropdown__list-item--selected",O&&"country-selector-dropdown__list-item--focused"],rawClassNames:[c.listItemClassName]}),onClick:()=>w(A),style:c.listItemStyle,title:A.name},x.createElement(Br,{iso2:A.iso2,src:P==null?void 0:P.src,className:tt({addPrefix:["country-selector-dropdown__list-item-flag-emoji"],rawClassNames:[c.listItemFlagClassName]}),style:c.listItemFlagStyle}),x.createElement("span",{className:tt({addPrefix:["country-selector-dropdown__list-item-country-name"],rawClassNames:[c.listItemCountryNameClassName]}),style:c.listItemCountryNameStyle},A.name),x.createElement("span",{className:tt({addPrefix:["country-selector-dropdown__list-item-dial-code"],rawClassNames:[c.listItemDialCodeClassName]}),style:c.listItemDialCodeStyle},t,A.dialCode)),$?x.createElement("hr",{className:tt({addPrefix:["country-selector-dropdown__preferred-list-divider"],rawClassNames:[c.preferredListDividerClassName]}),style:c.preferredListDividerStyle}):null)}))},_A=({selectedCountry:e,onSelect:t,disabled:n,hideDropdown:r,countries:s=Gn,preferredCountries:a=[],flags:i,renderButtonWrapper:l,...c})=>{let[d,u]=y.useState(!1),f=y.useMemo(()=>{if(e)return Dr({value:e,field:"iso2",countries:s})},[s,e]),m=y.useRef(null),p=h=>{h.key&&["ArrowUp","ArrowDown"].includes(h.key)&&(h.preventDefault(),u(!0))},g=()=>{var b;let h={title:f==null?void 0:f.name,onClick:()=>u(w=>!w),onMouseDown:w=>w.preventDefault(),onKeyDown:p,disabled:r||n,role:"combobox","aria-label":"Country selector","aria-haspopup":"listbox","aria-expanded":d},v=x.createElement("div",{className:tt({addPrefix:["country-selector-button__button-content"],rawClassNames:[c.buttonContentWrapperClassName]}),style:c.buttonContentWrapperStyle},x.createElement(Br,{iso2:e,src:(b=i==null?void 0:i.find(w=>w.iso2===e))==null?void 0:b.src,className:tt({addPrefix:["country-selector-button__flag-emoji",n&&"country-selector-button__flag-emoji--disabled"],rawClassNames:[c.flagClassName]}),style:{visibility:e?"visible":"hidden",...c.flagStyle}}),!r&&x.createElement("div",{className:tt({addPrefix:["country-selector-button__dropdown-arrow",n&&"country-selector-button__dropdown-arrow--disabled",d&&"country-selector-button__dropdown-arrow--active"],rawClassNames:[c.dropdownArrowClassName]}),style:c.dropdownArrowStyle}));return l?l({children:v,rootProps:h}):x.createElement("button",{...h,type:"button",className:tt({addPrefix:["country-selector-button",d&&"country-selector-button--active",n&&"country-selector-button--disabled",r&&"country-selector-button--hide-dropdown"],rawClassNames:[c.buttonClassName]}),"data-country":e,style:c.buttonStyle},v)};return x.createElement("div",{className:tt({addPrefix:["country-selector"],rawClassNames:[c.className]}),style:c.style,ref:m},g(),x.createElement(FA,{show:d,countries:s,preferredCountries:a,flags:i,onSelect:h=>{u(!1),t==null||t(h)},selectedCountry:e,onClose:()=>{u(!1)},...c.dropdownStyleProps}))},PA=({dialCode:e,prefix:t,disabled:n,style:r,className:s})=>x.createElement("div",{className:tt({addPrefix:["dial-code-preview",n&&"dial-code-preview--disabled"],rawClassNames:[s]}),style:r},`${t}${e}`);y.forwardRef(({value:e,onChange:t,countries:n=Gn,preferredCountries:r=[],hideDropdown:s,showDisabledDialCodeAndPrefix:a,disableFocusAfterCountrySelect:i,flags:l,style:c,className:d,inputStyle:u,inputClassName:f,countrySelectorStyleProps:m,dialCodePreviewStyleProps:p,inputProps:g,placeholder:h,disabled:v,name:b,onFocus:w,onBlur:j,required:N,autoFocus:S,...E},I)=>{let{phone:A,inputValue:M,inputRef:O,country:L,setCountry:$,handlePhoneValueChange:P}=Ei({value:e,countries:n,...E,onChange:T=>{t==null||t(T.phone,{country:T.country,inputValue:T.inputValue})}}),C=E.disableDialCodeAndPrefix&&a&&(L==null?void 0:L.dialCode);return y.useImperativeHandle(I,()=>O.current?Object.assign(O.current,{setCountry:$,state:{phone:A,inputValue:M,country:L}}):null,[O,$,A,M,L]),x.createElement("div",{ref:I,className:tt({addPrefix:["input-container"],rawClassNames:[d]}),style:c},x.createElement(_A,{onSelect:T=>$(T.iso2,{focusOnInput:!i}),flags:l,selectedCountry:L.iso2,countries:n,preferredCountries:r,disabled:v,hideDropdown:s,...m}),C&&x.createElement(PA,{dialCode:L.dialCode,prefix:E.prefix??"+",disabled:v,...p}),x.createElement("input",{onChange:P,value:M,type:"tel",ref:O,className:tt({addPrefix:["input",v&&"input--disabled"],rawClassNames:[f]}),placeholder:h,disabled:v,style:u,name:b,onFocus:w,onBlur:j,autoFocus:S,required:N,...g}))});class LA{constructor(t,n,r){this.mediaRepository=t,this.funnelRepository=n,this.flowRepository=r}async execute(t){if(!t)throw new Error("DeleteMedia: Id must be provided");await $a(this.funnelRepository)({itemId:t}),await Ra(this.flowRepository)({itemId:t}),await this.mediaRepository.deleteMedia(t)}}function $A(e,t,n){const r=new LA(e,t,n);return r.execute.bind(r)}class RA{constructor(t){this.repository=t}async execute(t){if(!t)throw new Error("GetMediaData: Id must be provided");const n=await this.repository.getMediaDataById(t);return n||(console.warn("GetMediaData: Media not found"),console.warn(`Media Id: ${t}`),null)}}function bo(e){return y.useMemo(()=>{const t=new RA(e);return t.execute.bind(t)},[e])}class VA{constructor(t){this.repository=t}async execute(t){await this.repository.reorderMediaList(t)}}function BA(e){const t=new VA(e);return t.execute.bind(t)}class zA{constructor(t){this.repository=t}async execute(t){if(!t)throw new Error("SelectMedia: Id must be provided");await this.repository.selectMedia(t)}}function HA(e){const t=new zA(e);return t.execute.bind(t)}class ZA{constructor(t){this.repository=t}async execute(t){await this.repository.setMediaFilter(t)}}function UA(e){return y.useMemo(()=>{const t=new ZA(e);return t.execute.bind(t)},[e])}class WA{constructor(t){this.repository=t}async execute(t){if(!t)throw new Error("ToggleMediaIsFavorite: Id must be provided");const n=await this.repository.findById(t);if(!n)throw new Error("ToggleMediaIsFavorite: Media not found");const r=np.create({data:n.data,isFavorite:!n.isFavorite,caption:n.caption,name:n.name,asViewOnce:n.asViewOnce},n.idEntity);await this.repository.saveMedia(r)}}function GA(e){const t=new WA(e);return t.execute.bind(t)}class qA{constructor(t){this.repository=t}async execute({id:t,base64:n,isFavorite:r,caption:s,name:a,asViewOnce:i}){if(!t)throw new Error("UpdateMediaData: Id must be provided");const l=await this.repository.findById(t);if(!l)throw new Error("UpdateMediaData: Media not found");const c=np.create({data:n??l.data,isFavorite:r??l.isFavorite,caption:s??l.caption,name:a??l.name,asViewOnce:i??l.asViewOnce},l.idEntity);return await this.repository.saveMedia(c),{media:c}}}function KA(e){const t=new qA(e);return t.execute.bind(t)}class YA{constructor(t,n,r){this.messageRepository=t,this.funnelRepository=n,this.flowRepository=r}async execute(t){if(!t)throw new Error("DeleteTextMessage: Id must be provided");await $a(this.funnelRepository)({itemId:t}),await Ra(this.flowRepository)({itemId:t}),await this.messageRepository.deleteTextMessage(t)}}function XA(e,t,n){const r=new YA(e,t,n);return r.execute.bind(r)}class JA{constructor(t){this.repository=t}async execute(t){if(!t)throw new Error("GetTextMessageData: Id must be provided");const n=await this.repository.getTextMessageDataById(t);return n||(console.warn("GetTextMessageData: TextMessage not found"),null)}}function wo(e){return y.useMemo(()=>{const t=new JA(e);return t.execute.bind(t)},[e])}class QA{constructor(t){this.repository=t}async execute(t){await this.repository.reorderTextMessageList(t)}}function e9(e){const t=new QA(e);return t.execute.bind(t)}class t9{constructor(t){this.repository=t}async execute(t){if(!t)throw new Error("SelectTextMessage: Id must be provided");await this.repository.selectTextMessage(t)}}function n9(e){const t=new t9(e);return t.execute.bind(t)}class r9{constructor(t){this.repository=t}async execute(t){await this.repository.setTextMessageFilter(t)}}function s9(e){return y.useMemo(()=>{const t=new r9(e);return t.execute.bind(t)},[e])}class o9{constructor(t){this.repository=t}async execute(t){if(!t)throw new Error("ToggleTextMessageIsFavorite: Id must be provided");const n=await this.repository.findById(t);if(!n)throw new Error("ToggleTextMessageIsFavorite: TextMessage not found");const r=rp.create({data:n.data,isFavorite:!n.isFavorite,name:n.name},n.idEntity);await this.repository.saveTextMessage(r)}}function a9(e){const t=new o9(e);return t.execute.bind(t)}class i9{constructor(t){this.repository=t}async execute({id:t,base64:n,isFavorite:r,name:s}){if(!t)throw new Error("UpdateTextMessageData: Id must be provided");const a=await this.repository.findById(t);if(!a)throw new Error("UpdateTextMessageData: TextMessage not found");const i=rp.create({data:n??a.data,isFavorite:r??a.isFavorite,name:s??a.name},a.idEntity);return await this.repository.saveTextMessage(i),{textMessage:i}}}function l9(e){const t=new i9(e);return t.execute.bind(t)}const c9={contactName:"",countries:[],country:vt(["","","","",0,[""]]),createContactNode:async()=>{},handlePhoneValueChange:()=>"",inputRef:y.createRef(),inputValue:"",phone:"",setContactName:()=>null,setCountry:()=>null},hg=y.createContext(c9),d9=({children:e})=>{const[t,n]=y.useState(""),{country:r,handlePhoneValueChange:s,inputRef:a,inputValue:i,phone:l,setCountry:c}=Ei({defaultCountry:"br",value:""}),{clearAllState:d,itemTypeSelected:u,setAction:f,setReady:m}=Ke(),p=y.useCallback(async({flowId:g,fromHandle:h,fromNodeId:v,position:b})=>{const w=new Ee;if(t.trim()===""){he({title:"Atenção",description:"Informe o nome do contato"});return}if(l.trim()===""){he({title:"Atenção",description:"Informe o telefone do contato"});return}if(!g){console.error("flowId is required to create a node"),le({title:"Erro",description:"Ocorreu um erro inesperado, tente novamente..."});return}const j=xc.create({flowId:g,contactName:t,contactPhone:l,itemId:"",nextNodeId:null,type:"contact",position:b}).metadata,N=j.id,S=await w.findById(g);if(!S){le({title:"Erro",description:"Ocorreu um erro inesperado, tente novamente..."});return}if(h){const E=S==null?void 0:S.draft.nodes.findIndex(A=>A.id===v),I=(S==null?void 0:S.draft.startNode.id)===v?S.draft.startNode:null;if(E===-1&&!I){le({title:"Erro",description:"Ocorreu um erro inesperado, tente novamente..."});return}E!==-1?h==="expiration-source-handle"?S.draft.nodes[E].nextNodeIdOnExpiration=N:h==="source-handle"&&(S.draft.nodes[E].nextNodeId=N):S.draft.startNode.nextNodeId=N}S.draft.nodes.push(j),S.draft.updatedAt=new Date,await w.updateFlow(S),ie({title:"Sucesso",description:"Nó de contato criado com sucesso"}),n(""),d()},[d,t,l]);return y.useEffect(()=>{u==="contact"&&t.trim()!==""&&(f({execute:p,type:"contact"}),m(!0))},[t,p,u,f,m]),o.jsx(hg.Provider,{value:{contactName:t,countries:Gn.map(g=>vt(g)),country:r,createContactNode:p,handlePhoneValueChange:s,inputRef:a,inputValue:i,phone:l,setContactName:n,setCountry:c},children:e})},u9=()=>y.useContext(hg),f9={createDelayNode:async()=>{}},m9=y.createContext(f9),p9=({children:e})=>{const{clearAllState:t,itemTypeSelected:n,setAction:r,setReady:s}=Ke(),a=y.useCallback(async({delayInMs:i,timeUnitType:l,flowId:c,fromHandle:d,fromNodeId:u,position:f})=>{const m=new Ee;if(!c){console.error("flowId is required to create a node"),le({title:"Erro",description:"Ocorreu um erro inesperado, tente novamente..."});return}const p=Ls.create({flowId:c,delayInMs:i,nextNodeId:null,expirationTimeoutInMs:void 0,position:f,timeUnitType:l,type:"delay"}).metadata,g=p.id,h=await m.findById(c);if(!h){le({title:"Erro",description:"Ocorreu um erro inesperado, tente novamente..."});return}if(d){const v=h==null?void 0:h.draft.nodes.findIndex(w=>w.id===u),b=(h==null?void 0:h.draft.startNode.id)===u?h.draft.startNode:null;if(v===-1&&!b){le({title:"Erro",description:"Ocorreu um erro inesperado, tente novamente..."});return}v!==-1?d==="expiration-source-handle"?h.draft.nodes[v].nextNodeIdOnExpiration=g:d==="source-handle"&&(h.draft.nodes[v].nextNodeId=g):h.draft.startNode.nextNodeId=g}h.draft.nodes.push(p),h.draft.updatedAt=new Date,await m.updateFlow(h),ie({title:"Sucesso",description:"Nó de espera criado com sucesso"}),t()},[t]);return y.useEffect(()=>{n==="delay"&&(r({execute:a,type:"delay"}),s(!0))},[a,n,r,s]),o.jsx(m9.Provider,{value:{createDelayNode:a},children:e})},h9={createAudioNode:async()=>{}},g9=y.createContext(h9),x9=({children:e})=>{const{clearAllState:t,itemId:n,itemTypeSelected:r,setAction:s,setReady:a}=Ke(),i=y.useCallback(async({delayMinutes:l,delaySeconds:c,flowId:d,fromHandle:u,fromNodeId:f,position:m,itemIdState:p})=>{var j;const g=new Ee;if(!p){he({title:"Atenção",description:"Selecione um áudio para continuar"});return}if(!d){console.error("flowId is required to create a node"),le({title:"Erro",description:"Ocorreu um erro inesperado, tente novamente..."});return}const h=l*60*1e3+c*1e3,v=Na.create({flowId:d.toString(),itemId:p,nextNodeId:null,simulationDelay:h,type:"audio",position:m}).metadata,b=v.id,w=await g.findById(d);if(!w){le({title:"Erro",description:"Ocorreu um erro inesperado, tente novamente..."});return}if(u){const N=w.draft.nodes.findIndex(E=>E.id===f),S=w.draft.startNode.id===f?w.draft.startNode:null;if(N===-1&&!S){le({title:"Erro",description:"Ocorreu um erro inesperado, tente novamente..."});return}N!==-1?u==="expiration-source-handle"?w.draft.nodes[N].nextNodeIdOnExpiration=b:u==="source-handle"&&(w.draft.nodes[N].nextNodeId=b):w.draft.startNode.nextNodeId=b}(j=w.draft)==null||j.nodes.push(v),w.draft.updatedAt=new Date,await g.updateFlow(w),ie({title:"Sucesso",description:"Nó de áudio criado com sucesso"}),t()},[t]);return y.useEffect(()=>{r==="audio"&&n.trim()!==""&&(s({execute:i,type:"audio"}),a(!0))},[i,n,r,s,a]),o.jsx(g9.Provider,{value:{createAudioNode:i},children:e})},y9={createDocumentNode:async()=>{}},v9=y.createContext(y9),b9=({children:e})=>{const{clearAllState:t,itemId:n,itemTypeSelected:r,setAction:s,setReady:a}=Ke(),i=y.useCallback(async({flowId:l,fromHandle:c,fromNodeId:d,position:u,itemIdState:f})=>{const m=new Ee;if(!f){he({title:"Atenção",description:"Selecione um documento para continuar"});return}if(!l){console.error("flowId is required to create a node"),le({title:"Erro",description:"Ocorreu um erro inesperado, tente novamente..."});return}const p=Ea.create({flowId:l.toString(),itemId:f,nextNodeId:null,type:"document",position:u}).metadata,g=p.id,h=await m.findById(l);if(!h){le({title:"Erro",description:"Ocorreu um erro inesperado, tente novamente..."});return}if(c){const v=h==null?void 0:h.draft.nodes.findIndex(w=>w.id===d),b=(h==null?void 0:h.draft.startNode.id)===d?h.draft.startNode:null;if(v===-1&&!b){le({title:"Erro",description:"Ocorreu um erro inesperado, tente novamente..."});return}v!==-1?c==="expiration-source-handle"?h.draft.nodes[v].nextNodeIdOnExpiration=g:c==="source-handle"&&(h.draft.nodes[v].nextNodeId=g):h.draft.startNode.nextNodeId=g}h.draft.nodes.push(p),h.draft.updatedAt=new Date,await m.updateFlow(h),ie({title:"Sucesso",description:"Nó de documento criado com sucesso"}),t()},[t]);return y.useEffect(()=>{r==="document"&&n.trim()!==""&&(s({execute:i,type:"document"}),a(!0))},[i,n,r,s,a]),o.jsx(v9.Provider,{value:{createDocumentNode:i},children:e})},w9={createMediaNode:async()=>{}},j9=y.createContext(w9),N9=({children:e})=>{const{clearAllState:t,itemId:n,itemTypeSelected:r,setAction:s,setReady:a}=Ke(),i=y.useCallback(async({flowId:l,fromHandle:c,fromNodeId:d,position:u,itemIdState:f})=>{const m=new Ee;if(!f){he({title:"Atenção",description:"Selecione uma mídia para continuar"});return}if(!l){console.error("flowId is required to create a node"),le({title:"Erro",description:"Ocorreu um erro inesperado, tente novamente..."});return}const p=Sa.create({flowId:l.toString(),itemId:f,nextNodeId:null,type:"media",position:u}).metadata,g=p.id,h=await m.findById(l);if(!h){le({title:"Erro",description:"Ocorreu um erro inesperado, tente novamente..."});return}if(c){const v=h==null?void 0:h.draft.nodes.findIndex(w=>w.id===d),b=(h==null?void 0:h.draft.startNode.id)===d?h.draft.startNode:null;if(v===-1&&!b){le({title:"Erro",description:"Ocorreu um erro inesperado, tente novamente..."});return}v!==-1?c==="expiration-source-handle"?h.draft.nodes[v].nextNodeIdOnExpiration=g:c==="source-handle"&&(h.draft.nodes[v].nextNodeId=g):h.draft.startNode.nextNodeId=g}h.draft.nodes.push(p),h.draft.updatedAt=new Date,await m.updateFlow(h),ie({title:"Sucesso",description:"Nó de mídia criado com sucesso"}),t()},[t]);return y.useEffect(()=>{r==="media"&&n.trim()!==""&&(s({execute:i,type:"media"}),a(!0))},[i,n,r,s,a]),o.jsx(j9.Provider,{value:{createMediaNode:i},children:e})},E9={createTextNode:async()=>{}},S9=y.createContext(E9),C9=({children:e})=>{const{clearAllState:t,itemId:n,itemTypeSelected:r,setAction:s,setReady:a}=Ke(),i=y.useCallback(async({delayMinutes:l,delaySeconds:c,flowId:d,fromHandle:u,fromNodeId:f,itemIdState:m,position:p})=>{const g=new Ee;if(!d){console.error("flowId is required to create a node"),le({title:"Erro",description:"Ocorreu um erro inesperado, tente novamente..."});return}if(!m){he({title:"Atenção",description:"Selecione um item de texto"});return}const h=l*60*1e3+c*1e3,v=Ca.create({flowId:d,itemId:m,nextNodeId:null,simulationDelay:h,type:"text",position:p}).metadata,b=v.id,w=await g.findById(d);if(!w){le({title:"Erro",description:"Ocorreu um erro inesperado, tente novamente..."});return}if(u){const j=w==null?void 0:w.draft.nodes.findIndex(S=>S.id===f),N=(w==null?void 0:w.draft.startNode.id)===f?w.draft.startNode:null;if(j===-1&&!N){le({title:"Erro",description:"Ocorreu um erro inesperado, tente novamente..."});return}j!==-1?u==="expiration-source-handle"?w.draft.nodes[j].nextNodeIdOnExpiration=b:u==="source-handle"&&(w.draft.nodes[j].nextNodeId=b):w.draft.startNode.nextNodeId=b}w.draft.nodes.push(v),w.draft.updatedAt=new Date,await g.updateFlow(w),ie({title:"Sucesso",description:"Nó de texto criado com sucesso"}),t()},[t]);return y.useEffect(()=>{r==="text"&&n.trim()!==""&&(s({execute:i,type:"text"}),a(!0))},[i,n,r,s,a]),o.jsx(S9.Provider,{value:{createTextNode:i},children:e})},I9={canExpire:!1,createUserInputNode:async()=>{},expectedMessage:"",selectedOption:"anything",setCanExpire:()=>{},setExpectedMessage:()=>{},setSelectedOption:()=>{}},gg=y.createContext(I9),A9=({children:e})=>{const[t,n]=y.useState(!1),[r,s]=y.useState(""),[a,i]=y.useState("anything"),{clearAllState:l,itemTypeSelected:c,setAction:d,setReady:u}=Ke(),f=y.useCallback(async({delayInMs:m,timeUnitType:p,flowId:g,fromHandle:h,fromNodeId:v,position:b})=>{const w=new Ee;if(!r&&a!=="anyTextMessage"&&a!=="anything"){he({title:"Atenção",description:"Digite o texto do item"});return}if(t&&m<1e3){he({title:"Atenção",description:"O tempo de espera deve ser ao menos 1 seg."});return}if(!g){console.error("flowId is required to create a node"),le({title:"Erro",description:"Ocorreu um erro inesperado, tente novamente..."});return}const j=yc.create({flowId:g,compareRule:a,expectedMessage:r,nextNodeId:null,nextNodeIdOnExpiration:null,expirationTimeoutInMs:t?m:null,timeUnitType:p,type:"user-input",position:b}).metadata,N=j.id,S=await w.findById(g);if(!S){le({title:"Erro",description:"Ocorreu um erro inesperado, tente novamente..."});return}if(h){const E=S==null?void 0:S.draft.nodes.findIndex(A=>A.id===v),I=(S==null?void 0:S.draft.startNode.id)===v?S.draft.startNode:null;if(E===-1&&!I){le({title:"Erro",description:"Ocorreu um erro inesperado, tente novamente..."});return}E!==-1?h==="expiration-source-handle"?S.draft.nodes[E].nextNodeIdOnExpiration=N:h==="source-handle"&&(S.draft.nodes[E].nextNodeId=N):S.draft.startNode.nextNodeId=N}S.draft.nodes.push(j),S.draft.updatedAt=new Date,await w.updateFlow(S),ie({title:"Sucesso",description:"Nó criado com sucesso"}),l(),n(!1),s(""),i("anything")},[t,l,r,a]);return y.useEffect(()=>{c==="user-input"&&(d({execute:f,type:"user-input"}),u(!0))},[f,c,d,u]),o.jsx(gg.Provider,{value:{selectedOption:a,setSelectedOption:i,expectedMessage:r,setExpectedMessage:s,createUserInputNode:f,canExpire:t,setCanExpire:n},children:e})},D9=()=>y.useContext(gg);class M9{constructor(t){this.repository=t}async execute({id:t,name:n}){if(!n.trim())throw new Error("CreateFlow: Cannot create an flow with empty name");const s=new Me(t),a={enabled:!0,isFavorite:!1,name:n,nodes:[],startNode:ja.create({flowId:s.toString(),schedule:{days:[],maxTime:"00:00",minTime:"00:00"},enabledSchedule:!1,enabledTrigger:!1,trigger:{isCaseSensitive:!1,keywordRules:[],sendToContacts:!0,sendToGroups:!0},nextNodeId:null,position:{x:250,y:250},type:"start"},new Me).metadata,updatedAt:new Date},i=vc.create({draft:a,published:a},s);return await this.repository.addFlow(i),{flow:i}}}function k9(e){const t=new M9(e);return t.execute.bind(t)}function O9({onAction:e,trigger:t}){const[n,r]=y.useState(""),s=new Be,a=k9(new Ee),i=yn(s),l=async()=>{const{flow:f}=await a({name:n});await i({optionKey:"flows",optionToAdd:{id:f.id,name:f.published.name,size:await De(f)}}),e(f.id),c()},c=()=>{r("")},d={value:n,onChange:f=>r(f.target.value)},u=n.trim()==="";return o.jsx(we,{onCancel:c,onAction:l,action:"Salvar",actionProps:{disabled:u,icon:o.jsx(en,{})},description:o.jsxs("div",{children:[o.jsx(ce,{htmlFor:"title",className:"max-sm:hidden",children:"Nome"}),o.jsx($e,{required:!0,className:"bg-background text-base",id:"title",placeholder:"Nome do fluxo",ref:Vn,...d,errorMessage:!d.value.trim()&&"Campo não pode ser vazio."})]}),descriptionProps:{className:"grid w-full items-center gap-1.5"},title:"Criar novo fluxo",trigger:t,cancel:"Cancelar"})}function T9(){return o.jsx(O9,{onAction:e=>dt.selectFlow(e),trigger:o.jsx(X,{size:"action",icon:o.jsx(tn,{size:16,weight:"bold"}),children:"Adicionar novo"})})}class jo{constructor(){pe(this,"triggerStore",zt)}async add(...t){await this.triggerStore.add(...t)}async checkNewMessage(...t){return await this.triggerStore.checkNewMessage(...t)}async delete(...t){await this.triggerStore.delete(...t)}async findById(...t){return await this.triggerStore.findById(...t)}async findMany(...t){return this.triggerStore.findMany(...t)}async reorderList(...t){return this.triggerStore.reorderList(...t)}async save(...t){await this.triggerStore.save(...t)}async select(...t){await this.triggerStore.select(...t)}async setFilter(...t){await this.triggerStore.setFilter(...t)}}class dd extends Km{get funnelId(){return this.props.funnelId}set funnelId(t){this.props.funnelId=t}get isCaseSensitive(){return this.props.isCaseSensitive}set isCaseSensitive(t){this.props.isCaseSensitive=t}get isEnabled(){return this.props.isEnabled}set isEnabled(t){this.props.isEnabled=t}get isFavorite(){return this.props.isFavorite}set isFavorite(t){this.props.isFavorite=t}get keywordRules(){return this.props.keywordRules}set keywordRules(t){this.props.keywordRules=t}get millisecondsBeforeSend(){return this.props.millisecondsBeforeSend}set millisecondsBeforeSend(t){this.props.millisecondsBeforeSend=t}get name(){return this.props.name}set name(t){this.props.name=t}get sendToContacts(){return this.props.sendToContacts}set sendToContacts(t){this.props.sendToContacts=t}get sendToGroups(){return this.props.sendToGroups}set sendToGroups(t){this.props.sendToGroups=t}get triggeredAt(){return this.props.triggeredAt}set triggeredAt(t){this.props.triggeredAt=t}get webhook(){return this.props.webhook}set webhook(t){this.props.webhook=t}get metadata(){return{funnelId:this.props.funnelId,id:this.id,isCaseSensitive:this.props.isCaseSensitive,isEnabled:this.props.isEnabled,isFavorite:this.props.isFavorite,keywordRules:this.props.keywordRules,millisecondsBeforeSend:this.props.millisecondsBeforeSend,name:this.props.name,sendToContacts:this.props.sendToContacts,sendToGroups:this.props.sendToGroups,triggeredAt:this.props.triggeredAt,webhook:this.props.webhook}}static create(t,n){return new dd({...t},n)}}class F9{constructor(t){this.repository=t}async execute({funnelId:t,isCaseSensitive:n,isEnabled:r,isFavorite:s,keywordRules:a,millisecondsBeforeSend:i,name:l,sendToContacts:c,sendToGroups:d,webhook:u}){const f=l.trim();if(!f)throw new Error("CreateTrigger: Cannot create an trigger with empty name");const m=dd.create({name:f,isFavorite:s,isCaseSensitive:n,isEnabled:r,keywordRules:a,millisecondsBeforeSend:i,sendToContacts:c,sendToGroups:d,triggeredAt:null,funnelId:t,webhook:u});return await this.repository.add(m),{trigger:m}}}function _9(e){const t=new F9(e);return t.execute.bind(t)}class P9{constructor(t){this.repository=t}async execute(t){if(!t)throw new Error("DeleteTrigger: Id must be provided");await this.repository.delete(t)}}function L9(e){const t=new P9(e);return t.execute.bind(t)}class $9{constructor(t){this.repository=t}async execute(t){await this.repository.reorderList(t)}}function R9(e){const t=new $9(e);return t.execute.bind(t)}class V9{constructor(t){this.repository=t}async execute(t){if(!t)throw new Error("SelectTrigger: Id must be provided");await this.repository.select(t)}}function B9(e){const t=new V9(e);return t.execute.bind(t)}class z9{constructor(t){this.repository=t}async execute(t){await this.repository.setFilter(t)}}function H9(e){return y.useMemo(()=>{const t=new z9(e);return t.execute.bind(t)},[e])}class Z9{constructor(t){this.repository=t}async execute(t){if(!t)throw new Error("ToggleTriggerIsEnabled: Id must be provided");const n=await this.repository.findById(t);if(!n)throw new Error("ToggleTriggerIsEnabled: Trigger not found");await this.repository.save({id:n.id,isEnabled:!n.isEnabled})}}function U9(e){const t=new Z9(e);return t.execute.bind(t)}class W9{constructor(t){this.repository=t}async execute(t){if(!t)throw new Error("ToggleTriggerIsFavorite: Id must be provided");const n=await this.repository.findById(t);if(!n)throw new Error("ToggleTriggerIsFavorite: Trigger not found");await this.repository.save({id:n.id,isFavorite:!n.isFavorite})}}function G9(e){const t=new W9(e);return t.execute.bind(t)}class q9{constructor(t){this.repository=t}async execute(t){if(!t.id)throw new Error("UpdateTriggerData: Id must be provided");const n=await this.repository.findById(t.id);if(!n)throw new Error("UpdateTriggerData: Trigger not found");const r={...n,...t};return await this.repository.save(r),{trigger:r}}}function K9(e){const t=new q9(e);return t.execute.bind(t)}const xg="_|ZV:NO_FUNNEL_ID|_",Y9=({caseSensitive:e,delayMinutes:t,delaySeconds:n,funnelId:r,itemId:s,keywordRules:a,mode:i,sendToContacts:l,sendToGroups:c,triggerName:d,triggerWebhook:u})=>{const[f,m]=y.useState(l??!0),[p,g]=y.useState(t??0),[h,v]=y.useState(n??0),[b,w]=y.useState(!!e),[j,N]=y.useState(r??""),[S,E]=y.useState(c??!0),[I,A]=y.useState(d??""),[M,O]=y.useState(a??[]),[L,$]=y.useState(0),[P,C]=y.useState(u??""),T=new Be,D=new jo,_=_9(D),F=K9(D),k=yn(T),R=zn(T);y.useEffect(()=>{e!==b&&w(!!e),l!==f&&m(l??!0),t!==p&&g(t??0),n!==h&&v(n??0),r!==j&&N(r??""),c!==S&&E(c??!0),d!==I&&A(d??""),a!==M&&O(a??[]),u!==P&&C(u??"")},[e,t,n,r,a,l,c,d,u]);const H=()=>{i==="edit"?(m(l??!0),g(t??0),v(n??0),E(c??!0),w(!!e),A(d??""),O(a??[]),$(0),C(u??"")):(m(!0),g(0),v(0),E(!0),w(!0),A(""),O([]),$(0),C(""))},B=M.length===0||M.length===1&&M[0].keywords.length===0,G=async()=>{if(L===0)$(1),O(M.filter(de=>de.keywords.length>0));else if(i==="create"){const{trigger:de}=await _({funnelId:j,isCaseSensitive:b,isEnabled:!(j===""||B),isFavorite:!1,keywordRules:M.filter(it=>it.keywords.length>0),millisecondsBeforeSend:(p*60+h)*1e3,name:I.trim(),sendToContacts:f,sendToGroups:S,webhook:P});await k({optionKey:"triggers",optionToAdd:{id:de.id,name:de.name,size:await De(de)}}),ie({title:`Gatilho "${I.trim()}" adicionado com sucesso.`}),H()}else if(i==="edit"&&s){const{trigger:de}=await F({funnelId:j,id:s,isEnabled:!(j===""||B),isCaseSensitive:b,keywordRules:M.filter(it=>it.keywords.length>0),millisecondsBeforeSend:(p*60+h)*1e3,name:I.trim(),sendToContacts:f,sendToGroups:S,webhook:P});await R({optionKey:"triggers",optionToUpdate:{id:de.id,name:de.name,size:await De(de)}}),ie({title:`Gatilho "${I.trim()}" atualizado com sucesso.`})}},z=()=>{L===1?$(0):H()},Z=de=>{de&&$(0)},q={checked:!!b,onCheckedChange:de=>w(de)},V={value:String(p),onValueChange:({valueAsNumber:de})=>{Number.isNaN(de)&&(de=0),g(de)}},U={value:String(h),onValueChange:({valueAsNumber:de})=>{Number.isNaN(de)&&(de=0),v(de)}},Q={value:j??"",onValueChange:de=>N(de===xg?"":de)},K={value:M??[],onChange:de=>O(de)},ee={value:I??"",onChange:de=>A(de.target.value)},W={checked:!!f,onCheckedChange:de=>m(de)},ne={checked:!!S,onCheckedChange:de=>E(de)},ue={value:P??"",onChange:de=>C(de.target.value)},Te=L===1,Ye=I.trim()==="";return{caseSensitiveHandler:q,closeOnAction:Te,closeOnCancel:!Te,delayMinutesHandler:V,delaySecondsHandler:U,funnelIdHandler:Q,handleModalAction:G,handleModalCancel:z,handleOpenChange:Z,isLastStep:Te,keywordRulesHandler:K,nameHandler:ee,notReady:Te&&(f===void 0||S===void 0||b===void 0)||Ye,sendToContactsHandler:W,sendToGroupsHandler:ne,step:L,title:i==="create"?`Adicionar gatilho ${L+1}/2`:`Editar gatilho ${L+1}/2`,webhookHandler:ue}};class X9{constructor(t,n){this.flowRepository=t,this.funnelRepository=n}async execute({id:t,name:n,funnelId:r}){var p,g;if(!n.trim())throw new Error("CreateFlow: Cannot create an flow with empty name");if(!r.trim())throw new Error("CreateFlow: Cannot create an flow with empty funnelId");const i=await this.funnelRepository.findById(r);if(!i)throw new Error(`CreateFlow: Funnel not found with id: ${r}`);const l=new Me(t),c=[],d=i.itemsSequence.map(()=>new Me),u={x:0,y:0};for(let h=0;h<i.itemsSequence.length;h++){const{delayBeforeSend:v,itemId:b,type:w}=i.itemsSequence[h],j=w==="message"?"text":w,S={x:(((p=c.at(-1))==null?void 0:p.position.x)??u.x)+450,y:0},E=h<i.itemsSequence.length?((g=d.at(h+1))==null?void 0:g.toString())??null:null;if(j==="audio"){const I=Na.create({flowId:l.toString(),type:j,itemId:b,nextNodeId:E,position:S,simulationDelay:v},d[h]).metadata;c.push(I)}if(j==="document"){const I=v>0?new Me:d[h],A=v>0?{x:S.x+450,y:0}:S;if(v>0){const O=Math.floor(v/1e3)*1e3,L=O>=60*60*1e3?"hours":O>=60*1e3?"minutes":"seconds",$=Ls.create({delayInMs:O,flowId:l.toString(),nextNodeId:I.toString(),position:S,timeUnitType:L,type:"delay"},d[h]).metadata;c.push($)}const M=Ea.create({flowId:l.toString(),type:j,itemId:b,nextNodeId:E,position:A},I).metadata;c.push(M)}if(j==="media"){const I=v>0?new Me:d[h],A=v>0?{x:S.x+450,y:0}:S;if(v>0){const O=Math.floor(v/1e3)*1e3,L=O>=60*60*1e3?"hours":O>=60*1e3?"minutes":"seconds",$=Ls.create({delayInMs:O,flowId:l.toString(),nextNodeId:I.toString(),position:S,timeUnitType:L,type:"delay"},d[h]).metadata;c.push($)}const M=Sa.create({flowId:l.toString(),type:j,itemId:b,nextNodeId:E,position:A},I).metadata;c.push(M)}if(j==="text"){const I=Ca.create({flowId:l.toString(),type:j,itemId:b,nextNodeId:E,position:S,simulationDelay:v},d[h]).metadata;c.push(I)}}const f={enabled:!0,isFavorite:!1,name:n,nodes:c,startNode:ja.create({flowId:l.toString(),schedule:{days:[],maxTime:"00:00",minTime:"00:00"},enabledSchedule:!1,enabledTrigger:!1,trigger:{isCaseSensitive:!1,keywordRules:[],sendToContacts:!0,sendToGroups:!0},nextNodeId:d[0].toString(),position:u,type:"start"},new Me).metadata,updatedAt:new Date},m=vc.create({draft:f,published:f},l);return await this.flowRepository.addFlow(m),{flow:m}}}function J9(e,t){const n=new X9(e,t);return n.execute.bind(n)}const Q9={audio:"text-item-audio bg-gradient-to-r from-item-audio-light from-10% zv-dark:from-item-audio/5 border-item-audio-light zv-dark:border-item-audio/50 to-item-audio/20",delay:"text-item-trigger bg-gradient-to-r from-item-trigger-light from-10% zv-dark:from-item-trigger/5 border-item-trigger-light zv-dark:border-item-trigger/50 to-item-trigger/20",document:"text-item-document bg-gradient-to-r from-item-document-light from-10% zv-dark:from-item-document/5 border-item-document-light zv-dark:border-item-document/50 to-item-document/20",media:"text-item-media bg-gradient-to-r from-item-media-light from-10% zv-dark:from-item-media/5 border-item-media-light zv-dark:border-item-media/50 to-item-media/20",message:"text-item-message bg-gradient-to-r from-item-message-light from-10% zv-dark:from-item-message/5 border-item-message-light zv-dark:border-item-message/50 to-item-message/20"};let Ss,Jn;function yg({className:e,itemsSequence:t}){const n=Qe.useGetAudioList(),r=He.useGetDocumentList(),s=Ze.useGetMediaList(),a=Ue.useGetTextMessageList();return t.map(i=>{switch(i.type){case"audio":Jn=n==null?void 0:n.find(d=>d.id===i.itemId),Ss=o.jsx(pn,{size:24,className:"text-item-audio"});break;case"document":Jn=r==null?void 0:r.find(d=>d.id===i.itemId),Ss=o.jsx(Ht,{size:24,className:"text-item-document"});break;case"media":Jn=s==null?void 0:s.find(d=>d.id===i.itemId),Ss=o.jsx(Ia,{size:24,className:"text-item-media"});break;case"message":Jn=a==null?void 0:a.find(d=>d.id===i.itemId),Ss=o.jsx($n,{size:24});break}const{minutes:l,seconds:c}=_t.fromMillisecondsToMinutes(i.delayBeforeSend);return o.jsx("div",{className:J("flex w-full justify-between rounded-md border border-solid bg-main-background px-3 py-1 transition-all",Q9[i.type],e),children:o.jsxs("div",{className:"flex items-center gap-2",children:[lv({children:[Ss],className:"shrink-0 "}),o.jsxs("p",{className:"break-all text-sm font-bold",children:[Jn==null?void 0:Jn.name,o.jsxs("time",{dateTime:`delay de: ${i.delayBeforeSend} segs`,className:"flex gap-1",children:[o.jsx(bc,{size:16,className:"min-h-4 min-w-4 rotate-90"}),o.jsx("span",{className:"text-xs font-light",children:i.delayBeforeSend===0?"Enviando imediatamente":`Enviando após ${l} min e ${c}s`})]})]})]})},i.id)})}function vg({handler:e}){var s;const[t,n]=y.useState(!1),r=Ot.useGetFunnelList();return o.jsxs("div",{children:[o.jsxs(Aa,{open:t,onOpenChange:n,modal:!0,children:[o.jsx(Da,{asChild:!0,children:o.jsxs(X,{variant:"outline",role:"combobox","aria-expanded":t,className:J("flex h-9 w-full items-center whitespace-nowrap","rounded-md border border-input bg-transparent p-6 text-sm","shadow-sm ring-offset-background placeholder:text-muted-foreground","focus:outline-none focus:ring-1 focus:ring-ring","disabled:cursor-not-allowed disabled:opacity-50","break-all bg-background","[&>span]:flex [&>span]:w-full [&>span]:justify-between","border border-solid",!e.value&&"border-red-400",e.value&&"border-transparent"),children:[o.jsx("p",{className:"truncate",children:e.value?(s=r.find(a=>a.id===e.value))==null?void 0:s.name:"Selecione um item"}),o.jsx(lo,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),o.jsx(Ma,{className:"z-[101] w-[var(--radix-popper-anchor-width)] p-0",children:o.jsxs(ka,{defaultValue:e.value,filter:(a,i)=>{var u;const l=(u=r.find(f=>f.id===a))==null?void 0:u.name;if(!l)return 0;const c=Zt(l),d=Zt(i);return c.includes(d)?1:0},children:[o.jsx(Oa,{placeholder:"Pesquisar funil",className:"h-9"}),o.jsxs(Ta,{children:[o.jsx(Fa,{className:"py-2",children:"Nenhum funil encontrado."}),o.jsx(_a,{children:o.jsx("div",{className:"divide-y",children:r.map(a=>o.jsxs(Pa,{value:a.id,onSelect:i=>{e.onValueChange(i),n(!1)},children:[a.name,o.jsx(co,{className:J("ml-auto h-4 w-4",e.value===a.id?"opacity-100":"opacity-0")}),o.jsxs(pc,{closeDelay:200,openDelay:200,children:[o.jsx(hc,{className:"absolute right-8",children:o.jsx(Zm,{size:20})}),o.jsx(gc,{className:"flex w-full flex-col gap-2 p-2",children:o.jsx(yg,{className:"w-auto py-0",itemsSequence:a.itemsSequence})})]})]},a.id))})})]})]})})]}),o.jsx("span",{className:J("-my-2.5 ml-2 text-start text-sm font-light",e.value?"text-transparent":"text-red-400"),children:"Campo obrigatório"})]})}function eD(){const e=new St,[t,n]=y.useState(""),[r,s]=y.useState(""),a=J9(new Ee,e),i=yn(new Be),l={value:t??"",onValueChange:async m=>{const p=m===xg?"":m,g=await e.findById(p),v=`Fluxo ${(g==null?void 0:g.name)??""}`;s(v),n(p)}},c={value:r,onChange:m=>s(m.target.value)},d=()=>{s(""),n("")};async function u(){const{flow:m}=await a({funnelId:t,name:r});await i({optionKey:"flows",optionToAdd:{id:m.id,name:m.draft.name,size:await De(m)}}),d(),dt.selectFlow(m.id)}const f=r.trim()===""||t.trim()==="";return o.jsx(we,{actionProps:{childrenVariant:"no-dark",disabled:f,variant:"action"},cancelProps:{childrenVariant:"no-dark",variant:"link"},onCancel:d,action:"Criar fluxo",description:o.jsxs("div",{className:"flex !gap-4",children:[o.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[o.jsx(ce,{className:"max-sm:hidden",children:"Selecione um funil"}),o.jsx(vg,{handler:l})]}),o.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[o.jsx(ce,{htmlFor:"title",className:"max-sm:hidden",children:"Nome"}),o.jsx($e,{required:!0,disabled:!l.value,className:"bg-background text-base",id:"title",placeholder:l.value?"Digite o nome do fluxo":"Selecione um funil primeiro",...c,errorMessage:!c.value.trim()&&"Campo não pode ser vazio."})]})]}),onAction:()=>{u()},title:"Criar fluxo a partir de um funil",trigger:o.jsx(X,{childrenClassName:"transition-all delay-0 duration-150 text-nowrap absolute opacity-0 group-hover/zv-create-flow-from-funnel-button:opacity-100 group-hover/zv-create-flow-from-funnel-button:static group-hover/zv-create-flow-from-funnel-button:delay-50 group-hover/zv-create-flow-from-funnel-button:duration-200",childrenVariant:"no-dark",className:"group/zv-create-flow-from-funnel-button min-w-20 overflow-hidden p-0 transition-all hover:w-60 [&_*]:pointer-events-none hover:[&_*]:pointer-events-auto",icon:o.jsxs("div",{children:[o.jsx(uo,{size:20}),o.jsx(up,{size:15}),o.jsx(Um,{size:20})]}),iconClasses:"flex gap-1 shrink-0 items-center",size:"icon",variant:"default",title:"Criar fluxo a partir de um funil existente",children:"Converter funil em fluxo"}),cancel:"Cancelar"})}class tD{constructor(t){this.repository=t}async execute({id:t}){if(!t||t.trim()==="")throw new Error("DeleteFlow: Cannot delete an flow without id");await this.repository.deleteFlow(t)}}function nD(e){const t=new tD(e);return t.execute.bind(t)}function rD({flow:e}){const t=nD(new Ee),n=wr(new Be);return o.jsxs(xe,{children:[o.jsx(ye,{asChild:!0,children:o.jsx("div",{children:o.jsx(we,{className:"md:w-fit",actionVariant:"actionDestructive",actionProps:{childrenVariant:"no-dark"},onAction:()=>{t({id:e.id}).then(()=>{n({optionKey:"flows",optionIdToRemove:e.id})}).then(()=>{ie({title:"Sucesso",description:`Fluxo "${e==null?void 0:e.published.name}" excluído com sucesso.`})},r=>{r instanceof Error&&he({title:"Atenção",description:o.jsxs("div",{className:"flex flex-col gap-1",children:[`Não foi possível excluir o fluxo "${e==null?void 0:e.published.name}":`,o.jsx("p",{children:" "}),r.message.split(`
`).map((s,a)=>o.jsx("pre",{className:"min-h-[1ch] whitespace-pre-wrap font-sans text-sm",children:s},a))]}),duration:5e3})})},action:"Excluir",cancel:"Cancelar",description:o.jsx("div",{children:o.jsxs("div",{className:"mb-3 text-center",children:[o.jsxs("span",{children:["Tem certeza que deseja excluir o fluxo"," ",o.jsxs("span",{className:"break-all font-bold",children:["“",e==null?void 0:e.published.name,"”"]}),"?"]}),o.jsx("br",{}),o.jsx("span",{children:"Essa ação é irreversível."})]})}),title:o.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[o.jsx(xt,{size:32}),o.jsx("p",{children:"Excluir fluxo"})]}),trigger:o.jsx(X,{childrenClassName:"transition-all delay-0 duration-150 text-nowrap absolute opacity-0 group-hover/zv-add-flow-button:opacity-100 group-hover/zv-add-flow-button:static group-hover/zv-add-flow-button:delay-50 group-hover/zv-add-flow-button:duration-200",childrenVariant:"no-dark",className:"group/zv-add-flow-button overflow-hidden p-0 transition-all hover:w-36 [&_*]:pointer-events-none hover:[&_*]:pointer-events-auto",icon:o.jsx(yt,{size:24}),iconClasses:"shrink-0",size:"icon",variant:"actionDestructive",children:"Excluir fluxo"})})})}),o.jsx(ve,{className:"bg-destructive text-destructive-foreground",children:"Excluir"})]})}const In=(e,t,n)=>{throw new Error(`Invalid node type "${e}", for node id: ${t}. Expected "${n}"`)},sD=({firstNodeIdEntity:e,flowId:t,nodes:n,oldFirstNodeId:r})=>{const s=new Map;return n.map(a=>{var f,m;const{id:i,nextNodeId:l,nextNodeIdOnExpiration:c}=a;a.id===r?s.set(i,e):s.get(i)||s.set(i,new Me),l&&!s.get(l)&&s.set(l,new Me),c&&!s.get(c)&&s.set(c,new Me);const d={...a,flowId:t,nextNodeId:l?((f=s.get(l))==null?void 0:f.toString())??null:null,nextNodeIdOnExpiration:c?(m=s.get(c))==null?void 0:m.toString():null},u=s.get(a.id);switch(d.type){case"delay":return be.isDelayNode(d)?Ls.create(d,u).metadata:In(a.type,a.id,"delay");case"user-input":return be.isUserInputNode(d)?yc.create(d,u).metadata:In(a.type,a.id,"user-input");case"audio":return be.isAudioNode(d)?Na.create(d,u).metadata:In(a.type,a.id,"audio");case"contact":return be.isContactNode(d)?xc.create(d,u).metadata:In(a.type,a.id,"contact");case"document":return be.isDocumentNode(d)?Ea.create(d,u).metadata:In(a.type,a.id,"document");case"media":return be.isMediaNode(d)?Sa.create(d,u).metadata:In(a.type,a.id,"media");case"text":return be.isTextNode(d)?Ca.create(d,u).metadata:In(a.type,a.id,"text");default:return In(a.type,a.id,"delay | user-input | audio | contact | document | media | text")}})};class oD{constructor(t){this.repository=t}async execute({id:t,newName:n}){if(!t||t.trim()==="")throw new Error("DuplicateFlow: Cannot duplicate an flow without id");const r=await this.repository.findById(t);if(!r)throw new Error("DuplicateFlow: Flow not found");try{const s=new Me,a=new Me,i={enabled:!0,isFavorite:!1,startNode:ja.create({...r.published.startNode,flowId:a.toString(),nextNodeId:s.toString()}).metadata,nodes:sD({firstNodeIdEntity:s,flowId:a.toString(),nodes:r.published.nodes,oldFirstNodeId:r.published.startNode.nextNodeId}),name:n??`${r==null?void 0:r.published.name}(cópia)`,updatedAt:new Date},l=vc.create({draft:i,published:i},a);return await this.repository.addFlow(l),{flow:l}}catch(s){throw console.log(s),s}}}function aD(e){const t=new oD(e);return t.execute.bind(t)}function bg({size:e=24}){return o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,fill:"currentColor",viewBox:"0 0 256 256",children:o.jsx("path",{d:"m226 40v120a12 12 90 01-12 12h-31.5a6 6 90 010-12h31.5v-120h-120v34.5a6 6 90 01-12 0v-34.5a12 12 90 0112-12h120a12 12 90 0112 12m-69 48h-120a12 12 90 00-12 12v120a12 12 90 0012 12h120a12 12 90 0012-12v-120a12 12 90 00-12-12zm0 132h-120v-120h120v120zm-24-60a6 6 90 01-6 6h-24v24a6 6 90 01-12 0v-24h-24a6 6 90 010-12h24v-24a6 6 90 0112 0v24h24a6 6 90 016 6z"})})}function iD({flow:e}){const[t,n]=y.useState(`${e.published.name} (cópia)`),r=yn(new Be),s=aD(new Ee);return o.jsx(we,{className:"md:w-fit",actionProps:{childrenVariant:"no-dark",variant:"action"},cancelProps:{childrenVariant:"no-dark",variant:"link"},onAction:()=>{s({id:e.id,newName:t}).then(async({flow:a})=>{await r({optionKey:"flows",optionToAdd:{id:a.id,name:a.published.name,size:await De(a)}})}).then(()=>{ie({title:"Sucesso",description:`Fluxo "${e.published.name}" duplicado com sucesso.`})},a=>{a instanceof Error&&he({title:"Atenção",description:o.jsxs("div",{className:"flex flex-col gap-1",children:[`Não foi possível duplicar o fluxo "${e.published.name}":`,o.jsx("p",{children:" "}),a.message.split(`
`).map((i,l)=>o.jsx("pre",{className:"min-h-[1ch] whitespace-pre-wrap font-sans text-sm",children:i},l))]}),duration:5e3})})},action:"Duplicar",cancel:"Cancelar",description:o.jsxs("div",{children:[o.jsx(ce,{htmlFor:"title",className:"max-sm:hidden",children:"Nome"}),o.jsx($e,{required:!0,className:"bg-background text-base",id:"title",placeholder:"Nome do fluxo",ref:Vn,value:t,onChange:a=>n(a.target.value),errorMessage:!t.trim()&&"Campo não pode ser vazio."})]}),descriptionProps:{className:"grid w-full items-center gap-1.5"},title:o.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[o.jsx(xt,{size:32}),o.jsx("p",{children:"Duplicar fluxo"})]}),trigger:o.jsx(X,{childrenClassName:"transition-all delay-0 duration-150 text-nowrap absolute opacity-0 group-hover/zv-add-flow-button:opacity-100 group-hover/zv-add-flow-button:static group-hover/zv-add-flow-button:delay-50 group-hover/zv-add-flow-button:duration-200",childrenVariant:"no-dark",className:"group/zv-add-flow-button overflow-hidden p-0 transition-all hover:w-36 [&_*]:pointer-events-none hover:[&_*]:pointer-events-auto",icon:o.jsx(bg,{size:20}),iconClasses:"shrink-0",size:"icon",variant:"default",title:"Duplicar fluxo",children:"Duplicar fluxo"})})}class lD{constructor(t){this.repository=t}async execute({id:t}){if(!t||t.trim()==="")throw new Error("ExportFlow: Cannot export a flow without id");const n=await this.repository.findById(t);if(!n)throw new Error("ExportFlow: Flow not found");const r=[...n.draft.nodes.filter(be.isItemNode).map(({itemId:s})=>({id:s})),...n.published.nodes.filter(be.isItemNode).map(({itemId:s})=>({id:s})),{id:n.id}];return await $l({exportAll:!1,selectedBackupOptions:r})}}function cD(e){const t=new lD(e);return t.execute.bind(t)}function dD({flow:e}){const t=cD(new Ee),[n,r]=y.useState(""),[s,a]=y.useState(!1),{setIsBusy:i}=fo();return o.jsx(we,{className:"md:w-fit",cancelProps:{childrenVariant:"no-dark",variant:"link"},action:null,cancel:"Fechar",description:o.jsxs("div",{className:"flex flex-col items-center gap-4",children:[o.jsx(X,{className:"w-64 rounded-sm py-7",size:"lg",disabled:s,onClick:()=>{a(!0),i(!0);const l=mt.loading("Preparando backup para o download... não mude, recarregue ou feche a página.",{duration:Number.POSITIVE_INFINITY});t({id:e.id}).then(({downloadLink:c})=>{r(c),ie({title:"Sucesso",description:`Backup do fluxo "${e==null?void 0:e.published.name}" gerado com sucesso. Clique em "Fazer download"`})},c=>{c instanceof Error&&he({title:"Atenção",description:o.jsxs("div",{className:"flex flex-col gap-1",children:[`Não foi possível exportar o fluxo "${e==null?void 0:e.published.name}":`,o.jsx("p",{children:" "}),c.message.split(`
`).map((d,u)=>o.jsx("pre",{className:"min-h-[1ch] whitespace-pre-wrap font-sans text-sm",children:d},u))]}),duration:5e3})}).finally(()=>{setTimeout(()=>mt.dismiss(l),4e3),a(!1),i(!1)})},icon:o.jsx(Sc,{size:24}),children:s?`Gerando backup do fluxo ${e.published.name}...`:`Gerar backup do fluxo ${e.published.name}`}),!s&&n&&o.jsx("a",{href:n,download:`ZV_${Zt(e.published.name,{toLowerCase:!1}).replace(/\s/gm,"_")}_backup_${zm.format(new Date)}.json`,className:"rounded-sm bg-black",children:o.jsx(X,{className:"w-64 rounded-sm bg-status-success py-7 hover:bg-status-success/90 zv-dark:bg-status-success-foreground zv-dark:hover:bg-status-success-foreground/90",size:"lg",disabled:s,icon:o.jsx(es,{size:24}),children:"Fazer download"})})]}),title:o.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[o.jsx(xt,{size:32}),o.jsx("p",{children:"Exportar fluxo"})]}),trigger:o.jsx(X,{childrenClassName:"transition-all delay-0 duration-150 text-nowrap absolute opacity-0 group-hover/zv-add-flow-button:opacity-100 group-hover/zv-add-flow-button:static group-hover/zv-add-flow-button:delay-50 group-hover/zv-add-flow-button:duration-200",childrenVariant:"no-dark",className:"group/zv-add-flow-button overflow-hidden p-0 transition-all hover:w-36 [&_*]:pointer-events-none hover:[&_*]:pointer-events-auto",icon:o.jsx(Ec,{size:20}),iconClasses:"shrink-0",size:"icon",variant:"default",title:"Exportar fluxo",children:"Exportar fluxo"})})}class uD{async execute({flowBackup:t}){if(!t)throw new Error("ImportFlowUseCase: No flow backup was provided");return await yi(t,"merge",{})}}function fD(){const e=new uD;return e.execute.bind(e)}function mD(){const[e,t]=y.useState(),[n,r]=y.useState(!1),s=fD(),{setIsBusy:a}=fo(),i=f1(new Be),{fileName:l,hasBackup:c,handleUploadedBackup:d,handleRemoveUploadedBackup:u,file:f,setFile:m,setFileName:p}=id();return o.jsxs(o.Fragment,{children:[o.jsx(we,{onCancel:()=>{m(void 0),p(void 0)},className:"md:w-fit",cancelProps:{childrenVariant:"no-dark",variant:"link"},action:"Importar backup do fluxo",cancel:"Cancelar",onAction:async()=>{const g=mt.loading("Importando backup do fluxo... não mude, recarregue ou feche a página.",{duration:Number.POSITIVE_INFINITY});return a(!0),new Promise((h,v)=>{const b=new FileReader;b.onload=w=>{var N;const j=(N=w==null?void 0:w.target)!=null&&N.result&&String(w.target.result).length>0?JSON.parse(String(w.target.result)):[];g1(j)?s({flowBackup:j}).then(()=>{h(ie({title:"Sucesso",description:"Backup do fluxo importado com sucesso",duration:4e3}))}).catch(S=>{let E="";if(S instanceof ad){const I=JSON.parse(S.message);E=I.message,t({flowsWithProblem:I.flowsWithProblem,funnelsWithProblem:I.funnelsWithProblem,triggersWithProblem:I.triggersWithProblem,audiosWithProblem:I.audiosWithProblem,mediasWithProblem:I.mediasWithProblem,messagesWithProblem:I.messagesWithProblem,docsWithProblem:I.docsWithProblem}),he({id:g,title:"Backup corrigido automaticamente",duration:Number.POSITIVE_INFINITY,classNames:{cancelButton:"!bg-status-info-foreground/40 !text-status-info"},cancel:{label:"Ver problemas",onClick:()=>{r(!0),mt.dismiss(g)}},description:o.jsxs("div",{children:["Identificamos algumas"," ",o.jsx("strong",{children:"inconsistências"})," no backup, e tomamos a liberdade de corrigir para você o que conseguimos.",o.jsx("br",{}),o.jsx("span",{className:"underline",children:"Por favor, verifique se está tudo certo."}),o.jsx("br",{}),o.jsx("br",{}),"Clique em ",o.jsx("strong",{children:"Ver problemas"})," para mais detalhes"]}),className:"flex flex-wrap"}),m(void 0),p(void 0),a(!1);return}S instanceof Error?E=S.message:E=JSON.stringify(S),v(le({title:"Atenção",description:o.jsxs("div",{className:"flex flex-col gap-1",children:["Não foi possível importar o fluxo:",o.jsx("p",{children:" "}),E.split(`
`).map((I,A)=>o.jsx("pre",{className:"min-h-[1ch] whitespace-pre-wrap font-sans text-sm",children:I},A))]}),duration:5e3}))}):v(new Error("Backup em formato inválido"))},b.onerror=w=>{v(w)},b.readAsText(f)}).catch(h=>{h instanceof Error?le({title:h.message}):le({title:JSON.stringify(h)})}).finally(async()=>{await i(),setTimeout(()=>mt.dismiss(g),4e3),m(void 0),p(void 0),a(!1)})},description:o.jsx(w1,{className:"w-full",actionName:"inserir",fileName:l,hasBackup:c,onRemoveUploaded:u,onSelectBackup:d,isFile:!!f}),title:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Lr,{size:32,className:"text-status-caution zv-dark:text-status-caution-foreground"}),"Confirmação de importação"]}),trigger:o.jsx(X,{childrenClassName:"transition-all delay-0 duration-150 text-nowrap absolute opacity-0 group-hover/zv-add-flow-button:opacity-100 group-hover/zv-add-flow-button:static group-hover/zv-add-flow-button:delay-50 group-hover/zv-add-flow-button:duration-200",childrenVariant:"no-dark",className:"group/zv-add-flow-button overflow-hidden p-0 transition-all hover:w-36 [&_*]:pointer-events-none hover:[&_*]:pointer-events-auto",icon:o.jsx(Ba,{size:20}),iconClasses:"shrink-0",size:"icon",variant:"default",title:"Importar fluxo",children:"Importar fluxo"})}),o.jsx(Pr,{open:n,className:"overflow-y-hidden md:w-fit",action:"Entendi",description:o.jsxs("div",{className:"max-h-[50vh] gap-3 overflow-y-auto",children:[e&&Object.keys(e.messagesWithProblem).length>0&&o.jsxs("article",{children:[o.jsx("h1",{className:"text-lg font-semibold ",children:"Mensagens de texto com problemas:"}),o.jsx("ul",{className:"list-decimal divide-y",children:Object.entries(e.messagesWithProblem).map(([g,h],v)=>o.jsxs("li",{className:"ms-4 text-sm font-light",children:[o.jsxs("div",{children:[g,":"]}),o.jsx("ul",{className:"ml-4 list-disc divide-y",children:h.map((b,w)=>o.jsx("li",{children:b},`${w}-${b}`))})]},`${v}-${g}`))})]}),e&&Object.keys(e.audiosWithProblem).length>0&&o.jsxs("article",{children:[o.jsx("h1",{className:"text-lg font-semibold ",children:"Áudios com problemas:"}),o.jsx("ul",{className:"list-decimal divide-y",children:Object.entries(e.audiosWithProblem).map(([g,h],v)=>o.jsxs("li",{className:"ms-4 text-sm font-light",children:[o.jsxs("div",{children:[g,":"]}),o.jsx("ul",{className:"ml-4 list-disc divide-y",children:h.map((b,w)=>o.jsx("li",{children:b},`${w}-${b}`))})]},`${v}-${g}`))})]}),e&&Object.keys(e.mediasWithProblem).length>0&&o.jsxs("article",{children:[o.jsx("h1",{className:"text-lg font-semibold ",children:"Mídias com problemas:"}),o.jsx("ul",{className:"list-decimal divide-y",children:Object.entries(e.mediasWithProblem).map(([g,h],v)=>o.jsxs("li",{className:"ms-4 text-sm font-light",children:[o.jsxs("div",{children:[g,":"]}),o.jsx("ul",{className:"ml-4 list-disc divide-y",children:h.map((b,w)=>o.jsx("li",{children:b},`${w}-${b}`))})]},`${v}-${g}`))})]}),e&&Object.keys(e.docsWithProblem).length>0&&o.jsxs("article",{children:[o.jsx("h1",{className:"text-lg font-semibold ",children:"Documentos com problemas:"}),o.jsx("ul",{className:"list-decimal divide-y",children:Object.entries(e.docsWithProblem).map(([g,h],v)=>o.jsxs("li",{className:"ms-4 text-sm font-light",children:[o.jsxs("div",{children:[g,":"]}),o.jsx("ul",{className:"ml-4 list-disc divide-y",children:h.map((b,w)=>o.jsx("li",{children:b},`${w}-${b}`))})]},`${v}-${g}`))})]}),e&&Object.keys(e.funnelsWithProblem).length>0&&o.jsxs("article",{children:[o.jsx("h1",{className:"text-lg font-semibold ",children:"Funis com problemas:"}),o.jsx("ul",{className:"list-decimal divide-y",children:Object.entries(e.funnelsWithProblem).map(([g,h],v)=>o.jsxs("li",{className:"ms-4 text-sm font-light",children:[o.jsxs("div",{children:[g,":"]}),o.jsx("ul",{className:"ml-4 list-disc divide-y",children:h.map((b,w)=>o.jsx("li",{children:b},`${w}-${b}`))})]},`${v}-${g}`))})]}),e&&Object.keys(e.triggersWithProblem).length>0&&o.jsxs("article",{children:[o.jsx("h1",{className:"text-lg font-semibold",children:"Gatilhos com problemas:"}),o.jsx("ul",{className:"list-decimal divide-y",children:Object.entries(e.triggersWithProblem).map(([g,h],v)=>o.jsxs("li",{className:"ms-4 text-sm font-light",children:[o.jsxs("div",{children:[g,":"]}),o.jsx("ul",{className:"ml-4 list-disc divide-y",children:h.map((b,w)=>o.jsx("li",{children:b},`${w}-${b}`))})]},`${v}-${g}`))})]}),e&&Object.keys(e.flowsWithProblem).length>0&&o.jsxs("article",{children:[o.jsx("h1",{className:"text-lg font-semibold",children:"Fluxos com problemas:"}),o.jsx("ul",{className:"list-decimal divide-y",children:Object.entries(e.flowsWithProblem).map(([g,h],v)=>o.jsxs("li",{className:"ms-4 text-sm font-light",children:[o.jsxs("div",{children:[g,":"]}),o.jsx("ul",{className:"ml-4 list-disc divide-y",children:h.map((b,w)=>o.jsx("li",{children:b},`${w}-${b}`))})]},`${v}-${g}`))})]})]}),title:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Lr,{size:32,className:"text-status-info"}),"Problemas identificados no arquivo de backup"]}),onCancel:()=>{r(!1)},onAction:()=>{r(!1)}})]})}class pD{constructor(t,n){this.flowRepository=t,this.runningFlowRepository=n}async execute({flowId:t}){if(!t.trim())throw new Error("PublishFlow: Cannot publish a flow with empty flowId");const r=await this.flowRepository.findById(t);if(!r)throw new Error("PublishFlow: Flow not found");const s=r.draft,a=this.runningFlowRepository.findByFlowId(t),i=a==null?void 0:a.find(l=>l.status==="running");if(i)throw new Error("Não é possível publicar um fluxo enquanto ele estiver sendo enviado para o contato: "+i.targetUserName);return await this.flowRepository.updateFlow({...r,published:s}),{flow:r}}}function hD(e,t){const n=new pD(e,t);return n.execute.bind(n)}const gD=new e8(new La);class xD{constructor(){pe(this,"runningFlowStore",gD)}addBlockerToFlow(...t){return this.runningFlowStore.addBlockerToFlow(...t)}changeCurrentBlockers(...t){return this.runningFlowStore.changeCurrentBlockers(...t)}findByFlowId(...t){return this.runningFlowStore.findByFlowId(...t)}changeCurrentStepNodeId(...t){return this.runningFlowStore.changeCurrentStepNodeId(...t)}changeStatus(...t){return this.runningFlowStore.changeStatus(...t)}dispatchFlow(...t){return this.runningFlowStore.dispatchFlow(...t)}removeRunningFlow(...t){return this.runningFlowStore.removeRunningFlow(...t)}updateCurrentStep(...t){return this.runningFlowStore.updateCurrentStep(...t)}}function yD({selectedFlowId:e}){const t=hD(new Ee,new xD);async function n(){try{await t({flowId:e}),ie({title:"Sucesso",description:"Fluxo publicado com sucesso"})}catch(a){a instanceof Error&&(a.message.includes("Não é possível publicar um fluxo enquanto ele estiver sendo enviado para o contato:")?he({title:"Aviso",description:a.message}):(console.error(a),le({title:"Erro",description:"Um erro inexperado ocorreu, atualize a página ou tente novamente em alguns instantes"})))}}const r=dt.useGetIsDraftFlow(e);function s(){return r?"show warning":null}return y.useEffect(()=>{window.onbeforeunload=s},[r]),o.jsx(o.Fragment,{children:o.jsxs(xe,{children:[o.jsx(ye,{asChild:!0,children:o.jsx("div",{className:"absolute bottom-3.5 right-0 z-50 mr-3.5",children:o.jsx(X,{onClick:n,icon:r?o.jsx(jp,{size:24}):o.jsx(pp,{size:24}),variant:"ghost",childrenVariant:"no-dark",size:"action",disabled:!r,className:J("flex items-center !bg-transparent text-status-success opacity-100",r&&"!bg-item-funnel/80 text-black hover:text-black"),children:r?"Publicar alterações":"Publicado"})})}),o.jsx(ve,{side:"bottom",className:J("max-w-40",r&&" bg-item-funnel text-black"),children:r?"Percebemos que você fez algumas alterações no fluxo, clique aqui para publicar suas atualizações antes de enviar para um contato":"O fluxo está atualizado e pronto para o uso"})]})})}class vD{constructor(t){this.repository=t}async execute({id:t,newName:n}){if(!t||t.trim()==="")throw new Error("RenameFlow: Cannot rename a flow without id");if(!n||n.trim()==="")throw new Error("RenameFlow: Cannot rename a flow without a new name");const r=await this.repository.findById(t);if(!r)throw new Error("RenameFlow: Flow not found");await this.repository.updateFlow({...r,draft:{...r.draft,name:n}})}}function bD(e){const t=new vD(e);return t.execute.bind(t)}function wD({flow:e}){const[t,n]=y.useState(e.published.name),r=bD(new Ee),s=zn(new Be);return o.jsx(we,{className:"md:w-fit",actionProps:{childrenVariant:"no-dark",variant:"action"},cancelProps:{childrenVariant:"no-dark",variant:"link"},onAction:()=>{r({id:e.id,newName:t}).then(async()=>{await s({optionKey:"flows",optionToUpdate:{id:e.id,name:t,size:await De(e)}})}).then(()=>{ie({title:"Sucesso",description:`Fluxo "${e.published.name}" renomeado com sucesso para "${t}".`})},a=>{a instanceof Error&&he({title:"Atenção",description:o.jsxs("div",{className:"flex flex-col gap-1",children:[`Não foi possível renomear o fluxo "${e.published.name}":`,o.jsx("p",{children:" "}),a.message.split(`
`).map((i,l)=>o.jsx("pre",{className:"min-h-[1ch] whitespace-pre-wrap font-sans text-sm",children:i},l))]}),duration:5e3})})},action:"Renomear",cancel:"Cancelar",description:o.jsxs("div",{children:[o.jsx(ce,{htmlFor:"title",className:"max-sm:hidden",children:"Novo nome"}),o.jsx($e,{required:!0,className:"bg-background text-base",id:"title",placeholder:"Nome do fluxo",ref:Vn,value:t,onChange:a=>n(a.target.value),errorMessage:!t.trim()&&"Campo não pode ser vazio."})]}),descriptionProps:{className:"grid w-full items-center gap-1.5"},title:o.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[o.jsx(xt,{size:32}),o.jsx("p",{children:"Renomear fluxo"})]}),trigger:o.jsx(X,{childrenClassName:"transition-all delay-0 duration-150 text-nowrap absolute opacity-0 group-hover/zv-add-flow-button:opacity-100 group-hover/zv-add-flow-button:static group-hover/zv-add-flow-button:delay-50 group-hover/zv-add-flow-button:duration-200",childrenVariant:"no-dark",className:"group/zv-add-flow-button overflow-hidden p-0 transition-all hover:w-36 [&_*]:pointer-events-none hover:[&_*]:pointer-events-auto",icon:o.jsx(Wt,{size:20}),iconClasses:"shrink-0",size:"icon",variant:"default",title:"Editar fluxo",children:"Editar fluxo"})})}function Re(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=Re(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var jD={value:()=>{}};function Si(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Wo(n)}function Wo(e){this._=e}function ND(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",s=n.indexOf(".");if(s>=0&&(r=n.slice(s+1),n=n.slice(0,s)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Wo.prototype=Si.prototype={constructor:Wo,on:function(e,t){var n=this._,r=ND(e+"",n),s,a=-1,i=r.length;if(arguments.length<2){for(;++a<i;)if((s=(e=r[a]).type)&&(s=ED(n[s],e.name)))return s;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<i;)if(s=(e=r[a]).type)n[s]=d0(n[s],e.name,t);else if(t==null)for(s in n)n[s]=d0(n[s],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Wo(e)},call:function(e,t){if((s=arguments.length-2)>0)for(var n=new Array(s),r=0,s,a;r<s;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,s=a.length;r<s;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],s=0,a=r.length;s<a;++s)r[s].value.apply(t,n)}};function ED(e,t){for(var n=0,r=e.length,s;n<r;++n)if((s=e[n]).name===t)return s.value}function d0(e,t,n){for(var r=0,s=e.length;r<s;++r)if(e[r].name===t){e[r]=jD,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Wl="http://www.w3.org/1999/xhtml";const u0={svg:"http://www.w3.org/2000/svg",xhtml:Wl,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ci(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),u0.hasOwnProperty(t)?{space:u0[t],local:e}:e}function SD(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Wl&&t.documentElement.namespaceURI===Wl?t.createElement(e):t.createElementNS(n,e)}}function CD(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function wg(e){var t=Ci(e);return(t.local?CD:SD)(t)}function ID(){}function ud(e){return e==null?ID:function(){return this.querySelector(e)}}function AD(e){typeof e!="function"&&(e=ud(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var a=t[s],i=a.length,l=r[s]=new Array(i),c,d,u=0;u<i;++u)(c=a[u])&&(d=e.call(c,c.__data__,u,a))&&("__data__"in c&&(d.__data__=c.__data__),l[u]=d);return new Et(r,this._parents)}function DD(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function MD(){return[]}function jg(e){return e==null?MD:function(){return this.querySelectorAll(e)}}function kD(e){return function(){return DD(e.apply(this,arguments))}}function OD(e){typeof e=="function"?e=kD(e):e=jg(e);for(var t=this._groups,n=t.length,r=[],s=[],a=0;a<n;++a)for(var i=t[a],l=i.length,c,d=0;d<l;++d)(c=i[d])&&(r.push(e.call(c,c.__data__,d,i)),s.push(c));return new Et(r,s)}function Ng(e){return function(){return this.matches(e)}}function Eg(e){return function(t){return t.matches(e)}}var TD=Array.prototype.find;function FD(e){return function(){return TD.call(this.children,e)}}function _D(){return this.firstElementChild}function PD(e){return this.select(e==null?_D:FD(typeof e=="function"?e:Eg(e)))}var LD=Array.prototype.filter;function $D(){return Array.from(this.children)}function RD(e){return function(){return LD.call(this.children,e)}}function VD(e){return this.selectAll(e==null?$D:RD(typeof e=="function"?e:Eg(e)))}function BD(e){typeof e!="function"&&(e=Ng(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var a=t[s],i=a.length,l=r[s]=[],c,d=0;d<i;++d)(c=a[d])&&e.call(c,c.__data__,d,a)&&l.push(c);return new Et(r,this._parents)}function Sg(e){return new Array(e.length)}function zD(){return new Et(this._enter||this._groups.map(Sg),this._parents)}function da(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}da.prototype={constructor:da,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function HD(e){return function(){return e}}function ZD(e,t,n,r,s,a){for(var i=0,l,c=t.length,d=a.length;i<d;++i)(l=t[i])?(l.__data__=a[i],r[i]=l):n[i]=new da(e,a[i]);for(;i<c;++i)(l=t[i])&&(s[i]=l)}function UD(e,t,n,r,s,a,i){var l,c,d=new Map,u=t.length,f=a.length,m=new Array(u),p;for(l=0;l<u;++l)(c=t[l])&&(m[l]=p=i.call(c,c.__data__,l,t)+"",d.has(p)?s[l]=c:d.set(p,c));for(l=0;l<f;++l)p=i.call(e,a[l],l,a)+"",(c=d.get(p))?(r[l]=c,c.__data__=a[l],d.delete(p)):n[l]=new da(e,a[l]);for(l=0;l<u;++l)(c=t[l])&&d.get(m[l])===c&&(s[l]=c)}function WD(e){return e.__data__}function GD(e,t){if(!arguments.length)return Array.from(this,WD);var n=t?UD:ZD,r=this._parents,s=this._groups;typeof e!="function"&&(e=HD(e));for(var a=s.length,i=new Array(a),l=new Array(a),c=new Array(a),d=0;d<a;++d){var u=r[d],f=s[d],m=f.length,p=qD(e.call(u,u&&u.__data__,d,r)),g=p.length,h=l[d]=new Array(g),v=i[d]=new Array(g),b=c[d]=new Array(m);n(u,f,h,v,b,p,t);for(var w=0,j=0,N,S;w<g;++w)if(N=h[w]){for(w>=j&&(j=w+1);!(S=v[j])&&++j<g;);N._next=S||null}}return i=new Et(i,r),i._enter=l,i._exit=c,i}function qD(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function KD(){return new Et(this._exit||this._groups.map(Sg),this._parents)}function YD(e,t,n){var r=this.enter(),s=this,a=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(s=t(s),s&&(s=s.selection())),n==null?a.remove():n(a),r&&s?r.merge(s).order():s}function XD(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,s=n.length,a=r.length,i=Math.min(s,a),l=new Array(s),c=0;c<i;++c)for(var d=n[c],u=r[c],f=d.length,m=l[c]=new Array(f),p,g=0;g<f;++g)(p=d[g]||u[g])&&(m[g]=p);for(;c<s;++c)l[c]=n[c];return new Et(l,this._parents)}function JD(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],s=r.length-1,a=r[s],i;--s>=0;)(i=r[s])&&(a&&i.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(i,a),a=i);return this}function QD(e){e||(e=eM);function t(f,m){return f&&m?e(f.__data__,m.__data__):!f-!m}for(var n=this._groups,r=n.length,s=new Array(r),a=0;a<r;++a){for(var i=n[a],l=i.length,c=s[a]=new Array(l),d,u=0;u<l;++u)(d=i[u])&&(c[u]=d);c.sort(t)}return new Et(s,this._parents).order()}function eM(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function tM(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function nM(){return Array.from(this)}function rM(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],s=0,a=r.length;s<a;++s){var i=r[s];if(i)return i}return null}function sM(){let e=0;for(const t of this)++e;return e}function oM(){return!this.node()}function aM(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var s=t[n],a=0,i=s.length,l;a<i;++a)(l=s[a])&&e.call(l,l.__data__,a,s);return this}function iM(e){return function(){this.removeAttribute(e)}}function lM(e){return function(){this.removeAttributeNS(e.space,e.local)}}function cM(e,t){return function(){this.setAttribute(e,t)}}function dM(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function uM(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function fM(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function mM(e,t){var n=Ci(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?lM:iM:typeof t=="function"?n.local?fM:uM:n.local?dM:cM)(n,t))}function Cg(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function pM(e){return function(){this.style.removeProperty(e)}}function hM(e,t,n){return function(){this.style.setProperty(e,t,n)}}function gM(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function xM(e,t,n){return arguments.length>1?this.each((t==null?pM:typeof t=="function"?gM:hM)(e,t,n??"")):zr(this.node(),e)}function zr(e,t){return e.style.getPropertyValue(t)||Cg(e).getComputedStyle(e,null).getPropertyValue(t)}function yM(e){return function(){delete this[e]}}function vM(e,t){return function(){this[e]=t}}function bM(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function wM(e,t){return arguments.length>1?this.each((t==null?yM:typeof t=="function"?bM:vM)(e,t)):this.node()[e]}function Ig(e){return e.trim().split(/^|\s+/)}function fd(e){return e.classList||new Ag(e)}function Ag(e){this._node=e,this._names=Ig(e.getAttribute("class")||"")}Ag.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Dg(e,t){for(var n=fd(e),r=-1,s=t.length;++r<s;)n.add(t[r])}function Mg(e,t){for(var n=fd(e),r=-1,s=t.length;++r<s;)n.remove(t[r])}function jM(e){return function(){Dg(this,e)}}function NM(e){return function(){Mg(this,e)}}function EM(e,t){return function(){(t.apply(this,arguments)?Dg:Mg)(this,e)}}function SM(e,t){var n=Ig(e+"");if(arguments.length<2){for(var r=fd(this.node()),s=-1,a=n.length;++s<a;)if(!r.contains(n[s]))return!1;return!0}return this.each((typeof t=="function"?EM:t?jM:NM)(n,t))}function CM(){this.textContent=""}function IM(e){return function(){this.textContent=e}}function AM(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function DM(e){return arguments.length?this.each(e==null?CM:(typeof e=="function"?AM:IM)(e)):this.node().textContent}function MM(){this.innerHTML=""}function kM(e){return function(){this.innerHTML=e}}function OM(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function TM(e){return arguments.length?this.each(e==null?MM:(typeof e=="function"?OM:kM)(e)):this.node().innerHTML}function FM(){this.nextSibling&&this.parentNode.appendChild(this)}function _M(){return this.each(FM)}function PM(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function LM(){return this.each(PM)}function $M(e){var t=typeof e=="function"?e:wg(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function RM(){return null}function VM(e,t){var n=typeof e=="function"?e:wg(e),r=t==null?RM:typeof t=="function"?t:ud(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function BM(){var e=this.parentNode;e&&e.removeChild(this)}function zM(){return this.each(BM)}function HM(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ZM(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function UM(e){return this.select(e?ZM:HM)}function WM(e){return arguments.length?this.property("__data__",e):this.node().__data__}function GM(e){return function(t){e.call(this,t,this.__data__)}}function qM(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function KM(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,s=t.length,a;n<s;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function YM(e,t,n){return function(){var r=this.__on,s,a=GM(t);if(r){for(var i=0,l=r.length;i<l;++i)if((s=r[i]).type===e.type&&s.name===e.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=a,s.options=n),s.value=t;return}}this.addEventListener(e.type,a,n),s={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(s):this.__on=[s]}}function XM(e,t,n){var r=qM(e+""),s,a=r.length,i;if(arguments.length<2){var l=this.node().__on;if(l){for(var c=0,d=l.length,u;c<d;++c)for(s=0,u=l[c];s<a;++s)if((i=r[s]).type===u.type&&i.name===u.name)return u.value}return}for(l=t?YM:KM,s=0;s<a;++s)this.each(l(r[s],t,n));return this}function kg(e,t,n){var r=Cg(e),s=r.CustomEvent;typeof s=="function"?s=new s(t,n):(s=r.document.createEvent("Event"),n?(s.initEvent(t,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(t,!1,!1)),e.dispatchEvent(s)}function JM(e,t){return function(){return kg(this,e,t)}}function QM(e,t){return function(){return kg(this,e,t.apply(this,arguments))}}function ek(e,t){return this.each((typeof t=="function"?QM:JM)(e,t))}function*tk(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],s=0,a=r.length,i;s<a;++s)(i=r[s])&&(yield i)}var Og=[null];function Et(e,t){this._groups=e,this._parents=t}function No(){return new Et([[document.documentElement]],Og)}function nk(){return this}Et.prototype=No.prototype={constructor:Et,select:AD,selectAll:OD,selectChild:PD,selectChildren:VD,filter:BD,data:GD,enter:zD,exit:KD,join:YD,merge:XD,selection:nk,order:JD,sort:QD,call:tM,nodes:nM,node:rM,size:sM,empty:oM,each:aM,attr:mM,style:xM,property:wM,classed:SM,text:DM,html:TM,raise:_M,lower:LM,append:$M,insert:VM,remove:zM,clone:UM,datum:WM,on:XM,dispatch:ek,[Symbol.iterator]:tk};function bt(e){return typeof e=="string"?new Et([[document.querySelector(e)]],[document.documentElement]):new Et([[e]],Og)}function rk(e){let t;for(;t=e.sourceEvent;)e=t;return e}function $t(e,t){if(e=rk(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var s=t.getBoundingClientRect();return[e.clientX-s.left-t.clientLeft,e.clientY-s.top-t.clientTop]}}return[e.pageX,e.pageY]}const sk={passive:!1},Gs={capture:!0,passive:!1};function ll(e){e.stopImmediatePropagation()}function Tr(e){e.preventDefault(),e.stopImmediatePropagation()}function Tg(e){var t=e.document.documentElement,n=bt(e).on("dragstart.drag",Tr,Gs);"onselectstart"in t?n.on("selectstart.drag",Tr,Gs):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Fg(e,t){var n=e.document.documentElement,r=bt(e).on("dragstart.drag",null);t&&(r.on("click.drag",Tr,Gs),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const _o=e=>()=>e;function Gl(e,{sourceEvent:t,subject:n,target:r,identifier:s,active:a,x:i,y:l,dx:c,dy:d,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:u}})}Gl.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function ok(e){return!e.ctrlKey&&!e.button}function ak(){return this.parentNode}function ik(e,t){return t??{x:e.x,y:e.y}}function lk(){return navigator.maxTouchPoints||"ontouchstart"in this}function _g(){var e=ok,t=ak,n=ik,r=lk,s={},a=Si("start","drag","end"),i=0,l,c,d,u,f=0;function m(N){N.on("mousedown.drag",p).filter(r).on("touchstart.drag",v).on("touchmove.drag",b,sk).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(N,S){if(!(u||!e.call(this,N,S))){var E=j(this,t.call(this,N,S),N,S,"mouse");E&&(bt(N.view).on("mousemove.drag",g,Gs).on("mouseup.drag",h,Gs),Tg(N.view),ll(N),d=!1,l=N.clientX,c=N.clientY,E("start",N))}}function g(N){if(Tr(N),!d){var S=N.clientX-l,E=N.clientY-c;d=S*S+E*E>f}s.mouse("drag",N)}function h(N){bt(N.view).on("mousemove.drag mouseup.drag",null),Fg(N.view,d),Tr(N),s.mouse("end",N)}function v(N,S){if(e.call(this,N,S)){var E=N.changedTouches,I=t.call(this,N,S),A=E.length,M,O;for(M=0;M<A;++M)(O=j(this,I,N,S,E[M].identifier,E[M]))&&(ll(N),O("start",N,E[M]))}}function b(N){var S=N.changedTouches,E=S.length,I,A;for(I=0;I<E;++I)(A=s[S[I].identifier])&&(Tr(N),A("drag",N,S[I]))}function w(N){var S=N.changedTouches,E=S.length,I,A;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),I=0;I<E;++I)(A=s[S[I].identifier])&&(ll(N),A("end",N,S[I]))}function j(N,S,E,I,A,M){var O=a.copy(),L=$t(M||E,S),$,P,C;if((C=n.call(N,new Gl("beforestart",{sourceEvent:E,target:m,identifier:A,active:i,x:L[0],y:L[1],dx:0,dy:0,dispatch:O}),I))!=null)return $=C.x-L[0]||0,P=C.y-L[1]||0,function T(D,_,F){var k=L,R;switch(D){case"start":s[A]=T,R=i++;break;case"end":delete s[A],--i;case"drag":L=$t(F||_,S),R=i;break}O.call(D,N,new Gl(D,{sourceEvent:_,subject:C,target:m,identifier:A,active:R,x:L[0]+$,y:L[1]+P,dx:L[0]-k[0],dy:L[1]-k[1],dispatch:O}),I)}}return m.filter=function(N){return arguments.length?(e=typeof N=="function"?N:_o(!!N),m):e},m.container=function(N){return arguments.length?(t=typeof N=="function"?N:_o(N),m):t},m.subject=function(N){return arguments.length?(n=typeof N=="function"?N:_o(N),m):n},m.touchable=function(N){return arguments.length?(r=typeof N=="function"?N:_o(!!N),m):r},m.on=function(){var N=a.on.apply(a,arguments);return N===a?m:N},m.clickDistance=function(N){return arguments.length?(f=(N=+N)*N,m):Math.sqrt(f)},m}function md(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Pg(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Eo(){}var qs=.7,ua=1/qs,Fr="\\s*([+-]?\\d+)\\s*",Ks="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Xt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ck=/^#([0-9a-f]{3,8})$/,dk=new RegExp(`^rgb\\(${Fr},${Fr},${Fr}\\)$`),uk=new RegExp(`^rgb\\(${Xt},${Xt},${Xt}\\)$`),fk=new RegExp(`^rgba\\(${Fr},${Fr},${Fr},${Ks}\\)$`),mk=new RegExp(`^rgba\\(${Xt},${Xt},${Xt},${Ks}\\)$`),pk=new RegExp(`^hsl\\(${Ks},${Xt},${Xt}\\)$`),hk=new RegExp(`^hsla\\(${Ks},${Xt},${Xt},${Ks}\\)$`),f0={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};md(Eo,Ys,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:m0,formatHex:m0,formatHex8:gk,formatHsl:xk,formatRgb:p0,toString:p0});function m0(){return this.rgb().formatHex()}function gk(){return this.rgb().formatHex8()}function xk(){return Lg(this).formatHsl()}function p0(){return this.rgb().formatRgb()}function Ys(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=ck.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?h0(t):n===3?new ht(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Po(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Po(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=dk.exec(e))?new ht(t[1],t[2],t[3],1):(t=uk.exec(e))?new ht(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=fk.exec(e))?Po(t[1],t[2],t[3],t[4]):(t=mk.exec(e))?Po(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=pk.exec(e))?y0(t[1],t[2]/100,t[3]/100,1):(t=hk.exec(e))?y0(t[1],t[2]/100,t[3]/100,t[4]):f0.hasOwnProperty(e)?h0(f0[e]):e==="transparent"?new ht(NaN,NaN,NaN,0):null}function h0(e){return new ht(e>>16&255,e>>8&255,e&255,1)}function Po(e,t,n,r){return r<=0&&(e=t=n=NaN),new ht(e,t,n,r)}function yk(e){return e instanceof Eo||(e=Ys(e)),e?(e=e.rgb(),new ht(e.r,e.g,e.b,e.opacity)):new ht}function ql(e,t,n,r){return arguments.length===1?yk(e):new ht(e,t,n,r??1)}function ht(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}md(ht,ql,Pg(Eo,{brighter(e){return e=e==null?ua:Math.pow(ua,e),new ht(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?qs:Math.pow(qs,e),new ht(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ht(lr(this.r),lr(this.g),lr(this.b),fa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:g0,formatHex:g0,formatHex8:vk,formatRgb:x0,toString:x0}));function g0(){return`#${or(this.r)}${or(this.g)}${or(this.b)}`}function vk(){return`#${or(this.r)}${or(this.g)}${or(this.b)}${or((isNaN(this.opacity)?1:this.opacity)*255)}`}function x0(){const e=fa(this.opacity);return`${e===1?"rgb(":"rgba("}${lr(this.r)}, ${lr(this.g)}, ${lr(this.b)}${e===1?")":`, ${e})`}`}function fa(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function lr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function or(e){return e=lr(e),(e<16?"0":"")+e.toString(16)}function y0(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Rt(e,t,n,r)}function Lg(e){if(e instanceof Rt)return new Rt(e.h,e.s,e.l,e.opacity);if(e instanceof Eo||(e=Ys(e)),!e)return new Rt;if(e instanceof Rt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,s=Math.min(t,n,r),a=Math.max(t,n,r),i=NaN,l=a-s,c=(a+s)/2;return l?(t===a?i=(n-r)/l+(n<r)*6:n===a?i=(r-t)/l+2:i=(t-n)/l+4,l/=c<.5?a+s:2-a-s,i*=60):l=c>0&&c<1?0:i,new Rt(i,l,c,e.opacity)}function bk(e,t,n,r){return arguments.length===1?Lg(e):new Rt(e,t,n,r??1)}function Rt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}md(Rt,bk,Pg(Eo,{brighter(e){return e=e==null?ua:Math.pow(ua,e),new Rt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?qs:Math.pow(qs,e),new Rt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,s=2*n-r;return new ht(cl(e>=240?e-240:e+120,s,r),cl(e,s,r),cl(e<120?e+240:e-120,s,r),this.opacity)},clamp(){return new Rt(v0(this.h),Lo(this.s),Lo(this.l),fa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=fa(this.opacity);return`${e===1?"hsl(":"hsla("}${v0(this.h)}, ${Lo(this.s)*100}%, ${Lo(this.l)*100}%${e===1?")":`, ${e})`}`}}));function v0(e){return e=(e||0)%360,e<0?e+360:e}function Lo(e){return Math.max(0,Math.min(1,e||0))}function cl(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const $g=e=>()=>e;function wk(e,t){return function(n){return e+n*t}}function jk(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Nk(e){return(e=+e)==1?Rg:function(t,n){return n-t?jk(t,n,e):$g(isNaN(t)?n:t)}}function Rg(e,t){var n=t-e;return n?wk(e,n):$g(isNaN(e)?t:e)}const b0=function e(t){var n=Nk(t);function r(s,a){var i=n((s=ql(s)).r,(a=ql(a)).r),l=n(s.g,a.g),c=n(s.b,a.b),d=Rg(s.opacity,a.opacity);return function(u){return s.r=i(u),s.g=l(u),s.b=c(u),s.opacity=d(u),s+""}}return r.gamma=e,r}(1);function Mn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Kl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,dl=new RegExp(Kl.source,"g");function Ek(e){return function(){return e}}function Sk(e){return function(t){return e(t)+""}}function Ck(e,t){var n=Kl.lastIndex=dl.lastIndex=0,r,s,a,i=-1,l=[],c=[];for(e=e+"",t=t+"";(r=Kl.exec(e))&&(s=dl.exec(t));)(a=s.index)>n&&(a=t.slice(n,a),l[i]?l[i]+=a:l[++i]=a),(r=r[0])===(s=s[0])?l[i]?l[i]+=s:l[++i]=s:(l[++i]=null,c.push({i,x:Mn(r,s)})),n=dl.lastIndex;return n<t.length&&(a=t.slice(n),l[i]?l[i]+=a:l[++i]=a),l.length<2?c[0]?Sk(c[0].x):Ek(t):(t=c.length,function(d){for(var u=0,f;u<t;++u)l[(f=c[u]).i]=f.x(d);return l.join("")})}var w0=180/Math.PI,Yl={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Vg(e,t,n,r,s,a){var i,l,c;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,c/=l),e*r<t*n&&(e=-e,t=-t,c=-c,i=-i),{translateX:s,translateY:a,rotate:Math.atan2(t,e)*w0,skewX:Math.atan(c)*w0,scaleX:i,scaleY:l}}var $o;function Ik(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Yl:Vg(t.a,t.b,t.c,t.d,t.e,t.f)}function Ak(e){return e==null||($o||($o=document.createElementNS("http://www.w3.org/2000/svg","g")),$o.setAttribute("transform",e),!(e=$o.transform.baseVal.consolidate()))?Yl:(e=e.matrix,Vg(e.a,e.b,e.c,e.d,e.e,e.f))}function Bg(e,t,n,r){function s(d){return d.length?d.pop()+" ":""}function a(d,u,f,m,p,g){if(d!==f||u!==m){var h=p.push("translate(",null,t,null,n);g.push({i:h-4,x:Mn(d,f)},{i:h-2,x:Mn(u,m)})}else(f||m)&&p.push("translate("+f+t+m+n)}function i(d,u,f,m){d!==u?(d-u>180?u+=360:u-d>180&&(d+=360),m.push({i:f.push(s(f)+"rotate(",null,r)-2,x:Mn(d,u)})):u&&f.push(s(f)+"rotate("+u+r)}function l(d,u,f,m){d!==u?m.push({i:f.push(s(f)+"skewX(",null,r)-2,x:Mn(d,u)}):u&&f.push(s(f)+"skewX("+u+r)}function c(d,u,f,m,p,g){if(d!==f||u!==m){var h=p.push(s(p)+"scale(",null,",",null,")");g.push({i:h-4,x:Mn(d,f)},{i:h-2,x:Mn(u,m)})}else(f!==1||m!==1)&&p.push(s(p)+"scale("+f+","+m+")")}return function(d,u){var f=[],m=[];return d=e(d),u=e(u),a(d.translateX,d.translateY,u.translateX,u.translateY,f,m),i(d.rotate,u.rotate,f,m),l(d.skewX,u.skewX,f,m),c(d.scaleX,d.scaleY,u.scaleX,u.scaleY,f,m),d=u=null,function(p){for(var g=-1,h=m.length,v;++g<h;)f[(v=m[g]).i]=v.x(p);return f.join("")}}}var Dk=Bg(Ik,"px, ","px)","deg)"),Mk=Bg(Ak,", ",")",")"),kk=1e-12;function j0(e){return((e=Math.exp(e))+1/e)/2}function Ok(e){return((e=Math.exp(e))-1/e)/2}function Tk(e){return((e=Math.exp(2*e))-1)/(e+1)}const Fk=function e(t,n,r){function s(a,i){var l=a[0],c=a[1],d=a[2],u=i[0],f=i[1],m=i[2],p=u-l,g=f-c,h=p*p+g*g,v,b;if(h<kk)b=Math.log(m/d)/t,v=function(I){return[l+I*p,c+I*g,d*Math.exp(t*I*b)]};else{var w=Math.sqrt(h),j=(m*m-d*d+r*h)/(2*d*n*w),N=(m*m-d*d-r*h)/(2*m*n*w),S=Math.log(Math.sqrt(j*j+1)-j),E=Math.log(Math.sqrt(N*N+1)-N);b=(E-S)/t,v=function(I){var A=I*b,M=j0(S),O=d/(n*w)*(M*Tk(t*A+S)-Ok(S));return[l+O*p,c+O*g,d*M/j0(t*A+S)]}}return v.duration=b*1e3*t/Math.SQRT2,v}return s.rho=function(a){var i=Math.max(.001,+a),l=i*i,c=l*l;return e(i,l,c)},s}(Math.SQRT2,2,4);var Hr=0,Ms=0,Cs=0,zg=1e3,ma,ks,pa=0,fr=0,Ii=0,Xs=typeof performance=="object"&&performance.now?performance:Date,Hg=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function pd(){return fr||(Hg(_k),fr=Xs.now()+Ii)}function _k(){fr=0}function ha(){this._call=this._time=this._next=null}ha.prototype=Zg.prototype={constructor:ha,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?pd():+n)+(t==null?0:+t),!this._next&&ks!==this&&(ks?ks._next=this:ma=this,ks=this),this._call=e,this._time=n,Xl()},stop:function(){this._call&&(this._call=null,this._time=1/0,Xl())}};function Zg(e,t,n){var r=new ha;return r.restart(e,t,n),r}function Pk(){pd(),++Hr;for(var e=ma,t;e;)(t=fr-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Hr}function N0(){fr=(pa=Xs.now())+Ii,Hr=Ms=0;try{Pk()}finally{Hr=0,$k(),fr=0}}function Lk(){var e=Xs.now(),t=e-pa;t>zg&&(Ii-=t,pa=e)}function $k(){for(var e,t=ma,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:ma=n);ks=e,Xl(r)}function Xl(e){if(!Hr){Ms&&(Ms=clearTimeout(Ms));var t=e-fr;t>24?(e<1/0&&(Ms=setTimeout(N0,e-Xs.now()-Ii)),Cs&&(Cs=clearInterval(Cs))):(Cs||(pa=Xs.now(),Cs=setInterval(Lk,zg)),Hr=1,Hg(N0))}}function E0(e,t,n){var r=new ha;return t=t==null?0:+t,r.restart(s=>{r.stop(),e(s+t)},t,n),r}var Rk=Si("start","end","cancel","interrupt"),Vk=[],Ug=0,S0=1,Jl=2,Go=3,C0=4,Ql=5,qo=6;function Ai(e,t,n,r,s,a){var i=e.__transition;if(!i)e.__transition={};else if(n in i)return;Bk(e,n,{name:t,index:r,group:s,on:Rk,tween:Vk,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Ug})}function hd(e,t){var n=Gt(e,t);if(n.state>Ug)throw new Error("too late; already scheduled");return n}function rn(e,t){var n=Gt(e,t);if(n.state>Go)throw new Error("too late; already running");return n}function Gt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Bk(e,t,n){var r=e.__transition,s;r[t]=n,n.timer=Zg(a,0,n.time);function a(d){n.state=S0,n.timer.restart(i,n.delay,n.time),n.delay<=d&&i(d-n.delay)}function i(d){var u,f,m,p;if(n.state!==S0)return c();for(u in r)if(p=r[u],p.name===n.name){if(p.state===Go)return E0(i);p.state===C0?(p.state=qo,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete r[u]):+u<t&&(p.state=qo,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete r[u])}if(E0(function(){n.state===Go&&(n.state=C0,n.timer.restart(l,n.delay,n.time),l(d))}),n.state=Jl,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Jl){for(n.state=Go,s=new Array(m=n.tween.length),u=0,f=-1;u<m;++u)(p=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(s[++f]=p);s.length=f+1}}function l(d){for(var u=d<n.duration?n.ease.call(null,d/n.duration):(n.timer.restart(c),n.state=Ql,1),f=-1,m=s.length;++f<m;)s[f].call(e,u);n.state===Ql&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=qo,n.timer.stop(),delete r[t];for(var d in r)return;delete e.__transition}}function Ko(e,t){var n=e.__transition,r,s,a=!0,i;if(n){t=t==null?null:t+"";for(i in n){if((r=n[i]).name!==t){a=!1;continue}s=r.state>Jl&&r.state<Ql,r.state=qo,r.timer.stop(),r.on.call(s?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[i]}a&&delete e.__transition}}function zk(e){return this.each(function(){Ko(this,e)})}function Hk(e,t){var n,r;return function(){var s=rn(this,e),a=s.tween;if(a!==n){r=n=a;for(var i=0,l=r.length;i<l;++i)if(r[i].name===t){r=r.slice(),r.splice(i,1);break}}s.tween=r}}function Zk(e,t,n){var r,s;if(typeof n!="function")throw new Error;return function(){var a=rn(this,e),i=a.tween;if(i!==r){s=(r=i).slice();for(var l={name:t,value:n},c=0,d=s.length;c<d;++c)if(s[c].name===t){s[c]=l;break}c===d&&s.push(l)}a.tween=s}}function Uk(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Gt(this.node(),n).tween,s=0,a=r.length,i;s<a;++s)if((i=r[s]).name===e)return i.value;return null}return this.each((t==null?Hk:Zk)(n,e,t))}function gd(e,t,n){var r=e._id;return e.each(function(){var s=rn(this,r);(s.value||(s.value={}))[t]=n.apply(this,arguments)}),function(s){return Gt(s,r).value[t]}}function Wg(e,t){var n;return(typeof t=="number"?Mn:t instanceof Ys?b0:(n=Ys(t))?(t=n,b0):Ck)(e,t)}function Wk(e){return function(){this.removeAttribute(e)}}function Gk(e){return function(){this.removeAttributeNS(e.space,e.local)}}function qk(e,t,n){var r,s=n+"",a;return function(){var i=this.getAttribute(e);return i===s?null:i===r?a:a=t(r=i,n)}}function Kk(e,t,n){var r,s=n+"",a;return function(){var i=this.getAttributeNS(e.space,e.local);return i===s?null:i===r?a:a=t(r=i,n)}}function Yk(e,t,n){var r,s,a;return function(){var i,l=n(this),c;return l==null?void this.removeAttribute(e):(i=this.getAttribute(e),c=l+"",i===c?null:i===r&&c===s?a:(s=c,a=t(r=i,l)))}}function Xk(e,t,n){var r,s,a;return function(){var i,l=n(this),c;return l==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),c=l+"",i===c?null:i===r&&c===s?a:(s=c,a=t(r=i,l)))}}function Jk(e,t){var n=Ci(e),r=n==="transform"?Mk:Wg;return this.attrTween(e,typeof t=="function"?(n.local?Xk:Yk)(n,r,gd(this,"attr."+e,t)):t==null?(n.local?Gk:Wk)(n):(n.local?Kk:qk)(n,r,t))}function Qk(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function eO(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function tO(e,t){var n,r;function s(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&eO(e,a)),n}return s._value=t,s}function nO(e,t){var n,r;function s(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&Qk(e,a)),n}return s._value=t,s}function rO(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Ci(e);return this.tween(n,(r.local?tO:nO)(r,t))}function sO(e,t){return function(){hd(this,e).delay=+t.apply(this,arguments)}}function oO(e,t){return t=+t,function(){hd(this,e).delay=t}}function aO(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?sO:oO)(t,e)):Gt(this.node(),t).delay}function iO(e,t){return function(){rn(this,e).duration=+t.apply(this,arguments)}}function lO(e,t){return t=+t,function(){rn(this,e).duration=t}}function cO(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?iO:lO)(t,e)):Gt(this.node(),t).duration}function dO(e,t){if(typeof t!="function")throw new Error;return function(){rn(this,e).ease=t}}function uO(e){var t=this._id;return arguments.length?this.each(dO(t,e)):Gt(this.node(),t).ease}function fO(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;rn(this,e).ease=n}}function mO(e){if(typeof e!="function")throw new Error;return this.each(fO(this._id,e))}function pO(e){typeof e!="function"&&(e=Ng(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var a=t[s],i=a.length,l=r[s]=[],c,d=0;d<i;++d)(c=a[d])&&e.call(c,c.__data__,d,a)&&l.push(c);return new xn(r,this._parents,this._name,this._id)}function hO(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,s=n.length,a=Math.min(r,s),i=new Array(r),l=0;l<a;++l)for(var c=t[l],d=n[l],u=c.length,f=i[l]=new Array(u),m,p=0;p<u;++p)(m=c[p]||d[p])&&(f[p]=m);for(;l<r;++l)i[l]=t[l];return new xn(i,this._parents,this._name,this._id)}function gO(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function xO(e,t,n){var r,s,a=gO(t)?hd:rn;return function(){var i=a(this,e),l=i.on;l!==r&&(s=(r=l).copy()).on(t,n),i.on=s}}function yO(e,t){var n=this._id;return arguments.length<2?Gt(this.node(),n).on.on(e):this.each(xO(n,e,t))}function vO(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function bO(){return this.on("end.remove",vO(this._id))}function wO(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ud(e));for(var r=this._groups,s=r.length,a=new Array(s),i=0;i<s;++i)for(var l=r[i],c=l.length,d=a[i]=new Array(c),u,f,m=0;m<c;++m)(u=l[m])&&(f=e.call(u,u.__data__,m,l))&&("__data__"in u&&(f.__data__=u.__data__),d[m]=f,Ai(d[m],t,n,m,d,Gt(u,n)));return new xn(a,this._parents,t,n)}function jO(e){var t=this._name,n=this._id;typeof e!="function"&&(e=jg(e));for(var r=this._groups,s=r.length,a=[],i=[],l=0;l<s;++l)for(var c=r[l],d=c.length,u,f=0;f<d;++f)if(u=c[f]){for(var m=e.call(u,u.__data__,f,c),p,g=Gt(u,n),h=0,v=m.length;h<v;++h)(p=m[h])&&Ai(p,t,n,h,m,g);a.push(m),i.push(u)}return new xn(a,i,t,n)}var NO=No.prototype.constructor;function EO(){return new NO(this._groups,this._parents)}function SO(e,t){var n,r,s;return function(){var a=zr(this,e),i=(this.style.removeProperty(e),zr(this,e));return a===i?null:a===n&&i===r?s:s=t(n=a,r=i)}}function Gg(e){return function(){this.style.removeProperty(e)}}function CO(e,t,n){var r,s=n+"",a;return function(){var i=zr(this,e);return i===s?null:i===r?a:a=t(r=i,n)}}function IO(e,t,n){var r,s,a;return function(){var i=zr(this,e),l=n(this),c=l+"";return l==null&&(c=l=(this.style.removeProperty(e),zr(this,e))),i===c?null:i===r&&c===s?a:(s=c,a=t(r=i,l))}}function AO(e,t){var n,r,s,a="style."+t,i="end."+a,l;return function(){var c=rn(this,e),d=c.on,u=c.value[a]==null?l||(l=Gg(t)):void 0;(d!==n||s!==u)&&(r=(n=d).copy()).on(i,s=u),c.on=r}}function DO(e,t,n){var r=(e+="")=="transform"?Dk:Wg;return t==null?this.styleTween(e,SO(e,r)).on("end.style."+e,Gg(e)):typeof t=="function"?this.styleTween(e,IO(e,r,gd(this,"style."+e,t))).each(AO(this._id,e)):this.styleTween(e,CO(e,r,t),n).on("end.style."+e,null)}function MO(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function kO(e,t,n){var r,s;function a(){var i=t.apply(this,arguments);return i!==s&&(r=(s=i)&&MO(e,i,n)),r}return a._value=t,a}function OO(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,kO(e,t,n??""))}function TO(e){return function(){this.textContent=e}}function FO(e){return function(){var t=e(this);this.textContent=t??""}}function _O(e){return this.tween("text",typeof e=="function"?FO(gd(this,"text",e)):TO(e==null?"":e+""))}function PO(e){return function(t){this.textContent=e.call(this,t)}}function LO(e){var t,n;function r(){var s=e.apply(this,arguments);return s!==n&&(t=(n=s)&&PO(s)),t}return r._value=e,r}function $O(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,LO(e))}function RO(){for(var e=this._name,t=this._id,n=qg(),r=this._groups,s=r.length,a=0;a<s;++a)for(var i=r[a],l=i.length,c,d=0;d<l;++d)if(c=i[d]){var u=Gt(c,t);Ai(c,e,n,d,i,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new xn(r,this._parents,e,n)}function VO(){var e,t,n=this,r=n._id,s=n.size();return new Promise(function(a,i){var l={value:i},c={value:function(){--s===0&&a()}};n.each(function(){var d=rn(this,r),u=d.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(c)),d.on=t}),s===0&&a()})}var BO=0;function xn(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function qg(){return++BO}var ln=No.prototype;xn.prototype={constructor:xn,select:wO,selectAll:jO,selectChild:ln.selectChild,selectChildren:ln.selectChildren,filter:pO,merge:hO,selection:EO,transition:RO,call:ln.call,nodes:ln.nodes,node:ln.node,size:ln.size,empty:ln.empty,each:ln.each,on:yO,attr:Jk,attrTween:rO,style:DO,styleTween:OO,text:_O,textTween:$O,remove:bO,tween:Uk,delay:aO,duration:cO,ease:uO,easeVarying:mO,end:VO,[Symbol.iterator]:ln[Symbol.iterator]};function zO(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var HO={time:null,delay:0,duration:250,ease:zO};function ZO(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function UO(e){var t,n;e instanceof xn?(t=e._id,e=e._name):(t=qg(),(n=HO).time=pd(),e=e==null?null:e+"");for(var r=this._groups,s=r.length,a=0;a<s;++a)for(var i=r[a],l=i.length,c,d=0;d<l;++d)(c=i[d])&&Ai(c,e,t,d,i,n||ZO(c,t));return new xn(r,this._parents,e,t)}No.prototype.interrupt=zk;No.prototype.transition=UO;const Ro=e=>()=>e;function WO(e,{sourceEvent:t,target:n,transform:r,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:s}})}function un(e,t,n){this.k=e,this.x=t,this.y=n}un.prototype={constructor:un,scale:function(e){return e===1?this:new un(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new un(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Di=new un(1,0,0);Kg.prototype=un.prototype;function Kg(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Di;return e.__zoom}function ul(e){e.stopImmediatePropagation()}function Is(e){e.preventDefault(),e.stopImmediatePropagation()}function GO(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function qO(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function I0(){return this.__zoom||Di}function KO(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function YO(){return navigator.maxTouchPoints||"ontouchstart"in this}function XO(e,t,n){var r=e.invertX(t[0][0])-n[0][0],s=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(s>r?(r+s)/2:Math.min(0,r)||Math.max(0,s),i>a?(a+i)/2:Math.min(0,a)||Math.max(0,i))}function Yg(){var e=GO,t=qO,n=XO,r=KO,s=YO,a=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],l=250,c=Fk,d=Si("start","zoom","end"),u,f,m,p=500,g=150,h=0,v=10;function b(C){C.property("__zoom",I0).on("wheel.zoom",A,{passive:!1}).on("mousedown.zoom",M).on("dblclick.zoom",O).filter(s).on("touchstart.zoom",L).on("touchmove.zoom",$).on("touchend.zoom touchcancel.zoom",P).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}b.transform=function(C,T,D,_){var F=C.selection?C.selection():C;F.property("__zoom",I0),C!==F?S(C,T,D,_):F.interrupt().each(function(){E(this,arguments).event(_).start().zoom(null,typeof T=="function"?T.apply(this,arguments):T).end()})},b.scaleBy=function(C,T,D,_){b.scaleTo(C,function(){var F=this.__zoom.k,k=typeof T=="function"?T.apply(this,arguments):T;return F*k},D,_)},b.scaleTo=function(C,T,D,_){b.transform(C,function(){var F=t.apply(this,arguments),k=this.__zoom,R=D==null?N(F):typeof D=="function"?D.apply(this,arguments):D,H=k.invert(R),B=typeof T=="function"?T.apply(this,arguments):T;return n(j(w(k,B),R,H),F,i)},D,_)},b.translateBy=function(C,T,D,_){b.transform(C,function(){return n(this.__zoom.translate(typeof T=="function"?T.apply(this,arguments):T,typeof D=="function"?D.apply(this,arguments):D),t.apply(this,arguments),i)},null,_)},b.translateTo=function(C,T,D,_,F){b.transform(C,function(){var k=t.apply(this,arguments),R=this.__zoom,H=_==null?N(k):typeof _=="function"?_.apply(this,arguments):_;return n(Di.translate(H[0],H[1]).scale(R.k).translate(typeof T=="function"?-T.apply(this,arguments):-T,typeof D=="function"?-D.apply(this,arguments):-D),k,i)},_,F)};function w(C,T){return T=Math.max(a[0],Math.min(a[1],T)),T===C.k?C:new un(T,C.x,C.y)}function j(C,T,D){var _=T[0]-D[0]*C.k,F=T[1]-D[1]*C.k;return _===C.x&&F===C.y?C:new un(C.k,_,F)}function N(C){return[(+C[0][0]+ +C[1][0])/2,(+C[0][1]+ +C[1][1])/2]}function S(C,T,D,_){C.on("start.zoom",function(){E(this,arguments).event(_).start()}).on("interrupt.zoom end.zoom",function(){E(this,arguments).event(_).end()}).tween("zoom",function(){var F=this,k=arguments,R=E(F,k).event(_),H=t.apply(F,k),B=D==null?N(H):typeof D=="function"?D.apply(F,k):D,G=Math.max(H[1][0]-H[0][0],H[1][1]-H[0][1]),z=F.__zoom,Z=typeof T=="function"?T.apply(F,k):T,q=c(z.invert(B).concat(G/z.k),Z.invert(B).concat(G/Z.k));return function(V){if(V===1)V=Z;else{var U=q(V),Q=G/U[2];V=new un(Q,B[0]-U[0]*Q,B[1]-U[1]*Q)}R.zoom(null,V)}})}function E(C,T,D){return!D&&C.__zooming||new I(C,T)}function I(C,T){this.that=C,this.args=T,this.active=0,this.sourceEvent=null,this.extent=t.apply(C,T),this.taps=0}I.prototype={event:function(C){return C&&(this.sourceEvent=C),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(C,T){return this.mouse&&C!=="mouse"&&(this.mouse[1]=T.invert(this.mouse[0])),this.touch0&&C!=="touch"&&(this.touch0[1]=T.invert(this.touch0[0])),this.touch1&&C!=="touch"&&(this.touch1[1]=T.invert(this.touch1[0])),this.that.__zoom=T,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(C){var T=bt(this.that).datum();d.call(C,this.that,new WO(C,{sourceEvent:this.sourceEvent,target:b,type:C,transform:this.that.__zoom,dispatch:d}),T)}};function A(C,...T){if(!e.apply(this,arguments))return;var D=E(this,T).event(C),_=this.__zoom,F=Math.max(a[0],Math.min(a[1],_.k*Math.pow(2,r.apply(this,arguments)))),k=$t(C);if(D.wheel)(D.mouse[0][0]!==k[0]||D.mouse[0][1]!==k[1])&&(D.mouse[1]=_.invert(D.mouse[0]=k)),clearTimeout(D.wheel);else{if(_.k===F)return;D.mouse=[k,_.invert(k)],Ko(this),D.start()}Is(C),D.wheel=setTimeout(R,g),D.zoom("mouse",n(j(w(_,F),D.mouse[0],D.mouse[1]),D.extent,i));function R(){D.wheel=null,D.end()}}function M(C,...T){if(m||!e.apply(this,arguments))return;var D=C.currentTarget,_=E(this,T,!0).event(C),F=bt(C.view).on("mousemove.zoom",B,!0).on("mouseup.zoom",G,!0),k=$t(C,D),R=C.clientX,H=C.clientY;Tg(C.view),ul(C),_.mouse=[k,this.__zoom.invert(k)],Ko(this),_.start();function B(z){if(Is(z),!_.moved){var Z=z.clientX-R,q=z.clientY-H;_.moved=Z*Z+q*q>h}_.event(z).zoom("mouse",n(j(_.that.__zoom,_.mouse[0]=$t(z,D),_.mouse[1]),_.extent,i))}function G(z){F.on("mousemove.zoom mouseup.zoom",null),Fg(z.view,_.moved),Is(z),_.event(z).end()}}function O(C,...T){if(e.apply(this,arguments)){var D=this.__zoom,_=$t(C.changedTouches?C.changedTouches[0]:C,this),F=D.invert(_),k=D.k*(C.shiftKey?.5:2),R=n(j(w(D,k),_,F),t.apply(this,T),i);Is(C),l>0?bt(this).transition().duration(l).call(S,R,_,C):bt(this).call(b.transform,R,_,C)}}function L(C,...T){if(e.apply(this,arguments)){var D=C.touches,_=D.length,F=E(this,T,C.changedTouches.length===_).event(C),k,R,H,B;for(ul(C),R=0;R<_;++R)H=D[R],B=$t(H,this),B=[B,this.__zoom.invert(B),H.identifier],F.touch0?!F.touch1&&F.touch0[2]!==B[2]&&(F.touch1=B,F.taps=0):(F.touch0=B,k=!0,F.taps=1+!!u);u&&(u=clearTimeout(u)),k&&(F.taps<2&&(f=B[0],u=setTimeout(function(){u=null},p)),Ko(this),F.start())}}function $(C,...T){if(this.__zooming){var D=E(this,T).event(C),_=C.changedTouches,F=_.length,k,R,H,B;for(Is(C),k=0;k<F;++k)R=_[k],H=$t(R,this),D.touch0&&D.touch0[2]===R.identifier?D.touch0[0]=H:D.touch1&&D.touch1[2]===R.identifier&&(D.touch1[0]=H);if(R=D.that.__zoom,D.touch1){var G=D.touch0[0],z=D.touch0[1],Z=D.touch1[0],q=D.touch1[1],V=(V=Z[0]-G[0])*V+(V=Z[1]-G[1])*V,U=(U=q[0]-z[0])*U+(U=q[1]-z[1])*U;R=w(R,Math.sqrt(V/U)),H=[(G[0]+Z[0])/2,(G[1]+Z[1])/2],B=[(z[0]+q[0])/2,(z[1]+q[1])/2]}else if(D.touch0)H=D.touch0[0],B=D.touch0[1];else return;D.zoom("touch",n(j(R,H,B),D.extent,i))}}function P(C,...T){if(this.__zooming){var D=E(this,T).event(C),_=C.changedTouches,F=_.length,k,R;for(ul(C),m&&clearTimeout(m),m=setTimeout(function(){m=null},p),k=0;k<F;++k)R=_[k],D.touch0&&D.touch0[2]===R.identifier?delete D.touch0:D.touch1&&D.touch1[2]===R.identifier&&delete D.touch1;if(D.touch1&&!D.touch0&&(D.touch0=D.touch1,delete D.touch1),D.touch0)D.touch0[1]=this.__zoom.invert(D.touch0[0]);else if(D.end(),D.taps===2&&(R=$t(R,this),Math.hypot(f[0]-R[0],f[1]-R[1])<v)){var H=bt(this).on("dblclick.zoom");H&&H.apply(this,arguments)}}}return b.wheelDelta=function(C){return arguments.length?(r=typeof C=="function"?C:Ro(+C),b):r},b.filter=function(C){return arguments.length?(e=typeof C=="function"?C:Ro(!!C),b):e},b.touchable=function(C){return arguments.length?(s=typeof C=="function"?C:Ro(!!C),b):s},b.extent=function(C){return arguments.length?(t=typeof C=="function"?C:Ro([[+C[0][0],+C[0][1]],[+C[1][0],+C[1][1]]]),b):t},b.scaleExtent=function(C){return arguments.length?(a[0]=+C[0],a[1]=+C[1],b):[a[0],a[1]]},b.translateExtent=function(C){return arguments.length?(i[0][0]=+C[0][0],i[1][0]=+C[1][0],i[0][1]=+C[0][1],i[1][1]=+C[1][1],b):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},b.constrain=function(C){return arguments.length?(n=C,b):n},b.duration=function(C){return arguments.length?(l=+C,b):l},b.interpolate=function(C){return arguments.length?(c=C,b):c},b.on=function(){var C=d.on.apply(d,arguments);return C===d?b:C},b.clickDistance=function(C){return arguments.length?(h=(C=+C)*C,b):Math.sqrt(h)},b.tapDistance=function(C){return arguments.length?(v=+C,b):v},b}const jn={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`},Js=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Xg=["Enter"," ","Escape"];var Zr;(function(e){e.Strict="strict",e.Loose="loose"})(Zr||(Zr={}));var cr;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(cr||(cr={}));var Qs;(function(e){e.Partial="partial",e.Full="full"})(Qs||(Qs={}));const Jg={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var kn;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(kn||(kn={}));var Jt;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Jt||(Jt={}));var re;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(re||(re={}));const A0={[re.Left]:re.Right,[re.Right]:re.Left,[re.Top]:re.Bottom,[re.Bottom]:re.Top};function Qg(e){return e===null?null:e?"valid":"invalid"}const ex=e=>"id"in e&&"source"in e&&"target"in e,JO=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),xd=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),QO=(e,t,n)=>{if(!e.id)return[];const r=new Set;return n.forEach(s=>{s.source===e.id&&r.add(s.target)}),t.filter(s=>r.has(s.id))},eT=(e,t,n)=>{if(!e.id)return[];const r=new Set;return n.forEach(s=>{s.target===e.id&&r.add(s.source)}),t.filter(s=>r.has(s.id))},So=(e,t=[0,0])=>{const{width:n,height:r}=Nn(e),s=e.origin??t,a=n*s[0],i=r*s[1];return{x:e.position.x-a,y:e.position.y-i}},tT=(e,t={nodeOrigin:[0,0],nodeLookup:void 0})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,s)=>{const a=typeof s=="string";let i=!t.nodeLookup&&!a?s:void 0;t.nodeLookup&&(i=a?t.nodeLookup.get(s):xd(s)?s:t.nodeLookup.get(s.id));const l=i?ga(i,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Mi(r,l)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return ki(n)},ls=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(r=>{if(t.filter===void 0||t.filter(r)){const s=ga(r);n=Mi(n,s)}}),ki(n)},tx=(e,t,[n,r,s]=[0,0,1],a=!1,i=!1)=>{const l={...Co(t,[n,r,s]),width:t.width/s,height:t.height/s},c=[];for(const d of e.values()){const{measured:u,selectable:f=!0,hidden:m=!1}=d;if(i&&!f||m)continue;const p=u.width??d.width??d.initialWidth??null,g=u.height??d.height??d.initialHeight??null,h=eo(l,Wr(d)),v=(p??0)*(g??0),b=a&&h>0;(!d.internals.handleBounds||b||h>=v||d.dragging)&&c.push(d)}return c},nx=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function ec(e,t){const n=new Map,r=t!=null&&t.nodes?new Set(t.nodes.map(s=>s.id)):null;return e.forEach(s=>{s.measured.width&&s.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!s.hidden)&&(!r||r.has(s.id))&&n.set(s.id,s)}),n}async function tc({nodes:e,width:t,height:n,panZoom:r,minZoom:s,maxZoom:a},i){if(e.size===0)return Promise.resolve(!1);const l=ls(e),c=yd(l,t,n,(i==null?void 0:i.minZoom)??s,(i==null?void 0:i.maxZoom)??a,(i==null?void 0:i.padding)??.1);return await r.setViewport(c,{duration:i==null?void 0:i.duration}),Promise.resolve(!0)}function rx({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:s,onError:a}){const i=n.get(e),l=i.parentId?n.get(i.parentId):void 0,{x:c,y:d}=l?l.internals.positionAbsolute:{x:0,y:0},u=i.origin??r;let f=s;if(i.extent==="parent"&&!i.expandParent)if(!l)a==null||a("005",jn.error005());else{const p=l.measured.width,g=l.measured.height;p&&g&&(f=[[c,d],[c+p,d+g]])}else l&&Gr(i.extent)&&(f=[[i.extent[0][0]+c,i.extent[0][1]+d],[i.extent[1][0]+c,i.extent[1][1]+d]]);const m=Gr(f)?mr(t,f,i.measured):t;return{position:{x:m.x-c+i.measured.width*u[0],y:m.y-d+i.measured.height*u[1]},positionAbsolute:m}}async function nT({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:s}){const a=new Set(e.map(m=>m.id)),i=[];for(const m of n){if(m.deletable===!1)continue;const p=a.has(m.id),g=!p&&m.parentId&&i.find(h=>h.id===m.parentId);(p||g)&&i.push(m)}const l=new Set(t.map(m=>m.id)),c=r.filter(m=>m.deletable!==!1),u=nx(i,c);for(const m of c)l.has(m.id)&&!u.find(g=>g.id===m.id)&&u.push(m);if(!s)return{edges:u,nodes:i};const f=await s({nodes:i,edges:u});return typeof f=="boolean"?f?{edges:u,nodes:i}:{edges:[],nodes:[]}:f}const Ur=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),mr=(e={x:0,y:0},t,n)=>({x:Ur(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:Ur(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function sx(e,t,n){const{width:r,height:s}=Nn(n),{x:a,y:i}=n.internals.positionAbsolute;return mr(e,[[a,i],[a+r,i+s]],t)}const D0=(e,t,n)=>e<t?Ur(Math.abs(e-t),1,t)/t:e>n?-Ur(Math.abs(e-n),1,t)/t:0,ox=(e,t,n=15,r=40)=>{const s=D0(e.x,r,t.width-r)*n,a=D0(e.y,r,t.height-r)*n;return[s,a]},Mi=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),nc=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),ki=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Wr=(e,t=[0,0])=>{var s,a;const{x:n,y:r}=xd(e)?e.internals.positionAbsolute:So(e,t);return{x:n,y:r,width:((s=e.measured)==null?void 0:s.width)??e.width??e.initialWidth??0,height:((a=e.measured)==null?void 0:a.height)??e.height??e.initialHeight??0}},ga=(e,t=[0,0])=>{var s,a;const{x:n,y:r}=xd(e)?e.internals.positionAbsolute:So(e,t);return{x:n,y:r,x2:n+(((s=e.measured)==null?void 0:s.width)??e.width??e.initialWidth??0),y2:r+(((a=e.measured)==null?void 0:a.height)??e.height??e.initialHeight??0)}},ax=(e,t)=>ki(Mi(nc(e),nc(t))),eo=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},M0=e=>Bt(e.width)&&Bt(e.height)&&Bt(e.x)&&Bt(e.y),Bt=e=>!isNaN(e)&&isFinite(e),rT=(e,t)=>{},Oi=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),Co=({x:e,y:t},[n,r,s],a=!1,i=[1,1])=>{const l={x:(e-n)/s,y:(t-r)/s};return a?Oi(l,i):l},ix=({x:e,y:t},[n,r,s])=>({x:e*s+n,y:t*s+r}),yd=(e,t,n,r,s,a)=>{const i=t/(e.width*(1+a)),l=n/(e.height*(1+a)),c=Math.min(i,l),d=Ur(c,r,s),u=e.x+e.width/2,f=e.y+e.height/2,m=t/2-u*d,p=n/2-f*d;return{x:m,y:p,zoom:d}},xa=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function Gr(e){return e!==void 0&&e!=="parent"}function Nn(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function lx(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function cx(e,t={width:0,height:0},n,r,s){let a=n;const i={...e};for(;a;){const l=r.get(a);if(a=l==null?void 0:l.parentId,l){const c=l.origin||s;i.x+=l.internals.positionAbsolute.x-(t.width??0)*c[0],i.y+=l.internals.positionAbsolute.y-(t.height??0)*c[1]}}return i}function _s(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r}){const{x:s,y:a}=fn(e),i=Co({x:s,y:a},r),{x:l,y:c}=n?Oi(i,t):i;return{xSnapped:l,ySnapped:c,...i}}const Ti=e=>({width:e.offsetWidth,height:e.offsetHeight}),dx=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},sT=["INPUT","SELECT","TEXTAREA"];function rc(e){var r,s;const t=((s=(r=e.composedPath)==null?void 0:r.call(e))==null?void 0:s[0])||e.target;return sT.includes(t==null?void 0:t.nodeName)||(t==null?void 0:t.hasAttribute("contenteditable"))||!!(t!=null&&t.closest(".nokey"))}const ux=e=>"clientX"in e,fn=(e,t)=>{var a,i;const n=ux(e),r=n?e.clientX:(a=e.touches)==null?void 0:a[0].clientX,s=n?e.clientY:(i=e.touches)==null?void 0:i[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:s-((t==null?void 0:t.top)??0)}},k0=(e,t,n,r,s)=>{const a=t.querySelectorAll(`.${e}`);return!a||!a.length?null:Array.from(a).map(i=>{const l=i.getBoundingClientRect();return{id:i.getAttribute("data-handleid"),type:e,nodeId:s,position:i.getAttribute("data-handlepos"),x:(l.left-n.left)/r,y:(l.top-n.top)/r,...Ti(i)}})};function fx({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:s,sourceControlY:a,targetControlX:i,targetControlY:l}){const c=e*.125+s*.375+i*.375+n*.125,d=t*.125+a*.375+l*.375+r*.125,u=Math.abs(c-e),f=Math.abs(d-t);return[c,d,u,f]}function Vo(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function O0({pos:e,x1:t,y1:n,x2:r,y2:s,c:a}){switch(e){case re.Left:return[t-Vo(t-r,a),n];case re.Right:return[t+Vo(r-t,a),n];case re.Top:return[t,n-Vo(n-s,a)];case re.Bottom:return[t,n+Vo(s-n,a)]}}function Io({sourceX:e,sourceY:t,sourcePosition:n=re.Bottom,targetX:r,targetY:s,targetPosition:a=re.Top,curvature:i=.25}){const[l,c]=O0({pos:n,x1:e,y1:t,x2:r,y2:s,c:i}),[d,u]=O0({pos:a,x1:r,y1:s,x2:e,y2:t,c:i}),[f,m,p,g]=fx({sourceX:e,sourceY:t,targetX:r,targetY:s,sourceControlX:l,sourceControlY:c,targetControlX:d,targetControlY:u});return[`M${e},${t} C${l},${c} ${d},${u} ${r},${s}`,f,m,p,g]}function mx({sourceX:e,sourceY:t,targetX:n,targetY:r}){const s=Math.abs(n-e)/2,a=n<e?n+s:n-s,i=Math.abs(r-t)/2,l=r<t?r+i:r-i;return[a,l,s,i]}function oT({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r=0,elevateOnSelect:s=!1}){if(!s)return r;const a=n||t.selected||e.selected,i=Math.max(e.internals.z||0,t.internals.z||0,1e3);return r+(a?i:0)}function aT({sourceNode:e,targetNode:t,width:n,height:r,transform:s}){const a=Mi(ga(e),ga(t));a.x===a.x2&&(a.x2+=1),a.y===a.y2&&(a.y2+=1);const i={x:-s[0]/s[2],y:-s[1]/s[2],width:n/s[2],height:r/s[2]};return eo(i,ki(a))>0}const iT=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,lT=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),px=(e,t)=>{if(!e.source||!e.target)return t;let n;return ex(e)?n={...e}:n={...e,id:iT(e)},lT(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function hx({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[s,a,i,l]=mx({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,s,a,i,l]}const T0={[re.Left]:{x:-1,y:0},[re.Right]:{x:1,y:0},[re.Top]:{x:0,y:-1},[re.Bottom]:{x:0,y:1}},cT=({source:e,sourcePosition:t=re.Bottom,target:n})=>t===re.Left||t===re.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},F0=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function dT({source:e,sourcePosition:t=re.Bottom,target:n,targetPosition:r=re.Top,center:s,offset:a}){const i=T0[t],l=T0[r],c={x:e.x+i.x*a,y:e.y+i.y*a},d={x:n.x+l.x*a,y:n.y+l.y*a},u=cT({source:c,sourcePosition:t,target:d}),f=u.x!==0?"x":"y",m=u[f];let p=[],g,h;const v={x:0,y:0},b={x:0,y:0},[w,j,N,S]=mx({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(i[f]*l[f]===-1){g=s.x??w,h=s.y??j;const I=[{x:g,y:c.y},{x:g,y:d.y}],A=[{x:c.x,y:h},{x:d.x,y:h}];i[f]===m?p=f==="x"?I:A:p=f==="x"?A:I}else{const I=[{x:c.x,y:d.y}],A=[{x:d.x,y:c.y}];if(f==="x"?p=i.x===m?A:I:p=i.y===m?I:A,t===r){const P=Math.abs(e[f]-n[f]);if(P<=a){const C=Math.min(a-1,a-P);i[f]===m?v[f]=(c[f]>e[f]?-1:1)*C:b[f]=(d[f]>n[f]?-1:1)*C}}if(t!==r){const P=f==="x"?"y":"x",C=i[f]===l[P],T=c[P]>d[P],D=c[P]<d[P];(i[f]===1&&(!C&&T||C&&D)||i[f]!==1&&(!C&&D||C&&T))&&(p=f==="x"?I:A)}const M={x:c.x+v.x,y:c.y+v.y},O={x:d.x+b.x,y:d.y+b.y},L=Math.max(Math.abs(M.x-p[0].x),Math.abs(O.x-p[0].x)),$=Math.max(Math.abs(M.y-p[0].y),Math.abs(O.y-p[0].y));L>=$?(g=(M.x+O.x)/2,h=p[0].y):(g=p[0].x,h=(M.y+O.y)/2)}return[[e,{x:c.x+v.x,y:c.y+v.y},...p,{x:d.x+b.x,y:d.y+b.y},n],g,h,N,S]}function uT(e,t,n,r){const s=Math.min(F0(e,t)/2,F0(t,n)/2,r),{x:a,y:i}=t;if(e.x===a&&a===n.x||e.y===i&&i===n.y)return`L${a} ${i}`;if(e.y===i){const d=e.x<n.x?-1:1,u=e.y<n.y?1:-1;return`L ${a+s*d},${i}Q ${a},${i} ${a},${i+s*u}`}const l=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${a},${i+s*c}Q ${a},${i} ${a+s*l},${i}`}function sc({sourceX:e,sourceY:t,sourcePosition:n=re.Bottom,targetX:r,targetY:s,targetPosition:a=re.Top,borderRadius:i=5,centerX:l,centerY:c,offset:d=20}){const[u,f,m,p,g]=dT({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:s},targetPosition:a,center:{x:l,y:c},offset:d});return[u.reduce((v,b,w)=>{let j="";return w>0&&w<u.length-1?j=uT(u[w-1],b,u[w+1],i):j=`${w===0?"M":"L"}${b.x} ${b.y}`,v+=j,v},""),f,m,p,g]}function _0(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function fT(e){var f;const{sourceNode:t,targetNode:n}=e;if(!_0(t)||!_0(n))return null;const r=t.internals.handleBounds||P0(t.handles),s=n.internals.handleBounds||P0(n.handles),a=L0((r==null?void 0:r.source)??[],e.sourceHandle),i=L0(e.connectionMode===Zr.Strict?(s==null?void 0:s.target)??[]:((s==null?void 0:s.target)??[]).concat((s==null?void 0:s.source)??[]),e.targetHandle);if(!a||!i)return(f=e.onError)==null||f.call(e,"008",jn.error008(a?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const l=(a==null?void 0:a.position)||re.Bottom,c=(i==null?void 0:i.position)||re.Top,d=to(t,a,l),u=to(n,i,c);return{sourceX:d.x,sourceY:d.y,targetX:u.x,targetY:u.y,sourcePosition:l,targetPosition:c}}function P0(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function to(e,t,n=re.Left,r=!1){const s=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,a=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:i,height:l}=t??Nn(e);if(r)return{x:s+i/2,y:a+l/2};switch((t==null?void 0:t.position)??n){case re.Top:return{x:s+i/2,y:a};case re.Right:return{x:s+i,y:a+l/2};case re.Bottom:return{x:s+i/2,y:a+l};case re.Left:return{x:s,y:a+l/2}}}function L0(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function oc(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`:""}function mT(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:s}){const a=new Set;return e.reduce((i,l)=>([l.markerStart||r,l.markerEnd||s].forEach(c=>{if(c&&typeof c=="object"){const d=oc(c,t);a.has(d)||(i.push({id:d,color:c.color||n,...c}),a.add(d))}}),i),[]).sort((i,l)=>i.id.localeCompare(l.id))}function pT(e,t,n,r,s){let a=.5;s==="start"?a=0:s==="end"&&(a=1);let i=[(e.x+e.width*a)*t.zoom+t.x,e.y*t.zoom+t.y-r],l=[-100*a,-100];switch(n){case re.Right:i=[(e.x+e.width)*t.zoom+t.x+r,(e.y+e.height*a)*t.zoom+t.y],l=[0,-100*a];break;case re.Bottom:i[1]=(e.y+e.height)*t.zoom+t.y+r,l[1]=0;break;case re.Left:i=[e.x*t.zoom+t.x-r,(e.y+e.height*a)*t.zoom+t.y],l=[-100,-100*a];break}return`translate(${i[0]}px, ${i[1]}px) translate(${l[0]}%, ${l[1]}%)`}const vd={nodeOrigin:[0,0],nodeExtent:Js,elevateNodesOnSelect:!0,defaults:{}},hT={...vd,checkEquality:!0};function bd(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function gT(e,t,n){const r=bd(vd,n);for(const s of e.values())if(s.parentId)wd(s,e,t,r);else{const a=So(s,r.nodeOrigin),i=Gr(s.extent)?s.extent:r.nodeExtent,l=mr(a,i,Nn(s));s.internals.positionAbsolute=l}}function ac(e,t,n,r){var l,c;const s=bd(hT,r),a=new Map(t),i=s!=null&&s.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const d of e){let u=a.get(d.id);if(s.checkEquality&&d===(u==null?void 0:u.internals.userNode))t.set(d.id,u);else{const f=So(d,s.nodeOrigin),m=Gr(d.extent)?d.extent:s.nodeExtent,p=mr(f,m,Nn(d));u={...s.defaults,...d,measured:{width:(l=d.measured)==null?void 0:l.width,height:(c=d.measured)==null?void 0:c.height},internals:{positionAbsolute:p,handleBounds:d.measured?u==null?void 0:u.internals.handleBounds:void 0,z:gx(d,i),userNode:d}},t.set(d.id,u)}d.parentId&&wd(u,t,n,r)}}function xT(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function wd(e,t,n,r){const{elevateNodesOnSelect:s,nodeOrigin:a,nodeExtent:i}=bd(vd,r),l=e.parentId,c=t.get(l);if(!c){console.warn(`Parent node ${l} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}xT(e,n);const d=s?1e3:0,{x:u,y:f,z:m}=yT(e,c,a,i,d),{positionAbsolute:p}=e.internals,g=u!==p.x||f!==p.y;(g||m!==e.internals.z)&&(e.internals={...e.internals,positionAbsolute:g?{x:u,y:f}:p,z:m})}function gx(e,t){return(Bt(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function yT(e,t,n,r,s){const{x:a,y:i}=t.internals.positionAbsolute,l=Nn(e),c=So(e,n),d=Gr(e.extent)?mr(c,e.extent,l):c;let u=mr({x:a+d.x,y:i+d.y},r,l);e.extent==="parent"&&(u=sx(u,l,t));const f=gx(e,s),m=t.internals.z??0;return{x:u.x,y:u.y,z:m>f?m:f}}function jd(e,t,n,r=[0,0]){var i;const s=[],a=new Map;for(const l of e){const c=t.get(l.parentId);if(!c)continue;const d=((i=a.get(l.parentId))==null?void 0:i.expandedRect)??Wr(c),u=ax(d,l.rect);a.set(l.parentId,{expandedRect:u,parent:c})}return a.size>0&&a.forEach(({expandedRect:l,parent:c},d)=>{var j;const u=c.internals.positionAbsolute,f=Nn(c),m=c.origin??r,p=l.x<u.x?Math.round(Math.abs(u.x-l.x)):0,g=l.y<u.y?Math.round(Math.abs(u.y-l.y)):0,h=Math.max(f.width,Math.round(l.width)),v=Math.max(f.height,Math.round(l.height)),b=(h-f.width)*m[0],w=(v-f.height)*m[1];(p>0||g>0||b||w)&&(s.push({id:d,type:"position",position:{x:c.position.x-p+b,y:c.position.y-g+w}}),(j=n.get(d))==null||j.forEach(N=>{e.some(S=>S.id===N.id)||s.push({id:N.id,type:"position",position:{x:N.position.x+p,y:N.position.y+g}})})),(f.width<l.width||f.height<l.height||p||g)&&s.push({id:d,type:"dimensions",setAttributes:!0,dimensions:{width:h+(p?m[0]*p-b:0),height:v+(g?m[1]*g-w:0)}})}),s}function vT(e,t,n,r,s,a){const i=r==null?void 0:r.querySelector(".xyflow__viewport");let l=!1;if(!i)return{changes:[],updatedInternals:l};const c=[],d=window.getComputedStyle(i),{m22:u}=new window.DOMMatrixReadOnly(d.transform),f=[];for(const m of e.values()){const p=t.get(m.id);if(p)if(p.hidden)p.internals={...p.internals,handleBounds:void 0},l=!0;else{const g=Ti(m.nodeElement),h=p.measured.width!==g.width||p.measured.height!==g.height;if(!!(g.width&&g.height&&(h||!p.internals.handleBounds||m.force))){const b=m.nodeElement.getBoundingClientRect(),w=Gr(p.extent)?p.extent:a;let{positionAbsolute:j}=p.internals;p.parentId&&p.extent==="parent"?j=sx(j,g,t.get(p.parentId)):w&&(j=mr(j,w,g)),p.measured=g,p.internals={...p.internals,positionAbsolute:j,handleBounds:{source:k0("source",m.nodeElement,b,u,p.id),target:k0("target",m.nodeElement,b,u,p.id)}},p.parentId&&wd(p,t,n,{nodeOrigin:s}),l=!0,h&&(c.push({id:p.id,type:"dimensions",dimensions:g}),p.expandParent&&p.parentId&&f.push({id:p.id,parentId:p.parentId,rect:Wr(p,s)}))}}}if(f.length>0){const m=jd(f,t,n,s);c.push(...m)}return{changes:c,updatedInternals:l}}async function bT({delta:e,panZoom:t,transform:n,translateExtent:r,width:s,height:a}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const i=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[s,a]],r),l=!!i&&(i.x!==n[0]||i.y!==n[1]||i.k!==n[2]);return Promise.resolve(l)}function xx(e,t,n){e.clear(),t.clear();for(const r of n){const{source:s,target:a,sourceHandle:i=null,targetHandle:l=null}=r,c=`${s}-source-${i}`,d=`${a}-target-${l}`,u=e.get(c)||new Map,f=e.get(d)||new Map,m={edgeId:r.id,source:s,target:a,sourceHandle:i,targetHandle:l};t.set(r.id,r),e.set(c,u.set(`${a}-${l}`,m)),e.set(d,f.set(`${s}-${i}`,m))}}function yx(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:yx(n,t):!1}function $0(e,t,n){let r=e;do{if(r!=null&&r.matches(t))return!0;if(r===n)return!1;r=r.parentElement}while(r);return!1}function wT(e,t,n,r){const s=new Map;for(const[a,i]of e)if((i.selected||i.id===r)&&(!i.parentId||!yx(i,e))&&(i.draggable||t&&typeof i.draggable>"u")){const l=e.get(a);l&&s.set(a,{id:a,position:l.position||{x:0,y:0},distance:{x:n.x-l.internals.positionAbsolute.x,y:n.y-l.internals.positionAbsolute.y},extent:l.extent,parentId:l.parentId,origin:l.origin,expandParent:l.expandParent,internals:{positionAbsolute:l.internals.positionAbsolute||{x:0,y:0}},measured:{width:l.measured.width??0,height:l.measured.height??0}})}return s}function fl({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){var i,l;const s=[];for(const[c,d]of t){const u=(i=n.get(c))==null?void 0:i.internals.userNode;u&&s.push({...u,position:d.position,dragging:r})}if(!e)return[s[0],s];const a=n.get(e).internals.userNode;return[{...a,position:((l=t.get(e))==null?void 0:l.position)||a.position,dragging:r},s]}function jT({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:s}){let a={x:null,y:null},i=0,l=new Map,c=!1,d={x:0,y:0},u=null,f=!1,m=null,p=!1;function g({noDragClassName:v,handleSelector:b,domNode:w,isSelectable:j,nodeId:N,nodeClickDistance:S=0}){m=bt(w);function E({x:O,y:L},$){const{nodeLookup:P,nodeExtent:C,snapGrid:T,snapToGrid:D,nodeOrigin:_,onNodeDrag:F,onSelectionDrag:k,onError:R,updateNodePositions:H}=t();a={x:O,y:L};let B=!1,G={x:0,y:0,x2:0,y2:0};if(l.size>1&&C){const z=ls(l);G=nc(z)}for(const[z,Z]of l){if(!P.has(z))continue;let q={x:O-Z.distance.x,y:L-Z.distance.y};D&&(q=Oi(q,T));let V=[[C[0][0],C[0][1]],[C[1][0],C[1][1]]];if(l.size>1&&C&&!Z.extent){const{positionAbsolute:K}=Z.internals,ee=K.x-G.x+C[0][0],W=K.x+Z.measured.width-G.x2+C[1][0],ne=K.y-G.y+C[0][1],ue=K.y+Z.measured.height-G.y2+C[1][1];V=[[ee,ne],[W,ue]]}const{position:U,positionAbsolute:Q}=rx({nodeId:z,nextPosition:q,nodeLookup:P,nodeExtent:V,nodeOrigin:_,onError:R});B=B||Z.position.x!==U.x||Z.position.y!==U.y,Z.position=U,Z.internals.positionAbsolute=Q}if(B&&(H(l,!0),$&&(r||F||!N&&k))){const[z,Z]=fl({nodeId:N,dragItems:l,nodeLookup:P});r==null||r($,l,z,Z),F==null||F($,z,Z),N||k==null||k($,Z)}}async function I(){if(!u)return;const{transform:O,panBy:L,autoPanSpeed:$}=t(),[P,C]=ox(d,u,$);(P!==0||C!==0)&&(a.x=(a.x??0)-P/O[2],a.y=(a.y??0)-C/O[2],await L({x:P,y:C})&&E(a,null)),i=requestAnimationFrame(I)}function A(O){var B;const{nodeLookup:L,multiSelectionActive:$,nodesDraggable:P,transform:C,snapGrid:T,snapToGrid:D,selectNodesOnDrag:_,onNodeDragStart:F,onSelectionDragStart:k,unselectNodesAndEdges:R}=t();f=!0,(!_||!j)&&!$&&N&&((B=L.get(N))!=null&&B.selected||R()),j&&_&&N&&(e==null||e(N));const H=_s(O.sourceEvent,{transform:C,snapGrid:T,snapToGrid:D});if(a=H,l=wT(L,P,H,N),l.size>0&&(n||F||!N&&k)){const[G,z]=fl({nodeId:N,dragItems:l,nodeLookup:L});n==null||n(O.sourceEvent,l,G,z),F==null||F(O.sourceEvent,G,z),N||k==null||k(O.sourceEvent,z)}}const M=_g().clickDistance(S).on("start",O=>{const{domNode:L,nodeDragThreshold:$,transform:P,snapGrid:C,snapToGrid:T}=t();p=!1,$===0&&A(O),a=_s(O.sourceEvent,{transform:P,snapGrid:C,snapToGrid:T}),u=(L==null?void 0:L.getBoundingClientRect())||null,d=fn(O.sourceEvent,u)}).on("drag",O=>{const{autoPanOnNodeDrag:L,transform:$,snapGrid:P,snapToGrid:C,nodeDragThreshold:T,nodeLookup:D}=t(),_=_s(O.sourceEvent,{transform:$,snapGrid:P,snapToGrid:C});if((O.sourceEvent.type==="touchmove"&&O.sourceEvent.touches.length>1||N&&!D.has(N))&&(p=!0),!p){if(!c&&L&&f&&(c=!0,I()),!f){const F=_.xSnapped-(a.x??0),k=_.ySnapped-(a.y??0);Math.sqrt(F*F+k*k)>T&&A(O)}(a.x!==_.xSnapped||a.y!==_.ySnapped)&&l&&f&&(d=fn(O.sourceEvent,u),E(_,O.sourceEvent))}}).on("end",O=>{if(!(!f||p)&&(c=!1,f=!1,cancelAnimationFrame(i),l.size>0)){const{nodeLookup:L,updateNodePositions:$,onNodeDragStop:P,onSelectionDragStop:C}=t();if($(l,!1),s||P||!N&&C){const[T,D]=fl({nodeId:N,dragItems:l,nodeLookup:L,dragging:!1});s==null||s(O.sourceEvent,l,T,D),P==null||P(O.sourceEvent,T,D),N||C==null||C(O.sourceEvent,D)}}}).filter(O=>{const L=O.target;return!O.button&&(!v||!$0(L,`.${v}`,w))&&(!b||$0(L,b,w))});m.call(M)}function h(){m==null||m.on(".drag",null)}return{update:g,destroy:h}}function NT(e,t,n){const r=[],s={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const a of t.values())eo(s,Wr(a))>0&&r.push(a);return r}const ET=250;function ST(e,t,n,r){var l,c;let s=[],a=1/0;const i=NT(e,n,t+ET);for(const d of i){const u=[...((l=d.internals.handleBounds)==null?void 0:l.source)??[],...((c=d.internals.handleBounds)==null?void 0:c.target)??[]];for(const f of u){if(r.nodeId===f.nodeId&&r.type===f.type&&r.id===f.id)continue;const{x:m,y:p}=to(d,f,f.position,!0),g=Math.sqrt(Math.pow(m-e.x,2)+Math.pow(p-e.y,2));g>t||(g<a?(s=[{...f,x:m,y:p}],a=g):g===a&&s.push({...f,x:m,y:p}))}}if(!s.length)return null;if(s.length>1){const d=r.type==="source"?"target":"source";return s.find(u=>u.type===d)??s[0]}return s[0]}function vx(e,t,n,r,s,a=!1){var d,u,f;const i=r.get(e);if(!i)return null;const l=s==="strict"?(d=i.internals.handleBounds)==null?void 0:d[t]:[...((u=i.internals.handleBounds)==null?void 0:u.source)??[],...((f=i.internals.handleBounds)==null?void 0:f.target)??[]],c=(n?l==null?void 0:l.find(m=>m.id===n):l==null?void 0:l[0])??null;return c&&a?{...c,...to(i,c,c.position,!0)}:c}function bx(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function CT(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const wx=()=>!0;function IT(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:s,edgeUpdaterType:a,isTarget:i,domNode:l,nodeLookup:c,lib:d,autoPanOnConnect:u,flowId:f,panBy:m,cancelConnection:p,onConnectStart:g,onConnect:h,onConnectEnd:v,isValidConnection:b=wx,onReconnectEnd:w,updateConnection:j,getTransform:N,getFromHandle:S,autoPanSpeed:E}){const I=dx(e.target);let A=0,M;const{x:O,y:L}=fn(e),$=I==null?void 0:I.elementFromPoint(O,L),P=bx(a,$),C=l==null?void 0:l.getBoundingClientRect();if(!C||!P)return;const T=vx(s,P,r,c,t);if(!T)return;let D=fn(e,C),_=!1,F=null,k=!1,R=null;function H(){if(!u||!C)return;const[Q,K]=ox(D,C,E);m({x:Q,y:K}),A=requestAnimationFrame(H)}const B={...T,nodeId:s,type:P,position:T.position},G=c.get(s),Z={inProgress:!0,isValid:null,from:to(G,B,re.Left,!0),fromHandle:B,fromPosition:B.position,fromNode:G,to:D,toHandle:null,toPosition:A0[B.position],toNode:null};j(Z);let q=Z;g==null||g(e,{nodeId:s,handleId:r,handleType:P});function V(Q){if(!S()||!B){U(Q);return}const K=N();D=fn(Q,C),M=ST(Co(D,K,!1,[1,1]),n,c,B),_||(H(),_=!0);const ee=jx(Q,{handle:M,connectionMode:t,fromNodeId:s,fromHandleId:r,fromType:i?"target":"source",isValidConnection:b,doc:I,lib:d,flowId:f,nodeLookup:c});R=ee.handleDomNode,F=ee.connection,k=CT(!!M,ee.isValid);const W={...q,isValid:k,to:M&&k?ix({x:M.x,y:M.y},K):D,toHandle:ee.toHandle,toPosition:k&&ee.toHandle?ee.toHandle.position:A0[B.position],toNode:ee.toHandle?c.get(ee.toHandle.nodeId):null};k&&M&&q.toHandle&&W.toHandle&&q.toHandle.type===W.toHandle.type&&q.toHandle.nodeId===W.toHandle.nodeId&&q.toHandle.id===W.toHandle.id&&q.to.x===W.to.x&&q.to.y===W.to.y||(j(W),q=W)}function U(Q){(M||R)&&F&&k&&(h==null||h(F));const{inProgress:K,...ee}=q,W={...ee,toPosition:q.toHandle?q.toPosition:null};v==null||v(Q,W),a&&(w==null||w(Q,W)),p(),cancelAnimationFrame(A),_=!1,k=!1,F=null,R=null,I.removeEventListener("mousemove",V),I.removeEventListener("mouseup",U),I.removeEventListener("touchmove",V),I.removeEventListener("touchend",U)}I.addEventListener("mousemove",V),I.addEventListener("mouseup",U),I.addEventListener("touchmove",V),I.addEventListener("touchend",U)}function jx(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:s,fromType:a,doc:i,lib:l,flowId:c,isValidConnection:d=wx,nodeLookup:u}){const f=a==="target",m=t?i.querySelector(`.${l}-flow__handle[data-id="${c}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:p,y:g}=fn(e),h=i.elementFromPoint(p,g),v=h!=null&&h.classList.contains(`${l}-flow__handle`)?h:m,b={handleDomNode:v,isValid:!1,connection:null,toHandle:null};if(v){const w=bx(void 0,v),j=v.getAttribute("data-nodeid"),N=v.getAttribute("data-handleid"),S=v.classList.contains("connectable"),E=v.classList.contains("connectableend");if(!j||!w)return b;const I={source:f?j:r,sourceHandle:f?N:s,target:f?r:j,targetHandle:f?s:N};b.connection=I;const M=S&&E&&(n===Zr.Strict?f&&w==="source"||!f&&w==="target":j!==r||N!==s);b.isValid=M&&d(I),b.toHandle=vx(j,w,N,u,n,!1)}return b}const ic={onPointerDown:IT,isValid:jx};function AT({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const s=bt(e);function a({translateExtent:l,width:c,height:d,zoomStep:u=10,pannable:f=!0,zoomable:m=!0,inversePan:p=!1}){const g=j=>{const N=n();if(j.sourceEvent.type!=="wheel"||!t)return;const S=-j.sourceEvent.deltaY*(j.sourceEvent.deltaMode===1?.05:j.sourceEvent.deltaMode?1:.002)*u,E=N[2]*Math.pow(2,S);t.scaleTo(E)};let h=[0,0];const v=j=>{(j.sourceEvent.type==="mousedown"||j.sourceEvent.type==="touchstart")&&(h=[j.sourceEvent.clientX??j.sourceEvent.touches[0].clientX,j.sourceEvent.clientY??j.sourceEvent.touches[0].clientY])},b=j=>{const N=n();if(j.sourceEvent.type!=="mousemove"&&j.sourceEvent.type!=="touchmove"||!t)return;const S=[j.sourceEvent.clientX??j.sourceEvent.touches[0].clientX,j.sourceEvent.clientY??j.sourceEvent.touches[0].clientY],E=[S[0]-h[0],S[1]-h[1]];h=S;const I=r()*Math.max(N[2],Math.log(N[2]))*(p?-1:1),A={x:N[0]-E[0]*I,y:N[1]-E[1]*I},M=[[0,0],[c,d]];t.setViewportConstrained({x:A.x,y:A.y,zoom:N[2]},M,l)},w=Yg().on("start",v).on("zoom",f?b:null).on("zoom.wheel",m?g:null);s.call(w,{})}function i(){s.on("zoom",null)}return{update:a,destroy:i,pointer:$t}}const DT=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Fi=e=>({x:e.x,y:e.y,zoom:e.k}),ml=({x:e,y:t,zoom:n})=>Di.translate(e,t).scale(n),Mr=(e,t)=>e.target.closest(`.${t}`),Nx=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),pl=(e,t=0,n=()=>{})=>{const r=typeof t=="number"&&t>0;return r||n(),r?e.transition().duration(t).on("end",n):e},Ex=e=>{const t=e.ctrlKey&&xa()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function MT({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:s,panOnScrollSpeed:a,zoomOnPinch:i,onPanZoomStart:l,onPanZoom:c,onPanZoomEnd:d}){return u=>{if(Mr(u,t))return!1;u.preventDefault(),u.stopImmediatePropagation();const f=n.property("__zoom").k||1;if(u.ctrlKey&&i){const v=$t(u),b=Ex(u),w=f*Math.pow(2,b);r.scaleTo(n,w,v,u);return}const m=u.deltaMode===1?20:1;let p=s===cr.Vertical?0:u.deltaX*m,g=s===cr.Horizontal?0:u.deltaY*m;!xa()&&u.shiftKey&&s!==cr.Vertical&&(p=u.deltaY*m,g=0),r.translateBy(n,-(p/f)*a,-(g/f)*a,{internal:!0});const h=Fi(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,l==null||l(u,h)),e.isPanScrolling&&(c==null||c(u,h),e.panScrollTimeout=setTimeout(()=>{d==null||d(u,h),e.isPanScrolling=!1},150))}}function kT({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,s){if(!t&&r.type==="wheel"&&!r.ctrlKey||Mr(r,e))return null;r.preventDefault(),n.call(this,r,s)}}function OT({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{var a,i,l;if((a=r.sourceEvent)!=null&&a.internal)return;const s=Fi(r.transform);e.mouseButton=((i=r.sourceEvent)==null?void 0:i.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=s,((l=r.sourceEvent)==null?void 0:l.type)==="mousedown"&&t(!0),n&&(n==null||n(r.sourceEvent,s))}}function TT({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:s}){return a=>{var i,l;e.usedRightMouseButton=!!(n&&Nx(t,e.mouseButton??0)),(i=a.sourceEvent)!=null&&i.sync||r([a.transform.x,a.transform.y,a.transform.k]),s&&!((l=a.sourceEvent)!=null&&l.internal)&&(s==null||s(a.sourceEvent,Fi(a.transform)))}}function FT({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:s,onPaneContextMenu:a}){return i=>{var l;if(!((l=i.sourceEvent)!=null&&l.internal)&&(e.isZoomingOrPanning=!1,a&&Nx(t,e.mouseButton??0)&&!e.usedRightMouseButton&&i.sourceEvent&&a(i.sourceEvent),e.usedRightMouseButton=!1,r(!1),s&&DT(e.prevViewport,i.transform))){const c=Fi(i.transform);e.prevViewport=c,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{s==null||s(i.sourceEvent,c)},n?150:0)}}}function _T({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:s,zoomOnDoubleClick:a,userSelectionActive:i,noWheelClassName:l,noPanClassName:c,lib:d}){return u=>{var g;const f=e||t,m=n&&u.ctrlKey;if(u.button===1&&u.type==="mousedown"&&(Mr(u,`${d}-flow__node`)||Mr(u,`${d}-flow__edge`)))return!0;if(!r&&!f&&!s&&!a&&!n||i||Mr(u,l)&&u.type==="wheel"||Mr(u,c)&&(u.type!=="wheel"||s&&u.type==="wheel"&&!e)||!n&&u.ctrlKey&&u.type==="wheel")return!1;if(!n&&u.type==="touchstart"&&((g=u.touches)==null?void 0:g.length)>1)return u.preventDefault(),!1;if(!f&&!s&&!m&&u.type==="wheel"||!r&&(u.type==="mousedown"||u.type==="touchstart")||Array.isArray(r)&&!r.includes(u.button)&&u.type==="mousedown")return!1;const p=Array.isArray(r)&&r.includes(u.button)||!u.button||u.button<=1;return(!u.ctrlKey||u.type==="wheel")&&p}}function PT({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:r,translateExtent:s,viewport:a,onPanZoom:i,onPanZoomStart:l,onPanZoomEnd:c,onDraggingChange:d}){const u={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},f=e.getBoundingClientRect(),m=Yg().clickDistance(!Bt(r)||r<0?0:r).scaleExtent([t,n]).translateExtent(s),p=bt(e).call(m);j({x:a.x,y:a.y,zoom:Ur(a.zoom,t,n)},[[0,0],[f.width,f.height]],s);const g=p.on("wheel.zoom"),h=p.on("dblclick.zoom");m.wheelDelta(Ex);function v($,P){return p?new Promise(C=>{m==null||m.transform(pl(p,P==null?void 0:P.duration,()=>C(!0)),$)}):Promise.resolve(!1)}function b({noWheelClassName:$,noPanClassName:P,onPaneContextMenu:C,userSelectionActive:T,panOnScroll:D,panOnDrag:_,panOnScrollMode:F,panOnScrollSpeed:k,preventScrolling:R,zoomOnPinch:H,zoomOnScroll:B,zoomOnDoubleClick:G,zoomActivationKeyPressed:z,lib:Z,onTransformChange:q}){T&&!u.isZoomingOrPanning&&w();const U=D&&!z&&!T?MT({zoomPanValues:u,noWheelClassName:$,d3Selection:p,d3Zoom:m,panOnScrollMode:F,panOnScrollSpeed:k,zoomOnPinch:H,onPanZoomStart:l,onPanZoom:i,onPanZoomEnd:c}):kT({noWheelClassName:$,preventScrolling:R,d3ZoomHandler:g});if(p.on("wheel.zoom",U,{passive:!1}),!T){const K=OT({zoomPanValues:u,onDraggingChange:d,onPanZoomStart:l});m.on("start",K);const ee=TT({zoomPanValues:u,panOnDrag:_,onPaneContextMenu:!!C,onPanZoom:i,onTransformChange:q});m.on("zoom",ee);const W=FT({zoomPanValues:u,panOnDrag:_,panOnScroll:D,onPaneContextMenu:C,onPanZoomEnd:c,onDraggingChange:d});m.on("end",W)}const Q=_T({zoomActivationKeyPressed:z,panOnDrag:_,zoomOnScroll:B,panOnScroll:D,zoomOnDoubleClick:G,zoomOnPinch:H,userSelectionActive:T,noPanClassName:P,noWheelClassName:$,lib:Z});m.filter(Q),G?p.on("dblclick.zoom",h):p.on("dblclick.zoom",null)}function w(){m.on("zoom",null)}async function j($,P,C){const T=ml($),D=m==null?void 0:m.constrain()(T,P,C);return D&&await v(D),new Promise(_=>_(D))}async function N($,P){const C=ml($);return await v(C,P),new Promise(T=>T(C))}function S($){if(p){const P=ml($),C=p.property("__zoom");(C.k!==$.zoom||C.x!==$.x||C.y!==$.y)&&(m==null||m.transform(p,P,null,{sync:!0}))}}function E(){const $=p?Kg(p.node()):{x:0,y:0,k:1};return{x:$.x,y:$.y,zoom:$.k}}function I($,P){return p?new Promise(C=>{m==null||m.scaleTo(pl(p,P==null?void 0:P.duration,()=>C(!0)),$)}):Promise.resolve(!1)}function A($,P){return p?new Promise(C=>{m==null||m.scaleBy(pl(p,P==null?void 0:P.duration,()=>C(!0)),$)}):Promise.resolve(!1)}function M($){m==null||m.scaleExtent($)}function O($){m==null||m.translateExtent($)}function L($){const P=!Bt($)||$<0?0:$;m==null||m.clickDistance(P)}return{update:b,destroy:w,setViewport:N,setViewportConstrained:j,getViewport:E,scaleTo:I,scaleBy:A,setScaleExtent:M,setTranslateExtent:O,syncViewport:S,setClickDistance:L}}var Ps;(function(e){e.Line="line",e.Handle="handle"})(Ps||(Ps={}));function LT({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:s,affectsY:a}){const i=e-t,l=n-r,c=[i>0?1:i<0?-1:0,l>0?1:l<0?-1:0];return i&&s&&(c[0]=c[0]*-1),l&&a&&(c[1]=c[1]*-1),c}function $T(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),r=e.includes("left"),s=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:r,affectsY:s}}function An(e,t){return Math.max(0,t-e)}function Dn(e,t){return Math.max(0,e-t)}function Bo(e,t,n){return Math.max(0,t-e,e-n)}function R0(e,t){return e?!t:t}function RT(e,t,n,r,s,a,i,l){let{affectsX:c,affectsY:d}=t;const{isHorizontal:u,isVertical:f}=t,m=u&&f,{xSnapped:p,ySnapped:g}=n,{minWidth:h,maxWidth:v,minHeight:b,maxHeight:w}=r,{x:j,y:N,width:S,height:E,aspectRatio:I}=e;let A=Math.floor(u?p-e.pointerX:0),M=Math.floor(f?g-e.pointerY:0);const O=S+(c?-A:A),L=E+(d?-M:M),$=-a[0]*S,P=-a[1]*E;let C=Bo(O,h,v),T=Bo(L,b,w);if(i){let F=0,k=0;c&&A<0?F=An(j+A+$,i[0][0]):!c&&A>0&&(F=Dn(j+O+$,i[1][0])),d&&M<0?k=An(N+M+P,i[0][1]):!d&&M>0&&(k=Dn(N+L+P,i[1][1])),C=Math.max(C,F),T=Math.max(T,k)}if(l){let F=0,k=0;c&&A>0?F=Dn(j+A,l[0][0]):!c&&A<0&&(F=An(j+O,l[1][0])),d&&M>0?k=Dn(N+M,l[0][1]):!d&&M<0&&(k=An(N+L,l[1][1])),C=Math.max(C,F),T=Math.max(T,k)}if(s){if(u){const F=Bo(O/I,b,w)*I;if(C=Math.max(C,F),i){let k=0;!c&&!d||c&&!d&&m?k=Dn(N+P+O/I,i[1][1])*I:k=An(N+P+(c?A:-A)/I,i[0][1])*I,C=Math.max(C,k)}if(l){let k=0;!c&&!d||c&&!d&&m?k=An(N+O/I,l[1][1])*I:k=Dn(N+(c?A:-A)/I,l[0][1])*I,C=Math.max(C,k)}}if(f){const F=Bo(L*I,h,v)/I;if(T=Math.max(T,F),i){let k=0;!c&&!d||d&&!c&&m?k=Dn(j+L*I+$,i[1][0])/I:k=An(j+(d?M:-M)*I+$,i[0][0])/I,T=Math.max(T,k)}if(l){let k=0;!c&&!d||d&&!c&&m?k=An(j+L*I,l[1][0])/I:k=Dn(j+(d?M:-M)*I,l[0][0])/I,T=Math.max(T,k)}}}M=M+(M<0?T:-T),A=A+(A<0?C:-C),s&&(m?O>L*I?M=(R0(c,d)?-A:A)/I:A=(R0(c,d)?-M:M)*I:u?(M=A/I,d=c):(A=M*I,c=d));const D=c?j+A:j,_=d?N+M:N;return{width:S+(c?-A:A),height:E+(d?-M:M),x:a[0]*A*(c?-1:1)+D,y:a[1]*M*(d?-1:1)+_}}const Sx={width:0,height:0,x:0,y:0},VT={...Sx,pointerX:0,pointerY:0,aspectRatio:1};function BT(e){return[[0,0],[e.measured.width,e.measured.height]]}function zT(e,t,n){const r=t.position.x+e.position.x,s=t.position.y+e.position.y,a=e.measured.width??0,i=e.measured.height??0,l=n[0]*a,c=n[1]*i;return[[r-l,s-c],[r+a-l,s+i-c]]}function HT({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:s}){const a=bt(e);function i({controlPosition:c,boundaries:d,keepAspectRatio:u,onResizeStart:f,onResize:m,onResizeEnd:p,shouldResize:g}){let h={...Sx},v={...VT};const b=$T(c);let w,j=[],N,S,E;const I=_g().on("start",A=>{const{nodeLookup:M,transform:O,snapGrid:L,snapToGrid:$,nodeOrigin:P}=n();if(w=M.get(t),!w)return;const{xSnapped:C,ySnapped:T}=_s(A.sourceEvent,{transform:O,snapGrid:L,snapToGrid:$});h={width:w.measured.width??0,height:w.measured.height??0,x:w.position.x??0,y:w.position.y??0},v={...h,pointerX:C,pointerY:T,aspectRatio:h.width/h.height},N=void 0,w.parentId&&(w.extent==="parent"||w.expandParent)&&(N=M.get(w.parentId),S=N&&w.extent==="parent"?BT(N):void 0),j=[],E=void 0;for(const[D,_]of M)if(_.parentId===t&&(j.push({id:D,position:{..._.position},extent:_.extent}),_.extent==="parent"||_.expandParent)){const F=zT(_,w,_.origin??P);E?E=[[Math.min(F[0][0],E[0][0]),Math.min(F[0][1],E[0][1])],[Math.max(F[1][0],E[1][0]),Math.max(F[1][1],E[1][1])]]:E=F}f==null||f(A,{...h})}).on("drag",A=>{const{transform:M,snapGrid:O,snapToGrid:L,nodeOrigin:$}=n(),P=_s(A.sourceEvent,{transform:M,snapGrid:O,snapToGrid:L}),C=[];if(!w)return;const{x:T,y:D,width:_,height:F}=h,k={},R=w.origin??$,{width:H,height:B,x:G,y:z}=RT(v,b,P,d,u,R,S,E),Z=H!==_,q=B!==F,V=G!==T&&Z,U=z!==D&&q;if(!V&&!U&&!Z&&!q)return;if((V||U||R[0]===1||R[1]===1)&&(k.x=V?G:h.x,k.y=U?z:h.y,h.x=k.x,h.y=k.y,j.length>0)){const W=G-T,ne=z-D;for(const ue of j)ue.position={x:ue.position.x-W+R[0]*(H-_),y:ue.position.y-ne+R[1]*(B-F)},C.push(ue)}if((Z||q)&&(k.width=Z?H:h.width,k.height=q?B:h.height,h.width=k.width,h.height=k.height),N&&w.expandParent){const W=R[0]*(k.width??0);k.x&&k.x<W&&(h.x=W,v.x=v.x-(k.x-W));const ne=R[1]*(k.height??0);k.y&&k.y<ne&&(h.y=ne,v.y=v.y-(k.y-ne))}const Q=LT({width:h.width,prevWidth:_,height:h.height,prevHeight:F,affectsX:b.affectsX,affectsY:b.affectsY}),K={...h,direction:Q};(g==null?void 0:g(A,K))!==!1&&(m==null||m(A,K),r(k,C))}).on("end",A=>{p==null||p(A,{...h}),s==null||s()});a.call(I)}function l(){a.on(".drag",null)}return{update:i,destroy:l}}const{useDebugValue:ZT}=x,{useSyncExternalStoreWithSelector:UT}=gv,WT=e=>e;function Cx(e,t=WT,n){const r=UT(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return ZT(r),r}const V0=(e,t)=>{const n=Bm(e),r=(s,a=t)=>Cx(n,s,a);return Object.assign(r,n),r},GT=(e,t)=>e?V0(e,t):V0;function Oe(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,s]of e)if(!Object.is(s,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}const _i=y.createContext(null),qT=_i.Provider,Ix=jn.error001();function me(e,t){const n=y.useContext(_i);if(n===null)throw new Error(Ix);return Cx(n,e,t)}function Ae(){const e=y.useContext(_i);if(e===null)throw new Error(Ix);return y.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const B0={display:"none"},KT={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Ax="react-flow__node-desc",Dx="react-flow__edge-desc",YT="react-flow__aria-live",XT=e=>e.ariaLiveMessage;function JT({rfId:e}){const t=me(XT);return o.jsx("div",{id:`${YT}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:KT,children:t})}function QT({rfId:e,disableKeyboardA11y:t}){return o.jsxs(o.Fragment,{children:[o.jsxs("div",{id:`${Ax}-${e}`,style:B0,children:["Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),o.jsx("div",{id:`${Dx}-${e}`,style:B0,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!t&&o.jsx(JT,{rfId:e})]})}const eF=e=>e.userSelectionActive?"none":"all";function Nd({position:e="top-left",children:t,className:n,style:r,...s}){const a=me(eF),i=`${e}`.split("-");return o.jsx("div",{className:Re(["react-flow__panel",n,...i]),style:{...r,pointerEvents:a},...s,children:t})}function tF({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:o.jsx(Nd,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:o.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const nF=e=>{const t=[],n=[];for(const[,r]of e.nodeLookup)r.selected&&t.push(r.internals.userNode);for(const[,r]of e.edgeLookup)r.selected&&n.push(r);return{selectedNodes:t,selectedEdges:n}},zo=e=>e.id;function rF(e,t){return Oe(e.selectedNodes.map(zo),t.selectedNodes.map(zo))&&Oe(e.selectedEdges.map(zo),t.selectedEdges.map(zo))}function sF({onSelectionChange:e}){const t=Ae(),{selectedNodes:n,selectedEdges:r}=me(nF,rF);return y.useEffect(()=>{const s={nodes:n,edges:r};e==null||e(s),t.getState().onSelectionChangeHandlers.forEach(a=>a(s))},[n,r,e]),null}const oF=e=>!!e.onSelectionChangeHandlers;function aF({onSelectionChange:e}){const t=me(oF);return e||t?o.jsx(sF,{onSelectionChange:e}):null}const Mx=[0,0],iF={x:0,y:0,zoom:1},lF=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance"],z0=[...lF,"rfId"],cF=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),H0={translateExtent:Js,nodeOrigin:Mx,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function dF(e){const{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:s,setTranslateExtent:a,setNodeExtent:i,reset:l,setDefaultNodesAndEdges:c,setPaneClickDistance:d}=me(cF,Oe),u=Ae();y.useEffect(()=>(c(e.defaultNodes,e.defaultEdges),()=>{f.current=H0,l()}),[]);const f=y.useRef(H0);return y.useEffect(()=>{for(const m of z0){const p=e[m],g=f.current[m];p!==g&&(typeof e[m]>"u"||(m==="nodes"?t(p):m==="edges"?n(p):m==="minZoom"?r(p):m==="maxZoom"?s(p):m==="translateExtent"?a(p):m==="nodeExtent"?i(p):m==="paneClickDistance"?d(p):m==="fitView"?u.setState({fitViewOnInit:p}):m==="fitViewOptions"?u.setState({fitViewOnInitOptions:p}):u.setState({[m]:p})))}f.current=e},z0.map(m=>e[m])),null}function Z0(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function uF(e){var r;const[t,n]=y.useState(e==="system"?null:e);return y.useEffect(()=>{if(e!=="system"){n(e);return}const s=Z0(),a=()=>n(s!=null&&s.matches?"dark":"light");return a(),s==null||s.addEventListener("change",a),()=>{s==null||s.removeEventListener("change",a)}},[e]),t!==null?t:(r=Z0())!=null&&r.matches?"dark":"light"}const U0=typeof document<"u"?document:null;function no(e=null,t={target:U0,actInsideInputWithModifier:!0}){const[n,r]=y.useState(!1),s=y.useRef(!1),a=y.useRef(new Set([])),[i,l]=y.useMemo(()=>{if(e!==null){const d=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.split("+")),u=d.reduce((f,m)=>f.concat(...m),[]);return[d,u]}return[[],[]]},[e]);return y.useEffect(()=>{const c=(t==null?void 0:t.target)||U0;if(e!==null){const d=m=>{if(s.current=m.ctrlKey||m.metaKey||m.shiftKey,(!s.current||s.current&&!t.actInsideInputWithModifier)&&rc(m))return!1;const g=G0(m.code,l);a.current.add(m[g]),W0(i,a.current,!1)&&(m.preventDefault(),r(!0))},u=m=>{if((!s.current||s.current&&!t.actInsideInputWithModifier)&&rc(m))return!1;const g=G0(m.code,l);W0(i,a.current,!0)?(r(!1),a.current.clear()):a.current.delete(m[g]),m.key==="Meta"&&a.current.clear(),s.current=!1},f=()=>{a.current.clear(),r(!1)};return c==null||c.addEventListener("keydown",d),c==null||c.addEventListener("keyup",u),window.addEventListener("blur",f),window.addEventListener("contextmenu",f),()=>{c==null||c.removeEventListener("keydown",d),c==null||c.removeEventListener("keyup",u),window.removeEventListener("blur",f),window.removeEventListener("contextmenu",f)}}},[e,r]),n}function W0(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(s=>t.has(s)))}function G0(e,t){return t.includes(e)?"code":"key"}const fF=()=>{const e=Ae();return y.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[r,s,a],panZoom:i}=e.getState();return i?(await i.setViewport({x:t.x??r,y:t.y??s,zoom:t.zoom??a},{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},fitView:t=>{const{nodeLookup:n,minZoom:r,maxZoom:s,panZoom:a,domNode:i}=e.getState();if(!a||!i)return Promise.resolve(!1);const l=ec(n,t),{width:c,height:d}=Ti(i);return tc({nodes:l,width:c,height:d,minZoom:r,maxZoom:s,panZoom:a},t)},setCenter:async(t,n,r)=>{const{width:s,height:a,maxZoom:i,panZoom:l}=e.getState(),c=typeof(r==null?void 0:r.zoom)<"u"?r.zoom:i,d=s/2-t*c,u=a/2-n*c;return l?(await l.setViewport({x:d,y:u,zoom:c},{duration:r==null?void 0:r.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitBounds:async(t,n)=>{const{width:r,height:s,minZoom:a,maxZoom:i,panZoom:l}=e.getState(),c=yd(t,r,s,a,i,(n==null?void 0:n.padding)??.1);return l?(await l.setViewport(c,{duration:n==null?void 0:n.duration}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={snapToGrid:!0})=>{const{transform:r,snapGrid:s,domNode:a}=e.getState();if(!a)return t;const{x:i,y:l}=a.getBoundingClientRect(),c={x:t.x-i,y:t.y-l};return Co(c,r,n.snapToGrid,s)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:s,y:a}=r.getBoundingClientRect(),i=ix(t,n);return{x:i.x+s,y:i.y+a}}}),[])};function kx(e,t){const n=[],r=new Map,s=[];for(const a of e)if(a.type==="add"){s.push(a);continue}else if(a.type==="remove"||a.type==="replace")r.set(a.id,[a]);else{const i=r.get(a.id);i?i.push(a):r.set(a.id,[a])}for(const a of t){const i=r.get(a.id);if(!i){n.push(a);continue}if(i[0].type==="remove")continue;if(i[0].type==="replace"){n.push({...i[0].item});continue}const l={...a};for(const c of i)mF(c,l);n.push(l)}return s.length&&s.forEach(a=>{a.index!==void 0?n.splice(a.index,0,{...a.item}):n.push({...a.item})}),n}function mF(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured??(t.measured={}),t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&(t.width=e.dimensions.width,t.height=e.dimensions.height)),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function Ox(e,t){return kx(e,t)}function Tx(e,t){return kx(e,t)}function rr(e,t){return{id:e,type:"select",selected:t}}function kr(e,t=new Set,n=!1){const r=[];for(const[s,a]of e){const i=t.has(s);!(a.selected===void 0&&!i)&&a.selected!==i&&(n&&(a.selected=i),r.push(rr(a.id,i)))}return r}function q0({items:e=[],lookup:t}){var s;const n=[],r=new Map(e.map(a=>[a.id,a]));for(const[a,i]of e.entries()){const l=t.get(i.id),c=((s=l==null?void 0:l.internals)==null?void 0:s.userNode)??l;c!==void 0&&c!==i&&n.push({id:i.id,item:i,type:"replace"}),c===void 0&&n.push({item:i,type:"add",index:a})}for(const[a]of t)r.get(a)===void 0&&n.push({id:a,type:"remove"});return n}function K0(e){return{id:e.id,type:"remove"}}const Y0=e=>JO(e),pF=e=>ex(e);function Fx(e){return y.forwardRef(e)}const hF=typeof window<"u"?y.useLayoutEffect:y.useEffect;function X0(e){const[t,n]=y.useState(!1),[r]=y.useState(()=>gF(()=>n(!0)));return hF(()=>{if(!t){r.reset();return}const s=r.get();s.length&&(e(s),r.reset()),n(!1)},[t]),r}function gF(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const _x=y.createContext(null);function xF({children:e}){const t=Ae(),n=y.useCallback(l=>{const{nodes:c=[],setNodes:d,hasDefaultNodes:u,onNodesChange:f,nodeLookup:m}=t.getState();let p=c;for(const g of l)p=typeof g=="function"?g(p):g;u?d(p):f&&f(q0({items:p,lookup:m}))},[]),r=X0(n),s=y.useCallback(l=>{const{edges:c=[],setEdges:d,hasDefaultEdges:u,onEdgesChange:f,edgeLookup:m}=t.getState();let p=c;for(const g of l)p=typeof g=="function"?g(p):g;u?d(p):f&&f(q0({items:p,lookup:m}))},[]),a=X0(s),i=y.useMemo(()=>({nodeQueue:r,edgeQueue:a}),[]);return o.jsx(_x.Provider,{value:i,children:e})}function yF(){const e=y.useContext(_x);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const vF=e=>!!e.panZoom;function qn(){const e=fF(),t=Ae(),n=yF(),r=me(vF),s=y.useMemo(()=>{const a=f=>t.getState().nodeLookup.get(f),i=f=>{n.nodeQueue.push(f)},l=f=>{n.edgeQueue.push(f)},c=f=>{var b,w;const{nodeLookup:m,nodeOrigin:p}=t.getState(),g=Y0(f)?f:m.get(f.id),h=g.parentId?cx(g.position,g.measured,g.parentId,m,p):g.position,v={id:g.id,position:h,width:((b=g.measured)==null?void 0:b.width)??g.width,height:((w=g.measured)==null?void 0:w.height)??g.height,data:g.data};return Wr(v)},d=(f,m,p={replace:!1})=>{i(g=>g.map(h=>{if(h.id===f){const v=typeof m=="function"?m(h):m;return p.replace&&Y0(v)?v:{...h,...v}}return h}))},u=(f,m,p={replace:!1})=>{l(g=>g.map(h=>{if(h.id===f){const v=typeof m=="function"?m(h):m;return p.replace&&pF(v)?v:{...h,...v}}return h}))};return{getNodes:()=>t.getState().nodes.map(f=>({...f})),getNode:f=>{var m;return(m=a(f))==null?void 0:m.internals.userNode},getInternalNode:a,getEdges:()=>{const{edges:f=[]}=t.getState();return f.map(m=>({...m}))},getEdge:f=>t.getState().edgeLookup.get(f),setNodes:i,setEdges:l,addNodes:f=>{const m=Array.isArray(f)?f:[f];n.nodeQueue.push(p=>[...p,...m])},addEdges:f=>{const m=Array.isArray(f)?f:[f];n.edgeQueue.push(p=>[...p,...m])},toObject:()=>{const{nodes:f=[],edges:m=[],transform:p}=t.getState(),[g,h,v]=p;return{nodes:f.map(b=>({...b})),edges:m.map(b=>({...b})),viewport:{x:g,y:h,zoom:v}}},deleteElements:async({nodes:f=[],edges:m=[]})=>{const{nodes:p,edges:g,onNodesDelete:h,onEdgesDelete:v,triggerNodeChanges:b,triggerEdgeChanges:w,onDelete:j,onBeforeDelete:N}=t.getState(),{nodes:S,edges:E}=await nT({nodesToRemove:f,edgesToRemove:m,nodes:p,edges:g,onBeforeDelete:N}),I=E.length>0,A=S.length>0;if(I){const M=E.map(K0);v==null||v(E),w(M)}if(A){const M=S.map(K0);h==null||h(S),b(M)}return(A||I)&&(j==null||j({nodes:S,edges:E})),{deletedNodes:S,deletedEdges:E}},getIntersectingNodes:(f,m=!0,p)=>{const g=M0(f),h=g?f:c(f),v=p!==void 0;return h?(p||t.getState().nodes).filter(b=>{const w=t.getState().nodeLookup.get(b.id);if(w&&!g&&(b.id===f.id||!w.internals.positionAbsolute))return!1;const j=Wr(v?b:w),N=eo(j,h);return m&&N>0||N>=h.width*h.height}):[]},isNodeIntersecting:(f,m,p=!0)=>{const h=M0(f)?f:c(f);if(!h)return!1;const v=eo(h,m);return p&&v>0||v>=h.width*h.height},updateNode:d,updateNodeData:(f,m,p={replace:!1})=>{d(f,g=>{const h=typeof m=="function"?m(g):m;return p.replace?{...g,data:h}:{...g,data:{...g.data,...h}}},p)},updateEdge:u,updateEdgeData:(f,m,p={replace:!1})=>{u(f,g=>{const h=typeof m=="function"?m(g):m;return p.replace?{...g,data:h}:{...g,data:{...g.data,...h}}},p)},getNodesBounds:f=>{const{nodeLookup:m,nodeOrigin:p}=t.getState();return tT(f,{nodeLookup:m,nodeOrigin:p})},getHandleConnections:({type:f,id:m,nodeId:p})=>{var g;return Array.from(((g=t.getState().connectionLookup.get(`${p}-${f}-${m??null}`))==null?void 0:g.values())??[])}}},[]);return y.useMemo(()=>({...s,...e,viewportInitialized:r}),[r])}const J0=e=>e.selected,bF={actInsideInputWithModifier:!1},wF=typeof window<"u"?window:void 0;function jF({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=Ae(),{deleteElements:r}=qn(),s=no(e,bF),a=no(t,{target:wF});y.useEffect(()=>{if(s){const{edges:i,nodes:l}=n.getState();r({nodes:l.filter(J0),edges:i.filter(J0)}),n.setState({nodesSelectionActive:!1})}},[s]),y.useEffect(()=>{n.setState({multiSelectionActive:a})},[a])}function NF(e){const t=Ae();y.useEffect(()=>{const n=()=>{var s,a;if(!e.current)return!1;const r=Ti(e.current);(r.height===0||r.width===0)&&((a=(s=t.getState()).onError)==null||a.call(s,"004",jn.error004())),t.setState({width:r.width||500,height:r.height||500})};if(e.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(e.current),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}}},[])}const Pi={position:"absolute",width:"100%",height:"100%",top:0,left:0},EF=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function SF({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:s=.5,panOnScrollMode:a=cr.Free,zoomOnDoubleClick:i=!0,panOnDrag:l=!0,defaultViewport:c,translateExtent:d,minZoom:u,maxZoom:f,zoomActivationKeyCode:m,preventScrolling:p=!0,children:g,noWheelClassName:h,noPanClassName:v,onViewportChange:b,isControlledViewport:w,paneClickDistance:j}){const N=Ae(),S=y.useRef(null),{userSelectionActive:E,lib:I}=me(EF,Oe),A=no(m),M=y.useRef();NF(S);const O=y.useCallback(L=>{b==null||b({x:L[0],y:L[1],zoom:L[2]}),w||N.setState({transform:L})},[b,w]);return y.useEffect(()=>{if(S.current){M.current=PT({domNode:S.current,minZoom:u,maxZoom:f,translateExtent:d,viewport:c,paneClickDistance:j,onDraggingChange:C=>N.setState({paneDragging:C}),onPanZoomStart:(C,T)=>{const{onViewportChangeStart:D,onMoveStart:_}=N.getState();_==null||_(C,T),D==null||D(T)},onPanZoom:(C,T)=>{const{onViewportChange:D,onMove:_}=N.getState();_==null||_(C,T),D==null||D(T)},onPanZoomEnd:(C,T)=>{const{onViewportChangeEnd:D,onMoveEnd:_}=N.getState();_==null||_(C,T),D==null||D(T)}});const{x:L,y:$,zoom:P}=M.current.getViewport();return N.setState({panZoom:M.current,transform:[L,$,P],domNode:S.current.closest(".react-flow")}),()=>{var C;(C=M.current)==null||C.destroy()}}},[]),y.useEffect(()=>{var L;(L=M.current)==null||L.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:s,panOnScrollMode:a,zoomOnDoubleClick:i,panOnDrag:l,zoomActivationKeyPressed:A,preventScrolling:p,noPanClassName:v,userSelectionActive:E,noWheelClassName:h,lib:I,onTransformChange:O})},[e,t,n,r,s,a,i,l,A,p,v,E,h,I,O]),o.jsx("div",{className:"react-flow__renderer",ref:S,style:Pi,children:g})}const CF=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function IF(){const{userSelectionActive:e,userSelectionRect:t}=me(CF,Oe);return e&&t?o.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const hl=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},AF=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging});function DF({isSelecting:e,selectionKeyPressed:t,selectionMode:n=Qs.Full,panOnDrag:r,selectionOnDrag:s,onSelectionStart:a,onSelectionEnd:i,onPaneClick:l,onPaneContextMenu:c,onPaneScroll:d,onPaneMouseEnter:u,onPaneMouseMove:f,onPaneMouseLeave:m,children:p}){const g=y.useRef(null),h=Ae(),v=y.useRef(0),b=y.useRef(0),w=y.useRef(),j=y.useRef(new Map),{userSelectionActive:N,elementsSelectable:S,dragging:E}=me(AF,Oe),I=S&&(e||N),A=y.useRef(!1),M=y.useRef(!1),O=()=>{h.setState({userSelectionActive:!1,userSelectionRect:null}),v.current=0,b.current=0},L=F=>{if(A.current){A.current=!1;return}l==null||l(F),h.getState().resetSelectedElements(),h.setState({nodesSelectionActive:!1})},$=F=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){F.preventDefault();return}c==null||c(F)},P=d?F=>d(F):void 0,C=F=>{var z,Z,q,V;const{resetSelectedElements:k,domNode:R,edgeLookup:H}=h.getState();if(w.current=R==null?void 0:R.getBoundingClientRect(),!S||!e||F.button!==0||F.target!==g.current||!w.current)return;(Z=(z=F.target)==null?void 0:z.setPointerCapture)==null||Z.call(z,F.pointerId),M.current=!0,A.current=!1,j.current=new Map;for(const[U,Q]of H)j.current.set(Q.source,((q=j.current.get(Q.source))==null?void 0:q.add(U))||new Set([U])),j.current.set(Q.target,((V=j.current.get(Q.target))==null?void 0:V.add(U))||new Set([U]));const{x:B,y:G}=fn(F.nativeEvent,w.current);k(),h.setState({userSelectionRect:{width:0,height:0,startX:B,startY:G,x:B,y:G}}),a==null||a(F)},T=F=>{const{userSelectionRect:k,edgeLookup:R,transform:H,nodeLookup:B,triggerNodeChanges:G,triggerEdgeChanges:z}=h.getState();if(!w.current||!k)return;A.current=!0;const{x:Z,y:q}=fn(F.nativeEvent,w.current),{startX:V,startY:U}=k,Q={startX:V,startY:U,x:Z<V?Z:V,y:q<U?q:U,width:Math.abs(Z-V),height:Math.abs(q-U)},K=tx(B,Q,H,n===Qs.Partial,!0),ee=new Set,W=new Set;for(const ne of K){W.add(ne.id);const ue=j.current.get(ne.id);if(ue)for(const Te of ue)ee.add(Te)}if(v.current!==W.size){v.current=W.size;const ne=kr(B,W,!0);G(ne)}if(b.current!==ee.size){b.current=ee.size;const ne=kr(R,ee);z(ne)}h.setState({userSelectionRect:Q,userSelectionActive:!0,nodesSelectionActive:!1})},D=F=>{var R,H;if(F.button!==0||!M.current)return;(H=(R=F.target)==null?void 0:R.releasePointerCapture)==null||H.call(R,F.pointerId);const{userSelectionRect:k}=h.getState();!N&&k&&F.target===g.current&&(L==null||L(F)),v.current>0&&h.setState({nodesSelectionActive:!0}),O(),i==null||i(F),(t||s)&&(A.current=!1),M.current=!1},_=r===!0||Array.isArray(r)&&r.includes(0);return o.jsxs("div",{className:Re(["react-flow__pane",{draggable:_,dragging:E,selection:e}]),onClick:I?void 0:hl(L,g),onContextMenu:hl($,g),onWheel:hl(P,g),onPointerEnter:I?void 0:u,onPointerDown:I?C:f,onPointerMove:I?T:f,onPointerUp:I?D:void 0,onPointerLeave:m,ref:g,style:Pi,children:[p,o.jsx(IF,{})]})}function lc({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:s,unselectNodesAndEdges:a,multiSelectionActive:i,nodeLookup:l,onError:c}=t.getState(),d=l.get(e);if(!d){c==null||c("012",jn.error012(e));return}t.setState({nodesSelectionActive:!1}),d.selected?(n||d.selected&&i)&&(a({nodes:[d],edges:[]}),requestAnimationFrame(()=>{var u;return(u=r==null?void 0:r.current)==null?void 0:u.blur()})):s([e])}function Px({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:s,isSelectable:a,nodeClickDistance:i}){const l=Ae(),[c,d]=y.useState(!1),u=y.useRef();return y.useEffect(()=>{u.current=jT({getStoreItems:()=>l.getState(),onNodeMouseDown:f=>{lc({id:f,store:l,nodeRef:e})},onDragStart:()=>{d(!0)},onDragStop:()=>{d(!1)}})},[]),y.useEffect(()=>{var f,m;if(t)(f=u.current)==null||f.destroy();else if(e.current)return(m=u.current)==null||m.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:a,nodeId:s,nodeClickDistance:i}),()=>{var p;(p=u.current)==null||p.destroy()}},[n,r,t,a,e,s]),c}const MF=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function Lx(){const e=Ae();return y.useCallback(n=>{const{nodeExtent:r,snapToGrid:s,snapGrid:a,nodesDraggable:i,onError:l,updateNodePositions:c,nodeLookup:d,nodeOrigin:u}=e.getState(),f=new Map,m=MF(i),p=s?a[0]:5,g=s?a[1]:5,h=n.direction.x*p*n.factor,v=n.direction.y*g*n.factor;for(const[,b]of d){if(!m(b))continue;let w={x:b.internals.positionAbsolute.x+h,y:b.internals.positionAbsolute.y+v};s&&(w=Oi(w,a));const{position:j,positionAbsolute:N}=rx({nodeId:b.id,nextPosition:w,nodeLookup:d,nodeExtent:r,nodeOrigin:u,onError:l});b.position=j,b.internals.positionAbsolute=N,f.set(b.id,b)}c(f)},[])}const Ed=y.createContext(null),kF=Ed.Provider;Ed.Consumer;const Sd=()=>y.useContext(Ed),OF=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),TF=(e,t,n)=>r=>{const{connectionClickStartHandle:s,connectionMode:a,connection:i}=r,{fromHandle:l,toHandle:c,isValid:d}=i,u=(c==null?void 0:c.nodeId)===e&&(c==null?void 0:c.id)===t&&(c==null?void 0:c.type)===n;return{connectingFrom:(l==null?void 0:l.nodeId)===e&&(l==null?void 0:l.id)===t&&(l==null?void 0:l.type)===n,connectingTo:u,clickConnecting:(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.id)===t&&(s==null?void 0:s.type)===n,isPossibleEndHandle:a===Zr.Strict?(l==null?void 0:l.type)!==n:e!==(l==null?void 0:l.nodeId)||t!==(l==null?void 0:l.id),connectionInProcess:!!l,valid:u&&d}};function FF({type:e="source",position:t=re.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:s=!0,isConnectableEnd:a=!0,id:i,onConnect:l,children:c,className:d,onMouseDown:u,onTouchStart:f,...m},p){var C,T;const g=i||null,h=e==="target",v=Ae(),b=Sd(),{connectOnClick:w,noPanClassName:j,rfId:N}=me(OF,Oe),{connectingFrom:S,connectingTo:E,clickConnecting:I,isPossibleEndHandle:A,connectionInProcess:M,valid:O}=me(TF(b,g,e),Oe);b||(T=(C=v.getState()).onError)==null||T.call(C,"010",jn.error010());const L=D=>{const{defaultEdgeOptions:_,onConnect:F,hasDefaultEdges:k}=v.getState(),R={..._,...D};if(k){const{edges:H,setEdges:B}=v.getState();B(px(R,H))}F==null||F(R),l==null||l(R)},$=D=>{if(!b)return;const _=ux(D.nativeEvent);if(s&&(_&&D.button===0||!_)){const F=v.getState();ic.onPointerDown(D.nativeEvent,{autoPanOnConnect:F.autoPanOnConnect,connectionMode:F.connectionMode,connectionRadius:F.connectionRadius,domNode:F.domNode,nodeLookup:F.nodeLookup,lib:F.lib,isTarget:h,handleId:g,nodeId:b,flowId:F.rfId,panBy:F.panBy,cancelConnection:F.cancelConnection,onConnectStart:F.onConnectStart,onConnectEnd:F.onConnectEnd,updateConnection:F.updateConnection,onConnect:L,isValidConnection:n||F.isValidConnection,getTransform:()=>v.getState().transform,getFromHandle:()=>v.getState().connection.fromHandle,autoPanSpeed:F.autoPanSpeed})}_?u==null||u(D):f==null||f(D)},P=D=>{const{onClickConnectStart:_,onClickConnectEnd:F,connectionClickStartHandle:k,connectionMode:R,isValidConnection:H,lib:B,rfId:G,nodeLookup:z,connection:Z}=v.getState();if(!b||!k&&!s)return;if(!k){_==null||_(D.nativeEvent,{nodeId:b,handleId:g,handleType:e}),v.setState({connectionClickStartHandle:{nodeId:b,type:e,id:g}});return}const q=dx(D.target),V=n||H,{connection:U,isValid:Q}=ic.isValid(D.nativeEvent,{handle:{nodeId:b,id:g,type:e},connectionMode:R,fromNodeId:k.nodeId,fromHandleId:k.id||null,fromType:k.type,isValidConnection:V,flowId:G,doc:q,lib:B,nodeLookup:z});Q&&U&&L(U);const K=structuredClone(Z);delete K.inProgress,K.toPosition=K.toHandle?K.toHandle.position:null,F==null||F(D,K),v.setState({connectionClickStartHandle:null})};return o.jsx("div",{"data-handleid":g,"data-nodeid":b,"data-handlepos":t,"data-id":`${N}-${b}-${g}-${e}`,className:Re(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",j,d,{source:!h,target:h,connectable:r,connectablestart:s,connectableend:a,clickconnecting:I,connectingfrom:S,connectingto:E,valid:O,connectionindicator:r&&(!M||A)&&(M?a:s)}]),onMouseDown:$,onTouchStart:$,onClick:w?P:void 0,ref:p,...m,children:c})}const ro=y.memo(Fx(FF));function _F({data:e,isConnectable:t,sourcePosition:n=re.Bottom}){return o.jsxs(o.Fragment,{children:[e==null?void 0:e.label,o.jsx(ro,{type:"source",position:n,isConnectable:t})]})}function PF({data:e,isConnectable:t,targetPosition:n=re.Top,sourcePosition:r=re.Bottom}){return o.jsxs(o.Fragment,{children:[o.jsx(ro,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,o.jsx(ro,{type:"source",position:r,isConnectable:t})]})}function LF(){return null}function $F({data:e,isConnectable:t,targetPosition:n=re.Top}){return o.jsxs(o.Fragment,{children:[o.jsx(ro,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]})}const ya={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},Q0={input:_F,default:PF,output:$F,group:LF};function RF(e){var t,n,r,s;return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??((t=e.style)==null?void 0:t.width),height:e.height??e.initialHeight??((n=e.style)==null?void 0:n.height)}:{width:e.width??((r=e.style)==null?void 0:r.width),height:e.height??((s=e.style)==null?void 0:s.height)}}const VF=e=>{const{width:t,height:n,x:r,y:s}=ls(e.nodeLookup,{filter:a=>!!a.selected});return{width:Bt(t)?t:null,height:Bt(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${s}px)`}};function BF({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=Ae(),{width:s,height:a,transformString:i,userSelectionActive:l}=me(VF,Oe),c=Lx(),d=y.useRef(null);if(y.useEffect(()=>{var m;n||(m=d.current)==null||m.focus({preventScroll:!0})},[n]),Px({nodeRef:d}),l||!s||!a)return null;const u=e?m=>{const p=r.getState().nodes.filter(g=>g.selected);e(m,p)}:void 0,f=m=>{Object.prototype.hasOwnProperty.call(ya,m.key)&&c({direction:ya[m.key],factor:m.shiftKey?4:1})};return o.jsx("div",{className:Re(["react-flow__nodesselection","react-flow__container",t]),style:{transform:i},children:o.jsx("div",{ref:d,className:"react-flow__nodesselection-rect",onContextMenu:u,tabIndex:n?void 0:-1,onKeyDown:n?void 0:f,style:{width:s,height:a}})})}const em=typeof window<"u"?window:void 0,zF=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function $x({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:a,onPaneScroll:i,paneClickDistance:l,deleteKeyCode:c,selectionKeyCode:d,selectionOnDrag:u,selectionMode:f,onSelectionStart:m,onSelectionEnd:p,multiSelectionKeyCode:g,panActivationKeyCode:h,zoomActivationKeyCode:v,elementsSelectable:b,zoomOnScroll:w,zoomOnPinch:j,panOnScroll:N,panOnScrollSpeed:S,panOnScrollMode:E,zoomOnDoubleClick:I,panOnDrag:A,defaultViewport:M,translateExtent:O,minZoom:L,maxZoom:$,preventScrolling:P,onSelectionContextMenu:C,noWheelClassName:T,noPanClassName:D,disableKeyboardA11y:_,onViewportChange:F,isControlledViewport:k}){const{nodesSelectionActive:R,userSelectionActive:H}=me(zF),B=no(d,{target:em}),G=no(h,{target:em}),z=G||A,Z=G||N,q=u&&z!==!0,V=B||H||q;return jF({deleteKeyCode:c,multiSelectionKeyCode:g}),o.jsx(SF,{onPaneContextMenu:a,elementsSelectable:b,zoomOnScroll:w,zoomOnPinch:j,panOnScroll:Z,panOnScrollSpeed:S,panOnScrollMode:E,zoomOnDoubleClick:I,panOnDrag:!B&&z,defaultViewport:M,translateExtent:O,minZoom:L,maxZoom:$,zoomActivationKeyCode:v,preventScrolling:P,noWheelClassName:T,noPanClassName:D,onViewportChange:F,isControlledViewport:k,paneClickDistance:l,children:o.jsxs(DF,{onSelectionStart:m,onSelectionEnd:p,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:a,onPaneScroll:i,panOnDrag:z,isSelecting:!!V,selectionMode:f,selectionKeyPressed:B,selectionOnDrag:q,children:[e,R&&o.jsx(BF,{onSelectionContextMenu:C,noPanClassName:D,disableKeyboardA11y:_})]})})}$x.displayName="FlowRenderer";const HF=y.memo($x),ZF=e=>t=>e?tx(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function UF(e){return me(y.useCallback(ZF(e),[e]),Oe)}const WF=e=>e.updateNodeInternals;function GF(){const e=me(WF),[t]=y.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(s=>{const a=s.target.getAttribute("data-id");r.set(a,{id:a,nodeElement:s.target,force:!0})}),e(r)}));return y.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function qF({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){const s=Ae(),a=y.useRef(null),i=y.useRef(null),l=y.useRef(e.sourcePosition),c=y.useRef(e.targetPosition),d=y.useRef(t),u=n&&!!e.internals.handleBounds;return y.useEffect(()=>{a.current&&!e.hidden&&(!u||i.current!==a.current)&&(i.current&&(r==null||r.unobserve(i.current)),r==null||r.observe(a.current),i.current=a.current)},[u,e.hidden]),y.useEffect(()=>()=>{i.current&&(r==null||r.unobserve(i.current),i.current=null)},[]),y.useEffect(()=>{if(a.current){const f=d.current!==t,m=l.current!==e.sourcePosition,p=c.current!==e.targetPosition;(f||m||p)&&(d.current=t,l.current=e.sourcePosition,c.current=e.targetPosition,s.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:a.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),a}function KF({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:s,onContextMenu:a,onDoubleClick:i,nodesDraggable:l,elementsSelectable:c,nodesConnectable:d,nodesFocusable:u,resizeObserver:f,noDragClassName:m,noPanClassName:p,disableKeyboardA11y:g,rfId:h,nodeTypes:v,nodeExtent:b,nodeClickDistance:w,onError:j}){const{node:N,internals:S,isParent:E}=me(U=>{const Q=U.nodeLookup.get(e),K=U.parentLookup.has(e);return{node:Q,internals:Q.internals,isParent:K}},Oe);let I=N.type||"default",A=(v==null?void 0:v[I])||Q0[I];A===void 0&&(j==null||j("003",jn.error003(I)),I="default",A=Q0.default);const M=!!(N.draggable||l&&typeof N.draggable>"u"),O=!!(N.selectable||c&&typeof N.selectable>"u"),L=!!(N.connectable||d&&typeof N.connectable>"u"),$=!!(N.focusable||u&&typeof N.focusable>"u"),P=Ae(),C=lx(N),T=qF({node:N,nodeType:I,hasDimensions:C,resizeObserver:f}),D=Px({nodeRef:T,disabled:N.hidden||!M,noDragClassName:m,handleSelector:N.dragHandle,nodeId:e,isSelectable:O,nodeClickDistance:w}),_=Lx();if(N.hidden)return null;const F=Nn(N),k=RF(N),R=O||M||t||n||r||s,H=n?U=>n(U,{...S.userNode}):void 0,B=r?U=>r(U,{...S.userNode}):void 0,G=s?U=>s(U,{...S.userNode}):void 0,z=a?U=>a(U,{...S.userNode}):void 0,Z=i?U=>i(U,{...S.userNode}):void 0,q=U=>{const{selectNodesOnDrag:Q,nodeDragThreshold:K}=P.getState();O&&(!Q||!M||K>0)&&lc({id:e,store:P,nodeRef:T}),t&&t(U,{...S.userNode})},V=U=>{if(!(rc(U.nativeEvent)||g))if(Xg.includes(U.key)&&O){const Q=U.key==="Escape";lc({id:e,store:P,unselect:Q,nodeRef:T})}else M&&N.selected&&Object.prototype.hasOwnProperty.call(ya,U.key)&&(P.setState({ariaLiveMessage:`Moved selected node ${U.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~S.positionAbsolute.x}, y: ${~~S.positionAbsolute.y}`}),_({direction:ya[U.key],factor:U.shiftKey?4:1}))};return o.jsx("div",{className:Re(["react-flow__node",`react-flow__node-${I}`,{[p]:M},N.className,{selected:N.selected,selectable:O,parent:E,draggable:M,dragging:D}]),ref:T,style:{zIndex:S.z,transform:`translate(${S.positionAbsolute.x}px,${S.positionAbsolute.y}px)`,pointerEvents:R?"all":"none",visibility:C?"visible":"hidden",...N.style,...k},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:H,onMouseMove:B,onMouseLeave:G,onContextMenu:z,onClick:q,onDoubleClick:Z,onKeyDown:$?V:void 0,tabIndex:$?0:void 0,role:$?"button":void 0,"aria-describedby":g?void 0:`${Ax}-${h}`,"aria-label":N.ariaLabel,children:o.jsx(kF,{value:e,children:o.jsx(A,{id:e,data:N.data,type:I,positionAbsoluteX:S.positionAbsolute.x,positionAbsoluteY:S.positionAbsolute.y,selected:N.selected,selectable:O,draggable:M,deletable:N.deletable??!0,isConnectable:L,sourcePosition:N.sourcePosition,targetPosition:N.targetPosition,dragging:D,dragHandle:N.dragHandle,zIndex:S.z,parentId:N.parentId,...F})})})}const YF=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function Rx(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:s,onError:a}=me(YF,Oe),i=UF(e.onlyRenderVisibleElements),l=GF();return o.jsx("div",{className:"react-flow__nodes",style:Pi,children:i.map(c=>o.jsx(KF,{id:c,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:l,nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:s,nodeClickDistance:e.nodeClickDistance,onError:a},c))})}Rx.displayName="NodeRenderer";const XF=y.memo(Rx);function JF(e){return me(y.useCallback(n=>{if(!e)return n.edges.map(s=>s.id);const r=[];if(n.width&&n.height)for(const s of n.edges){const a=n.nodeLookup.get(s.source),i=n.nodeLookup.get(s.target);a&&i&&aT({sourceNode:a,targetNode:i,width:n.width,height:n.height,transform:n.transform})&&r.push(s.id)}return r},[e]),Oe)}const QF=({color:e="none",strokeWidth:t=1})=>o.jsx("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),e_=({color:e="none",strokeWidth:t=1})=>o.jsx("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),tm={[Jt.Arrow]:QF,[Jt.ArrowClosed]:e_};function t_(e){const t=Ae();return y.useMemo(()=>{var s,a;return Object.prototype.hasOwnProperty.call(tm,e)?tm[e]:((a=(s=t.getState()).onError)==null||a.call(s,"009",jn.error009(e)),null)},[e])}const n_=({id:e,type:t,color:n,width:r=12.5,height:s=12.5,markerUnits:a="strokeWidth",strokeWidth:i,orient:l="auto-start-reverse"})=>{const c=t_(t);return c?o.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:a,orient:l,refX:"0",refY:"0",children:o.jsx(c,{color:n,strokeWidth:i})}):null},Vx=({defaultColor:e,rfId:t})=>{const n=me(a=>a.edges),r=me(a=>a.defaultEdgeOptions),s=y.useMemo(()=>mT(n,{id:t,defaultColor:e,defaultMarkerStart:r==null?void 0:r.markerStart,defaultMarkerEnd:r==null?void 0:r.markerEnd}),[n,r,t,e]);return s.length?o.jsx("svg",{className:"react-flow__marker",children:o.jsx("defs",{children:s.map(a=>o.jsx(n_,{id:a.id,type:a.type,color:a.color,width:a.width,height:a.height,markerUnits:a.markerUnits,strokeWidth:a.strokeWidth,orient:a.orient},a.id))})}):null};Vx.displayName="MarkerDefinitions";var r_=y.memo(Vx);function Bx({x:e,y:t,label:n,labelStyle:r={},labelShowBg:s=!0,labelBgStyle:a={},labelBgPadding:i=[2,4],labelBgBorderRadius:l=2,children:c,className:d,...u}){const[f,m]=y.useState({x:1,y:0,width:0,height:0}),p=Re(["react-flow__edge-textwrapper",d]),g=y.useRef(null);return y.useEffect(()=>{if(g.current){const h=g.current.getBBox();m({x:h.x,y:h.y,width:h.width,height:h.height})}},[n]),typeof n>"u"||!n?null:o.jsxs("g",{transform:`translate(${e-f.width/2} ${t-f.height/2})`,className:p,visibility:f.width?"visible":"hidden",...u,children:[s&&o.jsx("rect",{width:f.width+2*i[0],x:-i[0],y:-i[1],height:f.height+2*i[1],className:"react-flow__edge-textbg",style:a,rx:l,ry:l}),o.jsx("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:g,style:r,children:n}),c]})}Bx.displayName="EdgeText";const s_=y.memo(Bx);function cs({id:e,path:t,labelX:n,labelY:r,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:d,style:u,markerEnd:f,markerStart:m,className:p,interactionWidth:g=20}){return o.jsxs(o.Fragment,{children:[o.jsx("path",{id:e,style:u,d:t,fill:"none",className:Re(["react-flow__edge-path",p]),markerEnd:f,markerStart:m}),g&&o.jsx("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:g,className:"react-flow__edge-interaction"}),s&&Bt(n)&&Bt(r)?o.jsx(s_,{x:n,y:r,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:d}):null]})}function nm({pos:e,x1:t,y1:n,x2:r,y2:s}){return e===re.Left||e===re.Right?[.5*(t+r),n]:[t,.5*(n+s)]}function zx({sourceX:e,sourceY:t,sourcePosition:n=re.Bottom,targetX:r,targetY:s,targetPosition:a=re.Top}){const[i,l]=nm({pos:n,x1:e,y1:t,x2:r,y2:s}),[c,d]=nm({pos:a,x1:r,y1:s,x2:e,y2:t}),[u,f,m,p]=fx({sourceX:e,sourceY:t,targetX:r,targetY:s,sourceControlX:i,sourceControlY:l,targetControlX:c,targetControlY:d});return[`M${e},${t} C${i},${l} ${c},${d} ${r},${s}`,u,f,m,p]}function Hx(e){return y.memo(({id:t,sourceX:n,sourceY:r,targetX:s,targetY:a,sourcePosition:i=re.Bottom,targetPosition:l=re.Top,label:c,labelStyle:d,labelShowBg:u,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:p,style:g,markerEnd:h,markerStart:v,interactionWidth:b})=>{const[w,j,N]=zx({sourceX:n,sourceY:r,sourcePosition:i,targetX:s,targetY:a,targetPosition:l}),S=e.isInternal?void 0:t;return o.jsx(cs,{id:S,path:w,labelX:j,labelY:N,label:c,labelStyle:d,labelShowBg:u,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:p,style:g,markerEnd:h,markerStart:v,interactionWidth:b})})}const o_=Hx({isInternal:!1}),Zx=Hx({isInternal:!0});o_.displayName="SimpleBezierEdge";Zx.displayName="SimpleBezierEdgeInternal";function Ux(e){return y.memo(({id:t,sourceX:n,sourceY:r,targetX:s,targetY:a,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:f,style:m,sourcePosition:p=re.Bottom,targetPosition:g=re.Top,markerEnd:h,markerStart:v,pathOptions:b,interactionWidth:w})=>{const[j,N,S]=sc({sourceX:n,sourceY:r,sourcePosition:p,targetX:s,targetY:a,targetPosition:g,borderRadius:b==null?void 0:b.borderRadius,offset:b==null?void 0:b.offset}),E=e.isInternal?void 0:t;return o.jsx(cs,{id:E,path:j,labelX:N,labelY:S,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:f,style:m,markerEnd:h,markerStart:v,interactionWidth:w})})}const Wx=Ux({isInternal:!1}),Gx=Ux({isInternal:!0});Wx.displayName="SmoothStepEdge";Gx.displayName="SmoothStepEdgeInternal";function qx(e){return y.memo(({id:t,...n})=>{var s;const r=e.isInternal?void 0:t;return o.jsx(Wx,{...n,id:r,pathOptions:y.useMemo(()=>{var a;return{borderRadius:0,offset:(a=n.pathOptions)==null?void 0:a.offset}},[(s=n.pathOptions)==null?void 0:s.offset])})})}const a_=qx({isInternal:!1}),Kx=qx({isInternal:!0});a_.displayName="StepEdge";Kx.displayName="StepEdgeInternal";function Yx(e){return y.memo(({id:t,sourceX:n,sourceY:r,targetX:s,targetY:a,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:f,style:m,markerEnd:p,markerStart:g,interactionWidth:h})=>{const[v,b,w]=hx({sourceX:n,sourceY:r,targetX:s,targetY:a}),j=e.isInternal?void 0:t;return o.jsx(cs,{id:j,path:v,labelX:b,labelY:w,label:i,labelStyle:l,labelShowBg:c,labelBgStyle:d,labelBgPadding:u,labelBgBorderRadius:f,style:m,markerEnd:p,markerStart:g,interactionWidth:h})})}const i_=Yx({isInternal:!1}),Xx=Yx({isInternal:!0});i_.displayName="StraightEdge";Xx.displayName="StraightEdgeInternal";function Jx(e){return y.memo(({id:t,sourceX:n,sourceY:r,targetX:s,targetY:a,sourcePosition:i=re.Bottom,targetPosition:l=re.Top,label:c,labelStyle:d,labelShowBg:u,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:p,style:g,markerEnd:h,markerStart:v,pathOptions:b,interactionWidth:w})=>{const[j,N,S]=Io({sourceX:n,sourceY:r,sourcePosition:i,targetX:s,targetY:a,targetPosition:l,curvature:b==null?void 0:b.curvature}),E=e.isInternal?void 0:t;return o.jsx(cs,{id:E,path:j,labelX:N,labelY:S,label:c,labelStyle:d,labelShowBg:u,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:p,style:g,markerEnd:h,markerStart:v,interactionWidth:w})})}const l_=Jx({isInternal:!1}),Qx=Jx({isInternal:!0});l_.displayName="BezierEdge";Qx.displayName="BezierEdgeInternal";const rm={default:Qx,straight:Xx,step:Kx,smoothstep:Gx,simplebezier:Zx},sm={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},c_=(e,t,n)=>n===re.Left?e-t:n===re.Right?e+t:e,d_=(e,t,n)=>n===re.Top?e-t:n===re.Bottom?e+t:e,om="react-flow__edgeupdater";function am({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:s,onMouseEnter:a,onMouseOut:i,type:l}){return o.jsx("circle",{onMouseDown:s,onMouseEnter:a,onMouseOut:i,className:Re([om,`${om}-${l}`]),cx:c_(t,r,e),cy:d_(n,r,e),r,stroke:"transparent",fill:"transparent"})}function u_({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:s,targetX:a,targetY:i,sourcePosition:l,targetPosition:c,onReconnect:d,onReconnectStart:u,onReconnectEnd:f,setReconnecting:m,setUpdateHover:p}){const g=Ae(),h=(N,S)=>{if(N.button!==0)return;const{autoPanOnConnect:E,domNode:I,isValidConnection:A,connectionMode:M,connectionRadius:O,lib:L,onConnectStart:$,onConnectEnd:P,cancelConnection:C,nodeLookup:T,rfId:D,panBy:_,updateConnection:F}=g.getState(),k=S.type==="target";m(!0),u==null||u(N,n,S.type);const R=(B,G)=>{m(!1),f==null||f(B,n,S.type,G)},H=B=>d==null?void 0:d(n,B);ic.onPointerDown(N.nativeEvent,{autoPanOnConnect:E,connectionMode:M,connectionRadius:O,domNode:I,handleId:S.id,nodeId:S.nodeId,nodeLookup:T,isTarget:k,edgeUpdaterType:S.type,lib:L,flowId:D,cancelConnection:C,panBy:_,isValidConnection:A,onConnect:H,onConnectStart:$,onConnectEnd:P,onReconnectEnd:R,updateConnection:F,getTransform:()=>g.getState().transform,getFromHandle:()=>g.getState().connection.fromHandle})},v=N=>h(N,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),b=N=>h(N,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),w=()=>p(!0),j=()=>p(!1);return o.jsxs(o.Fragment,{children:[(e===!0||e==="source")&&o.jsx(am,{position:l,centerX:r,centerY:s,radius:t,onMouseDown:v,onMouseEnter:w,onMouseOut:j,type:"source"}),(e===!0||e==="target")&&o.jsx(am,{position:c,centerX:a,centerY:i,radius:t,onMouseDown:b,onMouseEnter:w,onMouseOut:j,type:"target"})]})}function f_({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:s,onDoubleClick:a,onContextMenu:i,onMouseEnter:l,onMouseMove:c,onMouseLeave:d,reconnectRadius:u,onReconnect:f,onReconnectStart:m,onReconnectEnd:p,rfId:g,edgeTypes:h,noPanClassName:v,onError:b,disableKeyboardA11y:w}){let j=me(W=>W.edgeLookup.get(e));const N=me(W=>W.defaultEdgeOptions);j=N?{...N,...j}:j;let S=j.type||"default",E=(h==null?void 0:h[S])||rm[S];E===void 0&&(b==null||b("011",jn.error011(S)),S="default",E=rm.default);const I=!!(j.focusable||t&&typeof j.focusable>"u"),A=typeof f<"u"&&(j.reconnectable||n&&typeof j.reconnectable>"u"),M=!!(j.selectable||r&&typeof j.selectable>"u"),O=y.useRef(null),[L,$]=y.useState(!1),[P,C]=y.useState(!1),T=Ae(),{zIndex:D,sourceX:_,sourceY:F,targetX:k,targetY:R,sourcePosition:H,targetPosition:B}=me(y.useCallback(W=>{const ne=W.nodeLookup.get(j.source),ue=W.nodeLookup.get(j.target);if(!ne||!ue)return{zIndex:j.zIndex,...sm};const Te=fT({id:e,sourceNode:ne,targetNode:ue,sourceHandle:j.sourceHandle||null,targetHandle:j.targetHandle||null,connectionMode:W.connectionMode,onError:b});return{zIndex:oT({selected:j.selected,zIndex:j.zIndex,sourceNode:ne,targetNode:ue,elevateOnSelect:W.elevateEdgesOnSelect}),...Te||sm}},[j.source,j.target,j.sourceHandle,j.targetHandle,j.selected,j.zIndex]),Oe),G=y.useMemo(()=>j.markerStart?`url('#${oc(j.markerStart,g)}')`:void 0,[j.markerStart,g]),z=y.useMemo(()=>j.markerEnd?`url('#${oc(j.markerEnd,g)}')`:void 0,[j.markerEnd,g]);if(j.hidden||_===null||F===null||k===null||R===null)return null;const Z=W=>{var Ye;const{addSelectedEdges:ne,unselectNodesAndEdges:ue,multiSelectionActive:Te}=T.getState();M&&(T.setState({nodesSelectionActive:!1}),j.selected&&Te?(ue({nodes:[],edges:[j]}),(Ye=O.current)==null||Ye.blur()):ne([e])),s&&s(W,j)},q=a?W=>{a(W,{...j})}:void 0,V=i?W=>{i(W,{...j})}:void 0,U=l?W=>{l(W,{...j})}:void 0,Q=c?W=>{c(W,{...j})}:void 0,K=d?W=>{d(W,{...j})}:void 0,ee=W=>{var ne;if(!w&&Xg.includes(W.key)&&M){const{unselectNodesAndEdges:ue,addSelectedEdges:Te}=T.getState();W.key==="Escape"?((ne=O.current)==null||ne.blur(),ue({edges:[j]})):Te([e])}};return o.jsx("svg",{style:{zIndex:D},children:o.jsxs("g",{className:Re(["react-flow__edge",`react-flow__edge-${S}`,j.className,v,{selected:j.selected,animated:j.animated,inactive:!M&&!s,updating:L,selectable:M}]),onClick:Z,onDoubleClick:q,onContextMenu:V,onMouseEnter:U,onMouseMove:Q,onMouseLeave:K,onKeyDown:I?ee:void 0,tabIndex:I?0:void 0,role:I?"button":"img","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":j.ariaLabel===null?void 0:j.ariaLabel||`Edge from ${j.source} to ${j.target}`,"aria-describedby":I?`${Dx}-${g}`:void 0,ref:O,children:[!P&&o.jsx(E,{id:e,source:j.source,target:j.target,type:j.type,selected:j.selected,animated:j.animated,selectable:M,deletable:j.deletable??!0,label:j.label,labelStyle:j.labelStyle,labelShowBg:j.labelShowBg,labelBgStyle:j.labelBgStyle,labelBgPadding:j.labelBgPadding,labelBgBorderRadius:j.labelBgBorderRadius,sourceX:_,sourceY:F,targetX:k,targetY:R,sourcePosition:H,targetPosition:B,data:j.data,style:j.style,sourceHandleId:j.sourceHandle,targetHandleId:j.targetHandle,markerStart:G,markerEnd:z,pathOptions:"pathOptions"in j?j.pathOptions:void 0,interactionWidth:j.interactionWidth}),A&&o.jsx(u_,{edge:j,isReconnectable:A,reconnectRadius:u,onReconnect:f,onReconnectStart:m,onReconnectEnd:p,sourceX:_,sourceY:F,targetX:k,targetY:R,sourcePosition:H,targetPosition:B,setUpdateHover:$,setReconnecting:C})]})})}const m_=e=>({width:e.width,height:e.height,edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function e2({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:s,onReconnect:a,onEdgeContextMenu:i,onEdgeMouseEnter:l,onEdgeMouseMove:c,onEdgeMouseLeave:d,onEdgeClick:u,reconnectRadius:f,onEdgeDoubleClick:m,onReconnectStart:p,onReconnectEnd:g,disableKeyboardA11y:h}){const{edgesFocusable:v,edgesReconnectable:b,elementsSelectable:w,onError:j}=me(m_,Oe),N=JF(t);return o.jsxs("div",{className:"react-flow__edges",children:[o.jsx(r_,{defaultColor:e,rfId:n}),N.map(S=>o.jsx(f_,{id:S,edgesFocusable:v,edgesReconnectable:b,elementsSelectable:w,noPanClassName:s,onReconnect:a,onContextMenu:i,onMouseEnter:l,onMouseMove:c,onMouseLeave:d,onClick:u,reconnectRadius:f,onDoubleClick:m,onReconnectStart:p,onReconnectEnd:g,rfId:n,onError:j,edgeTypes:r,disableKeyboardA11y:h},S))]})}e2.displayName="EdgeRenderer";const p_=y.memo(e2),h_=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function g_({children:e}){const t=me(h_);return o.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function x_(e){const t=qn(),n=y.useRef(!1);y.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const y_=e=>{var t;return(t=e.panZoom)==null?void 0:t.syncViewport};function v_(e){const t=me(y_),n=Ae();return y.useEffect(()=>{e&&(t==null||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function b_(e){return e.connection.inProgress?{...e.connection,to:Co(e.connection.to,e.transform)}:{...e.connection}}function w_(e){return b_}function t2(e){const t=w_();return me(t,Oe)}const j_=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function N_({containerStyle:e,style:t,type:n,component:r}){const{nodesConnectable:s,width:a,height:i,isValid:l,inProgress:c}=me(j_,Oe);return!(a&&s&&c)?null:o.jsx("svg",{style:e,width:a,height:i,className:"react-flow__connectionline react-flow__container",children:o.jsx("g",{className:Re(["react-flow__connection",Qg(l)]),children:o.jsx(n2,{style:t,type:n,CustomComponent:r,isValid:l})})})}const n2=({style:e,type:t=kn.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:s,from:a,fromNode:i,fromHandle:l,fromPosition:c,to:d,toNode:u,toHandle:f,toPosition:m}=t2();if(!s)return;if(n)return o.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:i,fromHandle:l,fromX:a.x,fromY:a.y,toX:d.x,toY:d.y,fromPosition:c,toPosition:m,connectionStatus:Qg(r),toNode:u,toHandle:f});let p="";const g={sourceX:a.x,sourceY:a.y,sourcePosition:c,targetX:d.x,targetY:d.y,targetPosition:m};switch(t){case kn.Bezier:[p]=Io(g);break;case kn.SimpleBezier:[p]=zx(g);break;case kn.Step:[p]=sc({...g,borderRadius:0});break;case kn.SmoothStep:[p]=sc(g);break;default:[p]=hx(g)}return o.jsx("path",{d:p,fill:"none",className:"react-flow__connection-path",style:e})};n2.displayName="ConnectionLine";const E_={};function im(e=E_){y.useRef(e),Ae(),y.useEffect(()=>{},[e])}function S_(){Ae(),y.useRef(!1),y.useEffect(()=>{},[])}function r2({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:s,onNodeDoubleClick:a,onEdgeDoubleClick:i,onNodeMouseEnter:l,onNodeMouseMove:c,onNodeMouseLeave:d,onNodeContextMenu:u,onSelectionContextMenu:f,onSelectionStart:m,onSelectionEnd:p,connectionLineType:g,connectionLineStyle:h,connectionLineComponent:v,connectionLineContainerStyle:b,selectionKeyCode:w,selectionOnDrag:j,selectionMode:N,multiSelectionKeyCode:S,panActivationKeyCode:E,zoomActivationKeyCode:I,deleteKeyCode:A,onlyRenderVisibleElements:M,elementsSelectable:O,defaultViewport:L,translateExtent:$,minZoom:P,maxZoom:C,preventScrolling:T,defaultMarkerColor:D,zoomOnScroll:_,zoomOnPinch:F,panOnScroll:k,panOnScrollSpeed:R,panOnScrollMode:H,zoomOnDoubleClick:B,panOnDrag:G,onPaneClick:z,onPaneMouseEnter:Z,onPaneMouseMove:q,onPaneMouseLeave:V,onPaneScroll:U,onPaneContextMenu:Q,paneClickDistance:K,nodeClickDistance:ee,onEdgeContextMenu:W,onEdgeMouseEnter:ne,onEdgeMouseMove:ue,onEdgeMouseLeave:Te,reconnectRadius:Ye,onReconnect:at,onReconnectStart:Sn,onReconnectEnd:de,noDragClassName:it,noWheelClassName:ms,noPanClassName:Kn,disableKeyboardA11y:Yn,nodeExtent:te,rfId:oe,viewport:Ie,onViewportChange:_e}){return im(e),im(t),S_(),x_(n),v_(Ie),o.jsx(HF,{onPaneClick:z,onPaneMouseEnter:Z,onPaneMouseMove:q,onPaneMouseLeave:V,onPaneContextMenu:Q,onPaneScroll:U,paneClickDistance:K,deleteKeyCode:A,selectionKeyCode:w,selectionOnDrag:j,selectionMode:N,onSelectionStart:m,onSelectionEnd:p,multiSelectionKeyCode:S,panActivationKeyCode:E,zoomActivationKeyCode:I,elementsSelectable:O,zoomOnScroll:_,zoomOnPinch:F,zoomOnDoubleClick:B,panOnScroll:k,panOnScrollSpeed:R,panOnScrollMode:H,panOnDrag:G,defaultViewport:L,translateExtent:$,minZoom:P,maxZoom:C,onSelectionContextMenu:f,preventScrolling:T,noDragClassName:it,noWheelClassName:ms,noPanClassName:Kn,disableKeyboardA11y:Yn,onViewportChange:_e,isControlledViewport:!!Ie,children:o.jsxs(g_,{children:[o.jsx(p_,{edgeTypes:t,onEdgeClick:s,onEdgeDoubleClick:i,onReconnect:at,onReconnectStart:Sn,onReconnectEnd:de,onlyRenderVisibleElements:M,onEdgeContextMenu:W,onEdgeMouseEnter:ne,onEdgeMouseMove:ue,onEdgeMouseLeave:Te,reconnectRadius:Ye,defaultMarkerColor:D,noPanClassName:Kn,disableKeyboardA11y:Yn,rfId:oe}),o.jsx(N_,{style:h,type:g,component:v,containerStyle:b}),o.jsx("div",{className:"react-flow__edgelabel-renderer"}),o.jsx(XF,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:a,onNodeMouseEnter:l,onNodeMouseMove:c,onNodeMouseLeave:d,onNodeContextMenu:u,nodeClickDistance:ee,onlyRenderVisibleElements:M,noPanClassName:Kn,noDragClassName:it,disableKeyboardA11y:Yn,nodeExtent:te,rfId:oe}),o.jsx("div",{className:"react-flow__viewport-portal"})]})})}r2.displayName="GraphView";const C_=y.memo(r2),lm=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:s,height:a,fitView:i,nodeOrigin:l,nodeExtent:c}={})=>{const d=new Map,u=new Map,f=new Map,m=new Map,p=r??t??[],g=n??e??[],h=l??[0,0],v=c??Js;xx(f,m,p),ac(g,d,u,{nodeOrigin:h,nodeExtent:v,elevateNodesOnSelect:!1});let b=[0,0,1];if(i&&s&&a){const w=ls(d,{filter:E=>!!((E.width||E.initialWidth)&&(E.height||E.initialHeight))}),{x:j,y:N,zoom:S}=yd(w,s,a,.5,2,.1);b=[j,N,S]}return{rfId:"1",width:0,height:0,transform:b,nodes:g,nodeLookup:d,parentLookup:u,edges:p,edgeLookup:m,connectionLookup:f,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:.5,maxZoom:2,translateExtent:Js,nodeExtent:v,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Zr.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:h,nodeDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,fitViewOnInit:!1,fitViewDone:!1,fitViewOnInitOptions:void 0,selectNodesOnDrag:!0,multiSelectionActive:!1,connection:{...Jg},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanSpeed:15,connectionRadius:20,onError:rT,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1}},I_=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:s,height:a,fitView:i,nodeOrigin:l,nodeExtent:c})=>GT((d,u)=>({...lm({nodes:e,edges:t,width:s,height:a,fitView:i,nodeOrigin:l,nodeExtent:c,defaultNodes:n,defaultEdges:r}),setNodes:f=>{const{nodeLookup:m,parentLookup:p,nodeOrigin:g,elevateNodesOnSelect:h}=u();ac(f,m,p,{nodeOrigin:g,nodeExtent:c,elevateNodesOnSelect:h,checkEquality:!0}),d({nodes:f})},setEdges:f=>{const{connectionLookup:m,edgeLookup:p}=u();xx(m,p,f),d({edges:f})},setDefaultNodesAndEdges:(f,m)=>{if(f){const{setNodes:p}=u();p(f),d({hasDefaultNodes:!0})}if(m){const{setEdges:p}=u();p(m),d({hasDefaultEdges:!0})}},updateNodeInternals:(f,m={triggerFitView:!0})=>{const{triggerNodeChanges:p,nodeLookup:g,parentLookup:h,fitViewOnInit:v,fitViewDone:b,fitViewOnInitOptions:w,domNode:j,nodeOrigin:N,nodeExtent:S,debug:E,fitViewSync:I}=u(),{changes:A,updatedInternals:M}=vT(f,g,h,j,N,S);if(M){if(gT(g,h,{nodeOrigin:N,nodeExtent:S}),m.triggerFitView){let O=b;!b&&v&&(O=I({...w,nodes:w==null?void 0:w.nodes})),d({fitViewDone:O})}else d({});(A==null?void 0:A.length)>0&&(E&&console.log("React Flow: trigger node changes",A),p==null||p(A))}},updateNodePositions:(f,m=!1)=>{const p=[],g=[];for(const[h,v]of f){const b={id:h,type:"position",position:v.position,dragging:m};v!=null&&v.expandParent&&(v!=null&&v.parentId)&&b.position&&(p.push({id:h,parentId:v.parentId,rect:{...v.internals.positionAbsolute,width:v.measured.width,height:v.measured.height}}),b.position.x=Math.max(0,b.position.x),b.position.y=Math.max(0,b.position.y)),g.push(b)}if(p.length>0){const{nodeLookup:h,parentLookup:v,nodeOrigin:b}=u(),w=jd(p,h,v,b);g.push(...w)}u().triggerNodeChanges(g)},triggerNodeChanges:f=>{const{onNodesChange:m,setNodes:p,nodes:g,hasDefaultNodes:h,debug:v}=u();if(f!=null&&f.length){if(h){const b=Ox(f,g);p(b)}v&&console.log("React Flow: trigger node changes",f),m==null||m(f)}},triggerEdgeChanges:f=>{const{onEdgesChange:m,setEdges:p,edges:g,hasDefaultEdges:h,debug:v}=u();if(f!=null&&f.length){if(h){const b=Tx(f,g);p(b)}v&&console.log("React Flow: trigger edge changes",f),m==null||m(f)}},addSelectedNodes:f=>{const{multiSelectionActive:m,edgeLookup:p,nodeLookup:g,triggerNodeChanges:h,triggerEdgeChanges:v}=u();if(m){const b=f.map(w=>rr(w,!0));h(b);return}h(kr(g,new Set([...f]),!0)),v(kr(p))},addSelectedEdges:f=>{const{multiSelectionActive:m,edgeLookup:p,nodeLookup:g,triggerNodeChanges:h,triggerEdgeChanges:v}=u();if(m){const b=f.map(w=>rr(w,!0));v(b);return}v(kr(p,new Set([...f]))),h(kr(g,new Set,!0))},unselectNodesAndEdges:({nodes:f,edges:m}={})=>{const{edges:p,nodes:g,nodeLookup:h,triggerNodeChanges:v,triggerEdgeChanges:b}=u(),w=f||g,j=m||p,N=w.map(E=>{const I=h.get(E.id);return I&&(I.selected=!1),rr(E.id,!1)}),S=j.map(E=>rr(E.id,!1));v(N),b(S)},setMinZoom:f=>{const{panZoom:m,maxZoom:p}=u();m==null||m.setScaleExtent([f,p]),d({minZoom:f})},setMaxZoom:f=>{const{panZoom:m,minZoom:p}=u();m==null||m.setScaleExtent([p,f]),d({maxZoom:f})},setTranslateExtent:f=>{var m;(m=u().panZoom)==null||m.setTranslateExtent(f),d({translateExtent:f})},setPaneClickDistance:f=>{var m;(m=u().panZoom)==null||m.setClickDistance(f)},resetSelectedElements:()=>{const{edges:f,nodes:m,triggerNodeChanges:p,triggerEdgeChanges:g}=u(),h=m.reduce((b,w)=>w.selected?[...b,rr(w.id,!1)]:b,[]),v=f.reduce((b,w)=>w.selected?[...b,rr(w.id,!1)]:b,[]);p(h),g(v)},setNodeExtent:f=>{const{nodes:m,nodeLookup:p,parentLookup:g,nodeOrigin:h,elevateNodesOnSelect:v,nodeExtent:b}=u();f[0][0]===b[0][0]&&f[0][1]===b[0][1]&&f[1][0]===b[1][0]&&f[1][1]===b[1][1]||(ac(m,p,g,{nodeOrigin:h,nodeExtent:f,elevateNodesOnSelect:v,checkEquality:!1}),d({nodeExtent:f}))},panBy:f=>{const{transform:m,width:p,height:g,panZoom:h,translateExtent:v}=u();return bT({delta:f,panZoom:h,transform:m,translateExtent:v,width:p,height:g})},fitView:f=>{const{panZoom:m,width:p,height:g,minZoom:h,maxZoom:v,nodeLookup:b}=u();if(!m)return Promise.resolve(!1);const w=ec(b,f);return tc({nodes:w,width:p,height:g,panZoom:m,minZoom:h,maxZoom:v},f)},fitViewSync:f=>{const{panZoom:m,width:p,height:g,minZoom:h,maxZoom:v,nodeLookup:b}=u();if(!m)return!1;const w=ec(b,f);return tc({nodes:w,width:p,height:g,panZoom:m,minZoom:h,maxZoom:v},f),w.size>0},cancelConnection:()=>{d({connection:{...Jg}})},updateConnection:f=>{d({connection:f})},reset:()=>d({...lm()})}),Object.is);function s2({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:s,initialHeight:a,fitView:i,nodeOrigin:l,nodeExtent:c,children:d}){const[u]=y.useState(()=>I_({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:s,height:a,fitView:i,nodeOrigin:l,nodeExtent:c}));return o.jsx(qT,{value:u,children:o.jsx(xF,{children:d})})}function A_({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:s,width:a,height:i,fitView:l,nodeOrigin:c,nodeExtent:d}){return y.useContext(_i)?o.jsx(o.Fragment,{children:e}):o.jsx(s2,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:s,initialWidth:a,initialHeight:i,fitView:l,nodeOrigin:c,nodeExtent:d,children:e})}const D_={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function M_({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:s,nodeTypes:a,edgeTypes:i,onNodeClick:l,onEdgeClick:c,onInit:d,onMove:u,onMoveStart:f,onMoveEnd:m,onConnect:p,onConnectStart:g,onConnectEnd:h,onClickConnectStart:v,onClickConnectEnd:b,onNodeMouseEnter:w,onNodeMouseMove:j,onNodeMouseLeave:N,onNodeContextMenu:S,onNodeDoubleClick:E,onNodeDragStart:I,onNodeDrag:A,onNodeDragStop:M,onNodesDelete:O,onEdgesDelete:L,onDelete:$,onSelectionChange:P,onSelectionDragStart:C,onSelectionDrag:T,onSelectionDragStop:D,onSelectionContextMenu:_,onSelectionStart:F,onSelectionEnd:k,onBeforeDelete:R,connectionMode:H,connectionLineType:B=kn.Bezier,connectionLineStyle:G,connectionLineComponent:z,connectionLineContainerStyle:Z,deleteKeyCode:q="Backspace",selectionKeyCode:V="Shift",selectionOnDrag:U=!1,selectionMode:Q=Qs.Full,panActivationKeyCode:K="Space",multiSelectionKeyCode:ee=xa()?"Meta":"Control",zoomActivationKeyCode:W=xa()?"Meta":"Control",snapToGrid:ne,snapGrid:ue,onlyRenderVisibleElements:Te=!1,selectNodesOnDrag:Ye,nodesDraggable:at,nodesConnectable:Sn,nodesFocusable:de,nodeOrigin:it=Mx,edgesFocusable:ms,edgesReconnectable:Kn,elementsSelectable:Yn=!0,defaultViewport:te=iF,minZoom:oe=.5,maxZoom:Ie=2,translateExtent:_e=Js,preventScrolling:lt=!0,nodeExtent:an,defaultMarkerColor:Cn="#b1b1b7",zoomOnScroll:ps=!0,zoomOnPinch:hs=!0,panOnScroll:gs=!1,panOnScrollSpeed:Sr=.5,panOnScrollMode:xs=cr.Free,zoomOnDoubleClick:ys=!0,panOnDrag:vs=!0,onPaneClick:bs,onPaneMouseEnter:Gi,onPaneMouseMove:gy,onPaneMouseLeave:xy,onPaneScroll:yy,onPaneContextMenu:vy,paneClickDistance:$d=0,nodeClickDistance:by=0,children:wy,onReconnect:jy,onReconnectStart:Ny,onReconnectEnd:Ey,onEdgeContextMenu:Sy,onEdgeDoubleClick:Cy,onEdgeMouseEnter:Iy,onEdgeMouseMove:Ay,onEdgeMouseLeave:Dy,reconnectRadius:My=10,onNodesChange:ky,onEdgesChange:Oy,noDragClassName:Ty="nodrag",noWheelClassName:Fy="nowheel",noPanClassName:Rd="nopan",fitView:Vd,fitViewOptions:_y,connectOnClick:Py,attributionPosition:Ly,proOptions:$y,defaultEdgeOptions:Ry,elevateNodesOnSelect:Vy,elevateEdgesOnSelect:By,disableKeyboardA11y:Bd=!1,autoPanOnConnect:zy,autoPanOnNodeDrag:Hy,autoPanSpeed:Zy,connectionRadius:Uy,isValidConnection:Wy,onError:Gy,style:qy,id:zd,nodeDragThreshold:Ky,viewport:Yy,onViewportChange:Xy,width:Jy,height:Qy,colorMode:ev="light",debug:tv,...nv},rv){const qi=zd||"1",sv=uF(ev);return o.jsx("div",{...nv,style:{...qy,...D_},ref:rv,className:Re(["react-flow",s,sv]),"data-testid":"rf__wrapper",id:zd,children:o.jsxs(A_,{nodes:e,edges:t,width:Jy,height:Qy,fitView:Vd,nodeOrigin:it,nodeExtent:an,children:[o.jsx(C_,{onInit:d,onNodeClick:l,onEdgeClick:c,onNodeMouseEnter:w,onNodeMouseMove:j,onNodeMouseLeave:N,onNodeContextMenu:S,onNodeDoubleClick:E,nodeTypes:a,edgeTypes:i,connectionLineType:B,connectionLineStyle:G,connectionLineComponent:z,connectionLineContainerStyle:Z,selectionKeyCode:V,selectionOnDrag:U,selectionMode:Q,deleteKeyCode:q,multiSelectionKeyCode:ee,panActivationKeyCode:K,zoomActivationKeyCode:W,onlyRenderVisibleElements:Te,defaultViewport:te,translateExtent:_e,minZoom:oe,maxZoom:Ie,preventScrolling:lt,zoomOnScroll:ps,zoomOnPinch:hs,zoomOnDoubleClick:ys,panOnScroll:gs,panOnScrollSpeed:Sr,panOnScrollMode:xs,panOnDrag:vs,onPaneClick:bs,onPaneMouseEnter:Gi,onPaneMouseMove:gy,onPaneMouseLeave:xy,onPaneScroll:yy,onPaneContextMenu:vy,paneClickDistance:$d,nodeClickDistance:by,onSelectionContextMenu:_,onSelectionStart:F,onSelectionEnd:k,onReconnect:jy,onReconnectStart:Ny,onReconnectEnd:Ey,onEdgeContextMenu:Sy,onEdgeDoubleClick:Cy,onEdgeMouseEnter:Iy,onEdgeMouseMove:Ay,onEdgeMouseLeave:Dy,reconnectRadius:My,defaultMarkerColor:Cn,noDragClassName:Ty,noWheelClassName:Fy,noPanClassName:Rd,rfId:qi,disableKeyboardA11y:Bd,nodeExtent:an,viewport:Yy,onViewportChange:Xy}),o.jsx(dF,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:p,onConnectStart:g,onConnectEnd:h,onClickConnectStart:v,onClickConnectEnd:b,nodesDraggable:at,nodesConnectable:Sn,nodesFocusable:de,edgesFocusable:ms,edgesReconnectable:Kn,elementsSelectable:Yn,elevateNodesOnSelect:Vy,elevateEdgesOnSelect:By,minZoom:oe,maxZoom:Ie,nodeExtent:an,onNodesChange:ky,onEdgesChange:Oy,snapToGrid:ne,snapGrid:ue,connectionMode:H,translateExtent:_e,connectOnClick:Py,defaultEdgeOptions:Ry,fitView:Vd,fitViewOptions:_y,onNodesDelete:O,onEdgesDelete:L,onDelete:$,onNodeDragStart:I,onNodeDrag:A,onNodeDragStop:M,onSelectionDrag:T,onSelectionDragStart:C,onSelectionDragStop:D,onMove:u,onMoveStart:f,onMoveEnd:m,noPanClassName:Rd,nodeOrigin:it,rfId:qi,autoPanOnConnect:zy,autoPanOnNodeDrag:Hy,autoPanSpeed:Zy,onError:Gy,connectionRadius:Uy,isValidConnection:Wy,selectNodesOnDrag:Ye,nodeDragThreshold:Ky,onBeforeDelete:R,paneClickDistance:$d,debug:tv}),o.jsx(aF,{onSelectionChange:P}),wy,o.jsx(tF,{proOptions:$y,position:Ly}),o.jsx(QT,{rfId:qi,disableKeyboardA11y:Bd})]})})}var k_=Fx(M_);const O_=e=>{var t;return(t=e.domNode)==null?void 0:t.querySelector(".react-flow__edgelabel-renderer")};function o2({children:e}){const t=me(O_);return t?mn.createPortal(e,t):null}const T_=e=>({x:e.transform[0],y:e.transform[1],zoom:e.transform[2]});function Li(){return me(T_,Oe)}function F_({onStart:e,onChange:t,onEnd:n}){const r=Ae();y.useEffect(()=>{r.setState({onViewportChangeStart:e})},[e]),y.useEffect(()=>{r.setState({onViewportChange:t})},[t]),y.useEffect(()=>{r.setState({onViewportChangeEnd:n})},[n])}function __({dimensions:e,lineWidth:t,variant:n,className:r}){return o.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:Re(["react-flow__background-pattern",n,r])})}function P_({radius:e,className:t}){return o.jsx("circle",{cx:e,cy:e,r:e,className:Re(["react-flow__background-pattern","dots",t])})}var Pn;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Pn||(Pn={}));const L_={[Pn.Dots]:1,[Pn.Lines]:1,[Pn.Cross]:6},$_=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function a2({id:e,variant:t=Pn.Dots,gap:n=20,size:r,lineWidth:s=1,offset:a=0,color:i,bgColor:l,style:c,className:d,patternClassName:u}){const f=y.useRef(null),{transform:m,patternId:p}=me($_,Oe),g=r||L_[t],h=t===Pn.Dots,v=t===Pn.Cross,b=Array.isArray(n)?n:[n,n],w=[b[0]*m[2]||1,b[1]*m[2]||1],j=g*m[2],N=Array.isArray(a)?a:[a,a],S=v?[j,j]:w,E=[N[0]*m[2]||1+S[0]/2,N[1]*m[2]||1+S[1]/2],I=`${p}${e||""}`;return o.jsxs("svg",{className:Re(["react-flow__background",d]),style:{...c,...Pi,"--xy-background-color-props":l,"--xy-background-pattern-color-props":i},ref:f,"data-testid":"rf__background",children:[o.jsx("pattern",{id:I,x:m[0]%w[0],y:m[1]%w[1],width:w[0],height:w[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${E[0]},-${E[1]})`,children:h?o.jsx(P_,{radius:j/2,className:u}):o.jsx(__,{dimensions:S,lineWidth:s,variant:t,className:u})}),o.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${I})`})]})}a2.displayName="Background";const R_=y.memo(a2);function V_(){return o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:o.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function B_(){return o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:o.jsx("path",{d:"M0 0h32v4.2H0z"})})}function z_(){return o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:o.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function H_(){return o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:o.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function Z_(){return o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:o.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function ar({children:e,className:t,...n}){return o.jsx("button",{type:"button",className:Re(["react-flow__controls-button",t]),...n,children:e})}const U_=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom});function i2({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:s,onZoomIn:a,onZoomOut:i,onFitView:l,onInteractiveChange:c,className:d,children:u,position:f="bottom-left",orientation:m="vertical","aria-label":p="React Flow controls"}){const g=Ae(),{isInteractive:h,minZoomReached:v,maxZoomReached:b}=me(U_,Oe),{zoomIn:w,zoomOut:j,fitView:N}=qn(),S=()=>{w(),a==null||a()},E=()=>{j(),i==null||i()},I=()=>{N(s),l==null||l()},A=()=>{g.setState({nodesDraggable:!h,nodesConnectable:!h,elementsSelectable:!h}),c==null||c(!h)},M=m==="horizontal"?"horizontal":"vertical";return o.jsxs(Nd,{className:Re(["react-flow__controls",M,d]),position:f,style:e,"data-testid":"rf__controls","aria-label":p,children:[t&&o.jsxs(o.Fragment,{children:[o.jsx(ar,{onClick:S,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:b,children:o.jsx(V_,{})}),o.jsx(ar,{onClick:E,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:v,children:o.jsx(B_,{})})]}),n&&o.jsx(ar,{className:"react-flow__controls-fitview",onClick:I,title:"fit view","aria-label":"fit view",children:o.jsx(z_,{})}),r&&o.jsx(ar,{className:"react-flow__controls-interactive",onClick:A,title:"toggle interactivity","aria-label":"toggle interactivity",children:h?o.jsx(Z_,{}):o.jsx(H_,{})}),u]})}i2.displayName="Controls";const W_=y.memo(i2);function G_({id:e,x:t,y:n,width:r,height:s,style:a,color:i,strokeColor:l,strokeWidth:c,className:d,borderRadius:u,shapeRendering:f,selected:m,onClick:p}){const{background:g,backgroundColor:h}=a||{},v=i||g||h;return o.jsx("rect",{className:Re(["react-flow__minimap-node",{selected:m},d]),x:t,y:n,rx:u,ry:u,width:r,height:s,style:{fill:v,stroke:l,strokeWidth:c},shapeRendering:f,onClick:p?b=>p(b,e):void 0})}const q_=y.memo(G_),K_=e=>e.nodes.map(t=>t.id),gl=e=>e instanceof Function?e:()=>e;function Y_({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:s,nodeComponent:a=q_,onClick:i}){const l=me(K_,Oe),c=gl(t),d=gl(e),u=gl(n),f=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return o.jsx(o.Fragment,{children:l.map(m=>o.jsx(J_,{id:m,nodeColorFunc:c,nodeStrokeColorFunc:d,nodeClassNameFunc:u,nodeBorderRadius:r,nodeStrokeWidth:s,NodeComponent:a,onClick:i,shapeRendering:f},m))})}function X_({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:s,nodeStrokeWidth:a,shapeRendering:i,NodeComponent:l,onClick:c}){const{node:d,x:u,y:f,width:m,height:p}=me(g=>{const h=g.nodeLookup.get(e),{x:v,y:b}=h.internals.positionAbsolute,{width:w,height:j}=Nn(h);return{node:h,x:v,y:b,width:w,height:j}},Oe);return!d||d.hidden||!lx(d)?null:o.jsx(l,{x:u,y:f,width:m,height:p,style:d.style,selected:!!d.selected,className:r(d),color:t(d),borderRadius:s,strokeColor:n(d),strokeWidth:a,shapeRendering:i,onClick:c,id:d.id})}const J_=y.memo(X_);var Q_=y.memo(Y_);const eP=200,tP=150,nP=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?ax(ls(e.nodeLookup),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height}},rP="react-flow__minimap-desc";function l2({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:s="",nodeBorderRadius:a=5,nodeStrokeWidth:i,nodeComponent:l,bgColor:c,maskColor:d,maskStrokeColor:u,maskStrokeWidth:f,position:m="bottom-right",onClick:p,onNodeClick:g,pannable:h=!1,zoomable:v=!1,ariaLabel:b="React Flow mini map",inversePan:w,zoomStep:j=10,offsetScale:N=5}){const S=Ae(),E=y.useRef(null),{boundingRect:I,viewBB:A,rfId:M,panZoom:O,translateExtent:L,flowWidth:$,flowHeight:P}=me(nP,Oe),C=(e==null?void 0:e.width)??eP,T=(e==null?void 0:e.height)??tP,D=I.width/C,_=I.height/T,F=Math.max(D,_),k=F*C,R=F*T,H=N*F,B=I.x-(k-I.width)/2-H,G=I.y-(R-I.height)/2-H,z=k+H*2,Z=R+H*2,q=`${rP}-${M}`,V=y.useRef(0),U=y.useRef();V.current=F,y.useEffect(()=>{if(E.current&&O)return U.current=AT({domNode:E.current,panZoom:O,getTransform:()=>S.getState().transform,getViewScale:()=>V.current}),()=>{var ee;(ee=U.current)==null||ee.destroy()}},[O]),y.useEffect(()=>{var ee;(ee=U.current)==null||ee.update({translateExtent:L,width:$,height:P,inversePan:w,pannable:h,zoomStep:j,zoomable:v})},[h,v,w,j,L,$,P]);const Q=p?ee=>{var ue;const[W,ne]=((ue=U.current)==null?void 0:ue.pointer(ee))||[0,0];p(ee,{x:W,y:ne})}:void 0,K=g?y.useCallback((ee,W)=>{const ne=S.getState().nodeLookup.get(W);g(ee,ne)},[]):void 0;return o.jsx(Nd,{position:m,style:{...e,"--xy-minimap-background-color-props":typeof c=="string"?c:void 0,"--xy-minimap-mask-background-color-props":typeof d=="string"?d:void 0,"--xy-minimap-mask-stroke-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-stroke-width-props":typeof f=="number"?f*F:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof i=="string"?i:void 0},className:Re(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:o.jsxs("svg",{width:C,height:T,viewBox:`${B} ${G} ${z} ${Z}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":q,ref:E,onClick:Q,children:[b&&o.jsx("title",{id:q,children:b}),o.jsx(Q_,{onClick:K,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:a,nodeClassName:s,nodeStrokeWidth:i,nodeComponent:l}),o.jsx("path",{className:"react-flow__minimap-mask",d:`M${B-H},${G-H}h${z+H*2}v${Z+H*2}h${-z-H*2}z
        M${A.x},${A.y}h${A.width}v${A.height}h${-A.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}l2.displayName="MiniMap";y.memo(l2);function sP({nodeId:e,position:t,variant:n=Ps.Handle,className:r,style:s={},children:a,color:i,minWidth:l=10,minHeight:c=10,maxWidth:d=Number.MAX_VALUE,maxHeight:u=Number.MAX_VALUE,keepAspectRatio:f=!1,shouldResize:m,onResizeStart:p,onResize:g,onResizeEnd:h}){const v=Sd(),b=typeof e=="string"?e:v,w=Ae(),j=y.useRef(null),N=n===Ps.Line?"right":"bottom-right",S=t??N,E=y.useRef(null);y.useEffect(()=>{if(!(!j.current||!b))return E.current||(E.current=HT({domNode:j.current,nodeId:b,getStoreItems:()=>{const{nodeLookup:O,transform:L,snapGrid:$,snapToGrid:P,nodeOrigin:C}=w.getState();return{nodeLookup:O,transform:L,snapGrid:$,snapToGrid:P,nodeOrigin:C}},onChange:(O,L)=>{const{triggerNodeChanges:$,nodeLookup:P,parentLookup:C,nodeOrigin:T}=w.getState(),D=[],_={x:O.x,y:O.y},F=P.get(b);if(F&&F.expandParent&&F.parentId){const k=F.origin??T,R=O.width??F.measured.width,H=O.height??F.measured.height,B={id:F.id,parentId:F.parentId,rect:{width:R,height:H,...cx({x:O.x??F.position.x,y:O.y??F.position.y},{width:R,height:H},F.parentId,P,k)}},G=jd([B],P,C,T);D.push(...G),_.x=O.x?Math.max(k[0]*R,O.x):void 0,_.y=O.y?Math.max(k[1]*H,O.y):void 0}if(_.x!==void 0&&_.y!==void 0){const k={id:b,type:"position",position:{..._}};D.push(k)}if(O.width!==void 0&&O.height!==void 0){const k={id:b,type:"dimensions",resizing:!0,setAttributes:!0,dimensions:{width:O.width,height:O.height}};D.push(k)}for(const k of L){const R={...k,type:"position"};D.push(R)}$(D)},onEnd:()=>{const O={id:b,type:"dimensions",resizing:!1};w.getState().triggerNodeChanges([O])}})),E.current.update({controlPosition:S,boundaries:{minWidth:l,minHeight:c,maxWidth:d,maxHeight:u},keepAspectRatio:f,onResizeStart:p,onResize:g,onResizeEnd:h,shouldResize:m}),()=>{var O;(O=E.current)==null||O.destroy()}},[S,l,c,d,u,f,p,g,h,m]);const I=S.split("-"),A=n===Ps.Line?"borderColor":"backgroundColor",M=i?{...s,[A]:i}:s;return o.jsx("div",{className:Re(["react-flow__resize-control","nodrag",...I,n,r]),ref:j,style:M,children:a})}y.memo(sP);const oP=e=>{var t;return(t=e.domNode)==null?void 0:t.querySelector(".react-flow__renderer")};function aP({children:e}){const t=me(oP);return t?mn.createPortal(e,t):null}const iP=(e,t)=>(e==null?void 0:e.internals.positionAbsolute.x)!==(t==null?void 0:t.internals.positionAbsolute.x)||(e==null?void 0:e.internals.positionAbsolute.y)!==(t==null?void 0:t.internals.positionAbsolute.y)||(e==null?void 0:e.measured.width)!==(t==null?void 0:t.measured.width)||(e==null?void 0:e.measured.height)!==(t==null?void 0:t.measured.height)||(e==null?void 0:e.selected)!==(t==null?void 0:t.selected)||(e==null?void 0:e.internals.z)!==(t==null?void 0:t.internals.z),lP=(e,t)=>{if(e.size!==t.size)return!1;for(const[n,r]of e)if(iP(r,t.get(n)))return!1;return!0},cP=e=>({x:e.transform[0],y:e.transform[1],zoom:e.transform[2],selectedNodesCount:e.nodes.filter(t=>t.selected).length});function dP({nodeId:e,children:t,className:n,style:r,isVisible:s,position:a=re.Top,offset:i=10,align:l="center",...c}){const d=Sd(),u=y.useCallback(S=>(Array.isArray(e)?e:[e||d||""]).reduce((A,M)=>{const O=S.nodeLookup.get(M);return O&&A.set(O.id,O),A},new Map),[e,d]),f=me(u,lP),{x:m,y:p,zoom:g,selectedNodesCount:h}=me(cP,Oe);if(!(typeof s=="boolean"?s:f.size===1&&f.values().next().value.selected&&h===1)||!f.size)return null;const b=ls(f),w=Array.from(f.values()),j=Math.max(...w.map(S=>S.internals.z+1)),N={position:"absolute",transform:pT(b,{x:m,y:p,zoom:g},a,i,l),zIndex:j,...r};return o.jsx(aP,{children:o.jsx("div",{style:N,className:Re(["react-flow__node-toolbar",n]),...c,"data-id":w.reduce((S,E)=>`${S}${E.id} `,"").trim(),children:t})})}const uP=e=>{var h;const{zoom:t}=Li(),{connectionStatus:n,fromHandle:r,fromX:s,fromY:a,toX:i,toY:l,fromPosition:c,toPosition:d}=e,u=n==="valid",f=r.type==="source"&&((h=r.id)==null?void 0:h.includes("expiration")),m=f?"stroke-item-trigger":"stroke-item-media",p=u?"fill-item-media/70":"fill-item-audio/70",[g]=Io({sourceX:s,sourceY:a,targetX:i,targetY:l,sourcePosition:c,targetPosition:d});return o.jsxs("g",{className:m,children:[o.jsx("path",{fill:"none",strokeWidth:2,className:J(f&&"animated"),d:g}),u?o.jsx("circle",{cx:i+1,cy:l+1,r:13/t,className:p,strokeWidth:2}):o.jsxs(o.Fragment,{children:[o.jsx("rect",{x:i-14/t,y:l,width:30/t,height:6/t,stroke:"none",className:p}),o.jsx("rect",{x:i-2/t,y:l-12/t,width:6/t,height:30/t,stroke:"none",className:p})]})]})},fP=e=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:512,viewBox:"0 0 512 256",...e,children:[o.jsx("path",{fill:"none",d:"M0 0h512v256H0z"}),o.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:16,d:"M464 48v160M48 48v160M364 128h100M48 128h100M420 96l-56 32 56 32M92 96l56 32-56 32"}),o.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:32,children:[o.jsx("path",{strokeWidth:16,d:"m262.69 96.34 5.5-5.5a23.31 23.31 0 0 1 32.97 0h0a23.31 23.31 0 0 1 0 32.97L288.97 136l-5.17 5.17a23.315 23.315 0 0 1-33-.025h0a23.24 23.24 0 0 1-6.8-17.115"}),o.jsx("path",{strokeWidth:16,d:"m249.31 159.66-5.5 5.5a23.315 23.315 0 0 1-33-.025h0a23.315 23.315 0 0 1 .03-32.945l17.36-17.36a23.31 23.31 0 0 1 32.97 0h0a23.225 23.225 0 0 1 6.83 17.14"})]})]}),mP=({handleToggleProximityConnection:e,onLayout:t,proximityConnection:n})=>o.jsxs(W_,{orientation:"horizontal",className:"!gap-1 !rounded-md bg-primary/60 px-2 py-1.5 [&>*]:aspect-square [&>*]:!w-fit [&>*]:!rounded-md",children:[o.jsxs(ar,{className:"!aspect-auto !gap-1",onClick:()=>t("TB"),title:"Arrumar fluxo de cima para baixo",children:[o.jsx(dp,{size:24,className:"ml-1.5 shrink-0"}),o.jsx("span",{className:"mr-2.5",children:"Vertical"})]}),o.jsxs(ar,{className:"!aspect-auto !gap-1",onClick:()=>t("LR"),title:"Arrumar fluxo da esquerda para a direita",children:[o.jsx(Va,{size:24,className:"ml-1.5 shrink-0"}),o.jsx("span",{className:"mr-2.5",children:"Horizontal"})]}),o.jsx(ar,{className:"!aspect-auto",onClick:e,title:"Conectar por proximidade",children:o.jsx(fP,{className:J("!max-h-5 !max-w-fit",!n&&"opacity-50",n&&"text-item-media drop-shadow-media")})})]});function pP({id:e,sourceX:t,sourceY:n,targetX:r,targetY:s,sourcePosition:a,targetPosition:i,style:l={},markerEnd:c,data:d}){const{getEdge:u}=qn(),[f,m,p]=Io({sourceX:t,sourceY:n,sourcePosition:a,targetX:r,targetY:s,targetPosition:i}),g=async()=>{const h=u(e);if(h&&d){const v=h.source??"";h.sourceHandle==="source-handle"?await dt.updateNode({flowId:d.flowId,data:{id:v,props:{nextNodeId:null}}}):h.sourceHandle==="expiration-source-handle"&&await dt.updateNode({flowId:d.flowId,data:{id:v,props:{nextNodeIdOnExpiration:null}}})}};return o.jsxs(o.Fragment,{children:[o.jsx(cs,{path:f,markerEnd:c,style:l}),o.jsx(o2,{children:o.jsx("div",{style:{position:"absolute",transform:`translate(-50%, -50%) translate(${m}px,${p}px)`,pointerEvents:"all"},children:o.jsx(X,{className:"h-7 w-7 p-0 transition-all hover:h-8 hover:w-8",size:"icon",variant:"actionDestructive",childrenVariant:"no-dark",icon:o.jsx(wp,{size:16,weight:"bold"}),onClick:g})})})]})}function hP({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:s,targetPosition:a,style:i={},markerEnd:l}){const[c,d,u]=Io({sourceX:e,sourceY:t,sourcePosition:s,targetX:n,targetY:r,targetPosition:a}),{zoom:f}=Li();return o.jsxs(o.Fragment,{children:[o.jsx(cs,{path:c,markerEnd:l,style:i}),o.jsx(o2,{children:o.jsx("div",{style:{position:"absolute",transform:`translate(-50%, -50%) translate(${d}px,${u}px)`,pointerEvents:"all"},children:o.jsx(Ha,{size:20/f,weight:"bold"})})})]})}class c2{constructor(t){this.flowRepo=t}async execute({flowId:t,nodeId:n}){if(!t)throw new Error("RemoveNodeFromFlow: flowId must be provided");if(!n)throw new Error("RemoveNodeFromFlow: nodeId must be provided");await this.flowRepo.removeNodeFromFlow(t,n)}}const d2="hover:!scale-150 hover:!-translate-y-1/2 hover:translate-x-1/2 !min-w-4 !min-h-4",u2={position:re.Left,type:"target",id:"target-handle",className:"!bg-primary !top-6 !pointer-events-none !opacity-0"},Cd={position:re.Right,type:"source",id:"source-handle",className:J("hover:!bg-item-media hover:!text-background !bg-item-media",d2)},gP={position:re.Right,type:"source",id:"expiration-source-handle",className:J("hover:!bg-item-trigger hover:!text-background !bg-item-trigger",d2)},xP=[u2,Cd,gP],f2=[u2,Cd],yP=[Cd],vP={"expiration-source-handle":{audio:"Se expirar",contact:"Se expirar",delay:"Se expirar",document:"Se expirar",media:"Se expirar",text:"Se expirar","user-input":"Se o usuário não responder",start:""},"source-handle":{audio:"Próximo passo",contact:"Próximo passo",delay:"Próximo passo",document:"Próximo passo",media:"Próximo passo",text:"Próximo passo","user-input":"Próximo passo",start:"Primeiro passo"}},bP={"user-input":"bg-item-trigger/20",audio:"bg-item-audio/20",contact:"bg-neutral-60/20",delay:"bg-item-trigger/20",document:"bg-item-document/20",media:"bg-item-media/20",start:"bg-neutral-60/20",text:"bg-item-message/20"};function En({data:{configNode:e,deletable:t=!0,description:n,flowId:r,handles:s=f2,icon:a,id:i,isOrphan:l,label:c,nextNodeId:d,nextNodeIdOnExpiration:u,nodeType:f},children:m}){const p=t2(),{zoom:g}=Li(),[h,v]=y.useState(!1),[b,w]=y.useState({height:"1rem",width:"1rem"});y.useEffect(()=>{w({height:`calc(1rem / ${g})`,width:`calc(1rem / ${g})`})},[g]);const j=p.inProgress&&p.fromNode.id!==i,N=new c2(new Ee);return o.jsxs("div",{className:J("rounded-lg ring-4 ring-transparent",j&&"group/zv-custom-node transition-shadow hover:ring-item-media",l&&f!=="start"&&"ring-[1rem] ring-destructive zv-dark:ring-destructive-foreground"),children:[o.jsx(dP,{nodeId:i,isVisible:h,className:"rounded-xl bg-white zv-dark:bg-black",children:o.jsxs("div",{className:"relative flex items-center gap-5 rounded-xl bg-primary/40 p-2",children:[o.jsx("div",{onClick:()=>v(!1),onKeyUp:S=>(S.key==="Enter"||S.key===" ")&&v(!1),className:"absolute -right-3 -top-3 cursor-pointer rounded-full border border-solid border-destructive bg-background p-1 text-destructive zv-dark:text-destructive",children:o.jsx(wc,{size:16})}),e,t&&o.jsx(X,{variant:"actionDestructive",icon:o.jsx(yt,{size:24}),childrenVariant:"no-dark",onClick:async()=>await N.execute({flowId:r,nodeId:i}),children:"Remover"})]})}),o.jsxs("main",{onClick:()=>e&&v(!0),onKeyUp:S=>(S.key==="Enter"||S.key===" ")&&v(!0),className:"flex w-full flex-col gap-2 border-b border-solid text-start text-base",children:[o.jsxs("div",{className:J("flex w-full items-center gap-2 self-start rounded-t-md p-2.5",bP[f]),children:[o.jsx("div",{children:a}),c&&o.jsx("h1",{className:"text-start text-lg font-bold leading-3",children:c})]}),o.jsxs("div",{className:"flex flex-col gap-2 p-2.5",children:[n&&o.jsx("p",{children:n}),m]})]}),s.map(S=>{var A;const E=!d&&S.type==="source"&&S.id==="source-handle"||!u&&S.type==="source"&&S.id==="expiration-source-handle",I=S.id?((A=vP[S.id])==null?void 0:A[f])??"Próximo passo":"Próximo passo";return o.jsxs("div",{className:J("flex items-center justify-end",S.type!=="target"&&"relative py-3 pr-3"),children:[S.type!=="target"&&o.jsx("span",{children:I}),o.jsx(ro,{position:S.position,type:S.type,id:S.id,className:J(S.className,E&&"!top-1/2 !flex !items-center !justify-center !border-none !bg-background !p-0 hover:!animate-none",!E&&S.type!=="target"&&"!max-h-20 !max-w-20",S.id==="expiration-source-handle"?"!text-item-trigger":"!text-item-media",j&&S.type==="target"&&"group-hover/zv-custom-node:!pointer-events-auto group-hover/zv-custom-node:!absolute group-hover/zv-custom-node:!left-0 group-hover/zv-custom-node:!top-0 group-hover/zv-custom-node:!z-10 group-hover/zv-custom-node:!h-full group-hover/zv-custom-node:!w-full group-hover/zv-custom-node:!transform-none group-hover/zv-custom-node:!rounded-none group-hover/zv-custom-node:!border-none"),style:S.type!=="target"?b:void 0,children:E&&o.jsx(Np,{className:"!pointer-events-none !m-0 !min-h-4 !min-w-4",size:20/g})})]},S.id)})]})}function wP({id:e,data:t,...n}){const r=ji(t.timeUnitType,t.delayInMs??0),s=r!==1?ke[t.timeUnitType]:ke[t.timeUnitType].replace(/s$/,"");return o.jsx(En,{id:e,data:t,...n,children:o.jsx("div",{className:"flex w-full flex-col justify-between gap-2",children:o.jsx("p",{children:t.delayInMs===0?"Não esperar (delay não configurado)":`Esperar ${r} ${s} antes de continuar`})})})}function $i({autoplay:e=!0,itemId:t}){const[n,r]=y.useState(null),s=po(new Ut);return y.useEffect(()=>{(async()=>{const i=await s(t);r(i)})()},[t]),n&&o.jsxs(o.Fragment,{children:[o.jsx("p",{className:"text-base",children:n.isPtt?"Enviando áudio como gravado":"Enviando áudio como encaminhado"}),o.jsx(wa,{autoplay:e,data:n.data})]})}function jP({id:e,data:t,...n}){const s=Qe.useGetAudioList().find(l=>l.id===t.itemId),{minutes:a,seconds:i}=_t.fromMillisecondsToMinutes(t.simulationDelay);return o.jsx(En,{id:e,data:t,...n,children:s&&o.jsxs("div",{className:"flex w-full flex-col justify-between gap-2",children:[o.jsx("p",{className:"m-0 truncate whitespace-pre-wrap break-all text-base font-bold",children:s.name}),o.jsx($i,{autoplay:!1,itemId:t.itemId}),o.jsx("p",{className:"m-0 truncate text-sm text-muted-foreground",children:t.simulationDelay===0?'Enviar sem simular "gravando áudio..."':`Simular "gravando áudio..." por ${a} min e ${i}s`})]})})}function NP({id:e,data:t,...n}){const{inputValue:r}=Ei({defaultCountry:"br",value:t.contactPhone});return o.jsx(En,{id:e,data:t,...n,children:o.jsxs("div",{className:"flex w-full flex-col justify-between gap-2 rounded-md bg-black/15 p-2 zv-dark:bg-black/50",children:[o.jsx("p",{children:t.contactName}),o.jsx("p",{children:r})]})})}function Ri({itemId:e}){const[t,n]=y.useState(null),r=io(new nn);return y.useEffect(()=>{(async()=>{const a=await r(e);n(a)})()},[e]),t&&o.jsx("div",{className:"h-full space-y-1 p-2 text-base",children:o.jsxs(o.Fragment,{children:[o.jsx(nt,{variant:"outline",children:"Nome do arquivo: "}),o.jsx("p",{children:t.fileName})]})})}function EP({id:e,data:t,...n}){const s=He.useGetDocumentList().find(a=>a.id===t.itemId);return o.jsx(En,{id:e,data:t,...n,children:s&&o.jsxs("div",{className:"flex w-full flex-col justify-between gap-2",children:[o.jsx("p",{className:"document-base m-0 truncate whitespace-pre-wrap break-all font-bold",children:s.name}),o.jsx(Ri,{itemId:t.itemId})]})})}class sn{constructor(){pe(this,"mediaStore",Ze)}async addMedia(...t){await this.mediaStore.addMedia(...t)}async deleteMedia(...t){await this.mediaStore.deleteMedia(...t)}async findById(...t){return await this.mediaStore.findById(...t)}async getMediaDataById(...t){return await this.mediaStore.getMediaDataById(...t)}async getMediaList(){return this.mediaStore.mediaList}async reorderMediaList(...t){await this.mediaStore.reorderMediaList(...t)}async saveMedia(...t){await this.mediaStore.saveMedia(...t)}async selectMedia(...t){return await this.mediaStore.selectMedia(...t)}async setMediaFilter(...t){return await this.mediaStore.setMediaFilter(...t)}async toggleMediaIsFavorite(...t){await this.mediaStore.toggleMediaIsFavorite(...t)}}function Vi({itemId:e}){const[t,n]=y.useState(null),r=bo(new sn);return y.useEffect(()=>{(async()=>{const a=await r(e);n(a)})()},[e]),t&&o.jsxs("div",{className:"flex flex-row",children:[o.jsxs("div",{className:"h-full min-w-fit space-y-1 p-2 text-muted-foreground",children:[o.jsx(nt,{variant:"outline",children:"Texto da legenda: "}),t.caption.split(`
`).map((s,a)=>o.jsx("pre",{className:"min-h-[1ch] whitespace-pre-wrap font-sans",children:s},a))]}),o.jsx(oo,{className:"max-h-[50dvh] max-w-[10dvw]",data:t.data})]})}function SP({id:e,data:t,...n}){const s=Ze.useGetMediaList().find(a=>a.id===t.itemId);return o.jsx(En,{id:e,data:t,...n,children:s&&o.jsxs("div",{className:"flex w-full flex-col justify-between gap-2",children:[o.jsx("p",{className:"media-base m-0 truncate whitespace-pre-wrap break-all font-bold",children:s.name}),o.jsx(Vi,{itemId:t.itemId})]})})}class on{constructor(){pe(this,"textMessageStore",Ue)}async addTextMessage(...t){await this.textMessageStore.addTextMessage(...t)}async deleteTextMessage(...t){await this.textMessageStore.deleteTextMessage(...t)}async findById(...t){return await this.textMessageStore.findById(...t)}async getTextMessageDataById(...t){return await this.textMessageStore.getTextMessageDataById(...t)}async getTextMessageList(){return this.textMessageStore.textMessageList}async reorderTextMessageList(...t){await this.textMessageStore.reorderTextMessageList(...t)}async saveTextMessage(...t){await this.textMessageStore.saveTextMessage(...t)}async selectTextMessage(...t){await this.textMessageStore.selectTextMessage(...t)}async setTextMessageFilter(...t){await this.textMessageStore.setTextMessageFilter(...t)}async toggleTextMessageIsFavorite(...t){await this.textMessageStore.toggleTextMessageIsFavorite(...t)}}function Bi({itemId:e}){const[t,n]=y.useState(null),r=wo(new on);return y.useEffect(()=>{(async()=>{const a=await r(e);n(a)})()},[e]),t==null?void 0:t.data.split(`
`).map((s,a)=>o.jsx("pre",{className:"min-h-[1ch] whitespace-pre-wrap font-sans",children:s},a))}function CP({id:e,data:t,...n}){const s=Ue.useGetTextMessageList().find(l=>l.id===t.itemId),{minutes:a,seconds:i}=_t.fromMillisecondsToMinutes(t.simulationDelay);return o.jsx(En,{id:e,data:t,...n,children:s&&o.jsxs("div",{className:"flex w-full flex-col justify-between gap-2",children:[o.jsx("p",{className:"m-0 truncate whitespace-pre-wrap break-all text-base font-bold",children:s.name}),o.jsx("div",{className:"rounded-md bg-black/15 p-2 zv-dark:bg-black/50",children:o.jsx(Bi,{itemId:t.itemId})}),o.jsx("p",{className:"m-0 truncate text-sm text-muted-foreground",children:t.simulationDelay===0?'Enviar sem simular "digitando..."':`Simular "digitando..." por ${a} min e ${i}s`})]})})}function IP({id:e,data:t,...n}){const r=ir[t.compareRule].toLocaleLowerCase(),s=ji(t.timeUnitType,t.expirationTimeoutInMs??0),a=s!==1?ke[t.timeUnitType]:ke[t.timeUnitType].replace(/s$/,"");return o.jsx(En,{id:e,data:{...t,handles:t.expirationTimeoutInMs?xP:f2},...n,children:o.jsxs("div",{className:"flex w-full flex-col justify-between gap-2",children:[t.compareRule==="anything"?o.jsx("div",{className:"my-4 flex flex-wrap items-center gap-x-1.5",children:o.jsxs("div",{className:"rounded-md bg-black/15 p-2 text-base zv-dark:bg-black/50",children:["Esperar o usuário enviar ",r]})}):o.jsxs("div",{className:"my-4 flex flex-wrap items-center gap-1.5",children:[o.jsxs("div",{className:"rounded-md bg-black/15 p-2 text-base zv-dark:bg-black/50",children:["Esperar o usuário digitar ",r]}),t.expectedMessage&&o.jsxs(o.Fragment,{children:[" ",o.jsx(nt,{variant:"trigger",className:"text-base",children:t.expectedMessage})]})]}),o.jsx("p",{children:t.expirationTimeoutInMs&&t.expirationTimeoutInMs>0?`Expira após ${s} ${a}`:"Não expira"})]})})}const Qn=({dayHandler:e,dayNumber:t,...n})=>o.jsx(X,{variant:e.value.includes(t)?"action":"outline",className:J("h-10 w-10 border",e.value.includes(t)&&"border-transparent"),childrenVariant:"no-dark",onClick:async()=>await e.onChange(t),...n,children:t8[t]});class AP{constructor(t){this.flowRepo=t}async execute({data:t,flowId:n}){await this.flowRepo.updateNode({data:t,flowId:n})}}const m2=({data:e})=>{const t=new Ee,n=new AP(t),r=e.schedule.days,s=async E=>{const I=r.includes(E)?r.filter(A=>A!==E):[...r,E];await n.execute({flowId:e.flowId,data:{id:e.id,props:{schedule:{...e.schedule,days:I}}}})},a=async E=>{await n.execute({flowId:e.flowId,data:{id:e.id,props:{schedule:{...e.schedule,maxTime:E}}}})},i=async E=>{await n.execute({flowId:e.flowId,data:{id:e.id,props:{schedule:{...e.schedule,minTime:E}}}})},l=async E=>{await n.execute({flowId:e.flowId,data:{id:e.id,props:{trigger:{...e.trigger,keywordRules:E}}}})},c=async E=>{await n.execute({flowId:e.flowId,data:{id:e.id,props:{enabledSchedule:E}}})},d=async E=>{await n.execute({flowId:e.flowId,data:{id:e.id,props:{enabledTrigger:E}}})},u=async E=>{await n.execute({flowId:e.flowId,data:{id:e.id,props:{trigger:{...e.trigger,sendToContacts:E}}}})},f=async E=>{await n.execute({flowId:e.flowId,data:{id:e.id,props:{trigger:{...e.trigger,sendToGroups:E}}}})},m={value:e.schedule.days,onChange:async E=>await s(E)},p={value:e.schedule.minTime,onChange:async E=>await i(E.target.value)},g={value:e.schedule.maxTime,onChange:async E=>await a(E.target.value)},h={value:e.trigger.keywordRules,onChange:l},v={checked:e.trigger.sendToContacts,onCheckedChange:u},b={checked:e.trigger.sendToGroups,onCheckedChange:f},w={checked:e.enabledSchedule,onCheckedChange:c},j={checked:e.enabledTrigger,onCheckedChange:d},N=h.value.filter(E=>E.keywords.length>0).length;return{dayHandler:m,enabledScheduleHandler:w,enabledTriggerHandler:j,hasNoRules:N===0,keywordRulesHandler:h,maxTimeHandler:g,minTimeHandler:p,rulesCount:N,sendToContactsHandler:v,sendToGroupsHandler:b}},DP=({data:e})=>{const{dayHandler:t,enabledScheduleHandler:n,maxTimeHandler:r,minTimeHandler:s}=m2({data:e});return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"pointer-events-auto mb-2 flex items-end space-x-1",children:[o.jsx(On,{id:"toggle-enabled-schedule",...n}),o.jsx(ce,{htmlFor:"toggle-enabled-schedule",className:"grid cursor-pointer gap-1.5 text-sm leading-none text-muted-foreground",children:"Continuar fluxo em dias e horários específicos"})]}),o.jsxs("div",{className:"flex flex-col gap-5",children:[o.jsxs("div",{className:"flex flex-col items-start justify-between gap-0.5",children:[o.jsx("p",{className:J("font-bold",!e.enabledSchedule&&"text-muted"),children:"Executar em:"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Qn,{dayHandler:t,dayNumber:0,disabled:!n.checked}),o.jsx(Qn,{dayHandler:t,dayNumber:1,disabled:!n.checked}),o.jsx(Qn,{dayHandler:t,dayNumber:2,disabled:!n.checked}),o.jsx(Qn,{dayHandler:t,dayNumber:3,disabled:!n.checked}),o.jsx(Qn,{dayHandler:t,dayNumber:4,disabled:!n.checked}),o.jsx(Qn,{dayHandler:t,dayNumber:5,disabled:!n.checked}),o.jsx(Qn,{dayHandler:t,dayNumber:6,disabled:!n.checked})]})]}),o.jsxs("div",{className:"flex w-full gap-7",children:[o.jsxs("div",{className:"flex flex-col items-start justify-between gap-0.5",children:[o.jsx("p",{className:J("font-bold",!e.enabledSchedule&&"text-muted"),children:"Executar após:"}),o.jsx($e,{className:"w-18",disabled:!e.enabledSchedule,type:"time",...s})]}),o.jsxs("div",{className:"flex flex-col items-start justify-between gap-0.5",children:[o.jsx("p",{className:J("font-bold",!e.enabledSchedule&&"text-muted"),children:"Executar até:"}),o.jsx($e,{className:"w-18",disabled:!e.enabledSchedule,type:"time",...r})]})]})]})]})},MP=pr("relative flex items-center",{variants:{rootSpacing:{default:"py-4",sm:"py-2.5",lg:"py-5",xs:"py-1"}},defaultVariants:{rootSpacing:"default"}}),kP=pr("flex-grow",{variants:{borderVariant:{default:"border-neutral-60",destructive:"border-destructive-foreground",success:"border-status-success-foreground",warning:"border-status-caution-foreground"},borderSize:{default:"border-t",hidden:"border-t-0",thick:"border-t-4",extraThick:"border-t-8"}},defaultVariants:{borderVariant:"default",borderSize:"default"}}),OP=pr("flex-shrink",{variants:{labelVariant:{primary:"text-primary-foreground",neutral:"text-neutral-60",destructive:"text-destructive-foreground",success:"text-status-success-foreground",warning:"text-status-caution-foreground"},labelSpacing:{default:"mx-4",hidden:"hidden",loose:"mx-6",tight:"mx-1",no:"mx-0"},labelWeight:{normal:"font-normal",bold:"font-bold",light:"font-light"}},defaultVariants:{labelVariant:"neutral",labelSpacing:"default",labelWeight:"normal"}});function _r({borderSize:e,borderVariant:t,label:n,labelSpacing:r,labelVariant:s,rootSpacing:a,labelWeight:i}){const l=kP({borderSize:e,borderVariant:t}),c=OP({labelSpacing:r,labelVariant:s,labelWeight:i}),d=MP({rootSpacing:a});return o.jsxs("div",{className:d,children:[o.jsx("div",{className:l}),n&&o.jsx("span",{className:c,children:n}),o.jsx("div",{className:l})]})}function p2({addValue:e,badgeClasses:t,changeValue:n,className:r,disabled:s,dividerLabel:a,insertWhenClickOnKey:i=["Enter"],showDivider:l=!0,values:c,...d}){const u=y.useRef(null);function f(p){if(e){e(p),u.current&&(u.current.value="");return}const g=c.includes(p);u.current&&(u.current.value=""),!(g||p.trim()==="")&&n([...c,p])}function m(p){n(c.filter(g=>g!==p))}return y.useEffect(()=>{setTimeout(()=>{var p;(p=u==null?void 0:u.current)==null||p.focus()},500)},[]),o.jsxs("div",{className:J("flex w-full flex-wrap gap-2 rounded-md","border border-input bg-background p-4 text-base shadow-sm","transition-colors placeholder:text-muted-foreground","focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring",r,s&&"cursor-not-allowed opacity-50 grayscale"),children:[c.map((p,g)=>o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(nt,{variant:"default",size:"item",className:J("max-w-fit select-none gap-1",t,!s&&"pr-1.5 hover:bg-primary"),children:[p,!s&&o.jsx("div",{className:"cursor-pointer rounded-full p-0.5 hover:bg-primary-foreground hover:text-primary",onClick:()=>{m(p)},children:o.jsx(wc,{size:16})})]}),l&&o.jsx(_r,{label:a??"ou",labelSpacing:"no",labelWeight:"light",rootSpacing:"xs"})]},`key-${p}${g}`)),o.jsx("input",{autoComplete:"off",className:J("flex-1 border-none bg-transparent py-2 outline-none",s&&"cursor-not-allowed"),disabled:s,onBlur:()=>{var g;const p=((g=u.current)==null?void 0:g.value.trim())??"";p!==""&&f(p)},onKeyUp:({key:p})=>{var h;let g=((h=u.current)==null?void 0:h.value.trim())??"";if(p==="Backspace"&&g===""&&m(c[c.length-1]),i&&i.includes(p)&&g!==""){const v=new RegExp(p,"g");g=g.replace(v,""),f(g)}},placeholder:s?"Habilite para inserir mais palavras-chave":"Digite nova palavra-chave",ref:u,type:"text",...d})]})}function cm({disabled:e=!1,onKeywordsChange:t,onRemoveCondition:n,onTypeChange:r,ruleTypes:s,value:a}){return o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx("div",{children:o.jsxs(Wn,{disabled:e,value:a.type,onValueChange:i=>r(i),children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(bn,{className:"whitespace-pre-wrap break-all bg-background px-3 py-4",value:"equals",children:o.jsx(is,{placeholder:"Selecione um item"})}),o.jsx(X,{childrenVariant:"no-dark",className:"h-auto p-1.5",iconClasses:J(e&&"cursor-not-allowed"),childrenClassName:J(e&&"cursor-not-allowed"),disabled:e,icon:o.jsx(yt,{size:20}),onClick:n,size:"icon",variant:"actionDestructive"})]}),o.jsx(wn,{children:o.jsx("div",{className:"divide-y",children:Array.from(s).map(([i,l])=>o.jsx(Le,{className:"whitespace-pre-wrap break-all",value:i,children:l},i))})})]})}),o.jsx(p2,{badgeClasses:"scale-[80%] -mx-2 h-8",changeValue:i=>t(i),className:"min-h-16 text-xs",disabled:e,values:a.keywords})]})}const dm=new Map([["equals","...a mensagem for igual a (alguma):"],["contains","...a mensagem contém (alguma):"],["startsWith","...a mensagem começa com (alguma):"],["notContains","...a mensagem não contém (nenhuma):"]]);function TP({disabled:e=!1,handler:t}){const n=t.value,r=n.length,s=r>0,a=r-1;return s?n.map((i,l)=>o.jsxs("div",{children:[o.jsx(cm,{disabled:e,onRemoveCondition:()=>{const c=n.filter(d=>d.id!==i.id);return t.onChange(c)},value:i,ruleTypes:new Map(Array.from(dm).filter(([c])=>!(r>1&&c==="equals"))),onKeywordsChange:c=>{const d=n.map(u=>u.id===i.id?{...u,keywords:c}:u);return t.onChange(d)},onTypeChange:c=>{const d=n.map(u=>u.id===i.id?{...u,type:c}:u);return t.onChange(d)}}),l<a&&o.jsx(_r,{label:"E",labelWeight:"bold",rootSpacing:"xs"})]},i.id)):o.jsx(cm,{disabled:e,ruleTypes:dm,value:{id:Tn(),keywords:[],type:"contains"},onKeywordsChange:i=>{t.onChange([{id:Tn(),keywords:i,type:"contains"}])},onTypeChange:i=>{t.onChange([{id:Tn(),keywords:[],type:i}])}})}function FP({disabled:e=!1,handler:t,withSwitch:n=!0}){const r=n?ce:"div";return o.jsxs("div",{className:"flex items-center",children:[n&&o.jsx(gt,{disabled:e,className:"scale-75",id:"send-to-contacts",...t}),o.jsx(r,{htmlFor:n?"send-to-contacts":void 0,children:o.jsxs("span",{className:"flex items-center gap-2 text-primary",children:[o.jsx(pt,{icon:o.jsx(dn,{size:16}),iconColor:"text-item-trigger",slashed:!t.checked}),o.jsx("span",{children:"Contatos salvos"})]})})]})}function _P({disabled:e=!1,handler:t,withSwitch:n=!0}){const r=n?ce:"div";return o.jsxs("div",{className:"flex items-center",children:[n&&o.jsx(gt,{disabled:e,className:"scale-75",id:"send-to-groups",...t}),o.jsx(r,{htmlFor:n?"send-to-groups":void 0,children:o.jsxs("span",{className:"flex items-center gap-2 text-primary",children:[o.jsx(pt,{icon:o.jsx(jc,{size:16}),iconColor:"text-secondary",slashed:!t.checked}),o.jsx("span",{children:"Grupos"})]})})]})}const PP=({data:e})=>{var c;const{enabledTriggerHandler:t,hasNoRules:n,keywordRulesHandler:r,rulesCount:s,sendToContactsHandler:a,sendToGroupsHandler:i}=m2({data:e}),l=t.checked;return o.jsxs("div",{className:J("pointer-events-auto",!l&&"pointer-events-none"),children:[o.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[o.jsxs("div",{className:"pointer-events-auto flex cursor-auto items-end gap-1",children:[o.jsx(On,{id:"toggle-enabled-trigger",...t}),o.jsx(ce,{htmlFor:"toggle-enabled-trigger",className:"grid cursor-pointer gap-1.5 text-sm leading-none text-muted-foreground",children:"Iniciar fluxo quando..."})]}),o.jsxs("div",{className:J("flex items-center gap-2",!l&&"opacity-50 grayscale"),children:[o.jsx(pt,{icon:o.jsx(za,{size:16}),iconColor:"text-item-trigger",slashed:n}),o.jsxs("p",{className:"text-xs",children:["Condições de disparo (",s,")"]})]})]}),o.jsxs("div",{className:J("flex flex-col gap-2",!l&&"grayscale"),children:[o.jsx("div",{className:"flex flex-col items-start justify-between gap-0.5",children:o.jsxs("div",{className:"w-full",children:[o.jsx(Bn,{className:"nowheel max-h-80 rounded-md bg-main-background p-2 ring-1 ring-primary-foreground",thumbSize:"sm",children:o.jsx(TP,{disabled:!l,handler:r})}),((c=r.value[0])==null?void 0:c.type)!=="equals"&&s<5&&o.jsx(X,{disabled:n,icon:o.jsx(tn,{}),className:"mx-auto mt-2 flex",size:"sm",onClick:()=>r.onChange([...r.value,{id:Tn(),keywords:[],type:"contains"}]),children:"Adicionar outra condição"})]})}),o.jsxs("div",{className:"flex flex-col items-center gap-1 rounded-md bg-background/80 p-2",children:[o.jsx("p",{className:J("w-full rounded-md bg-neutral-60/20 py-0.5 text-center text-sm text-primary",!l&&"opacity-50"),children:"Permitir envio para:"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(FP,{disabled:!l,handler:a}),o.jsx(_P,{disabled:!l,handler:i})]}),o.jsx("p",{className:"mt-2 text-center text-xs font-bold text-item-audio",children:'As palavras-chave não diferenciam entre maiúsculas e minúsculas, ou seja, as palavras "Olá ", "olá" e "OLÁ" são reconhecidas da mesma forma'})]})]})]})};function LP({id:e,data:t,...n}){return o.jsxs(En,{id:e,data:{...t,deletable:!1,handles:yP},...n,children:[o.jsx(PP,{data:t}),o.jsx("hr",{className:"mx-5 my-2 border-dashed"}),o.jsx(DP,{data:t})]})}class $P{constructor(t,n){this.flowRepo=t,this.messageRepo=n}async execute({data:t,flowId:n}){if(t.props.itemId===void 0||t.props.itemId.trim()==="")throw new Error("UpdateSendAudioNode: Id or text must be provided");const r=await this.messageRepo.findById(t.props.itemId);if(!r)throw new Error("UpdateSendAudioNode: Audio not found");return await this.flowRepo.updateNode({data:t,flowId:n}),{id:r.id}}}function RP({itemId:e,flowId:t,nodeId:n,simulationDelay:r}){const{minutes:s,seconds:a}=_t.fromMillisecondsToMinutes(r),i=new Ee,l=new Ut,c=Qe.useGetAudioList(),[d,u]=y.useState(e),[f,m]=y.useState(s),[p,g]=y.useState(a),h={value:String(f),onValueChange:({valueAsNumber:b})=>{isNaN(b)&&(b=0),m(b)}},v={value:String(p),onValueChange:({valueAsNumber:b})=>{isNaN(b)&&(b=0),g(b)}};return o.jsx(we,{actionVariant:"action",actionProps:{childrenVariant:"no-dark"},onAction:async()=>{const b=new $P(i,l),{id:w}=await b.execute({flowId:t,data:{id:n,props:{itemId:d,simulationDelay:(f*60+p)*1e3}}});u(w)},action:"Salvar",cancel:"Cancelar",description:o.jsxs("div",{children:[o.jsx(vn,{defaultSelectedItem:d??"",items:c,onSelectItem:async b=>u(b),previewDataBuilder:b=>o.jsx($i,{itemId:b}),selectedItem:d,children:null}),o.jsxs("div",{className:"flex items-baseline justify-start gap-6 max-sm:items-center",children:[o.jsxs(ce,{htmlFor:"delay-min",className:"flex flex-wrap gap-x-1.5 text-base",children:['Simular "gravando áudio..." por'," ",o.jsx("span",{className:"font-bold text-primary",children:`${h.value} min e ${v.value}s`})]}),o.jsx(st,{...h,hint:"Minutos"}),o.jsx(st,{...v,hint:"Segundos"})]})]}),title:o.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[o.jsx(ot,{size:32}),o.jsx("p",{children:"Configurações"})]}),trigger:o.jsx(X,{icon:o.jsx(ot,{size:24}),variant:"action",childrenVariant:"no-dark",className:"w-full",children:"Configurar"})})}class VP{constructor(t){this.flowRepo=t}async execute({data:t,flowId:n}){await this.flowRepo.updateNode({data:t,flowId:n})}}function BP({contactName:e,contactPhone:t,flowId:n,nodeId:r}){const s=new Ee,{country:a,handlePhoneValueChange:i,inputRef:l,inputValue:c,phone:d,setCountry:u}=Ei({defaultCountry:"br",value:t}),[f,m]=y.useState(e);return o.jsx(we,{className:"md:w-fit",actionVariant:"action",actionProps:{childrenVariant:"no-dark"},onAction:async()=>{await new VP(s).execute({flowId:n,data:{id:r,props:{contactName:f,contactPhone:d}}})},action:"Salvar",cancel:"Cancelar",description:o.jsxs("div",{children:[o.jsx($e,{name:"SendContactNodeConfigNameInput",type:"text",value:f,onChange:p=>{m(p.target.value)}}),o.jsxs("div",{className:"flex gap-1.5",children:[o.jsxs(Wn,{value:a.iso2,onValueChange:p=>u(p),children:[o.jsx(bn,{className:"h-auto w-auto whitespace-pre-wrap break-all bg-background px-4",value:a.iso2,children:o.jsx(Br,{iso2:a.iso2,className:"h-9"})}),o.jsx(wn,{className:"z-[101] max-h-[40dvh] w-[562px]",children:o.jsx("div",{className:"divide-y",children:Gn.map(p=>{const g=vt(p);return o.jsx(Le,{value:g.iso2,className:"gap-2 whitespace-pre-wrap break-all",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Br,{iso2:g.iso2,className:"h-9 shrink-0"}),o.jsx("p",{className:"shrink-0",children:g.name}),o.jsxs("p",{className:"shrink-0 text-primary/80",children:["+",g.dialCode]})]})},g.iso2)})})})]}),o.jsx($e,{name:"SendContactNodeConfigPhoneInput",type:"tel",ref:l,value:c,onChange:i})]})]}),title:o.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[o.jsx(ot,{size:32}),o.jsx("p",{children:"Configurações"})]}),trigger:o.jsx(X,{icon:o.jsx(ot,{size:24}),variant:"action",childrenVariant:"no-dark",className:"w-full",children:"Configurar"})})}class zP{constructor(t,n){this.flowRepo=t,this.messageRepo=n}async execute({data:t,flowId:n}){if(t.props.itemId===void 0||t.props.itemId.trim()==="")throw new Error("UpdateSendDocumentNode: Id or text must be provided");const r=await this.messageRepo.findById(t.props.itemId);if(!r)throw new Error("UpdateSendDocumentNode: Document not found");return await this.flowRepo.updateNode({data:t,flowId:n}),{id:r.id}}}function HP({itemId:e,flowId:t,nodeId:n}){const r=new Ee,s=new nn,a=He.useGetDocumentList(),[i,l]=y.useState(e);return o.jsx(we,{className:"md:w-fit",actionVariant:"action",actionProps:{childrenVariant:"no-dark"},onAction:async()=>{const c=new zP(r,s),{id:d}=await c.execute({flowId:t,data:{id:n,props:{itemId:i}}});l(d)},action:"Salvar",cancel:"Cancelar",description:o.jsx("div",{children:o.jsx(vn,{defaultSelectedItem:i??"",items:a,onSelectItem:async c=>l(c),previewDataBuilder:c=>o.jsx(Ri,{itemId:c}),selectedItem:i,children:null})}),title:o.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[o.jsx(ot,{size:32}),o.jsx("p",{children:"Configurações"})]}),trigger:o.jsx(X,{icon:o.jsx(ot,{size:24}),variant:"action",childrenVariant:"no-dark",className:"w-full",children:"Configurar"})})}class ZP{constructor(t,n){this.flowRepo=t,this.messageRepo=n}async execute({data:t,flowId:n}){if(t.props.itemId===void 0||t.props.itemId.trim()==="")throw new Error("UpdateSendMediaNode: Id or text must be provided");const r=await this.messageRepo.findById(t.props.itemId);if(!r)throw new Error("UpdateSendMediaNode: Media not found");return await this.flowRepo.updateNode({data:t,flowId:n}),{id:r.id}}}function UP({itemId:e,flowId:t,nodeId:n}){const r=new Ee,s=new sn,a=Ze.useGetMediaList(),[i,l]=y.useState(e);return o.jsx(we,{className:"md:w-fit",actionVariant:"action",actionProps:{childrenVariant:"no-dark"},onAction:async()=>{const c=new ZP(r,s),{id:d}=await c.execute({flowId:t,data:{id:n,props:{itemId:i}}});l(d)},action:"Salvar",cancel:"Cancelar",description:o.jsx("div",{children:o.jsx(vn,{defaultSelectedItem:i??"",items:a,onSelectItem:async c=>l(c),previewDataBuilder:c=>o.jsx(Vi,{itemId:c}),selectedItem:i,children:null})}),title:o.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[o.jsx(ot,{size:32}),o.jsx("p",{children:"Configurações"})]}),trigger:o.jsx(X,{icon:o.jsx(ot,{size:24}),variant:"action",childrenVariant:"no-dark",className:"w-full",children:"Configurar"})})}class WP{constructor(t,n){this.flowRepo=t,this.messageRepo=n}async execute({data:t,flowId:n}){if(t.props.itemId===void 0||t.props.itemId.trim()==="")throw new Error("UpdateSendTextNode: Id must be provided");const r=await this.messageRepo.findById(t.props.itemId);if(!r)throw new Error("UpdateSendTextNode: TextMessage not found");return await this.flowRepo.updateNode({data:t,flowId:n}),{id:r.id}}}function GP({itemId:e,flowId:t,nodeId:n,simulationDelay:r}){const{minutes:s,seconds:a}=_t.fromMillisecondsToMinutes(r),i=new Ee,l=new on,c=Ue.useGetTextMessageList(),[d,u]=y.useState(e),[f,m]=y.useState(s),[p,g]=y.useState(a),h={value:String(f),onValueChange:({valueAsNumber:b})=>{isNaN(b)&&(b=0),m(b)}},v={value:String(p),onValueChange:({valueAsNumber:b})=>{isNaN(b)&&(b=0),g(b)}};return o.jsx(we,{className:"md:w-fit",actionVariant:"action",actionProps:{childrenVariant:"no-dark"},onAction:async()=>{const b=new WP(i,l),{id:w}=await b.execute({flowId:t,data:{id:n,props:{itemId:d,simulationDelay:(f*60+p)*1e3}}});u(w)},action:"Salvar",onCancel:()=>{u(e)},cancel:"Cancelar",description:o.jsxs("div",{children:[o.jsx("h1",{className:"mb-2 text-base",children:"Selecione um texto"}),o.jsx(vn,{defaultSelectedItem:d??"",items:c,onSelectItem:async b=>u(b),previewDataBuilder:b=>o.jsx(Bi,{itemId:b}),selectedItem:d,children:null}),o.jsxs("div",{className:"flex items-baseline justify-start gap-6 max-sm:items-center",children:[o.jsxs(ce,{htmlFor:"delay-min",className:"flex flex-wrap gap-x-1.5 text-base",children:['Simular "digitando..." por'," ",o.jsx("span",{className:"font-bold text-primary",children:`${h.value} min e ${v.value}s`})]}),o.jsx(st,{...h,hint:"Minutos"}),o.jsx(st,{...v,hint:"Segundos"})]})]}),title:o.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[o.jsx(ot,{size:32}),o.jsx("p",{children:"Configurações"})]}),trigger:o.jsx(X,{icon:o.jsx(ot,{size:24}),variant:"action",childrenVariant:"no-dark",className:"w-full",children:"Configurar"})})}class qP{constructor(t){this.flowRepo=t}async execute({data:t,flowId:n}){await this.flowRepo.updateNode({data:t,flowId:n})}}function KP({compareRule:e,expectedMessage:t,expirationTimeoutInMs:n,timeUnitType:r,nodeId:s,flowId:a}){const i=new Ee,[l,c]=y.useState(t),[d,u]=y.useState(!1),[f,m]=y.useState(e),[p,g]=y.useState((n??0)>0),[h,v]=y.useState(r),[b,w]=y.useState(()=>{const N=n??0;return ji(r,N<1e3?1e3:N)}),j={value:String(b),onValueChange:({valueAsNumber:N})=>{isNaN(N)&&(N=1),w(N)}};return o.jsx(we,{className:"md:w-fit",actionVariant:"action",actionProps:{childrenVariant:"no-dark"},onAction:async()=>{await new qP(i).execute({flowId:a,data:{id:s,props:{expectedMessage:l,compareRule:f,expirationTimeoutInMs:p?ca(h,b):0,timeUnitType:h}}})},action:"Salvar",cancel:"Cancelar",description:o.jsxs("div",{children:[o.jsxs(Aa,{open:d,onOpenChange:u,modal:!0,children:[o.jsx(Da,{asChild:!0,children:o.jsxs(X,{variant:"outline",role:"combobox","aria-expanded":d,childrenVariant:"no-dark",className:J("flex h-9 items-center whitespace-nowrap","rounded-md border border-input bg-transparent p-6 text-sm","shadow-sm ring-offset-background placeholder:text-muted-foreground","focus:outline-none focus:ring-1 focus:ring-ring","disabled:cursor-not-allowed disabled:opacity-50","break-all bg-background","[&>span]:flex [&>span]:w-full [&>span]:justify-between","border border-solid"),children:[o.jsx("p",{className:"truncate",children:ir[f]}),o.jsx(lo,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),o.jsx(Ma,{className:"z-[101] w-[var(--radix-popper-anchor-width)] p-0",children:o.jsxs(ka,{defaultValue:f,filter:(N,S)=>{const E=ir[N];if(!E)return 0;const I=Zt(E),A=Zt(S);return I.includes(A)?1:0},children:[o.jsx(Oa,{placeholder:"Pesquisar opção",className:"h-9"}),o.jsxs(Ta,{children:[o.jsx(Fa,{className:"py-2",children:"Nenhum item encontrado."}),o.jsx(_a,{children:o.jsx("div",{className:"divide-y",children:Object.entries(ir).map(([N,S])=>o.jsxs(Pa,{value:N,onSelect:E=>{(E==="anything"||E==="anyTextMessage")&&c(void 0),m(E),u(!1)},children:[o.jsx("p",{children:S}),o.jsx(co,{className:J("ml-auto h-4 w-4",f===N?"opacity-100":"opacity-0")})]},N))})})]})]})})]}),!f.startsWith("any")&&o.jsx($e,{name:"UserInputNodeConfigInput",type:"text",value:l,onChange:N=>{c(N.target.value)}}),o.jsxs("div",{className:"pointer-events-auto flex items-center space-x-2",children:[o.jsx(On,{id:"toggle-can-expire",checked:p,onClick:()=>g(N=>!N)}),o.jsx(ce,{htmlFor:"toggle-can-expire",className:"grid cursor-pointer gap-1.5 text-sm leading-none text-muted-foreground",children:"Pode expirar"})]}),p&&o.jsx("div",{children:o.jsxs("div",{className:"flex items-center justify-start gap-6 max-sm:items-center",children:[o.jsx(ce,{htmlFor:"delay-min",className:"flex w-full flex-wrap gap-x-1.5 text-base",children:"Expirar após"}),o.jsx(st,{inputClasses:"w-14",max:999,min:1,...j}),o.jsxs(Wn,{value:h,onValueChange:N=>{v(N)},children:[o.jsx(bn,{className:"h-full w-56 p-3.5",children:o.jsx(is,{placeholder:ke[h]})}),o.jsxs(wn,{className:"z-[9999]",children:[o.jsx(Le,{value:"seconds",children:ke.seconds}),o.jsx(Le,{value:"minutes",children:ke.minutes}),o.jsx(Le,{value:"hours",children:ke.hours}),o.jsx(Le,{value:"days",children:ke.days})]})]})]})})]}),title:o.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[o.jsx(ot,{size:32}),o.jsx("p",{children:"Configurações"})]}),trigger:o.jsx(X,{icon:o.jsx(ot,{size:24}),variant:"action",childrenVariant:"no-dark",className:"w-full",children:"Configurar"})})}const et={audio:e=>({configNode:o.jsx(RP,{itemId:e.itemId,flowId:e.flowId,nodeId:e.id,simulationDelay:e.simulationDelay}),itemId:e.itemId,simulationDelay:e.simulationDelay,flowId:e.flowId,icon:o.jsx(pn,{size:28,className:"min-w-max shrink-0 text-item-audio"}),id:e.id,label:"Enviar áudio",nextNodeId:e.nextNodeId,nextNodeIdOnExpiration:e.nextNodeIdOnExpiration,nodeType:"audio"}),contact:e=>({configNode:o.jsx(BP,{contactName:e.contactName,contactPhone:e.contactPhone,flowId:e.flowId,nodeId:e.id}),contactName:e.contactName,contactPhone:e.contactPhone,flowId:e.flowId,icon:o.jsx(dn,{size:28,className:"min-w-max shrink-0 text-foreground"}),id:e.id,label:"Enviar contato",nextNodeId:e.nextNodeId,nextNodeIdOnExpiration:e.nextNodeIdOnExpiration,nodeType:"contact"}),delay:e=>({configNode:o.jsx(iA,{delayInMs:e.delayInMs,flowId:e.flowId,timeUnitType:e.timeUnitType,nodeId:e.id}),timeUnitType:e.timeUnitType,delayInMs:e.delayInMs,flowId:e.flowId,icon:o.jsx(Nl,{size:28,className:"min-w-max shrink-0 text-item-trigger"}),id:e.id,label:"Esperar",nextNodeId:e.nextNodeId,nextNodeIdOnExpiration:e.nextNodeIdOnExpiration,nodeType:"delay"}),document:e=>({configNode:o.jsx(HP,{flowId:e.flowId,itemId:e.itemId,nodeId:e.id}),itemId:e.itemId,flowId:e.flowId,icon:o.jsx(Ht,{size:28,className:"min-w-max shrink-0 text-item-document"}),id:e.id,label:"Enviar documento",nextNodeId:e.nextNodeId,nextNodeIdOnExpiration:e.nextNodeIdOnExpiration,nodeType:"document"}),media:e=>({configNode:o.jsx(UP,{itemId:e.itemId,flowId:e.flowId,nodeId:e.id}),itemId:e.itemId,flowId:e.flowId,icon:o.jsx($s,{size:28,className:"min-w-max shrink-0 text-item-media"}),id:e.id,label:"Enviar mídia",nextNodeId:e.nextNodeId,nextNodeIdOnExpiration:e.nextNodeIdOnExpiration,nodeType:"media"}),start:e=>({enabledSchedule:e.enabledSchedule,enabledTrigger:e.enabledTrigger,trigger:e.trigger,flowId:e.flowId,icon:o.jsx(n8,{size:28,className:"min-w-max shrink-0 text-item-media"}),id:e.id,label:"Iniciar",nextNodeId:e.nextNodeId,nextNodeIdOnExpiration:null,nodeType:"start",schedule:e.schedule}),text:e=>({configNode:o.jsx(GP,{itemId:e.itemId,flowId:e.flowId,nodeId:e.id,simulationDelay:e.simulationDelay}),itemId:e.itemId,simulationDelay:e.simulationDelay,flowId:e.flowId,icon:o.jsx($n,{size:28,className:"min-w-max shrink-0 text-item-message"}),id:e.id,label:"Enviar texto",nextNodeId:e.nextNodeId,nextNodeIdOnExpiration:e.nextNodeIdOnExpiration,nodeId:e.id,nodeType:"text"}),"user-input":e=>({configNode:o.jsx(KP,{flowId:e.flowId,compareRule:e.compareRule,expectedMessage:e.expectedMessage,nodeId:e.id,expirationTimeoutInMs:e.expirationTimeoutInMs,timeUnitType:e.timeUnitType}),timeUnitType:e.timeUnitType,compareRule:e.compareRule,expectedMessage:e.expectedMessage,expirationTimeoutInMs:e.expirationTimeoutInMs,flowId:e.flowId,icon:o.jsxs("div",{className:"relative",children:[o.jsx(dn,{size:28,className:"min-w-max shrink-0 text-item-trigger"}),o.jsx(El,{size:16,className:"absolute -right-2 -top-1.5 min-w-max shrink-0 text-item-trigger"})]}),id:e.id,label:"Aguardar o usuário responder",nextNodeId:e.nextNodeId,nextNodeIdOnExpiration:e.nextNodeIdOnExpiration,nodeType:"user-input"})},um=(e,t)=>{const n=e.map(s=>{let a;switch(s.type){case"delay":a=et.delay(s);break;case"user-input":a=et["user-input"](s);break;case"audio":a=et.audio(s);break;case"contact":a=et.contact(s);break;case"document":a=et.document(s);break;case"media":a=et.media(s);break;case"text":a=et.text(s);break;case"start":a=et.start(t);break}return{id:s.id,position:s.position,data:a,type:s.type in q2?s.type:"default",className:"!w-96 react-flow__node-default !p-0 !rounded-lg"}}),r={id:t.id,position:t.position,data:et.start(t),type:"start",className:"!w-96 react-flow__node-default !p-0 !rounded-lg"};return n.push(r),n},fm=(e,t)=>{const n=e.filter(a=>a.nextNodeId).map((a,i)=>({id:`${a.id}-${a.nextNodeId}-${i}`,source:a.id,sourceHandle:"source-handle",target:a.nextNodeId??"",animated:!1,data:{flowId:a.flowId},markerEnd:{type:Jt.ArrowClosed,width:20,color:"#13C273"},style:{strokeWidth:2,stroke:"#13C273"}})),r=e.filter(a=>a.nextNodeIdOnExpiration).map(a=>({id:`${a.id}-${a.nextNodeIdOnExpiration}`,source:a.id,sourceHandle:"expiration-source-handle",target:a.nextNodeIdOnExpiration??"",animated:!0,data:{flowId:a.flowId},markerEnd:{type:Jt.ArrowClosed,width:20,color:"#F08E17"},style:{strokeWidth:2,stroke:"#F08E17"}}));return[{id:`${t.id}-${t.nextNodeId}`,source:t.id,sourceHandle:"source-handle",target:t.nextNodeId??"",animated:!1,data:{flowId:t.flowId},markerEnd:{type:Jt.ArrowClosed,width:20,color:"#13C273"},style:{strokeWidth:2,stroke:"#13C273"}},...n,...r]},mm=(e,t)=>{if(t!=null&&t.skipEdges&&t.skipNodes)throw new Error("You can not skip everything");if(t!=null&&t.skipNodes)return{edges:fm(e.draft.nodes,e.draft.startNode)};if(t!=null&&t.skipEdges)return{nodes:um(e.draft.nodes,e.draft.startNode)};const n=fm(e.draft.nodes,e.draft.startNode),r=um(e.draft.nodes,e.draft.startNode);return{edges:n,nodes:r}},YP=()=>y.useCallback(async({edges:t,nodes:n})=>{const r=n.find(s=>s.type==="start");return{edges:t.filter(s=>s.source!==(r==null?void 0:r.id)),nodes:n.filter(s=>s.id!==(r==null?void 0:r.id))}},[]),XP=({flowRepository:e,handleUpdateEdges:t,selectedFlowId:n})=>y.useCallback(s=>{const a=s.source,i=s.target;return s.sourceHandle==="expiration-source-handle"?e.updateNode({flowId:n,data:{id:a,props:{nextNodeIdOnExpiration:i}}}):e.updateNode({flowId:n,data:{id:a,props:{nextNodeId:i}}}),t(l=>px({...s,animated:s.sourceHandle==="expiration-source-handle"},l))},[e,t,n]),JP=({selectedFlowId:e})=>{const{screenToFlowPosition:t}=qn(),{setFlowId:n,setFromHandle:r,setFromNodeId:s,setPosition:a,setIsOpen:i}=Ke();return y.useCallback((c,d)=>{var f;if(!d.isValid&&!d.toHandle){const m=e,p=((f=d.fromNode)==null?void 0:f.id)??null,g=d==null?void 0:d.fromHandle,h=g==null?void 0:g.id,v=t({x:(g==null?void 0:g.x)??0,y:(g==null?void 0:g.y)??0}),{clientX:b,clientY:w}="changedTouches"in c?c.changedTouches[0]:c,j={x:b+(b-v.x<100?100:0),y:w};(p&&m&&h&&h==="source-handle"||h==="expiration-source-handle")&&(n(m),r(h),s(p),a(t(j)),i(!0))}},[t,e,n,r,s,i,a])},QP=()=>y.useCallback(t=>{t.preventDefault(),t.dataTransfer.dropEffect="move"},[]),eL=({flowId:e,position:t,type:n})=>{let r,s;switch(n){case"delay":r=Ls.create({delayInMs:1,flowId:e,nextNodeId:null,position:t,timeUnitType:"seconds",type:n}).metadata,s=et.delay(r);break;case"user-input":r=yc.create({compareRule:"anything",expectedMessage:void 0,flowId:e,nextNodeId:null,position:t,timeUnitType:"seconds",type:n}).metadata,s=et["user-input"](r);break;case"audio":r=Na.create({flowId:e,itemId:"",nextNodeId:null,position:t,simulationDelay:0,type:n}).metadata,s=et.audio(r);break;case"contact":r=xc.create({contactName:"",contactPhone:"",flowId:e,itemId:"",nextNodeId:null,position:t,type:n}).metadata,s=et.contact(r);break;case"document":r=Ea.create({flowId:e,itemId:"",nextNodeId:null,position:t,type:n}).metadata,s=et.document(r);break;case"media":r=Sa.create({flowId:e,itemId:"",nextNodeId:null,position:t,type:n}).metadata,s=et.media(r);break;case"text":r=Ca.create({flowId:e,itemId:"",nextNodeId:null,position:t,simulationDelay:0,type:n}).metadata,s=et.text(r);break;case"start":case null:default:s=null}return!s||!r?null:{node:{id:r.id,position:r.position,data:s,type:n??"default",className:"!w-96 react-flow__node-default !p-0 !rounded-lg"},nodeMetadata:r}},tL=({selectedFlowId:e,type:t})=>{const{screenToFlowPosition:n}=qn(),{selectFlowNodeType:r,setFlowId:s,setFromHandle:a,setFromNodeId:i,setIsOpen:l,setPosition:c}=Ke();return y.useCallback(u=>{if(u.preventDefault(),!t)return;const f=n({x:u.clientX,y:u.clientY});eL({flowId:e,position:f,type:t})&&(r(t),s(e),a(null),i(null),l(!0),c(f))},[n,r,e,s,a,i,l,c,t])},nL=({handleUpdateEdges:e})=>y.useCallback(n=>{e(r=>Tx(n,r))},[e]);var rL="\0",er="\0",pm="";let sL=class{constructor(t){pe(this,"_isDirected",!0);pe(this,"_isMultigraph",!1);pe(this,"_isCompound",!1);pe(this,"_label");pe(this,"_defaultNodeLabelFn",()=>{});pe(this,"_defaultEdgeLabelFn",()=>{});pe(this,"_nodes",{});pe(this,"_in",{});pe(this,"_preds",{});pe(this,"_out",{});pe(this,"_sucs",{});pe(this,"_edgeObjs",{});pe(this,"_edgeLabels",{});pe(this,"_nodeCount",0);pe(this,"_edgeCount",0);pe(this,"_parent");pe(this,"_children");t&&(this._isDirected=Object.hasOwn(t,"directed")?t.directed:!0,this._isMultigraph=Object.hasOwn(t,"multigraph")?t.multigraph:!1,this._isCompound=Object.hasOwn(t,"compound")?t.compound:!1),this._isCompound&&(this._parent={},this._children={},this._children[er]={})}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(t){return this._label=t,this}graph(){return this._label}setDefaultNodeLabel(t){return this._defaultNodeLabelFn=t,typeof t!="function"&&(this._defaultNodeLabelFn=()=>t),this}nodeCount(){return this._nodeCount}nodes(){return Object.keys(this._nodes)}sources(){var t=this;return this.nodes().filter(n=>Object.keys(t._in[n]).length===0)}sinks(){var t=this;return this.nodes().filter(n=>Object.keys(t._out[n]).length===0)}setNodes(t,n){var r=arguments,s=this;return t.forEach(function(a){r.length>1?s.setNode(a,n):s.setNode(a)}),this}setNode(t,n){return Object.hasOwn(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=n),this):(this._nodes[t]=arguments.length>1?n:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=er,this._children[t]={},this._children[er][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)}node(t){return this._nodes[t]}hasNode(t){return Object.hasOwn(this._nodes,t)}removeNode(t){var n=this;if(Object.hasOwn(this._nodes,t)){var r=s=>n.removeEdge(n._edgeObjs[s]);delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],this.children(t).forEach(function(s){n.setParent(s)}),delete this._children[t]),Object.keys(this._in[t]).forEach(r),delete this._in[t],delete this._preds[t],Object.keys(this._out[t]).forEach(r),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this}setParent(t,n){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(n===void 0)n=er;else{n+="";for(var r=n;r!==void 0;r=this.parent(r))if(r===t)throw new Error("Setting "+n+" as parent of "+t+" would create a cycle");this.setNode(n)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=n,this._children[n][t]=!0,this}_removeFromParentsChildList(t){delete this._children[this._parent[t]][t]}parent(t){if(this._isCompound){var n=this._parent[t];if(n!==er)return n}}children(t=er){if(this._isCompound){var n=this._children[t];if(n)return Object.keys(n)}else{if(t===er)return this.nodes();if(this.hasNode(t))return[]}}predecessors(t){var n=this._preds[t];if(n)return Object.keys(n)}successors(t){var n=this._sucs[t];if(n)return Object.keys(n)}neighbors(t){var n=this.predecessors(t);if(n){const s=new Set(n);for(var r of this.successors(t))s.add(r);return Array.from(s.values())}}isLeaf(t){var n;return this.isDirected()?n=this.successors(t):n=this.neighbors(t),n.length===0}filterNodes(t){var n=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});n.setGraph(this.graph());var r=this;Object.entries(this._nodes).forEach(function([i,l]){t(i)&&n.setNode(i,l)}),Object.values(this._edgeObjs).forEach(function(i){n.hasNode(i.v)&&n.hasNode(i.w)&&n.setEdge(i,r.edge(i))});var s={};function a(i){var l=r.parent(i);return l===void 0||n.hasNode(l)?(s[i]=l,l):l in s?s[l]:a(l)}return this._isCompound&&n.nodes().forEach(i=>n.setParent(i,a(i))),n}setDefaultEdgeLabel(t){return this._defaultEdgeLabelFn=t,typeof t!="function"&&(this._defaultEdgeLabelFn=()=>t),this}edgeCount(){return this._edgeCount}edges(){return Object.values(this._edgeObjs)}setPath(t,n){var r=this,s=arguments;return t.reduce(function(a,i){return s.length>1?r.setEdge(a,i,n):r.setEdge(a,i),i}),this}setEdge(){var t,n,r,s,a=!1,i=arguments[0];typeof i=="object"&&i!==null&&"v"in i?(t=i.v,n=i.w,r=i.name,arguments.length===2&&(s=arguments[1],a=!0)):(t=i,n=arguments[1],r=arguments[3],arguments.length>2&&(s=arguments[2],a=!0)),t=""+t,n=""+n,r!==void 0&&(r=""+r);var l=Os(this._isDirected,t,n,r);if(Object.hasOwn(this._edgeLabels,l))return a&&(this._edgeLabels[l]=s),this;if(r!==void 0&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(n),this._edgeLabels[l]=a?s:this._defaultEdgeLabelFn(t,n,r);var c=oL(this._isDirected,t,n,r);return t=c.v,n=c.w,Object.freeze(c),this._edgeObjs[l]=c,hm(this._preds[n],t),hm(this._sucs[t],n),this._in[n][l]=c,this._out[t][l]=c,this._edgeCount++,this}edge(t,n,r){var s=arguments.length===1?xl(this._isDirected,arguments[0]):Os(this._isDirected,t,n,r);return this._edgeLabels[s]}edgeAsObj(){const t=this.edge(...arguments);return typeof t!="object"?{label:t}:t}hasEdge(t,n,r){var s=arguments.length===1?xl(this._isDirected,arguments[0]):Os(this._isDirected,t,n,r);return Object.hasOwn(this._edgeLabels,s)}removeEdge(t,n,r){var s=arguments.length===1?xl(this._isDirected,arguments[0]):Os(this._isDirected,t,n,r),a=this._edgeObjs[s];return a&&(t=a.v,n=a.w,delete this._edgeLabels[s],delete this._edgeObjs[s],gm(this._preds[n],t),gm(this._sucs[t],n),delete this._in[n][s],delete this._out[t][s],this._edgeCount--),this}inEdges(t,n){var r=this._in[t];if(r){var s=Object.values(r);return n?s.filter(a=>a.v===n):s}}outEdges(t,n){var r=this._out[t];if(r){var s=Object.values(r);return n?s.filter(a=>a.w===n):s}}nodeEdges(t,n){var r=this.inEdges(t,n);if(r)return r.concat(this.outEdges(t,n))}};function hm(e,t){e[t]?e[t]++:e[t]=1}function gm(e,t){--e[t]||delete e[t]}function Os(e,t,n,r){var s=""+t,a=""+n;if(!e&&s>a){var i=s;s=a,a=i}return s+pm+a+pm+(r===void 0?rL:r)}function oL(e,t,n,r){var s=""+t,a=""+n;if(!e&&s>a){var i=s;s=a,a=i}var l={v:s,w:a};return r&&(l.name=r),l}function xl(e,t){return Os(e,t.v,t.w,t.name)}var Id=sL,aL="2.2.4",iL={Graph:Id,version:aL},lL=Id,cL={write:dL,read:mL};function dL(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:uL(e),edges:fL(e)};return e.graph()!==void 0&&(t.value=structuredClone(e.graph())),t}function uL(e){return e.nodes().map(function(t){var n=e.node(t),r=e.parent(t),s={v:t};return n!==void 0&&(s.value=n),r!==void 0&&(s.parent=r),s})}function fL(e){return e.edges().map(function(t){var n=e.edge(t),r={v:t.v,w:t.w};return t.name!==void 0&&(r.name=t.name),n!==void 0&&(r.value=n),r})}function mL(e){var t=new lL(e.options).setGraph(e.value);return e.nodes.forEach(function(n){t.setNode(n.v,n.value),n.parent&&t.setParent(n.v,n.parent)}),e.edges.forEach(function(n){t.setEdge({v:n.v,w:n.w,name:n.name},n.value)}),t}var pL=hL;function hL(e){var t={},n=[],r;function s(a){Object.hasOwn(t,a)||(t[a]=!0,r.push(a),e.successors(a).forEach(s),e.predecessors(a).forEach(s))}return e.nodes().forEach(function(a){r=[],s(a),r.length&&n.push(r)}),n}let gL=class{constructor(){pe(this,"_arr",[]);pe(this,"_keyIndices",{})}size(){return this._arr.length}keys(){return this._arr.map(function(t){return t.key})}has(t){return Object.hasOwn(this._keyIndices,t)}priority(t){var n=this._keyIndices[t];if(n!==void 0)return this._arr[n].priority}min(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key}add(t,n){var r=this._keyIndices;if(t=String(t),!Object.hasOwn(r,t)){var s=this._arr,a=s.length;return r[t]=a,s.push({key:t,priority:n}),this._decrease(a),!0}return!1}removeMin(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key}decrease(t,n){var r=this._keyIndices[t];if(n>this._arr[r].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[r].priority+" New: "+n);this._arr[r].priority=n,this._decrease(r)}_heapify(t){var n=this._arr,r=2*t,s=r+1,a=t;r<n.length&&(a=n[r].priority<n[a].priority?r:a,s<n.length&&(a=n[s].priority<n[a].priority?s:a),a!==t&&(this._swap(t,a),this._heapify(a)))}_decrease(t){for(var n=this._arr,r=n[t].priority,s;t!==0&&(s=t>>1,!(n[s].priority<r));)this._swap(t,s),t=s}_swap(t,n){var r=this._arr,s=this._keyIndices,a=r[t],i=r[n];r[t]=i,r[n]=a,s[i.key]=t,s[a.key]=n}};var h2=gL,xL=h2,g2=vL,yL=()=>1;function vL(e,t,n,r){return bL(e,String(t),n||yL,r||function(s){return e.outEdges(s)})}function bL(e,t,n,r){var s={},a=new xL,i,l,c=function(d){var u=d.v!==i?d.v:d.w,f=s[u],m=n(d),p=l.distance+m;if(m<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+d+" Weight: "+m);p<f.distance&&(f.distance=p,f.predecessor=i,a.decrease(u,p))};for(e.nodes().forEach(function(d){var u=d===t?0:Number.POSITIVE_INFINITY;s[d]={distance:u},a.add(d,u)});a.size()>0&&(i=a.removeMin(),l=s[i],l.distance!==Number.POSITIVE_INFINITY);)r(i).forEach(c);return s}var wL=g2,jL=NL;function NL(e,t,n){return e.nodes().reduce(function(r,s){return r[s]=wL(e,s,t,n),r},{})}var x2=EL;function EL(e){var t=0,n=[],r={},s=[];function a(i){var l=r[i]={onStack:!0,lowlink:t,index:t++};if(n.push(i),e.successors(i).forEach(function(u){Object.hasOwn(r,u)?r[u].onStack&&(l.lowlink=Math.min(l.lowlink,r[u].index)):(a(u),l.lowlink=Math.min(l.lowlink,r[u].lowlink))}),l.lowlink===l.index){var c=[],d;do d=n.pop(),r[d].onStack=!1,c.push(d);while(i!==d);s.push(c)}}return e.nodes().forEach(function(i){Object.hasOwn(r,i)||a(i)}),s}var SL=x2,CL=IL;function IL(e){return SL(e).filter(function(t){return t.length>1||t.length===1&&e.hasEdge(t[0],t[0])})}var AL=ML,DL=()=>1;function ML(e,t,n){return kL(e,t||DL,n||function(r){return e.outEdges(r)})}function kL(e,t,n){var r={},s=e.nodes();return s.forEach(function(a){r[a]={},r[a][a]={distance:0},s.forEach(function(i){a!==i&&(r[a][i]={distance:Number.POSITIVE_INFINITY})}),n(a).forEach(function(i){var l=i.v===a?i.w:i.v,c=t(i);r[a][l]={distance:c,predecessor:a}})}),s.forEach(function(a){var i=r[a];s.forEach(function(l){var c=r[l];s.forEach(function(d){var u=c[a],f=i[d],m=c[d],p=u.distance+f.distance;p<m.distance&&(m.distance=p,m.predecessor=f.predecessor)})})}),r}function y2(e){var t={},n={},r=[];function s(a){if(Object.hasOwn(n,a))throw new cc;Object.hasOwn(t,a)||(n[a]=!0,t[a]=!0,e.predecessors(a).forEach(s),delete n[a],r.push(a))}if(e.sinks().forEach(s),Object.keys(t).length!==e.nodeCount())throw new cc;return r}class cc extends Error{constructor(){super(...arguments)}}var v2=y2;y2.CycleException=cc;var xm=v2,OL=TL;function TL(e){try{xm(e)}catch(t){if(t instanceof xm.CycleException)return!1;throw t}return!0}var b2=FL;function FL(e,t,n){Array.isArray(t)||(t=[t]);var r=e.isDirected()?l=>e.successors(l):l=>e.neighbors(l),s=n==="post"?_L:PL,a=[],i={};return t.forEach(l=>{if(!e.hasNode(l))throw new Error("Graph does not have node: "+l);s(l,r,i,a)}),a}function _L(e,t,n,r){for(var s=[[e,!1]];s.length>0;){var a=s.pop();a[1]?r.push(a[0]):Object.hasOwn(n,a[0])||(n[a[0]]=!0,s.push([a[0],!0]),w2(t(a[0]),i=>s.push([i,!1])))}}function PL(e,t,n,r){for(var s=[e];s.length>0;){var a=s.pop();Object.hasOwn(n,a)||(n[a]=!0,r.push(a),w2(t(a),i=>s.push(i)))}}function w2(e,t){for(var n=e.length;n--;)t(e[n],n,e);return e}var LL=b2,$L=RL;function RL(e,t){return LL(e,t,"post")}var VL=b2,BL=zL;function zL(e,t){return VL(e,t,"pre")}var HL=Id,ZL=h2,UL=WL;function WL(e,t){var n=new HL,r={},s=new ZL,a;function i(c){var d=c.v===a?c.w:c.v,u=s.priority(d);if(u!==void 0){var f=t(c);f<u&&(r[d]=a,s.decrease(d,f))}}if(e.nodeCount()===0)return n;e.nodes().forEach(function(c){s.add(c,Number.POSITIVE_INFINITY),n.setNode(c)}),s.decrease(e.nodes()[0],0);for(var l=!1;s.size()>0;){if(a=s.removeMin(),Object.hasOwn(r,a))n.setEdge(a,r[a]);else{if(l)throw new Error("Input graph is not connected: "+e);l=!0}e.nodeEdges(a).forEach(i)}return n}var GL={components:pL,dijkstra:g2,dijkstraAll:jL,findCycles:CL,floydWarshall:AL,isAcyclic:OL,postorder:$L,preorder:BL,prim:UL,tarjan:x2,topsort:v2},ym=iL,qt={Graph:ym.Graph,json:cL,alg:GL,version:ym.version};let qL=class{constructor(){let t={};t._next=t._prev=t,this._sentinel=t}dequeue(){let t=this._sentinel,n=t._prev;if(n!==t)return vm(n),n}enqueue(t){let n=this._sentinel;t._prev&&t._next&&vm(t),t._next=n._next,n._next._prev=t,n._next=t,t._prev=n}toString(){let t=[],n=this._sentinel,r=n._prev;for(;r!==n;)t.push(JSON.stringify(r,KL)),r=r._prev;return"["+t.join(", ")+"]"}};function vm(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function KL(e,t){if(e!=="_next"&&e!=="_prev")return t}var YL=qL;let XL=qt.Graph,JL=YL;var QL=t$;let e$=()=>1;function t$(e,t){if(e.nodeCount()<=1)return[];let n=r$(e,t||e$);return n$(n.graph,n.buckets,n.zeroIdx).flatMap(s=>e.outEdges(s.v,s.w))}function n$(e,t,n){let r=[],s=t[t.length-1],a=t[0],i;for(;e.nodeCount();){for(;i=a.dequeue();)yl(e,t,n,i);for(;i=s.dequeue();)yl(e,t,n,i);if(e.nodeCount()){for(let l=t.length-2;l>0;--l)if(i=t[l].dequeue(),i){r=r.concat(yl(e,t,n,i,!0));break}}}return r}function yl(e,t,n,r,s){let a=s?[]:void 0;return e.inEdges(r.v).forEach(i=>{let l=e.edge(i),c=e.node(i.v);s&&a.push({v:i.v,w:i.w}),c.out-=l,dc(t,n,c)}),e.outEdges(r.v).forEach(i=>{let l=e.edge(i),c=i.w,d=e.node(c);d.in-=l,dc(t,n,d)}),e.removeNode(r.v),a}function r$(e,t){let n=new XL,r=0,s=0;e.nodes().forEach(l=>{n.setNode(l,{v:l,in:0,out:0})}),e.edges().forEach(l=>{let c=n.edge(l.v,l.w)||0,d=t(l),u=c+d;n.setEdge(l.v,l.w,u),s=Math.max(s,n.node(l.v).out+=d),r=Math.max(r,n.node(l.w).in+=d)});let a=s$(s+r+3).map(()=>new JL),i=r+1;return n.nodes().forEach(l=>{dc(a,i,n.node(l))}),{graph:n,buckets:a,zeroIdx:i}}function dc(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}function s$(e){const t=[];for(let n=0;n<e;n++)t.push(n);return t}let j2=qt.Graph;var Ve={addBorderNode:m$,addDummyNode:N2,applyWithChunking:zi,asNonCompoundGraph:a$,buildLayerMatrix:d$,intersectRect:c$,mapValues:b$,maxRank:S2,normalizeRanks:u$,notime:x$,partition:h$,pick:v$,predecessorWeights:l$,range:I2,removeEmptyRanks:f$,simplify:o$,successorWeights:i$,time:g$,uniqueId:C2,zipObject:Ad};function N2(e,t,n,r){let s;do s=C2(r);while(e.hasNode(s));return n.dummy=t,e.setNode(s,n),s}function o$(e){let t=new j2().setGraph(e.graph());return e.nodes().forEach(n=>t.setNode(n,e.node(n))),e.edges().forEach(n=>{let r=t.edge(n.v,n.w)||{weight:0,minlen:1},s=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+s.weight,minlen:Math.max(r.minlen,s.minlen)})}),t}function a$(e){let t=new j2({multigraph:e.isMultigraph()}).setGraph(e.graph());return e.nodes().forEach(n=>{e.children(n).length||t.setNode(n,e.node(n))}),e.edges().forEach(n=>{t.setEdge(n,e.edge(n))}),t}function i$(e){let t=e.nodes().map(n=>{let r={};return e.outEdges(n).forEach(s=>{r[s.w]=(r[s.w]||0)+e.edge(s).weight}),r});return Ad(e.nodes(),t)}function l$(e){let t=e.nodes().map(n=>{let r={};return e.inEdges(n).forEach(s=>{r[s.v]=(r[s.v]||0)+e.edge(s).weight}),r});return Ad(e.nodes(),t)}function c$(e,t){let n=e.x,r=e.y,s=t.x-n,a=t.y-r,i=e.width/2,l=e.height/2;if(!s&&!a)throw new Error("Not possible to find intersection inside of the rectangle");let c,d;return Math.abs(a)*i>Math.abs(s)*l?(a<0&&(l=-l),c=l*s/a,d=l):(s<0&&(i=-i),c=i,d=i*a/s),{x:n+c,y:r+d}}function d$(e){let t=I2(S2(e)+1).map(()=>[]);return e.nodes().forEach(n=>{let r=e.node(n),s=r.rank;s!==void 0&&(t[s][r.order]=n)}),t}function u$(e){let t=e.nodes().map(r=>{let s=e.node(r).rank;return s===void 0?Number.MAX_VALUE:s}),n=zi(Math.min,t);e.nodes().forEach(r=>{let s=e.node(r);Object.hasOwn(s,"rank")&&(s.rank-=n)})}function f$(e){let t=e.nodes().map(i=>e.node(i).rank),n=zi(Math.min,t),r=[];e.nodes().forEach(i=>{let l=e.node(i).rank-n;r[l]||(r[l]=[]),r[l].push(i)});let s=0,a=e.graph().nodeRankFactor;Array.from(r).forEach((i,l)=>{i===void 0&&l%a!==0?--s:i!==void 0&&s&&i.forEach(c=>e.node(c).rank+=s)})}function m$(e,t,n,r){let s={width:0,height:0};return arguments.length>=4&&(s.rank=n,s.order=r),N2(e,"border",s,t)}function p$(e,t=E2){const n=[];for(let r=0;r<e.length;r+=t){const s=e.slice(r,r+t);n.push(s)}return n}const E2=65535;function zi(e,t){if(t.length>E2){const n=p$(t);return e.apply(null,n.map(r=>e.apply(null,r)))}else return e.apply(null,t)}function S2(e){const n=e.nodes().map(r=>{let s=e.node(r).rank;return s===void 0?Number.MIN_VALUE:s});return zi(Math.max,n)}function h$(e,t){let n={lhs:[],rhs:[]};return e.forEach(r=>{t(r)?n.lhs.push(r):n.rhs.push(r)}),n}function g$(e,t){let n=Date.now();try{return t()}finally{console.log(e+" time: "+(Date.now()-n)+"ms")}}function x$(e,t){return t()}let y$=0;function C2(e){var t=++y$;return toString(e)+t}function I2(e,t,n=1){t==null&&(t=e,e=0);let r=a=>a<t;n<0&&(r=a=>t<a);const s=[];for(let a=e;r(a);a+=n)s.push(a);return s}function v$(e,t){const n={};for(const r of t)e[r]!==void 0&&(n[r]=e[r]);return n}function b$(e,t){let n=t;return typeof t=="string"&&(n=r=>r[t]),Object.entries(e).reduce((r,[s,a])=>(r[s]=n(a,s),r),{})}function Ad(e,t){return e.reduce((n,r,s)=>(n[r]=t[s],n),{})}let w$=QL,j$=Ve.uniqueId;var N$={run:E$,undo:C$};function E$(e){(e.graph().acyclicer==="greedy"?w$(e,n(e)):S$(e)).forEach(r=>{let s=e.edge(r);e.removeEdge(r),s.forwardName=r.name,s.reversed=!0,e.setEdge(r.w,r.v,s,j$("rev"))});function n(r){return s=>r.edge(s).weight}}function S$(e){let t=[],n={},r={};function s(a){Object.hasOwn(r,a)||(r[a]=!0,n[a]=!0,e.outEdges(a).forEach(i=>{Object.hasOwn(n,i.w)?t.push(i):s(i.w)}),delete n[a])}return e.nodes().forEach(s),t}function C$(e){e.edges().forEach(t=>{let n=e.edge(t);if(n.reversed){e.removeEdge(t);let r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}})}let I$=Ve;var A$={run:D$,undo:k$};function D$(e){e.graph().dummyChains=[],e.edges().forEach(t=>M$(e,t))}function M$(e,t){let n=t.v,r=e.node(n).rank,s=t.w,a=e.node(s).rank,i=t.name,l=e.edge(t),c=l.labelRank;if(a===r+1)return;e.removeEdge(t);let d,u,f;for(f=0,++r;r<a;++f,++r)l.points=[],u={width:0,height:0,edgeLabel:l,edgeObj:t,rank:r},d=I$.addDummyNode(e,"edge",u,"_d"),r===c&&(u.width=l.width,u.height=l.height,u.dummy="edge-label",u.labelpos=l.labelpos),e.setEdge(n,d,{weight:l.weight},i),f===0&&e.graph().dummyChains.push(d),n=d;e.setEdge(n,s,{weight:l.weight},i)}function k$(e){e.graph().dummyChains.forEach(t=>{let n=e.node(t),r=n.edgeLabel,s;for(e.setEdge(n.edgeObj,r);n.dummy;)s=e.successors(t)[0],e.removeNode(t),r.points.push({x:n.x,y:n.y}),n.dummy==="edge-label"&&(r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height),t=s,n=e.node(t)})}const{applyWithChunking:O$}=Ve;var Hi={longestPath:T$,slack:F$};function T$(e){var t={};function n(r){var s=e.node(r);if(Object.hasOwn(t,r))return s.rank;t[r]=!0;let a=e.outEdges(r).map(l=>l==null?Number.POSITIVE_INFINITY:n(l.w)-e.edge(l).minlen);var i=O$(Math.min,a);return i===Number.POSITIVE_INFINITY&&(i=0),s.rank=i}e.sources().forEach(n)}function F$(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}var _$=qt.Graph,va=Hi.slack,A2=P$;function P$(e){var t=new _$({directed:!1}),n=e.nodes()[0],r=e.nodeCount();t.setNode(n,{});for(var s,a;L$(t,e)<r;)s=$$(t,e),a=t.hasNode(s.v)?va(e,s):-va(e,s),R$(t,e,a);return t}function L$(e,t){function n(r){t.nodeEdges(r).forEach(s=>{var a=s.v,i=r===a?s.w:a;!e.hasNode(i)&&!va(t,s)&&(e.setNode(i,{}),e.setEdge(r,i,{}),n(i))})}return e.nodes().forEach(n),e.nodeCount()}function $$(e,t){return t.edges().reduce((r,s)=>{let a=Number.POSITIVE_INFINITY;return e.hasNode(s.v)!==e.hasNode(s.w)&&(a=va(t,s)),a<r[0]?[a,s]:r},[Number.POSITIVE_INFINITY,null])[1]}function R$(e,t,n){e.nodes().forEach(r=>t.node(r).rank+=n)}var V$=A2,bm=Hi.slack,B$=Hi.longestPath,z$=qt.alg.preorder,H$=qt.alg.postorder,Z$=Ve.simplify,U$=Er;Er.initLowLimValues=Md;Er.initCutValues=Dd;Er.calcCutValue=D2;Er.leaveEdge=k2;Er.enterEdge=O2;Er.exchangeEdges=T2;function Er(e){e=Z$(e),B$(e);var t=V$(e);Md(t),Dd(t,e);for(var n,r;n=k2(t);)r=O2(t,e,n),T2(t,e,n,r)}function Dd(e,t){var n=H$(e,e.nodes());n=n.slice(0,n.length-1),n.forEach(r=>W$(e,t,r))}function W$(e,t,n){var r=e.node(n),s=r.parent;e.edge(n,s).cutvalue=D2(e,t,n)}function D2(e,t,n){var r=e.node(n),s=r.parent,a=!0,i=t.edge(n,s),l=0;return i||(a=!1,i=t.edge(s,n)),l=i.weight,t.nodeEdges(n).forEach(c=>{var d=c.v===n,u=d?c.w:c.v;if(u!==s){var f=d===a,m=t.edge(c).weight;if(l+=f?m:-m,q$(e,n,u)){var p=e.edge(n,u).cutvalue;l+=f?-p:p}}}),l}function Md(e,t){arguments.length<2&&(t=e.nodes()[0]),M2(e,{},1,t)}function M2(e,t,n,r,s){var a=n,i=e.node(r);return t[r]=!0,e.neighbors(r).forEach(l=>{Object.hasOwn(t,l)||(n=M2(e,t,n,l,r))}),i.low=a,i.lim=n++,s?i.parent=s:delete i.parent,n}function k2(e){return e.edges().find(t=>e.edge(t).cutvalue<0)}function O2(e,t,n){var r=n.v,s=n.w;t.hasEdge(r,s)||(r=n.w,s=n.v);var a=e.node(r),i=e.node(s),l=a,c=!1;a.lim>i.lim&&(l=i,c=!0);var d=t.edges().filter(u=>c===wm(e,e.node(u.v),l)&&c!==wm(e,e.node(u.w),l));return d.reduce((u,f)=>bm(t,f)<bm(t,u)?f:u)}function T2(e,t,n,r){var s=n.v,a=n.w;e.removeEdge(s,a),e.setEdge(r.v,r.w,{}),Md(e),Dd(e,t),G$(e,t)}function G$(e,t){var n=e.nodes().find(s=>!t.node(s).parent),r=z$(e,n);r=r.slice(1),r.forEach(s=>{var a=e.node(s).parent,i=t.edge(s,a),l=!1;i||(i=t.edge(a,s),l=!0),t.node(s).rank=t.node(a).rank+(l?i.minlen:-i.minlen)})}function q$(e,t,n){return e.hasEdge(t,n)}function wm(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}var K$=Hi,F2=K$.longestPath,Y$=A2,X$=U$,J$=Q$;function Q$(e){switch(e.graph().ranker){case"network-simplex":jm(e);break;case"tight-tree":tR(e);break;case"longest-path":eR(e);break;default:jm(e)}}var eR=F2;function tR(e){F2(e),Y$(e)}function jm(e){X$(e)}var nR=rR;function rR(e){let t=oR(e);e.graph().dummyChains.forEach(n=>{let r=e.node(n),s=r.edgeObj,a=sR(e,t,s.v,s.w),i=a.path,l=a.lca,c=0,d=i[c],u=!0;for(;n!==s.w;){if(r=e.node(n),u){for(;(d=i[c])!==l&&e.node(d).maxRank<r.rank;)c++;d===l&&(u=!1)}if(!u){for(;c<i.length-1&&e.node(d=i[c+1]).minRank<=r.rank;)c++;d=i[c]}e.setParent(n,d),n=e.successors(n)[0]}})}function sR(e,t,n,r){let s=[],a=[],i=Math.min(t[n].low,t[r].low),l=Math.max(t[n].lim,t[r].lim),c,d;c=n;do c=e.parent(c),s.push(c);while(c&&(t[c].low>i||l>t[c].lim));for(d=c,c=r;(c=e.parent(c))!==d;)a.push(c);return{path:s.concat(a.reverse()),lca:d}}function oR(e){let t={},n=0;function r(s){let a=n;e.children(s).forEach(r),t[s]={low:a,lim:n++}}return e.children().forEach(r),t}let ba=Ve;var aR={run:iR,cleanup:dR};function iR(e){let t=ba.addDummyNode(e,"root",{},"_root"),n=lR(e),r=Object.values(n),s=ba.applyWithChunking(Math.max,r)-1,a=2*s+1;e.graph().nestingRoot=t,e.edges().forEach(l=>e.edge(l).minlen*=a);let i=cR(e)+1;e.children().forEach(l=>_2(e,t,a,i,s,n,l)),e.graph().nodeRankFactor=a}function _2(e,t,n,r,s,a,i){let l=e.children(i);if(!l.length){i!==t&&e.setEdge(t,i,{weight:0,minlen:n});return}let c=ba.addBorderNode(e,"_bt"),d=ba.addBorderNode(e,"_bb"),u=e.node(i);e.setParent(c,i),u.borderTop=c,e.setParent(d,i),u.borderBottom=d,l.forEach(f=>{_2(e,t,n,r,s,a,f);let m=e.node(f),p=m.borderTop?m.borderTop:f,g=m.borderBottom?m.borderBottom:f,h=m.borderTop?r:2*r,v=p!==g?1:s-a[i]+1;e.setEdge(c,p,{weight:h,minlen:v,nestingEdge:!0}),e.setEdge(g,d,{weight:h,minlen:v,nestingEdge:!0})}),e.parent(i)||e.setEdge(t,c,{weight:0,minlen:s+a[i]})}function lR(e){var t={};function n(r,s){var a=e.children(r);a&&a.length&&a.forEach(i=>n(i,s+1)),t[r]=s}return e.children().forEach(r=>n(r,1)),t}function cR(e){return e.edges().reduce((t,n)=>t+e.edge(n).weight,0)}function dR(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,e.edges().forEach(n=>{var r=e.edge(n);r.nestingEdge&&e.removeEdge(n)})}let uR=Ve;var fR=mR;function mR(e){function t(n){let r=e.children(n),s=e.node(n);if(r.length&&r.forEach(t),Object.hasOwn(s,"minRank")){s.borderLeft=[],s.borderRight=[];for(let a=s.minRank,i=s.maxRank+1;a<i;++a)Nm(e,"borderLeft","_bl",n,s,a),Nm(e,"borderRight","_br",n,s,a)}}e.children().forEach(t)}function Nm(e,t,n,r,s,a){let i={width:0,height:0,rank:a,borderType:t},l=s[t][a-1],c=uR.addDummyNode(e,"border",i,n);s[t][a]=c,e.setParent(c,r),l&&e.setEdge(l,c,{weight:1})}var pR={adjust:hR,undo:gR};function hR(e){let t=e.graph().rankdir.toLowerCase();(t==="lr"||t==="rl")&&P2(e)}function gR(e){let t=e.graph().rankdir.toLowerCase();(t==="bt"||t==="rl")&&xR(e),(t==="lr"||t==="rl")&&(yR(e),P2(e))}function P2(e){e.nodes().forEach(t=>Em(e.node(t))),e.edges().forEach(t=>Em(e.edge(t)))}function Em(e){let t=e.width;e.width=e.height,e.height=t}function xR(e){e.nodes().forEach(t=>vl(e.node(t))),e.edges().forEach(t=>{let n=e.edge(t);n.points.forEach(vl),Object.hasOwn(n,"y")&&vl(n)})}function vl(e){e.y=-e.y}function yR(e){e.nodes().forEach(t=>bl(e.node(t))),e.edges().forEach(t=>{let n=e.edge(t);n.points.forEach(bl),Object.hasOwn(n,"x")&&bl(n)})}function bl(e){let t=e.x;e.x=e.y,e.y=t}let Sm=Ve;var vR=bR;function bR(e){let t={},n=e.nodes().filter(c=>!e.children(c).length),r=n.map(c=>e.node(c).rank),s=Sm.applyWithChunking(Math.max,r),a=Sm.range(s+1).map(()=>[]);function i(c){if(t[c])return;t[c]=!0;let d=e.node(c);a[d.rank].push(c),e.successors(c).forEach(i)}return n.sort((c,d)=>e.node(c).rank-e.node(d).rank).forEach(i),a}let wR=Ve.zipObject;var jR=NR;function NR(e,t){let n=0;for(let r=1;r<t.length;++r)n+=ER(e,t[r-1],t[r]);return n}function ER(e,t,n){let r=wR(n,n.map((d,u)=>u)),s=t.flatMap(d=>e.outEdges(d).map(u=>({pos:r[u.w],weight:e.edge(u).weight})).sort((u,f)=>u.pos-f.pos)),a=1;for(;a<n.length;)a<<=1;let i=2*a-1;a-=1;let l=new Array(i).fill(0),c=0;return s.forEach(d=>{let u=d.pos+a;l[u]+=d.weight;let f=0;for(;u>0;)u%2&&(f+=l[u+1]),u=u-1>>1,l[u]+=d.weight;c+=d.weight*f}),c}var SR=CR;function CR(e,t=[]){return t.map(n=>{let r=e.inEdges(n);if(r.length){let s=r.reduce((a,i)=>{let l=e.edge(i),c=e.node(i.v);return{sum:a.sum+l.weight*c.order,weight:a.weight+l.weight}},{sum:0,weight:0});return{v:n,barycenter:s.sum/s.weight,weight:s.weight}}else return{v:n}})}let IR=Ve;var AR=DR;function DR(e,t){let n={};e.forEach((s,a)=>{let i=n[s.v]={indegree:0,in:[],out:[],vs:[s.v],i:a};s.barycenter!==void 0&&(i.barycenter=s.barycenter,i.weight=s.weight)}),t.edges().forEach(s=>{let a=n[s.v],i=n[s.w];a!==void 0&&i!==void 0&&(i.indegree++,a.out.push(n[s.w]))});let r=Object.values(n).filter(s=>!s.indegree);return MR(r)}function MR(e){let t=[];function n(s){return a=>{a.merged||(a.barycenter===void 0||s.barycenter===void 0||a.barycenter>=s.barycenter)&&kR(s,a)}}function r(s){return a=>{a.in.push(s),--a.indegree===0&&e.push(a)}}for(;e.length;){let s=e.pop();t.push(s),s.in.reverse().forEach(n(s)),s.out.forEach(r(s))}return t.filter(s=>!s.merged).map(s=>IR.pick(s,["vs","i","barycenter","weight"]))}function kR(e,t){let n=0,r=0;e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=n/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0}let OR=Ve;var TR=FR;function FR(e,t){let n=OR.partition(e,u=>Object.hasOwn(u,"barycenter")),r=n.lhs,s=n.rhs.sort((u,f)=>f.i-u.i),a=[],i=0,l=0,c=0;r.sort(_R(!!t)),c=Cm(a,s,c),r.forEach(u=>{c+=u.vs.length,a.push(u.vs),i+=u.barycenter*u.weight,l+=u.weight,c=Cm(a,s,c)});let d={vs:a.flat(!0)};return l&&(d.barycenter=i/l,d.weight=l),d}function Cm(e,t,n){let r;for(;t.length&&(r=t[t.length-1]).i<=n;)t.pop(),e.push(r.vs),n++;return n}function _R(e){return(t,n)=>t.barycenter<n.barycenter?-1:t.barycenter>n.barycenter?1:e?n.i-t.i:t.i-n.i}let PR=SR,LR=AR,$R=TR;var RR=L2;function L2(e,t,n,r){let s=e.children(t),a=e.node(t),i=a?a.borderLeft:void 0,l=a?a.borderRight:void 0,c={};i&&(s=s.filter(m=>m!==i&&m!==l));let d=PR(e,s);d.forEach(m=>{if(e.children(m.v).length){let p=L2(e,m.v,n,r);c[m.v]=p,Object.hasOwn(p,"barycenter")&&BR(m,p)}});let u=LR(d,n);VR(u,c);let f=$R(u,r);if(i&&(f.vs=[i,f.vs,l].flat(!0),e.predecessors(i).length)){let m=e.node(e.predecessors(i)[0]),p=e.node(e.predecessors(l)[0]);Object.hasOwn(f,"barycenter")||(f.barycenter=0,f.weight=0),f.barycenter=(f.barycenter*f.weight+m.order+p.order)/(f.weight+2),f.weight+=2}return f}function VR(e,t){e.forEach(n=>{n.vs=n.vs.flatMap(r=>t[r]?t[r].vs:r)})}function BR(e,t){e.barycenter!==void 0?(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight):(e.barycenter=t.barycenter,e.weight=t.weight)}let zR=qt.Graph,HR=Ve;var ZR=UR;function UR(e,t,n){let r=WR(e),s=new zR({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(a=>e.node(a));return e.nodes().forEach(a=>{let i=e.node(a),l=e.parent(a);(i.rank===t||i.minRank<=t&&t<=i.maxRank)&&(s.setNode(a),s.setParent(a,l||r),e[n](a).forEach(c=>{let d=c.v===a?c.w:c.v,u=s.edge(d,a),f=u!==void 0?u.weight:0;s.setEdge(d,a,{weight:e.edge(c).weight+f})}),Object.hasOwn(i,"minRank")&&s.setNode(a,{borderLeft:i.borderLeft[t],borderRight:i.borderRight[t]}))}),s}function WR(e){for(var t;e.hasNode(t=HR.uniqueId("_root")););return t}var GR=qR;function qR(e,t,n){let r={},s;n.forEach(a=>{let i=e.parent(a),l,c;for(;i;){if(l=e.parent(i),l?(c=r[l],r[l]=i):(c=s,s=i),c&&c!==i){t.setEdge(c,i);return}i=l}})}let KR=vR,YR=jR,XR=RR,JR=ZR,QR=GR,eV=qt.Graph,Ho=Ve;var tV=$2;function $2(e,t){if(t&&typeof t.customOrder=="function"){t.customOrder(e,$2);return}let n=Ho.maxRank(e),r=Im(e,Ho.range(1,n+1),"inEdges"),s=Im(e,Ho.range(n-1,-1,-1),"outEdges"),a=KR(e);if(Am(e,a),t&&t.disableOptimalOrderHeuristic)return;let i=Number.POSITIVE_INFINITY,l;for(let c=0,d=0;d<4;++c,++d){nV(c%2?r:s,c%4>=2),a=Ho.buildLayerMatrix(e);let u=YR(e,a);u<i&&(d=0,l=Object.assign({},a),i=u)}Am(e,l)}function Im(e,t,n){return t.map(function(r){return JR(e,r,n)})}function nV(e,t){let n=new eV;e.forEach(function(r){let s=r.graph().root,a=XR(r,s,n,t);a.vs.forEach((i,l)=>r.node(i).order=l),QR(r,n,a.vs)})}function Am(e,t){Object.values(t).forEach(n=>n.forEach((r,s)=>e.node(r).order=s))}let rV=qt.Graph,cn=Ve;var sV={positionX:iV,findType1Conflicts:R2,findType2Conflicts:V2,addConflict:kd,hasConflict:B2,verticalAlignment:z2,horizontalCompaction:H2,alignCoordinates:U2,findSmallestWidthAlignment:Z2,balance:W2};function R2(e,t){let n={};function r(s,a){let i=0,l=0,c=s.length,d=a[a.length-1];return a.forEach((u,f)=>{let m=oV(e,u),p=m?e.node(m).order:c;(m||u===d)&&(a.slice(l,f+1).forEach(g=>{e.predecessors(g).forEach(h=>{let v=e.node(h),b=v.order;(b<i||p<b)&&!(v.dummy&&e.node(g).dummy)&&kd(n,h,g)})}),l=f+1,i=p)}),a}return t.length&&t.reduce(r),n}function V2(e,t){let n={};function r(a,i,l,c,d){let u;cn.range(i,l).forEach(f=>{u=a[f],e.node(u).dummy&&e.predecessors(u).forEach(m=>{let p=e.node(m);p.dummy&&(p.order<c||p.order>d)&&kd(n,m,u)})})}function s(a,i){let l=-1,c,d=0;return i.forEach((u,f)=>{if(e.node(u).dummy==="border"){let m=e.predecessors(u);m.length&&(c=e.node(m[0]).order,r(i,d,f,l,c),d=f,l=c)}r(i,d,i.length,c,a.length)}),i}return t.length&&t.reduce(s),n}function oV(e,t){if(e.node(t).dummy)return e.predecessors(t).find(n=>e.node(n).dummy)}function kd(e,t,n){if(t>n){let s=t;t=n,n=s}let r=e[t];r||(e[t]=r={}),r[n]=!0}function B2(e,t,n){if(t>n){let r=t;t=n,n=r}return!!e[t]&&Object.hasOwn(e[t],n)}function z2(e,t,n,r){let s={},a={},i={};return t.forEach(l=>{l.forEach((c,d)=>{s[c]=c,a[c]=c,i[c]=d})}),t.forEach(l=>{let c=-1;l.forEach(d=>{let u=r(d);if(u.length){u=u.sort((m,p)=>i[m]-i[p]);let f=(u.length-1)/2;for(let m=Math.floor(f),p=Math.ceil(f);m<=p;++m){let g=u[m];a[d]===d&&c<i[g]&&!B2(n,d,g)&&(a[g]=d,a[d]=s[d]=s[g],c=i[g])}}})}),{root:s,align:a}}function H2(e,t,n,r,s){let a={},i=aV(e,t,n,s),l=s?"borderLeft":"borderRight";function c(f,m){let p=i.nodes(),g=p.pop(),h={};for(;g;)h[g]?f(g):(h[g]=!0,p.push(g),p=p.concat(m(g))),g=p.pop()}function d(f){a[f]=i.inEdges(f).reduce((m,p)=>Math.max(m,a[p.v]+i.edge(p)),0)}function u(f){let m=i.outEdges(f).reduce((g,h)=>Math.min(g,a[h.w]-i.edge(h)),Number.POSITIVE_INFINITY),p=e.node(f);m!==Number.POSITIVE_INFINITY&&p.borderType!==l&&(a[f]=Math.max(a[f],m))}return c(d,i.predecessors.bind(i)),c(u,i.successors.bind(i)),Object.keys(r).forEach(f=>a[f]=a[n[f]]),a}function aV(e,t,n,r){let s=new rV,a=e.graph(),i=lV(a.nodesep,a.edgesep,r);return t.forEach(l=>{let c;l.forEach(d=>{let u=n[d];if(s.setNode(u),c){var f=n[c],m=s.edge(f,u);s.setEdge(f,u,Math.max(i(e,d,c),m||0))}c=d})}),s}function Z2(e,t){return Object.values(t).reduce((n,r)=>{let s=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY;Object.entries(r).forEach(([l,c])=>{let d=cV(e,l)/2;s=Math.max(c+d,s),a=Math.min(c-d,a)});const i=s-a;return i<n[0]&&(n=[i,r]),n},[Number.POSITIVE_INFINITY,null])[1]}function U2(e,t){let n=Object.values(t),r=cn.applyWithChunking(Math.min,n),s=cn.applyWithChunking(Math.max,n);["u","d"].forEach(a=>{["l","r"].forEach(i=>{let l=a+i,c=e[l];if(c===t)return;let d=Object.values(c),u=r-cn.applyWithChunking(Math.min,d);i!=="l"&&(u=s-cn.applyWithChunking(Math.max,d)),u&&(e[l]=cn.mapValues(c,f=>f+u))})})}function W2(e,t){return cn.mapValues(e.ul,(n,r)=>{if(t)return e[t.toLowerCase()][r];{let s=Object.values(e).map(a=>a[r]).sort((a,i)=>a-i);return(s[1]+s[2])/2}})}function iV(e){let t=cn.buildLayerMatrix(e),n=Object.assign(R2(e,t),V2(e,t)),r={},s;["u","d"].forEach(i=>{s=i==="u"?t:Object.values(t).reverse(),["l","r"].forEach(l=>{l==="r"&&(s=s.map(f=>Object.values(f).reverse()));let c=(i==="u"?e.predecessors:e.successors).bind(e),d=z2(e,s,n,c),u=H2(e,s,d.root,d.align,l==="r");l==="r"&&(u=cn.mapValues(u,f=>-f)),r[i+l]=u})});let a=Z2(e,r);return U2(r,a),W2(r,e.graph().align)}function lV(e,t,n){return(r,s,a)=>{let i=r.node(s),l=r.node(a),c=0,d;if(c+=i.width/2,Object.hasOwn(i,"labelpos"))switch(i.labelpos.toLowerCase()){case"l":d=-i.width/2;break;case"r":d=i.width/2;break}if(d&&(c+=n?d:-d),d=0,c+=(i.dummy?t:e)/2,c+=(l.dummy?t:e)/2,c+=l.width/2,Object.hasOwn(l,"labelpos"))switch(l.labelpos.toLowerCase()){case"l":d=l.width/2;break;case"r":d=-l.width/2;break}return d&&(c+=n?d:-d),d=0,c}}function cV(e,t){return e.node(t).width}let G2=Ve,dV=sV.positionX;var uV=fV;function fV(e){e=G2.asNonCompoundGraph(e),mV(e),Object.entries(dV(e)).forEach(([t,n])=>e.node(t).x=n)}function mV(e){let t=G2.buildLayerMatrix(e),n=e.graph().ranksep,r=0;t.forEach(s=>{const a=s.reduce((i,l)=>{const c=e.node(l).height;return i>c?i:c},0);s.forEach(i=>e.node(i).y=r+a/2),r+=a+n})}let Dm=N$,Mm=A$,pV=J$,hV=Ve.normalizeRanks,gV=nR,xV=Ve.removeEmptyRanks,km=aR,yV=fR,Om=pR,vV=tV,bV=uV,Tt=Ve,wV=qt.Graph;var jV=NV;function NV(e,t){let n=t&&t.debugTiming?Tt.time:Tt.notime;n("layout",()=>{let r=n("  buildLayoutGraph",()=>TV(e));n("  runLayout",()=>EV(r,n,t)),n("  updateInputGraph",()=>SV(e,r))})}function EV(e,t,n){t("    makeSpaceForEdgeLabels",()=>FV(e)),t("    removeSelfEdges",()=>HV(e)),t("    acyclic",()=>Dm.run(e)),t("    nestingGraph.run",()=>km.run(e)),t("    rank",()=>pV(Tt.asNonCompoundGraph(e))),t("    injectEdgeLabelProxies",()=>_V(e)),t("    removeEmptyRanks",()=>xV(e)),t("    nestingGraph.cleanup",()=>km.cleanup(e)),t("    normalizeRanks",()=>hV(e)),t("    assignRankMinMax",()=>PV(e)),t("    removeEdgeLabelProxies",()=>LV(e)),t("    normalize.run",()=>Mm.run(e)),t("    parentDummyChains",()=>gV(e)),t("    addBorderSegments",()=>yV(e)),t("    order",()=>vV(e,n)),t("    insertSelfEdges",()=>ZV(e)),t("    adjustCoordinateSystem",()=>Om.adjust(e)),t("    position",()=>bV(e)),t("    positionSelfEdges",()=>UV(e)),t("    removeBorderNodes",()=>zV(e)),t("    normalize.undo",()=>Mm.undo(e)),t("    fixupEdgeLabelCoords",()=>VV(e)),t("    undoCoordinateSystem",()=>Om.undo(e)),t("    translateGraph",()=>$V(e)),t("    assignNodeIntersects",()=>RV(e)),t("    reversePoints",()=>BV(e)),t("    acyclic.undo",()=>Dm.undo(e))}function SV(e,t){e.nodes().forEach(n=>{let r=e.node(n),s=t.node(n);r&&(r.x=s.x,r.y=s.y,r.rank=s.rank,t.children(n).length&&(r.width=s.width,r.height=s.height))}),e.edges().forEach(n=>{let r=e.edge(n),s=t.edge(n);r.points=s.points,Object.hasOwn(s,"x")&&(r.x=s.x,r.y=s.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}let CV=["nodesep","edgesep","ranksep","marginx","marginy"],IV={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},AV=["acyclicer","ranker","rankdir","align"],DV=["width","height"],Tm={width:0,height:0},MV=["minlen","weight","width","height","labeloffset"],kV={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},OV=["labelpos"];function TV(e){let t=new wV({multigraph:!0,compound:!0}),n=jl(e.graph());return t.setGraph(Object.assign({},IV,wl(n,CV),Tt.pick(n,AV))),e.nodes().forEach(r=>{let s=jl(e.node(r));const a=wl(s,DV);Object.keys(Tm).forEach(i=>{a[i]===void 0&&(a[i]=Tm[i])}),t.setNode(r,a),t.setParent(r,e.parent(r))}),e.edges().forEach(r=>{let s=jl(e.edge(r));t.setEdge(r,Object.assign({},kV,wl(s,MV),Tt.pick(s,OV)))}),t}function FV(e){let t=e.graph();t.ranksep/=2,e.edges().forEach(n=>{let r=e.edge(n);r.minlen*=2,r.labelpos.toLowerCase()!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})}function _V(e){e.edges().forEach(t=>{let n=e.edge(t);if(n.width&&n.height){let r=e.node(t.v),a={rank:(e.node(t.w).rank-r.rank)/2+r.rank,e:t};Tt.addDummyNode(e,"edge-proxy",a,"_ep")}})}function PV(e){let t=0;e.nodes().forEach(n=>{let r=e.node(n);r.borderTop&&(r.minRank=e.node(r.borderTop).rank,r.maxRank=e.node(r.borderBottom).rank,t=Math.max(t,r.maxRank))}),e.graph().maxRank=t}function LV(e){e.nodes().forEach(t=>{let n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})}function $V(e){let t=Number.POSITIVE_INFINITY,n=0,r=Number.POSITIVE_INFINITY,s=0,a=e.graph(),i=a.marginx||0,l=a.marginy||0;function c(d){let u=d.x,f=d.y,m=d.width,p=d.height;t=Math.min(t,u-m/2),n=Math.max(n,u+m/2),r=Math.min(r,f-p/2),s=Math.max(s,f+p/2)}e.nodes().forEach(d=>c(e.node(d))),e.edges().forEach(d=>{let u=e.edge(d);Object.hasOwn(u,"x")&&c(u)}),t-=i,r-=l,e.nodes().forEach(d=>{let u=e.node(d);u.x-=t,u.y-=r}),e.edges().forEach(d=>{let u=e.edge(d);u.points.forEach(f=>{f.x-=t,f.y-=r}),Object.hasOwn(u,"x")&&(u.x-=t),Object.hasOwn(u,"y")&&(u.y-=r)}),a.width=n-t+i,a.height=s-r+l}function RV(e){e.edges().forEach(t=>{let n=e.edge(t),r=e.node(t.v),s=e.node(t.w),a,i;n.points?(a=n.points[0],i=n.points[n.points.length-1]):(n.points=[],a=s,i=r),n.points.unshift(Tt.intersectRect(r,a)),n.points.push(Tt.intersectRect(s,i))})}function VV(e){e.edges().forEach(t=>{let n=e.edge(t);if(Object.hasOwn(n,"x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})}function BV(e){e.edges().forEach(t=>{let n=e.edge(t);n.reversed&&n.points.reverse()})}function zV(e){e.nodes().forEach(t=>{if(e.children(t).length){let n=e.node(t),r=e.node(n.borderTop),s=e.node(n.borderBottom),a=e.node(n.borderLeft[n.borderLeft.length-1]),i=e.node(n.borderRight[n.borderRight.length-1]);n.width=Math.abs(i.x-a.x),n.height=Math.abs(s.y-r.y),n.x=a.x+n.width/2,n.y=r.y+n.height/2}}),e.nodes().forEach(t=>{e.node(t).dummy==="border"&&e.removeNode(t)})}function HV(e){e.edges().forEach(t=>{if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function ZV(e){var t=Tt.buildLayerMatrix(e);t.forEach(n=>{var r=0;n.forEach((s,a)=>{var i=e.node(s);i.order=a+r,(i.selfEdges||[]).forEach(l=>{Tt.addDummyNode(e,"selfedge",{width:l.label.width,height:l.label.height,rank:i.rank,order:a+ ++r,e:l.e,label:l.label},"_se")}),delete i.selfEdges})})}function UV(e){e.nodes().forEach(t=>{var n=e.node(t);if(n.dummy==="selfedge"){var r=e.node(n.e.v),s=r.x+r.width/2,a=r.y,i=n.x-s,l=r.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:s+2*i/3,y:a-l},{x:s+5*i/6,y:a-l},{x:s+i,y:a},{x:s+5*i/6,y:a+l},{x:s+2*i/3,y:a+l}],n.label.x=n.x,n.label.y=n.y}})}function wl(e,t){return Tt.mapValues(Tt.pick(e,t),Number)}function jl(e){var t={};return e&&Object.entries(e).forEach(([n,r])=>{typeof n=="string"&&(n=n.toLowerCase()),t[n]=r}),t}let WV=Ve,GV=qt.Graph;var qV={debugOrdering:KV};function KV(e){let t=WV.buildLayerMatrix(e),n=new GV({compound:!0,multigraph:!0}).setGraph({});return e.nodes().forEach(r=>{n.setNode(r,{label:r}),n.setParent(r,"layer"+e.node(r).rank)}),e.edges().forEach(r=>n.setEdge(r.v,r.w,{},r.name)),t.forEach((r,s)=>{let a="layer"+s;n.setNode(a,{rank:"same"}),r.reduce((i,l)=>(n.setEdge(i,l,{style:"invis"}),l))}),n}var YV="1.1.4",XV={graphlib:qt,layout:jV,debug:qV,util:{time:Ve.time,notime:Ve.notime},version:YV};const Fm=uc(XV),JV=(e,t,n)=>{const r=new Fm.graphlib.Graph().setDefaultEdgeLabel(()=>({}));return r.setGraph({align:"UL",nodesep:100,rankdir:n.direction,ranksep:100}),t.forEach(s=>r.setEdge(s.source,s.target)),e.forEach(s=>{var a,i;return r.setNode(s.id,{width:((a=s.measured)==null?void 0:a.width)??0,height:((i=s.measured)==null?void 0:i.height)??0})}),Fm.layout(r),{nodes:e.map(s=>{var c,d;const a=r.node(s.id),i=a.x-(((c=s.measured)==null?void 0:c.width)??0)/2,l=a.y-(((d=s.measured)==null?void 0:d.height)??0)/2;return{...s,position:{x:i,y:l}}}),edges:t}},QV=({edges:e,flowRepository:t,handleUpdateEdges:n,handleUpdateNodes:r,nodes:s,selectedFlowId:a})=>{const{fitView:i}=qn();return y.useCallback(async c=>{const d=JV(s,e,{direction:c});r([...d.nodes]),n([...d.edges]);const u=d.nodes.map(f=>({id:f.id,props:{position:f.position}}));await t.updateManyNodes({flowId:a,data:u}),window.requestAnimationFrame(()=>{i()})},[s,e,r,n,t,a,i])},eB=384*1.5,tB=()=>{const e=Ae(),{getInternalNode:t}=qn(),{zoom:n}=Li();return y.useCallback(r=>{var j,N,S,E,I;const{nodeLookup:s}=e.getState(),a=t(r.id),i=a==null?void 0:a.internals.positionAbsolute,l=((j=a==null?void 0:a.internals.handleBounds)==null?void 0:j.source)??[],c=((N=a==null?void 0:a.internals.handleBounds)==null?void 0:N.target)??[],d=Array.from(s.values()).reduce((A,M)=>{var P,C;const O=M==null?void 0:M.internals.positionAbsolute,L=((P=M==null?void 0:M.internals.handleBounds)==null?void 0:P.source)??[],$=((C=M==null?void 0:M.internals.handleBounds)==null?void 0:C.target)??[];if(i&&M.id!==a.id){const T=O.x-i.x,D=O.y-i.y,_=Math.sqrt(T*T+D*D),F=L.reduce((G,z)=>{const Z=O.x-i.x+z.x,q=O.y-i.y+z.y,V=Math.sqrt(Z*Z+q*q);return Math.min(G,V)},Number.MAX_VALUE),k=$.reduce((G,z)=>{const Z=O.x-i.x+z.x,q=O.y-i.y+z.y,V=Math.sqrt(Z*Z+q*q);return Math.min(G,V)},Number.MAX_VALUE),R=l.reduce((G,z)=>{const Z=i.x-O.x+z.x,q=i.y-O.y+z.y,V=Math.sqrt(Z*Z+q*q);return Math.min(G,V)},Number.MAX_VALUE),H=c.reduce((G,z)=>{const Z=i.x-O.x+z.x,q=i.y-O.y+z.y,V=Math.sqrt(Z*Z+q*q);return Math.min(G,V)},Number.MAX_VALUE),B=Math.min(_,F,k,R,H);B<A.distance&&B<eB&&(A.distance=B,A.node=M)}return A},{distance:Number.MAX_VALUE,node:null});if(!d.node)return null;const u=d==null?void 0:d.node.internals.positionAbsolute,f=((S=d==null?void 0:d.node.internals.handleBounds)==null?void 0:S.source)??[],m=((E=d==null?void 0:d.node.internals.handleBounds)==null?void 0:E.target)??[],p=i?u.x<i.x:!1,g=p?f:l,h=p?c:m,v=(I=g.find(A=>A.id==="expiration-source-handle"))==null?void 0:I.y,b=h[0].y,w=i&&v&&b?p?u.y+v<i.y+b:i.y+v<u.y+b:!1;return{id:p?`${d.node.id}-${r.id}`:`${r.id}-${d.node.id}`,source:p?d.node.id:r.id,sourceHandle:w?"expiration-source-handle":"source-handle",target:p?r.id:d.node.id,animated:!0,data:{flowId:r.data.flowId,isTemp:!0,sourceIsExpiration:w,sourceNodeId:p?d.node.id:r.id,targetNodeId:p?r.id:d.node.id},markerEnd:{type:Jt.ArrowClosed,width:20/n},style:{strokeWidth:3/n},type:"temp-edge"}},[t,e,n])},nB=({handleUpdateEdges:e,proximityConnection:t})=>{const n=tB();return y.useCallback((s,a)=>{if(!t)return;const i=n(a);e(l=>{const c=l.filter(d=>{var u;return!((u=d.data)!=null&&u.isTemp)});return i&&!c.find(d=>d.source===i.source&&d.target===i.target)&&c.push(i),c})},[n,e,t])},rB=({edges:e,flowRepository:t,handleUpdateEdges:n,proximityConnection:r,selectedFlowId:s})=>y.useCallback(()=>{if(!r)return;const i=e.find(l=>{var c;return(c=l.data)==null?void 0:c.isTemp});n(l=>{var d,u,f;const c=l.filter(m=>{var p;return!((p=m.data)!=null&&p.isTemp)});if(i&&!c.find(m=>m.source===i.source&&m.target===i.target)){const m={...i,animated:!!((d=i.data)!=null&&d.sourceIsExpiration),markerEnd:{type:Jt.ArrowClosed,width:20,color:(u=i.data)!=null&&u.sourceIsExpiration?"#F08E17":"#13C273"},style:{strokeWidth:2,stroke:(f=i.data)!=null&&f.sourceIsExpiration?"#F08E17":"#13C273"}};c.push(m)}return c}),i!=null&&i.data&&(i.data.sourceIsExpiration?t.updateNode({flowId:s,data:{id:i.data.sourceNodeId,props:{nextNodeIdOnExpiration:i.data.targetNodeId}}}):t.updateNode({flowId:s,data:{id:i.data.sourceNodeId,props:{nextNodeId:i.data.targetNodeId}}}))},[e,t,n,r,s]),sB=({nodes:e,edges:t})=>{const n=new Set(t.map(s=>s.target));return e.filter(s=>!n.has(s.id))},oB=({nodes:e,edges:t})=>{const n=sB({nodes:e,edges:t});return e.map(r=>n.find(s=>s.id===r.id)?{...r,data:{...r.data,isOrphan:!0}}:{...r,data:{...r.data,isOrphan:!1}})},aB=({edges:e,flowRepository:t,handleUpdateNodes:n,selectedFlowId:r})=>y.useCallback(async a=>{for await(const i of a)i.type==="position"&&!i.dragging&&t.updateNode({flowId:r,data:{id:i.id,props:{position:i.position}}});return n(i=>Ox(a,oB({nodes:i,edges:e})))},[e,t,n,r]),iB=({edges:e,flowRepository:t,handleUpdateEdges:n,nodes:r,selectedFlowId:s})=>{const a=y.useMemo(()=>new c2(t),[t]);return y.useCallback(async l=>{n(l.reduce((c,d)=>{var v,b;const u=eT(d,r,e),f=QO(d,r,e),m=nx([d],e),p=c.filter(w=>!m.includes(w)),g=((b=(v=m.find(w=>w.target===d.id))==null?void 0:v.sourceHandle)==null?void 0:b.startsWith("expiration"))??!1,h=u.flatMap(({id:w})=>f.map(({id:j,data:N})=>({id:`${w}->${g?N.nextNodeIdOnExpiration:N.nextNodeId}`,source:w,sourceHandle:g?"expiration-source-handle":"source-handle",target:j,animated:g,markerEnd:{type:Jt.ArrowClosed,width:20,color:g?"#F08E17":"#13C273"},style:{strokeWidth:2,stroke:g?"#F08E17":"#13C273"}})));return u.forEach(w=>{g?t.updateNode({flowId:s,data:{id:w.id,props:{nextNodeIdOnExpiration:d.data.nextNodeIdOnExpiration??d.data.nextNodeId}}}):t.updateNode({flowId:s,data:{id:w.id,props:{nextNodeId:d.data.nextNodeId}}})}),[...p,...h]},e));for(const c of l)c.type!=="start"&&await a.execute({flowId:c.data.flowId,nodeId:c.id})},[e,t,n,r,a,s])},q2={audio:jP,contact:NP,default:En,delay:wP,document:EP,media:SP,start:LP,text:CP,"user-input":IP},lB=({selectedFlow:e})=>{const[t,n]=y.useState([]),[r,s]=y.useState([]),[a,i]=y.useState(!1),{type:l}=fg(),c=Pe.useGetOption("theme"),d=y.useMemo(()=>new Ee,[]),u=y.useMemo(()=>new Be,[]),f=zn(u);y.useEffect(()=>{r.length>=0&&De(e).then(L=>{f({optionKey:"flows",optionToUpdate:{id:e.id,name:e.published.name,size:L}})})},[r.length,e.id,f]);const m=n,p=s,g=()=>{i(L=>!L)},h={"removable-edge":pP,"temp-edge":hP},v=YP(),b=XP({flowRepository:d,handleUpdateEdges:m,selectedFlowId:e.id}),w=JP({selectedFlowId:e.id}),j=QP(),N=tL({selectedFlowId:e.id,type:l}),S=nL({handleUpdateEdges:m}),E=QV({edges:t,flowRepository:d,handleUpdateEdges:m,handleUpdateNodes:p,nodes:r,selectedFlowId:e.id}),I=nB({handleUpdateEdges:m,proximityConnection:a}),A=rB({edges:t,flowRepository:d,handleUpdateEdges:m,proximityConnection:a,selectedFlowId:e.id}),M=aB({edges:t,flowRepository:d,handleUpdateNodes:p,selectedFlowId:e.id}),O=iB({edges:t,flowRepository:d,handleUpdateEdges:m,nodes:r,selectedFlowId:e.id});return F_({onEnd:()=>{const{nodes:L}=mm(e,{skipEdges:!0});s(L)}}),y.useEffect(()=>{const{edges:L,nodes:$}=mm(e);s($),n(L)},[e]),{currentTheme:c,edgeTypes:h,edges:t,handleToggleProximityConnection:g,nodeTypes:q2,nodes:r,onBeforeDelete:v,onConnect:b,onConnectEnd:w,onDragOver:j,onDrop:N,onEdgesChange:S,onLayout:E,onNodeDrag:I,onNodeDragStop:A,onNodesChange:M,onNodesDelete:O,proximityConnection:a}};function cB({selectedFlow:e}){const{currentTheme:t,edgeTypes:n,edges:r,handleToggleProximityConnection:s,nodeTypes:a,nodes:i,onBeforeDelete:l,onConnect:c,onConnectEnd:d,onDragOver:u,onDrop:f,onEdgesChange:m,onLayout:p,onNodeDrag:g,onNodeDragStop:h,onNodesChange:v,onNodesDelete:b,proximityConnection:w}=lB({selectedFlow:e});return o.jsxs(k_,{colorMode:t,connectionLineComponent:uP,defaultEdgeOptions:{type:"removable-edge"},edgeTypes:n,edges:r,fitView:!0,fitViewOptions:{duration:250},minZoom:.1,nodeOrigin:[0,.5],nodeTypes:a,nodes:i,onBeforeDelete:l,onConnect:c,onConnectEnd:d,onDragOver:u,onDrop:f,onEdgesChange:m,onNodeDrag:g,onNodeDragStop:h,onNodesChange:v,onNodesDelete:b,panOnScroll:!0,proOptions:{hideAttribution:!0},snapToGrid:!0,children:[o.jsx(R_,{}),o.jsx(mP,{handleToggleProximityConnection:s,onLayout:p,proximityConnection:w})]})}function dB(){const[e]=fe("dashboard-trigger-help-video",ae);return o.jsxs("div",{className:"flex flex-col justify-center gap-6 p-8 text-center md:overflow-y-auto",children:[o.jsx("img",{src:"./trigger.svg",alt:"Imagem indicativa de que não há gatilhos cadastrados",className:"m-auto w-[280px]"}),o.jsxs("div",{children:[o.jsx("p",{children:"Ainda não há nenhum fluxo cadastrado aqui."}),o.jsx("p",{children:"Que tal adicionar o seu primeiro fluxo?"})]}),o.jsx("div",{className:"flex justify-center gap-6",children:(e==null?void 0:e.enabled)&&o.jsx(Ct,{tutorial:e})}),o.jsx("div",{className:"flex justify-center",children:o.jsx(gr,{type:"single",collapsible:!0,className:"w-full min-w-[300px] rounded-md bg-card p-0 text-foreground md:max-w-[500px] ",children:o.jsxs(xr,{value:"important",children:[o.jsx(yr,{className:"px-4 py-3 ",children:o.jsxs("div",{className:"flex items-center gap-4 ",children:[o.jsx(ao,{size:24,weight:"thin"}),o.jsx("span",{className:"text-sm font-bold no-underline",children:"O que é um fluxo?"})]})}),o.jsx(vr,{className:" flex max-h-[30vh] flex-col gap-4 overflow-y-auto px-4",children:o.jsxs("section",{className:"rounded-md p-4",children:[o.jsx("h1",{className:"text-start text-sm font-bold text-foreground",children:"Sobre a funcionalidade"}),o.jsx("p",{className:"text-start text-sm font-light",children:"Fluxos são legais"}),o.jsx("p",{className:" mt-2 text-start font-light underline",children:"Fluxos são bacanas"})]})})]})})})]})}const uB=pr("flex flex-col items-center justify-center text-center gap-2 shadow p-4 rounded-lg border border-transparent bg-background shadow-sm cursor-pointer transition-all ",{variants:{variant:{default:"text-foreground hover:border-foreground hover:shadow-foreground",audio:"text-item-audio hover:border-item-audio hover:shadow-item-audio",contact:"text-neutral-60 hover:border-neutral-60 hover:shadow-neutral-60",delay:"text-item-trigger hover:border-item-trigger hover:shadow-item-trigger",document:"text-item-document hover:border-item-document hover:shadow-item-document",media:"text-item-media hover:border-item-media hover:shadow-item-media",text:"text-item-message hover:border-item-message hover:shadow-item-message","user-input":"text-item-trigger hover:border-item-trigger hover:shadow-item-trigger",disabled:"text-neutral-60 hover:border-neutral-60 hover:shadow-neutral-60 cursor-not-allowed opacity-50"},size:{default:"w-32 h-32",sm:"w-24 h-24",lg:"w-40 h-40",icon:"w-fit h-fit p-2"}},defaultVariants:{variant:"default",size:"default"}});function ft({type:e,variant:t,size:n,className:r,...s}){const a={audio:{description:"Envia um áudio",icon:o.jsxs(o.Fragment,{children:[o.jsx(pn,{size:32,className:"hidden shrink-0 text-item-audio group-hover/zv-type-node:block",weight:"fill"}),o.jsx(pn,{size:32,className:"shrink-0 text-item-audio group-hover/zv-type-node:hidden"})]}),title:"Áudio"},contact:{description:"Envia um contato",icon:o.jsxs(o.Fragment,{children:[o.jsx(dn,{size:32,className:"hidden shrink-0 text-neutral-60 group-hover/zv-type-node:block",weight:"fill"}),o.jsx(dn,{size:32,className:"shrink-0 text-neutral-60 group-hover/zv-type-node:hidden"})]}),title:"Contato"},delay:{description:"Aguarda um tempo antes de continuar",icon:o.jsxs(o.Fragment,{children:[o.jsx(Nl,{size:32,className:"hidden shrink-0 text-item-trigger group-hover/zv-type-node:block",weight:"fill"}),o.jsx(Nl,{size:32,className:"shrink-0 text-item-trigger group-hover/zv-type-node:hidden"})]}),title:"Espera"},document:{description:"Envia um documento",icon:o.jsxs(o.Fragment,{children:[o.jsx(Ht,{size:32,className:"hidden shrink-0 text-item-document group-hover/zv-type-node:block",weight:"fill"}),o.jsx(Ht,{size:32,className:"shrink-0 text-item-document group-hover/zv-type-node:hidden"})]}),title:"Documento"},media:{description:"Envia uma mídia",icon:o.jsxs(o.Fragment,{children:[o.jsx($s,{size:32,className:"hidden shrink-0 text-item-media group-hover/zv-type-node:block",weight:"fill"}),o.jsx($s,{size:32,className:"shrink-0 text-item-media group-hover/zv-type-node:hidden"})]}),title:"Mídia"},text:{description:"Envia um texto",icon:o.jsxs(o.Fragment,{children:[o.jsx($n,{size:32,className:"hidden shrink-0 text-item-message group-hover/zv-type-node:block",weight:"fill"}),o.jsx($n,{size:32,className:"shrink-0 text-item-message group-hover/zv-type-node:hidden"})]}),title:"Texto"},"user-input":{description:"Aguarda uma resposta do usuário",icon:o.jsx(o.Fragment,{children:o.jsxs("div",{className:"relative",children:[o.jsx(dn,{size:32,className:"hidden shrink-0 text-item-trigger group-hover/zv-type-node:block",weight:"fill"}),o.jsx(El,{size:16,className:"absolute -right-2 -top-1.5 hidden shrink-0 text-item-trigger group-hover/zv-type-node:block",weight:"fill"}),o.jsx(dn,{size:32,className:"shrink-0 text-item-trigger group-hover/zv-type-node:hidden"}),o.jsx(El,{size:16,className:"absolute -right-2 -top-1.5 shrink-0 text-item-trigger group-hover/zv-type-node:hidden"})]})}),title:"Resp. Usuário"}},{description:i,icon:l,title:c}=a[e];return o.jsxs("div",{className:J(uB({variant:t??e,size:n,className:r}),t!=="disabled"&&"group/zv-type-node"),...s,children:[l,n!=="icon"&&o.jsxs("div",{className:"text-sm",children:[o.jsx("b",{className:"text-foreground group-hover/zv-type-node:text-inherit",children:c}),n==="default"||n==="lg"&&o.jsx("p",{className:"font-thin text-foreground",children:i})]})]})}function fB(){const{selectFlowNodeType:e}=Ke();async function t(n){e(n)}return o.jsxs("article",{children:[o.jsx("h1",{children:"Selecione o tipo de item que deseja adicionar"}),o.jsxs("main",{className:"flex flex-wrap justify-center gap-1",children:[o.jsx(ft,{type:"delay",onClick:()=>t("delay")}),o.jsx(ft,{type:"user-input",onClick:()=>t("user-input")}),o.jsx(ft,{type:"audio",onClick:()=>e("audio")}),o.jsx(ft,{type:"contact",onClick:()=>t("contact"),className:J("")}),o.jsx(ft,{type:"document",onClick:()=>e("document")}),o.jsx(ft,{type:"media",onClick:()=>e("media")}),o.jsx(ft,{type:"text",onClick:()=>e("text")})]})]})}function mB(){const{delayTimeUnitHandler:e,selectedDelayTimeUnitTypeHandler:t}=Ke();return o.jsx("div",{children:o.jsxs("div",{className:"flex items-center justify-start gap-6 max-sm:items-center",children:[o.jsx(ce,{htmlFor:"delay-min",className:"flex w-full flex-wrap gap-x-1.5 text-base",children:"Esperar antes de continuar o fluxo"}),o.jsx(st,{inputClasses:"w-14",max:999,min:1,...e}),o.jsxs(Wn,{...t,children:[o.jsx(bn,{className:"h-full w-56 p-3.5",children:o.jsx(is,{placeholder:ke.seconds})}),o.jsxs(wn,{className:"z-[9999]",children:[o.jsx(Le,{value:"seconds",children:ke.seconds}),o.jsx(Le,{value:"minutes",children:ke.minutes}),o.jsx(Le,{value:"hours",children:ke.hours}),o.jsx(Le,{value:"days",children:ke.days})]})]})]})})}function pB(){const e=Qe.audioList,{itemId:t,setItemId:n,simulationMinutesHandler:r,simulationSecondsHandler:s}=Ke();return o.jsxs("div",{children:[o.jsx("h1",{className:"mb-2 text-base",children:"Selecione um áudio"}),o.jsx(vn,{defaultSelectedItem:t,items:e,onSelectItem:async a=>n(a),previewDataBuilder:a=>o.jsx($i,{itemId:a}),selectedItem:t,children:null}),o.jsxs("div",{className:"flex items-baseline justify-start gap-6 max-sm:items-center",children:[o.jsxs("p",{className:"flex flex-wrap gap-x-1.5 text-base",children:['Simular "gravando áudio..." por'," ",o.jsx("span",{className:"font-bold text-primary",children:`${r.value} min e ${s.value}s`})]}),o.jsx(st,{...r,hint:"Minutos"}),o.jsx(st,{...s,hint:"Segundos"})]})]})}const hB=({countries:e,country:t,setCountry:n})=>o.jsxs(Wn,{value:t.iso2,onValueChange:r=>n(r),children:[o.jsx(bn,{className:"h-auto w-auto whitespace-pre-wrap break-all bg-background px-4",value:t.iso2,children:o.jsx(Br,{iso2:t.iso2,className:"h-9"})}),o.jsx(wn,{className:"z-[101] max-h-[40dvh] w-[562px]",children:o.jsx("div",{className:"divide-y",children:e.map(r=>o.jsx(Le,{value:r.iso2,className:"gap-2 whitespace-pre-wrap break-all",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Br,{iso2:r.iso2,className:"h-9 shrink-0"}),o.jsx("p",{className:"shrink-0",children:r.name}),o.jsxs("p",{className:"shrink-0 text-primary/80",children:["+",r.dialCode]})]})},r.iso2))})})]});function gB(){const{contactName:e,countries:t,country:n,handlePhoneValueChange:r,inputRef:s,inputValue:a,setContactName:i,setCountry:l}=u9();return o.jsxs("div",{className:"flex flex-col gap-3",children:[o.jsx($e,{name:"SendContactNodeConfigNameInput",type:"text",placeholder:"Nome do contato",value:e,onChange:c=>{i(c.target.value)}}),o.jsxs("div",{className:"flex gap-1.5",children:[o.jsx(hB,{countries:t,country:n,setCountry:l}),o.jsx($e,{name:"SendContactNodeConfigPhoneInput",type:"tel",ref:s,value:a,onChange:r})]})]})}function xB(){const e=He.documentList,{itemId:t,setItemId:n}=Ke();return o.jsxs("div",{children:[o.jsx("h1",{className:"mb-2 text-base",children:"Selecione um documento"}),o.jsx(vn,{defaultSelectedItem:t,items:e,onSelectItem:async r=>n(r),previewDataBuilder:r=>o.jsx(Ri,{itemId:r}),selectedItem:t,children:null})]})}function yB(){const e=Ze.mediaList,{itemId:t,setItemId:n}=Ke();return o.jsxs("div",{children:[o.jsx("h1",{className:"mb-2 text-base",children:"Selecione uma mídia"}),o.jsx(vn,{defaultSelectedItem:t,items:e,onSelectItem:async r=>n(r),previewDataBuilder:r=>o.jsx(Vi,{itemId:r}),selectedItem:t,children:null})]})}function vB(){const e=Ue.useGetTextMessageList(),{itemId:t,setItemId:n,simulationMinutesHandler:r,simulationSecondsHandler:s}=Ke();return o.jsxs("div",{children:[o.jsx("h1",{className:"mb-2 text-base",children:"Selecione um texto"}),o.jsx(vn,{defaultSelectedItem:t,items:e,onSelectItem:a=>n(a),previewDataBuilder:a=>o.jsx(Bi,{itemId:a}),selectedItem:t,children:null}),o.jsxs("div",{className:"flex items-baseline justify-start gap-6 max-sm:items-center",children:[o.jsxs("p",{className:"flex flex-wrap gap-x-1.5 text-base",children:['Simular "digitando..." por'," ",o.jsx("span",{className:"font-bold text-primary",children:`${r.value} min e ${s.value}s`})]}),o.jsx(st,{...r,hint:"Minutos"}),o.jsx(st,{...s,hint:"Segundos"})]})]})}function bB(){const[e,t]=y.useState(!1),{selectedOption:n,expectedMessage:r,setExpectedMessage:s,setSelectedOption:a,canExpire:i,setCanExpire:l}=D9(),{delayTimeUnitHandler:c,selectedDelayTimeUnitTypeHandler:d}=Ke();return o.jsxs("div",{className:"flex flex-col gap-3",children:[o.jsxs(Aa,{open:e,onOpenChange:t,modal:!0,children:[o.jsx(Da,{asChild:!0,children:o.jsxs(X,{variant:"outline",role:"combobox","aria-expanded":e,className:J("flex h-9 items-center whitespace-nowrap","rounded-md border border-input bg-transparent p-6 text-sm","shadow-sm ring-offset-background placeholder:text-muted-foreground","focus:outline-none focus:ring-1 focus:ring-ring","disabled:cursor-not-allowed disabled:opacity-50","break-all bg-background","[&>span]:flex [&>span]:w-full [&>span]:justify-between","border border-solid"),children:[o.jsx("p",{className:"truncate",children:ir[n]}),o.jsx(lo,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),o.jsx(Ma,{className:"z-[101] w-[var(--radix-popper-anchor-width)] p-0",children:o.jsxs(ka,{defaultValue:n,filter:(u,f)=>{const m=ir[u];if(!m)return 0;const p=Zt(m),g=Zt(f);return p.includes(g)?1:0},children:[o.jsx(Oa,{placeholder:"Pesquisar opção",className:"h-9"}),o.jsxs(Ta,{children:[o.jsx(Fa,{className:"py-2",children:"Nenhum item encontrado."}),o.jsx(_a,{children:o.jsx("div",{className:"divide-y",children:Object.entries(ir).map(([u,f])=>o.jsxs(Pa,{value:u,onSelect:m=>{m==="anything"&&s(""),a(m),t(!1)},children:[o.jsx("p",{children:f}),o.jsx(co,{className:J("ml-auto h-4 w-4",n===u?"opacity-100":"opacity-0")})]},u))})})]})]})})]}),!n.startsWith("any")&&o.jsx($e,{name:"UserInputNodeConfigInput",placeholder:"Digite aqui",type:"text",value:r,onChange:u=>{s(u.target.value)}}),o.jsxs("div",{className:"pointer-events-auto flex items-center space-x-2",children:[o.jsx(On,{id:"toggle-can-expire",checked:i,onClick:()=>{l(!i)}}),o.jsx(ce,{htmlFor:"toggle-can-expire",className:"grid cursor-pointer gap-1.5 text-sm leading-none text-muted-foreground",children:"Pode expirar"})]}),i&&o.jsx("div",{children:o.jsxs("div",{className:"flex items-center justify-start gap-6 max-sm:items-center",children:[o.jsx(ce,{htmlFor:"delay-min",className:"flex w-full flex-wrap gap-x-1.5 text-base",children:"Expirar após"}),o.jsx(st,{inputClasses:"w-14",max:999,min:1,...c}),o.jsxs(Wn,{...d,children:[o.jsx(bn,{className:"h-full w-56 p-3.5",children:o.jsx(is,{placeholder:ke.seconds})}),o.jsxs(wn,{className:"z-[9999]",children:[o.jsx(Le,{value:"seconds",children:ke.seconds}),o.jsx(Le,{value:"minutes",children:ke.minutes}),o.jsx(Le,{value:"hours",children:ke.hours}),o.jsx(Le,{value:"days",children:ke.days})]})]})]})})]})}function wB(){const{itemTypeSelected:e}=Ke();return o.jsxs(o.Fragment,{children:[e==="text"&&o.jsx(vB,{}),e==="user-input"&&o.jsx(bB,{}),e==="delay"&&o.jsx(mB,{}),e==="contact"&&o.jsx(gB,{}),e==="document"&&o.jsx(xB,{}),e==="audio"&&o.jsx(pB,{}),e==="media"&&o.jsx(yB,{})]})}function jB(){const{closeOnAction:e,closeOnCancel:t,handleModalAction:n,handleModalCancel:r,handleOpenChange:s,isLastStep:a,isOpen:i,notReady:l,setIsOpen:c,step:d,title:u}=Ke();return o.jsx(we,{open:i,closeOnAction:e,closeOnCancel:t,onAction:n,action:a&&"Salvar",actionProps:{disabled:l,icon:a?o.jsx(en,{}):o.jsx(Va,{})},description:d===0?o.jsx(fB,{},"step-1"):o.jsx(wB,{},"step-2"),onOpenChange:s,title:u,cancel:a?"Anterior":"Cancelar",onCancel:()=>{t?c(!1):r()}})}const NB=()=>{const{setType:e}=fg(),t=(n,r)=>{e(r),n.dataTransfer.effectAllowed="move"};return o.jsxs("aside",{className:"flex min-w-fit flex-col items-center gap-4 overflow-y-auto border-r-2 border-solid px-4 pb-4 text-center",children:[o.jsxs("h2",{className:"sticky top-0 z-10 w-full bg-gradient-to-b from-main-background from-90% to-transparent to-100% pb-4 text-xl font-bold",children:[o.jsx("hr",{className:"mb-2 w-full border border-dashed"}),o.jsx("span",{className:"inline-block w-[25ch]",children:"Você pode arrastar para adicionar novos nós."})]}),o.jsxs("div",{className:"flex w-full flex-col gap-2 rounded-md border border-card bg-gradient-to-b from-card/30 to-card to-[6rem] px-4 py-2",children:[o.jsx("h3",{className:"my-1 text-lg font-bold text-primary",children:"Controle"}),o.jsxs("div",{className:"grid grid-cols-2 justify-items-center gap-4",children:[o.jsx(ft,{className:"h-16 w-36 flex-row justify-start p-3",type:"delay",onDragStart:n=>t(n,"delay"),draggable:!0}),o.jsx(ft,{className:"h-16 w-36 flex-row justify-start p-3",type:"user-input",onDragStart:n=>t(n,"user-input"),draggable:!0})]})]}),o.jsxs("div",{className:"flex w-full flex-col gap-2 rounded-md border border-card bg-gradient-to-b from-card/30 to-card to-[6rem] px-4 py-2",children:[o.jsx("h3",{className:"my-1 text-lg font-bold text-primary",children:"Envio de itens"}),o.jsxs("div",{className:"grid w-full grid-cols-2 gap-4",children:[o.jsx(ft,{className:"h-16 w-36 flex-row justify-start p-3",type:"audio",onDragStart:n=>t(n,"audio"),draggable:!0}),o.jsx(ft,{className:"h-16 w-36 flex-row justify-start p-3",type:"contact",onDragStart:n=>t(n,"contact"),draggable:!0}),o.jsx(ft,{className:"h-16 w-36 flex-row justify-start p-3",type:"document",onDragStart:n=>t(n,"document"),draggable:!0}),o.jsx(ft,{className:"h-16 w-36 flex-row justify-start p-3",type:"media",onDragStart:n=>t(n,"media"),draggable:!0}),o.jsx(ft,{className:"h-16 w-36 flex-row justify-start p-3",type:"text",onDragStart:n=>t(n,"text"),draggable:!0})]})]})]})},EB=[Kt(s2),Kt(fA),Kt(dA),Kt(p9),Kt(A9),Kt(x9),Kt(d9),Kt(b9),Kt(N9),Kt(C9)],SB=r8(EB);function CB(){const e=dt.useGetHasFlows(),t=dt.useGetFlowList(),[n,r]=y.useState(!1),s=dt.store.getState().selectedFlowId,a=t.find(i=>i.id===s);return o.jsxs(o.Fragment,{children:[o.jsx(os,{}),o.jsxs("div",{className:"flex items-center gap-5 p-3",children:[e&&o.jsxs(Aa,{open:n,onOpenChange:r,modal:!0,children:[o.jsx(Da,{asChild:!0,children:o.jsxs(X,{variant:"outline",role:"combobox",childrenVariant:"no-dark","aria-expanded":n,className:J("flex w-60 items-center whitespace-nowrap","rounded-md border border-input bg-transparent p-6 text-sm","shadow-sm ring-offset-background placeholder:text-muted-foreground","focus:outline-none focus:ring-1 focus:ring-ring","disabled:cursor-not-allowed disabled:opacity-50","break-all bg-background","[&>span]:flex [&>span]:w-full [&>span]:justify-between","border border-solid"),children:[o.jsx("p",{className:"grow truncate",children:(a==null?void 0:a.published.name)??"Selecione um fluxo"}),o.jsx(lo,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),o.jsx(Ma,{className:"z-[101] w-[var(--radix-popper-anchor-width)] p-0",children:o.jsxs(ka,{defaultValue:s,filter:(i,l)=>{var f;const c=(f=t.find(m=>m.id===i))==null?void 0:f.published.name;if(!c)return 0;const d=Zt(c),u=Zt(l);return d.includes(u)?1:0},children:[o.jsx(Oa,{placeholder:"Pesquisar fluxo",className:"h-9"}),o.jsxs(Ta,{children:[o.jsx(Fa,{className:"py-2",children:"Nenhum item encontrado."}),o.jsx(_a,{children:o.jsx("div",{className:"divide-y",children:t.map(i=>o.jsxs(Pa,{value:i.id,onSelect:l=>{dt.selectFlow(l),r(!1)},children:[o.jsx("p",{children:i.published.name}),o.jsx(co,{className:J("ml-auto h-4 w-4",s===i.id?"opacity-100":"opacity-0")})]},i.id))})})]})]})})]}),o.jsx(T9,{}),a&&o.jsx(wD,{flow:a}),a&&o.jsx(iD,{flow:a}),a&&o.jsx(dD,{flow:a}),o.jsx(mD,{}),o.jsx(eD,{}),a&&o.jsx(rD,{flow:a}),a&&o.jsx(yD,{selectedFlowId:a.id})]}),e?o.jsx("div",{className:"flex h-full justify-center overflow-auto px-1",children:o.jsx("div",{className:"relative flex h-full w-full max-md:flex-wrap",children:a?o.jsxs(SB,{children:[o.jsx(jB,{}),o.jsx(NB,{}),o.jsx(cB,{selectedFlow:a})]}):"Nenhum fluxo selecionado"})}):o.jsx(o.Fragment,{children:o.jsx(dB,{})})]})}const K2=e=>e.reduce((t,n)=>(n.type==="audio"?t.audioCount+=1:n.type==="document"?t.documentCount+=1:n.type==="media"?t.mediaCount+=1:n.type==="message"&&(t.textMessageCount+=1),t),{audioCount:0,mediaCount:0,textMessageCount:0,documentCount:0}),IB=({funnelId:e,itemId:t="",itemType:n,delayMinBeforeSend:r=0,delaySecsBeforeSend:s=0,mode:a,funnelItemId:i})=>{const l=new Ut,c=new nn,d=new St,u=new sn,f=new on,[m,p]=y.useState(t),[g,h]=y.useState(s),[v,b]=y.useState(r),w=po(l),j=io(c),N=bo(u),S=wo(f),E=tb(d),I=Nb(d),A=async D=>{const _=await w(D);return!_||!_.data?(p(""),b(0),h(0),le({title:"Este áudio está vazio"}),!1):!0},M=async D=>{const _=await j(D);return!_||!_.data?(p(""),b(0),h(0),le({title:"Este documento está vazio"}),!1):!0},O=async D=>{const _=await N(D);return!_||!_.data?(p(""),b(0),h(0),le({title:"Esta mídia está vazia"}),!1):!0},L=async D=>{const _=await S(D);return!_||!_.data?(p(""),b(0),h(0),le({title:"Esta mensagem está vazia"}),!1):!0};y.useEffect(()=>{n==="audio"&&m&&(async _=>{const F=await w(_);if(F){const k=await s8(F.data),{minutes:R,seconds:H}=_t.fromMillisecondsToMinutes(k*1e3);b(R),h(H)}})(m)},[m]),y.useEffect(()=>{t!==m&&p(t),r!==v&&b(r),s!==g&&h(s)},[t]);const $=()=>{a==="edit"?(p(t),b(r),h(s)):(p(""),b(0),h(0))},P=async D=>{let _="";const F=m??"",k=(v*60+g)*1e3,R=i?new Me(i):void 0,B={id:a==="edit"?String(i):new Me().toString(),itemId:F,delayBeforeSend:k,funnelId:e};let G=null;D==="audio"?await A(m)&&(_="áudio",G=Qm.create(B,R).metadata):D==="document"?await M(m)&&(_="documento",G=Jm.create(B,R).metadata):D==="media"?await O(m)&&(_="mídia",G=ep.create(B,R).metadata):D==="message"?await L(m)&&(_="mensagem",G=Xm.create(B,R).metadata):console.log("error"),a==="create"&&G?(await E({funnelId:e,item:G}),ie({title:`Item de ${_} adicionado com sucesso.`}),$()):a==="edit"&&e&&G&&(await I(e,G),ie({title:`Item de ${_} atualizado com sucesso.`}))},C={value:String(v),onValueChange:({valueAsNumber:D})=>{isNaN(D)&&(D=0),b(D)}},T={value:String(g),onValueChange:({valueAsNumber:D})=>{isNaN(D)&&(D=0),h(D)}};return{handlerDelayMinBeforeSendState:C,handlerDelaySecsBeforeSendState:T,delaySecsBeforeSendState:g,delayMinBeforeSendState:v,setDelayMinBeforeSendState:b,setDelaySecsBeforeSendState:h,handleModalAction:P,setItemIdState:p,selectedItemId:m,notReady:!m||e.trim()==="",title:a==="create"?"Adicionar item":"Editar item",clearAllState:$}},AB=({funnelId:e,funnelName:t,funnelMetadata:n,mode:r})=>{const[s,a]=y.useState(t),i=new Be,l=new St,c=rb(l),d=wb(l),u=yn(i),f=zn(i);y.useEffect(()=>{t!==s&&a(t)},[t]);const m=()=>{a(r==="edit"?t:"")};return{name:s,handleModalAction:async()=>{if(r==="create"){const{funnel:h}=await c({name:s.trim()});await u({optionKey:"funnels",optionToAdd:{id:h.id,name:h.name,size:await De(h)}}),ie({title:`Funil "${s.trim()}" adicionado com sucesso.`}),m()}else if(r==="edit"&&e){const{funnel:h}=await d({id:e,name:s.trim()});await f({optionKey:"funnels",optionToUpdate:{id:h.id,name:h.name,size:await De(h)}}),ie({title:`Funil "${s.trim()}" atualizado com sucesso.`})}else if(r==="duplicate"&&n){const h=new Me,v={...n,name:s.trim(),itemsSequence:n.itemsSequence.map(w=>({...w,id:new Me().toString(),funnelId:h.toString()})),id:h.toString()},{funnel:b}=await c({...v});await u({optionKey:"funnels",optionToAdd:{id:b.id,name:b.name,size:await De(b)}})}},nameHandler:{value:s,onChange:h=>a(h.target.value)},notReady:s.trim()==="",title:r==="create"?"Adicionar funil":r==="edit"?"Editar funil":"Duplicar funil",clearAllState:m}};function Od({funnelId:e,funnelName:t="",funnelMetadata:n,mode:r="create",trigger:s}){const{handleModalAction:a,nameHandler:i,notReady:l,title:c,clearAllState:d}=AB({funnelId:e,funnelName:r==="duplicate"?`${t} cópia`:t,funnelMetadata:n,mode:r});return o.jsx(we,{onCancel:d,onAction:a,action:"Salvar",actionProps:{disabled:l,icon:o.jsx(en,{})},description:o.jsx(o.Fragment,{children:o.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[o.jsx(ce,{htmlFor:"title",className:"max-sm:hidden",children:"Título"}),o.jsx($e,{required:!0,className:"bg-background text-base",id:"title",placeholder:"Título do funil",ref:Vn,...i,errorMessage:!i.value.trim()&&"Campo não pode ser vazio."})]})}),title:c,trigger:s,cancel:"Cancelar"})}const DB=function({funnel:e}){return o.jsxs(xe,{children:[o.jsx(ye,{asChild:!0,children:o.jsx("div",{children:o.jsx(Od,{mode:"edit",funnelId:e.id,funnelName:e.name,trigger:o.jsx(X,{onClick:t=>t.stopPropagation(),icon:o.jsx(Wt,{size:24}),variant:"action",size:"action"})},`edit_${e.id}`)})}),o.jsx(ve,{children:"Editar"})]})},Y2=y.memo(DB,(e,t)=>e.funnel.id===t.funnel.id&&e.funnel.name===t.funnel.name);function X2({funnel:e}){const t=vb(new St);return o.jsxs(xe,{children:[o.jsx(ye,{asChild:!0,children:o.jsx(X,{onClick:n=>{n.stopPropagation(),t(e==null?void 0:e.id),ie({title:`Funil "${e==null?void 0:e.name}" ${e!=null&&e.isFavorite?"desmarcado":"marcado"} como favorito com sucesso.`})},icon:o.jsx(Yr,{size:24,weight:e!=null&&e.isFavorite?"fill":"regular"}),variant:"action",size:"action"})}),o.jsx(ve,{children:"Favoritar"})]})}const MB=function({funnel:e,className:t,isSelected:n}){const r=hb(new St),{minutes:s,seconds:a}=_t.fromMillisecondsToMinutes(e.itemsSequence.map(u=>u.delayBeforeSend).reduce((u,f)=>u+f,0)),{audioCount:i,documentCount:l,mediaCount:c,textMessageCount:d}=K2(e.itemsSequence);return o.jsx(Nr,{cardBgColor:J(n?"bg-item-funnel/5":"bg-card"),className:J(n&&"rounded-sm ring-1 ring-item-funnel",t),onClick:()=>{r(e.id)},actions:o.jsxs(o.Fragment,{children:[o.jsx(Y2,{funnel:e}),o.jsx(X2,{funnel:e})]}),subtitle:o.jsxs("span",{className:"flex flex-wrap items-center gap-6",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(bc,{size:16}),o.jsxs("span",{children:[s," min e ",a,"s"]})," "]}),o.jsxs("div",{className:"flex gap-4",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(pn,{size:16})," ",i]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(Ia,{size:16})," ",c]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx($n,{size:16})," ",d]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(Ht,{size:16})," ",l]})]})]}),title:e.name})},kB=y.memo(MB,(e,t)=>e.funnel.id===t.funnel.id&&e.funnel.name===t.funnel.name&&e.funnel.itemsSequence.length===t.funnel.itemsSequence.length&&e.funnel.isFavorite===t.funnel.isFavorite&&e.funnel.itemsSequence.map(r=>r.delayBeforeSend).reduce((r,s)=>r+s,0)===t.funnel.itemsSequence.map(r=>r.delayBeforeSend).reduce((r,s)=>r+s,0)&&e.isSelected===t.isSelected);function Td({size:e}){return o.jsx(Od,{trigger:o.jsx(X,{size:e,icon:o.jsx(tn,{weight:"bold"}),children:"Adicionar"})})}function OB(){const e=new St,{authError:t,isPremium:n}=rt.useGetAuthData(),r=xb(e),s=mb(e),{filterTerm:a,filteredFunnelList:i,selectedFunnelId:l}=Ot.useDashboardFunnelList(),c=i.map(f=>(f.itemsSequence=f.itemsSequence.filter(m=>m),f)),{listRef:d}=ss(c.length),u=!n||t;return o.jsxs("div",{className:"flex w-full min-w-[300px] flex-1 flex-col overflow-y-auto max-md:h-[calc(100vh_-_300px)] lg:h-full",children:[o.jsxs("div",{className:"sticky top-0 z-[2] flex gap-5  pb-5 pt-4",children:[o.jsx(Xr,{className:"flex-1",onSearch:async f=>{await r(f)},storeSearchTerm:a}),o.jsx(Td,{})]}),c.length>0?o.jsx(Bn,{className:J(u?"h-[calc(100vh_-_450px)] md:h-[calc(100vh_-_315px)]":"h-full"),children:o.jsx(Hn,{className:"pb-0",ref:d,onDragEnd:f=>{f.destination&&s({destinationIndex:f.destination.index,sourceIndex:f.source.index})},droppableId:"funnel-list",bgColor:"bg-item-funnel/5",children:c.map((f,m)=>o.jsx(jr,{className:"p-0.5",color:"ring-item-funnel",draggableId:f.id,index:m,customHandle:!0,customHandleColor:"text-item-funnel",children:o.jsx(kB,{funnel:f,className:"w-full",isSelected:l===f.id},f.id)},f.id))})}):o.jsx(hr,{description:o.jsxs("p",{className:"text-center text-2xl",children:["Nenhum funil encontrado",o.jsx("br",{}),"Tente alterar a busca"]}),iconClasses:"text-item-funnel/70"})]})}function J2({funnelId:e,mode:t="create",itemType:n,delayMinBeforeSend:r,delaySecsBeforeSend:s,itemId:a,trigger:i,funnelItemId:l}){const[c,d]=y.useState(n??"message"),{handleModalAction:u,notReady:f,setItemIdState:m,delayMinBeforeSendState:p,delaySecsBeforeSendState:g,handlerDelayMinBeforeSendState:h,handlerDelaySecsBeforeSendState:v,setDelayMinBeforeSendState:b,setDelaySecsBeforeSendState:w,title:j,selectedItemId:N,clearAllState:S}=IB({mode:t,funnelId:e,itemId:a,itemType:c,delayMinBeforeSend:r,delaySecsBeforeSend:s,funnelItemId:l});function E(A){m(""),d(A),b(0),w(0)}let I=[];switch(c){case"audio":I=Qe.useGetAudioList();break;case"document":I=He.useGetDocumentList();break;case"media":I=Ze.useGetMediaList();break;case"message":I=Ue.useGetTextMessageList();break}return o.jsx(we,{onCancel:S,className:"w-full max-w-[562px]",onAction:()=>{u(c)},action:"Salvar",actionProps:{disabled:f,icon:o.jsx(en,{})},description:o.jsxs(o.Fragment,{children:[o.jsxs(vn,{defaultSelectedItem:t==="edit"?a:"",items:I,onSelectItem:m,previewDataBuilder:A=>{switch(c){case"audio":return o.jsx($i,{itemId:A});case"document":return o.jsx(Ri,{itemId:A});case"media":return o.jsx(Vi,{itemId:A});case"message":return o.jsx(Bi,{itemId:A})}},selectedItem:N,selectedType:c,children:[o.jsx(o8,{isSelected:c==="message",onSelect:E}),o.jsx(a8,{isSelected:c==="audio",onSelect:E}),o.jsx(i8,{isSelected:c==="media",onSelect:E}),o.jsx(l8,{isSelected:c==="document",onSelect:E})]}),o.jsxs("div",{className:"flex items-baseline justify-start gap-6",children:[o.jsxs("div",{className:"w-44 text-base ",children:["Enviando item após"," ",o.jsxs("span",{className:"font-bold text-primary",children:[p*60+g,"s"]})]}),o.jsx(st,{...h,hint:"Minutos"}),o.jsx(st,{...v,hint:"Segundos"})]})]}),title:j,trigger:i,cancel:"Cancelar"})}function TB({size:e,variant:t,funnelId:n}){return o.jsx(J2,{mode:"create",funnelId:n,trigger:o.jsx(X,{className:"ml-4",size:e,icon:o.jsx(tn,{weight:"bold"}),variant:t,children:"Adicionar item"})})}function FB({funnel:e}){const t=ob(new St),n=wr(new Be);return o.jsxs(xe,{children:[o.jsx(ye,{asChild:!0,children:o.jsx("div",{children:o.jsx(we,{className:"md:w-fit",actionVariant:"actionDestructive",actionProps:{childrenVariant:"no-dark"},onAction:()=>{t(e.id).then(()=>{n({optionKey:"funnels",optionIdToRemove:e.id})}).then(()=>{ie({title:`Funil "${e.name}" excluído com sucesso.`})},r=>{r instanceof Error&&he({title:"Atenção",description:o.jsxs("div",{className:"flex flex-col gap-1",children:[`Não foi possível excluir o funil "${e==null?void 0:e.name}":`,o.jsx("p",{children:" "}),r.message.split(`
`).map((s,a)=>o.jsx("pre",{className:"min-h-[1ch] whitespace-pre-wrap font-sans text-sm",children:s},a))]}),duration:5e3})})},action:"Excluir",cancel:"Cancelar",description:o.jsx("div",{children:o.jsxs("div",{className:"mb-3 text-center",children:[o.jsxs("span",{children:["Tem certeza que deseja excluir o funil"," ",o.jsxs("span",{className:"font-bold",children:["“",e.name,"”"]}),"?"]}),o.jsx("br",{}),o.jsx("span",{children:"Essa ação é irreversível."})]})}),title:o.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[o.jsx(xt,{size:32}),o.jsx("p",{children:"Excluir funil"})]}),trigger:o.jsx(X,{icon:o.jsx(yt,{size:24}),variant:"actionDestructive",childrenVariant:"no-dark",size:"action"})})})}),o.jsx(ve,{className:"bg-destructive text-destructive-foreground",children:"Excluir"})]})}function _B({funnel:e}){return o.jsxs(xe,{children:[o.jsx(ye,{asChild:!0,children:o.jsx("div",{children:o.jsx(Od,{mode:"duplicate",funnelMetadata:e,funnelName:e.name,trigger:o.jsx(X,{icon:o.jsx(bg,{}),variant:"action",size:"action",onClick:t=>t.stopPropagation()})},`duplicate_${e.id}`)})}),o.jsx(ve,{children:"Duplicar"})]})}function PB({funnelId:e,itemId:t}){const n=ib(new St);return o.jsxs(xe,{children:[o.jsx(ye,{asChild:!0,children:o.jsx("div",{children:o.jsx(we,{className:"md:w-fit",actionVariant:"actionDestructive",actionProps:{childrenVariant:"no-dark"},onAction:()=>{n(e,t),ie({title:"Item de funil excluído com sucesso."})},action:"Excluir",cancel:"Cancelar",description:o.jsx("div",{children:o.jsxs("div",{className:"mb-3 text-center",children:[o.jsxs("span",{children:["Tem certeza que deseja excluir o item do funil"," ",o.jsx("span",{className:"font-bold"}),"?"]}),o.jsx("br",{}),o.jsx("span",{children:"Essa ação é irreversível."})]})}),title:o.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[o.jsx(xt,{size:32}),o.jsx("p",{children:"Excluir item de funil"})]}),trigger:o.jsx("div",{className:"inline-flex items-center justify-center rounded-full bg-destructive-foreground p-2 text-sm font-medium text-destructive shadow-sm transition-colors hover:bg-destructive hover:text-destructive-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 zv-dark:disabled:bg-status-neutral/30",children:o.jsx(yt,{size:24,className:"brightness-100 zv-dark:brightness-100"})})})})}),o.jsx(ve,{className:"bg-destructive text-destructive-foreground",children:"Excluir"})]})}function LB({delayBeforeSend:e,itemId:t,type:n,funnelId:r,funnelItemId:s}){const{minutes:a,seconds:i}=_t.fromMillisecondsToMinutes(e);return o.jsxs(xe,{children:[o.jsx(ye,{asChild:!0,children:o.jsx("div",{children:o.jsx(J2,{delayMinBeforeSend:a,delaySecsBeforeSend:i,funnelItemId:s,itemId:t+"",itemType:n,funnelId:r,mode:"edit",trigger:o.jsx("div",{className:"inline-flex items-center justify-center rounded-full bg-action p-2 text-sm font-medium text-action-foreground shadow-sm transition-colors hover:bg-primary/80 hover:text-primary-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 zv-dark:disabled:bg-status-neutral/30",onClick:l=>{l.stopPropagation()},children:o.jsx(Wt,{size:24})})})})}),o.jsx(ve,{children:"Editar"})]})}const Ao=y.forwardRef(({getItemData:e,open:t,icon:n,itemMetadata:r,itemFunnel:s},a)=>{const[i,l]=y.useState(),{minutes:c,seconds:d}=_t.fromMillisecondsToMinutes(s.delayBeforeSend);return y.useEffect(()=>{t&&(async()=>{const f=await e(s.itemId);l(f)})()},[e,s.itemId,t]),o.jsx("div",{ref:a,className:"flex w-full items-center rounded-md bg-card px-6 py-3 shadow-lg ring-1 ring-primary-foreground transition-all hover:no-underline",children:o.jsxs(xr,{value:s.id,className:"w-full border-none",children:[o.jsx(yr,{className:"gap-2 py-0 hover:no-underline",triggerIconClasses:"inline-flex items-center w-10 h-10 p-2 justify-center rounded-full bg-action text-sm font-medium text-action-foreground shadow-sm transition-colors hover:bg-primary/80 hover:text-primary-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 zv-dark:disabled:bg-status-neutral/30",children:o.jsxs("div",{className:"flex w-full flex-wrap-reverse justify-between",children:[o.jsxs("div",{className:"flex min-w-[100px] items-center gap-2 lg:max-w-[calc(100%_-_145px)]",children:[n,o.jsxs("div",{className:"text-start",children:[o.jsx("p",{className:"m-0 truncate whitespace-pre-wrap break-all text-base font-bold",children:r==null?void 0:r.name}),o.jsx("p",{className:"m-0 truncate text-sm text-muted-foreground",children:s.delayBeforeSend===0?"Enviando imediatamente":`Enviando após ${c} min e ${d}s`})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(PB,{funnelId:String(s.funnelId),itemId:s.id}),o.jsx(LB,{delayBeforeSend:s.delayBeforeSend,funnelId:String(s.funnelId),itemId:String(r==null?void 0:r.id),type:s.type,funnelItemId:s.id})]})]})}),o.jsx(vr,{className:"p-2",children:i&&"fileName"in i?o.jsx("div",{className:"h-full space-y-1 p-2 text-base",children:o.jsxs(o.Fragment,{children:[o.jsx(nt,{variant:"outline",children:"Nome do arquivo: "}),o.jsx("p",{children:i.fileName})]})}):i&&"caption"in i?o.jsxs(o.Fragment,{children:[r&&"asViewOnce"in r&&r.asViewOnce&&o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(fc,{size:20,weight:"duotone",className:"text-primary"}),"Enviando mídia como visualização única"]}),o.jsxs("div",{className:"h-full space-y-1 p-2 text-muted-foreground",children:[o.jsx(nt,{variant:"outline",children:"Texto da legenda: "}),i.caption.split(`
`).map((u,f)=>o.jsx("pre",{className:"min-h-[1ch] whitespace-pre-wrap font-sans",children:u},f))]}),o.jsx(oo,{data:i.data})]}):i&&s.type==="audio"&&r&&"isPtt"in r?o.jsxs(o.Fragment,{children:[o.jsx("p",{className:"text-base",children:r.isPtt?"Enviando áudio como gravado":"Enviando áudio como encaminhado"}),o.jsx(wa,{data:i.data})]}):i&&typeof i.data=="string"?i.data.split(`
`).map((u,f)=>o.jsx("pre",{className:"min-h-[1ch] whitespace-pre-wrap font-sans",children:u},f)):i==null?void 0:i.data.toString()})]})})});Ao.displayName="FunnelItemCardBase";const Q2=y.forwardRef(({itemFunnel:e,open:t},n)=>{const r=Qe.useGetAudioList(),s=po(new Ut),a=r.find(i=>i.id===e.itemId);return o.jsx(Ao,{open:t,getItemData:s,ref:n,icon:o.jsx(pn,{size:26,className:"min-w-[26px] text-item-audio",weight:"bold"}),itemFunnel:e,itemMetadata:a})});Q2.displayName="FunnelAudioItemCard";const ey=y.forwardRef(({itemFunnel:e,open:t},n)=>{const r=He.useGetDocumentList(),s=io(new nn),a=r.find(i=>i.id===e.itemId);return o.jsx(Ao,{open:t,getItemData:s,ref:n,icon:o.jsx(Ht,{size:26,className:"min-w-[26px] text-item-document",weight:"bold"}),itemFunnel:e,itemMetadata:a})});ey.displayName="FunnelDocumentItemCard";const ty=y.forwardRef(({itemFunnel:e,open:t},n)=>{const r=Ze.useGetMediaList(),s=bo(new sn),a=r.find(i=>i.id===e.itemId);return o.jsx(Ao,{open:t,getItemData:s,ref:n,icon:o.jsx(Ia,{size:26,className:"min-w-[26px] text-item-media",weight:"bold"}),itemFunnel:e,itemMetadata:a})});ty.displayName="FunnelMediaItemCard";const ny=y.forwardRef(({itemFunnel:e,open:t},n)=>{const r=Ue.useGetTextMessageList(),s=wo(new on),a=r.find(i=>i.id===e.itemId);return o.jsx(Ao,{open:t,getItemData:s,ref:n,icon:o.jsx($n,{size:26,className:"min-w-[26px] text-item-message",weight:"bold"}),itemFunnel:e,itemMetadata:a})});ny.displayName="FunnelTextMessageItemCard";const ry=y.forwardRef(({itemFunnel:e,open:t},n)=>{switch(e.type){case"audio":return o.jsx(Q2,{ref:n,itemFunnel:e,open:t});case"message":return o.jsx(ny,{ref:n,itemFunnel:e,open:t});case"document":return o.jsx(ey,{ref:n,itemFunnel:e,open:t});case"media":return o.jsx(ty,{ref:n,itemFunnel:e,open:t});default:return null}});ry.displayName="FunnelItemCard";function $B(){const[e]=fe("dashboard-funnel-help-video",ae);return o.jsxs("div",{className:"flex w-[416px] flex-col justify-center gap-6 py-4 text-center ",children:[o.jsx("img",{src:"./funnel.svg",alt:"Imagem indicativa de que não há funis cadastrados",className:"m-auto w-[280px]"}),o.jsxs("div",{className:"flex w-[416px] flex-col items-center gap-6 text-base",children:[o.jsxs("p",{children:[o.jsx("span",{children:"Selecione um funil para visualizar ou clique em "}),o.jsx(Td,{size:"sm"}),o.jsx("span",{children:" para criar um novo funil."})]}),(e==null?void 0:e.enabled)&&o.jsx("p",{children:"Dúvidas?"})]}),o.jsx("div",{className:"flex justify-center gap-6",children:(e==null?void 0:e.enabled)&&o.jsx(Ct,{tutorial:e})})]})}function RB(){const{selectedFunnelId:e}=Ot.useGetSelectedFunnel(),t=Ot.funnelList,n=ub(new St),[r,s]=y.useState(),a=t.find(i=>i.id===e);return o.jsx("div",{className:ze("flex h-fit w-1/2 min-w-[300px] flex-1 rounded-lg bg-card shadow-sm lg:min-w-[500px]",!e&&"justify-center"),children:e?o.jsx(Qr,{actions:a&&o.jsxs(o.Fragment,{children:[o.jsx(FB,{funnel:a}),o.jsx(_B,{funnel:a}),o.jsx(Y2,{funnel:a}),o.jsx(X2,{funnel:a}),o.jsx(TB,{size:"action",funnelId:a.id})]}),body:a&&a.itemsSequence.length>0?o.jsx(gr,{type:"single",collapsible:!0,asChild:!0,value:r,onValueChange:i=>s(i),children:o.jsx(Hn,{onDragEnd:i=>{i.destination&&n({funnelId:a.id,indexes:{destinationIndex:i.destination.index,sourceIndex:i.source.index}})},droppableId:"item-funnel-list",bgColor:"bg-item-funnel/5",children:a.itemsSequence.map((i,l)=>o.jsx(jr,{className:"p-0.5",color:"ring-item-funnel",draggableId:i.id,index:l,customHandle:!0,customHandleColor:"text-item-funnel",children:o.jsx(ry,{open:r===i.id,itemFunnel:{id:i.id,delayBeforeSend:i.delayBeforeSend,funnelId:i.funnelId,itemId:i.itemId,type:i.type}})},i.id))})}):o.jsx(hr,{description:o.jsx("p",{className:"text-center text-2xl",children:"Nenhum item adicionado"}),iconClasses:"text-item-funnel/70"}),title:o.jsx("span",{children:a==null?void 0:a.name})}):o.jsx($B,{})})}function VB(){const[e]=fe("dashboard-funnel-help-video",ae);return o.jsxs("div",{className:"flex flex-col justify-center gap-6 p-8 text-center md:overflow-y-auto",children:[o.jsx("img",{src:"./funnel.svg",alt:"Imagem indicativa de que não há funis cadastrados",className:"m-auto w-[280px]"}),o.jsxs("div",{children:[o.jsx("p",{children:"Ainda não há nenhum funil cadastrado aqui."}),o.jsx("p",{children:"Que tal adicionar o seu primeiro funil?"})]}),o.jsxs("div",{className:"flex justify-center gap-6",children:[(e==null?void 0:e.enabled)&&o.jsx(Ct,{tutorial:e}),o.jsx(Td,{})]}),o.jsx("div",{className:"flex justify-center",children:o.jsx(gr,{type:"single",collapsible:!0,className:"w-full min-w-[300px] rounded-md bg-card p-0 text-foreground md:max-w-[500px] ",children:o.jsxs(xr,{value:"important",children:[o.jsx(yr,{className:"px-4 py-3 ",children:o.jsxs("div",{className:"flex items-center gap-4 ",children:[o.jsx(ao,{size:24,weight:"thin"}),o.jsx("span",{className:"text-sm font-bold no-underline",children:"O que é um funil?"})]})}),o.jsx(vr,{className:" flex max-h-[30vh] flex-col gap-4 overflow-y-auto px-4",children:o.jsxs("section",{className:"rounded-md p-4",children:[o.jsx("h1",{className:"text-start text-sm font-bold text-foreground",children:"Sobre a funcionalidade"}),o.jsx("p",{className:"text-start text-sm font-light",children:'Funis são sequências de mensagens que podem ser enviadas manualmente através de clique ou de forma automática pelos gatilhos. Dentro dos funis é possível configurar um tempo de delay para que apareçam os status "digitando" e "gravando áudio" para o contato, como se as mensagens fossem gravadas na hora!'}),o.jsxs("p",{className:"mt-2 text-start text-sm font-light",children:["Um funil pode ser criado para enviar uma ou mais mensagens de uma vez só, sem precisar enviar uma de cada vez.",o.jsx("br",{}),"Por exemplo, você pode criar um funil para enviar mensagens de boas-vindas para um novo contato, este funil teria uma mensagem de texto, uma imagem e um vídeo que seriam enviados em sequência."]})]})})]})})})]})}function BB(){const e=Ot.useGetHasFunnels();return o.jsxs(o.Fragment,{children:[o.jsx(os,{}),e?o.jsx("div",{className:"flex h-full justify-center overflow-auto px-1 md:p-8 md:px-3",children:o.jsxs("div",{className:"relative flex h-full w-full max-w-[1400px] gap-5 max-md:flex-wrap",children:[o.jsx(OB,{}),o.jsx(RB,{})]})}):o.jsx(VB,{})]})}function zB(){const e=new yo,t=new br,n=y.useMemo(()=>new Jr,[]),r=y.useMemo(()=>so(n,ae,Nc),[n]),s=NI(e,r),a=op(t),[i,l]=y.useState(""),[c,d]=y.useState(()=>Pe.acceptTerms),[u]=fe("free-login",ae),[f]=fe("login-by-key",ae),[m]=fe("social-login",ae),[p]=fe("social-register",ae),[g]=fe("usage-limit",ae),h=Pe.useGetOption("theme")==="dark",v=m||p,b=!f&&!u&&!v,w=v&&!u&&!f,j=sp();y.useEffect(()=>{const{removeListener:S}=V8.auth.listenFinishExternalLoginRequest(E=>{E.isLoggedIn?(E.userName&&ie({title:`Olá, ${E.userName}!`}),E.authError==="expiredKey"&&he({title:E.authErrorMessage,description:"Renove a assinatura ou entre em contato com nosso suporte."}),E.authError==="restrictedKey"&&he({title:E.authErrorMessage,description:"Desbloqueie no gerenciador de chaves ou entre em contato com nosso suporte."}),E.authError==="inactiveKey"&&he({title:E.authErrorMessage,description:"Ative sua chave no gerenciador de chaves ou entre em contato com nosso suporte."}),E.authError==="unknown"&&he({title:E.authErrorMessage,description:"Verifique no gerenciador de chaves ou entre em contato com nosso suporte."}),r.trackEvent("auth:login:end")):(E.authError==="userNotFound"&&he({title:E.authErrorMessage,description:"Verifique no gerenciador de chaves se a chave está ativa ou entre em contato com nosso suporte."}),E.authError==="managerNotFound"&&he({title:E.authErrorMessage,description:"Verifique no gerenciador de chaves ou entre em contato com nosso suporte."}),r.trackException("exception:auth:not_logged_in",{exc_auth_error:E.authError??"",exc_auth_error_message:E.authErrorMessage??"",fatal:!1}))});return()=>S()},[r]);function N(){const S=document.getElementById("accept-terms");S!==null&&(S.classList.add("animate-shakeX"),setTimeout(()=>{S.classList.remove("animate-shakeX")},600))}return o.jsxs("div",{className:"flex h-full w-full flex-col items-center justify-center gap-2 bg-background",children:[o.jsxs("div",{className:"flex items-center justify-between space-x-2 text-base",children:[o.jsx(ce,{className:"cursor-pointer text-sm",htmlFor:"hide-items-bar",children:h?"Modo escuro":"Modo claro"}),o.jsx(gt,{id:"hide-items-bar",checked:h,onCheckedChange:S=>{a(S)}})]}),o.jsxs("div",{className:"h-fit w-fit rounded-2xl border-status-neutral bg-card bg-opacity-60 bg-clip-padding px-[2dvw] py-[1dvh] text-center backdrop-blur-sm backdrop-filter md:max-w-[90dvw] md:border",children:[o.jsx("img",{src:"./Logo.svg",alt:"Logo ZapVoice Crack",title:"Logo ZapVoice Crack",className:"mb-1 h-[10dvh] w-full transition-all duration-300"}),o.jsxs(nt,{className:"mb-[3dvh]",variant:"default",size:"sm",children:["versão: ",j]}),o.jsx("h1",{className:"text-3xl text-foreground max-md:text-xl",children:"Seja bem vindo(a) ao ZapVoice Crack"}),o.jsxs("div",{className:"flex flex-col items-center gap-[1.5dvh] px-[1dvw] py-[3dvh]",children:[!Pe.acceptTerms&&o.jsxs("div",{className:"items-top mt-2 flex space-x-2 text-muted-foreground",id:"accept-terms",children:[o.jsx(On,{id:"terms1",checked:c,onClick:()=>{d(!c)},className:J(!Pe.acceptTerms&&!c&&"border-destructive")}),o.jsx(ce,{htmlFor:"terms1",className:"grid gap-1.5 leading-none",children:o.jsxs("p",{className:J("text-sm",!Pe.acceptTerms&&!c&&"text-destructive"),children:["Li e concordo com os"," ",o.jsx("a",{href:"https://zapvoice.com.br/termos-de-uso/",target:"_blank",rel:"noreferrer",className:"font-bold text-primary underline",children:"termos"})," ","de uso e condições"]})})]}),m&&o.jsxs(o.Fragment,{children:[o.jsx(X,{onClick:async()=>{r.trackEvent("auth:login:init",{zv_auth_method:"external"}),Pe.changeAcceptTerms(c);const S=Yd(),E=new URL(`${Ar("oRHdwNnOv8SYwBnL6FGc29WajVmLj9WbuImc")}/extension/auth/`);E.searchParams.append("action","login"),E.searchParams.append("callback",S),chrome.tabs.create({url:E.toString(),active:!0})},disabled:!Pe.acceptTerms&&!c,childrenVariant:"no-dark",className:"w-full",children:w?"Entrar":"Entrar pelo gerenciador de chaves"}),(f||u||p)&&o.jsx("div",{className:"w-full text-lg",children:o.jsx(_r,{label:"OU",labelWeight:"bold",rootSpacing:"xs"})})]}),p&&o.jsxs(o.Fragment,{children:[o.jsx(X,{onClick:async()=>{const S=rt.phoneNumber;r.trackEvent("auth:login:init",{zv_auth_method:"register"}),Pe.changeAcceptTerms(c);const E=Yd(),I=new URL(`${Ar("oRHdwNnOv8SYwBnL6FGc29WajVmLj9WbuImc")}/extension/auth/`);I.searchParams.append("action","register"),I.searchParams.append("callback",E),I.searchParams.append("utm_source","chrome_extension_dashboard_login"),I.searchParams.append("utm_medium","button"),I.searchParams.append("utm_campaign","extesion-free-register"),I.searchParams.append("utm_content","dash"),I.searchParams.append("utm_id",S??""),I.searchParams.append("utm_term",S??""),chrome.tabs.create({url:I.toString(),active:!0})},disabled:!Pe.acceptTerms&&!c,childrenVariant:"no-dark",className:"w-full",children:w?"Cadastre-se gratuitamente":"Cadastre-se gratuitamente pelo gerenciador de chaves"}),(f||u)&&o.jsx("div",{className:"w-full text-lg",children:o.jsx(_r,{label:"OU",labelWeight:"bold",rootSpacing:"xs"})})]}),(f||b)&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[o.jsx(ce,{htmlFor:"authKey",children:"Insira a sua chave de ativação recebida por email (verifique o spam)"}),o.jsx($e,{beforeIcon:o.jsx(bp,{size:24,className:"text-status-caution zv-dark:text-status-caution-foreground"}),className:"text-base",id:"authKey",placeholder:"Insira sua chave aqui",onChange:S=>{l(S.target.value)},value:i}),o.jsx(X,{onClick:async()=>{let S="";if(i.trim().length===0&&(S="Por favor, insira a sua chave de ativação para realizar o login"),!Pe.acceptTerms&&!c&&(S="Para entrar com sua chave de ativação é necessário aceitar os termos de uso",N()),S.trim().length>0){he({description:S,title:"Login autenticado"});return}r.trackEvent("auth:login:init",{zv_auth_method:"key"}),Pe.changeAcceptTerms(c),s({key:i,keyId:null,managerId:null,ownerId:null,shouldGetUsage:g})},icon:o.jsx(en,{}),variant:"outline",childrenVariant:"no-dark",className:"mt-[0.5dvh]",children:"Entrar"})]}),u&&o.jsx("div",{className:"w-full text-lg",children:o.jsx(_r,{label:"OU",labelWeight:"bold",rootSpacing:"xs"})})]}),u&&o.jsxs("div",{className:"grid justify-items-center gap-1.5 text-xs",children:[o.jsx(X,{onClick:async()=>{let S="";if(!Pe.acceptTerms&&!c&&(S="Para entrar como usuário gratis é necessário aceitar os termos de uso",N()),S.trim().length>0){he({description:S,title:"Login gratuito"});return}rsss.trackEvent("auth:login:init",{zv_auth_method:"free"}),Pe.changeAcceptTerms(c),s()},variant:"outline",childrenVariant:"no-dark",className:"text-xs",children:"Entrar como usuário grátis"}),o.jsxs("ul",{className:"rounded-lg bg-popover px-5 py-4 text-status-caution zv-dark:text-status-caution-foreground",children:[o.jsx("li",{children:"Os áudios são limitados a 60 segundos para usuários grátis"}),o.jsx("li",{children:"Os usuários grátis não podem enviar funis"}),o.jsx("li",{children:"Os usuários grátis não podem disparar gatilhos"})]})]})]})]}),o.jsxs("span",{className:"text-center",children:["Copyright © 2024 Zapvoice Crack",o.jsx("span",{className:"max-md:hidden",children:" - "}),o.jsx("br",{className:"md:hidden"}),"Todos os direitos reservados"]})]})}const Zi=y.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:J("rounded-xl border bg-card text-card-foreground shadow",e),...t}));Zi.displayName="Card";const Ui=y.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:J("flex flex-col space-y-1.5 p-6",e),...t}));Ui.displayName="CardHeader";const Wi=y.forwardRef(({className:e,...t},n)=>o.jsx("h3",{ref:n,className:J("font-semibold leading-none tracking-tight",e),...t}));Wi.displayName="CardTitle";const HB=y.forwardRef(({className:e,...t},n)=>o.jsx("p",{ref:n,className:J("text-sm text-muted-foreground",e),...t}));HB.displayName="CardDescription";const Fd=y.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:J("p-6 pt-0",e),...t}));Fd.displayName="CardContent";const ZB=y.forwardRef(({className:e,...t},n)=>o.jsx("div",{ref:n,className:J("flex items-center p-6 pt-0",e),...t}));ZB.displayName="CardFooter";const UB=pr("flex flex-row justify-between gap-2",{variants:{variant:{default:"text-foreground",audio:"text-item-audio",document:"text-item-document",funnel:"text-item-funnel",media:"text-item-media",message:"text-item-message",trigger:"text-item-trigger"}},defaultVariants:{variant:"default"}});function ds({className:e,help:t,icon:n,itemCount:r,title:s,variant:a}){return o.jsxs(Zi,{className:J(" flex-shrink flex-grow basis-64 text-2xl",r===0&&"border-destructive bg-destructive/5 zv-dark:border-destructive-foreground"),children:[o.jsxs(Ui,{className:J(UB({variant:a,className:e})),children:[o.jsxs(Wi,{className:"flex items-center gap-2",children:[n,s]}),r===0&&o.jsxs(pc,{children:[o.jsx(hc,{children:o.jsx(Wm,{size:24,weight:"fill",className:"text-destructive zv-dark:text-destructive-foreground"})}),o.jsx(gc,{className:"w-fit",children:t})]})]}),o.jsx(Fd,{className:"text-4xl",children:r})]})}function us({content:e,supportMessage:t,videoUrl:n}){return o.jsxs("div",{className:"flex flex-col gap-3",children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("div",{className:"text-base font-bold",children:"Dúvidas?"}),o.jsx("div",{children:e}),o.jsx("div",{children:"Precisa de ajuda?"})]}),o.jsxs("div",{className:"flex justify-between",children:[n&&o.jsx("a",{href:n,target:"_blank",rel:"noreferrer",children:o.jsx(X,{variant:"link",childrenVariant:"no-dark",icon:o.jsx(Ac,{size:20}),children:"Ver vídeo"})}),o.jsx(X,{onClick:()=>{od.util.sendOpenSupportChatRequest({message:t,trackParams:{zv_help_details:"homeHoverCard",zv_help_type:"chat",zv_scope:"dashboard"}})},variant:"link",childrenVariant:"no-dark",icon:o.jsx(Wm,{size:20}),children:"Suporte"})]})]})}function WB(){const e=Qe.useGetAudioCount(),[t]=fe("dashboard-audio-help-video",ae),n=t==null?void 0:t.payload,r=n==null?void 0:n["video-url"];return o.jsx(ds,{icon:o.jsx(pn,{size:32}),itemCount:e,title:"Áudios",variant:"audio",help:o.jsx(us,{content:"Percebemos que você ainda não adicionou nenhum áudio.",supportMessage:"Olá! Estou no painel de controle e gostaria de ajuda para adicionar áudios, por favor.",videoUrl:r})})}function GB(){const e=He.useGetDocumentCount(),[t]=fe("dashboard-document-help-video",ae),n=t==null?void 0:t.payload,r=n==null?void 0:n["video-url"];return o.jsx(ds,{icon:o.jsx(Ht,{size:32}),itemCount:e,title:"Documentos",variant:"document",help:o.jsx(us,{content:"Percebemos que você ainda não adicionou nenhum documento.",supportMessage:"Olá! Estou no painel de controle e gostaria de ajuda para adicionar documentos, por favor.",videoUrl:r})})}function qB(){const e=Ot.useGetFunnelCount(),[t]=fe("dashboard-funnel-help-video",ae),n=t==null?void 0:t.payload,r=n==null?void 0:n["video-url"];return o.jsx(ds,{icon:o.jsx(uo,{size:32}),itemCount:e,title:"Funis",variant:"funnel",help:o.jsx(us,{content:"Percebemos que você ainda não adicionou nenhum funil.",supportMessage:"Olá! Estou no painel de controle e gostaria de ajuda para adicionar funis, por favor.",videoUrl:r})})}function KB(){const e=rt.useGetUserName(),t=()=>{od.util.sendOpenSupportChatRequest({message:"Olá! Estou no painel de controle e gostaria de ajuda, por favor.",trackParams:{zv_help_details:"greetings-card",zv_help_type:"chat",zv_scope:"dashboard"}})},[n]=fe("dashboard-home-help-video",ae),r=n==null?void 0:n.payload,s=r==null?void 0:r["video-url"];return o.jsx(Zi,{className:" w-full bg-gradient-to-r from-secondary/30 from-[-100%] to-primary text-3xl zv-dark:from-secondary zv-dark:to-primary-foreground zv-dark:to-60%",children:o.jsxs(Ui,{className:"flex-row justify-between gap-2 text-foreground",children:[o.jsxs(Wi,{className:"flex flex-col justify-center gap-6 text-white",children:["Olá, ",e==null?void 0:e.split(" ")[0],"!",o.jsx("div",{className:"text-lg",children:"Dúvidas ao utilizar o painel de controle?"}),o.jsxs("div",{className:"flex items-center gap-4",children:[s&&o.jsx("a",{href:s,target:"_blank",rel:"noreferrer",children:o.jsx(X,{variant:"outline",childrenVariant:"no-dark",icon:o.jsx(Ac,{size:20}),children:"Ver vídeo"})}),o.jsx(c8,{openSupportChat:t})]})]}),o.jsx("div",{className:"mr-11",children:o.jsx("img",{src:"./greeting.svg",alt:"Greeting Logo"})})]})})}function YB(){const e=Ze.useGetMediaCount(),[t]=fe("dashboard-media-help-video",ae),n=t==null?void 0:t.payload,r=n==null?void 0:n["video-url"];return o.jsx(ds,{icon:o.jsx($s,{size:32}),itemCount:e,title:"Mídias",variant:"media",help:o.jsx(us,{content:"Percebemos que você ainda não adicionou nenhuma mídia.",supportMessage:"Olá! Estou no painel de controle e gostaria de ajuda para adicionar mídias, por favor.",videoUrl:r})})}function XB(){const e=Ue.useGetTextMessageCount(),[t]=fe("dashboard-message-help-video",ae),n=t==null?void 0:t.payload,r=n==null?void 0:n["video-url"];return o.jsx(ds,{icon:o.jsx(Ht,{size:32}),itemCount:e,title:"Mensagens",variant:"message",help:o.jsx(us,{content:"Percebemos que você ainda não adicionou nenhuma mensagem de texto.",supportMessage:"Olá! Estou no painel de controle e gostaria de ajuda para adicionar mensagens de texto, por favor.",videoUrl:r})})}function JB(){const e=zt.useGetTriggerCount(),[t]=fe("dashboard-trigger-help-video",ae),n=t==null?void 0:t.payload,r=n==null?void 0:n["video-url"];return o.jsx(ds,{icon:o.jsx(Gm,{size:32}),itemCount:e,title:"Gatilhos",variant:"trigger",help:o.jsx(us,{content:"Percebemos que você ainda não adicionou nenhum gatilho.",supportMessage:"Olá! Estou no painel de controle e gostaria de ajuda para adicionar gatilhos, por favor.",videoUrl:r})})}function QB(){const e=rt.store.getState(),t=rt.useGetUsageLimit(),[n]=fe("usage-limit",ae),[r]=fe("flow",ae),[s]=fe("item-scheduling",ae),[a]=fe("remarketing",ae),i=!!e.authError,l=e.isBasicPlan,c=hn.useSetRoute(),d=e.isPremium===!1&&e.isBasicPlan===!1&&e.plan_id==="ZV_FREE";return o.jsx("div",{className:"flex h-full w-full items-center justify-center overflow-y-auto p-3 md:px-8",children:o.jsxs("div",{className:"flex h-full max-w-5xl flex-col gap-6",children:[(a||r||s||d)&&n&&o.jsxs(Zi,{className:" flex flex-shrink flex-col items-start justify-between gap-2 text-2xl",children:[o.jsxs(Ui,{className:"pb-0",children:[o.jsx(Wi,{className:"flex items-center gap-2",children:"Limites diários"}),o.jsx("p",{className:"text-sm",children:"Seu plano possui uma limitação diária de uso para as seguintes funções:"})]}),o.jsx(Fd,{className:"flex justify-end p-6 pt-0",children:o.jsx(d8,{usage:t,isBasicPlan:l,hasError:i,onFlowUsageLimitClick:async()=>{c("/flows")},showBulkMessagesLimit:a,showFlowLimit:r,showScheduleItemLimit:s})})]}),o.jsx(KB,{}),o.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xl",children:[o.jsx("span",{children:"Total de itens cadastrados"})," "]}),o.jsxs("div",{className:"flex flex-wrap gap-5 pb-5",children:[o.jsx(XB,{}),o.jsx(WB,{}),o.jsx(YB,{}),o.jsx(GB,{}),o.jsx(qB,{}),o.jsx(JB,{})]})]})})}function ez(){return o.jsxs(o.Fragment,{children:[o.jsx(os,{}),o.jsx(QB,{})]})}function tz(){return o.jsx(zB,{})}const nz=({itemId:e,captionValue:t,mediaName:n,viewOnce:r,mode:s})=>{const[a,i]=y.useState(!1),[l,c]=y.useState(void 0),[d,u]=y.useState(t??""),[f,m]=y.useState(void 0),[p,g]=y.useState(n??""),h=new Be,v=new sn,b=yn(h),w=u8(v),j=bo(v),N=KA(v),S=zn(h);y.useEffect(()=>{t!==d&&u(t??""),n!==p&&g(n??""),r!==a&&i(r??!1)},[t,n,r]);const E=()=>{s==="edit"?(g(n??""),u(t??"")):(c(""),g(""),u(""))},I=(C,T)=>{c(C),m(T)},A=async C=>{if(C&&s==="edit"&&e){const T=await j(e);T&&(u(T.caption),c(T.data))}},M=async()=>{if(s==="create"&&l){const{media:C}=await w({caption:d,name:p.trim(),base64:l,asViewOnce:a});await b({optionKey:"medias",optionToAdd:{id:C.id,name:C.name,size:await De(C,{itemData:C.data})}}),ie({title:`Mídia "${p.trim()}" adicionada com sucesso.`}),E()}else if(s==="edit"&&e){const{media:C}=await N({id:e,base64:l,name:p.trim(),caption:d,asViewOnce:a});await S({optionKey:"medias",optionToUpdate:{id:C.id,name:C.name,size:await De(C,{itemData:C.data})}}),ie({title:`Mídia "${p.trim()}" atualizada com sucesso.`})}},O=C=>(C.stopPropagation(),c(void 0)),L={value:p,onChange:C=>g(C.target.value)},$={value:d,onChange:C=>u(C.target.value)};return{base64:l,fileName:f,handleModalAction:M,handleOpenChange:A,handleRemoveUploadedMedia:O,handleUploadedMedia:I,hasMedia:!!l&&!!f,nameHandler:L,viewOnceHandler:{checked:a,onCheckedChange:i},notReady:p.trim()===""||s==="create"&&!l,title:s==="create"?"Adicionar mídia":"Editar mídia",captionHandler:$,capton:d,clearAllState:E}};function rz({fileName:e,onRemoveUploaded:t}){return o.jsxs("span",{className:"flex w-full items-center justify-center gap-2 text-primary",children:[e,o.jsx(X,{variant:"actionDestructive",icon:o.jsx(yt,{size:24}),childrenVariant:"no-dark",size:"sm",onClick:t,children:"Remover"})]})}function sz({actionName:e,base64:t,errorMessage:n,fileName:r,hasMedia:s,maxSize:a,onRemoveUploaded:i,onSelectMedia:l}){return o.jsxs("div",{children:[o.jsx(Za,{className:J(e==="inserir"&&!s&&"border-destructive zv-dark:border-destructive-foreground"),maxSize:a,accept:{"image/*":[".png",".jpg"],"video/*":[".mp4"]},onSelect:l,dragHintText:o.jsx("p",{className:"text-base",children:"Solte a mídia aqui..."}),hintText:o.jsxs("div",{className:"flex h-full items-center gap-4",children:[t&&o.jsx(oo,{data:t,className:"h-full",videoControls:!0}),o.jsxs("p",{className:"text-base leading-8",children:[s?o.jsx(rz,{fileName:r,onRemoveUploaded:i}):o.jsxs(o.Fragment,{children:[o.jsxs("span",{children:["Para ",e," uma mídia, clique aqui ou arraste o arquivo para esta área."]}),o.jsx("br",{})]}),o.jsxs("span",{children:["Formatos aceitos: ",o.jsx("span",{className:"text-primary",children:".png"}),","," ",o.jsx("span",{className:"text-primary",children:".jpg"}),","," ",o.jsx("span",{className:"text-primary",children:".mp4"})]})]})]})}),n?typeof n=="string"?o.jsx("span",{className:"m-0 ml-2 text-start text-sm font-light text-destructive zv-dark:text-red-400",children:n}):n:""]})}const oz=1e3,_m=oz*1e3;function sy({itemId:e,mediaName:t,mode:n="create",trigger:r,viewOnce:s}){const{base64:a,fileName:i,handleModalAction:l,handleOpenChange:c,handleRemoveUploadedMedia:d,handleUploadedMedia:u,hasMedia:f,nameHandler:m,captionHandler:p,notReady:g,title:h,clearAllState:v,viewOnceHandler:b}=nz({itemId:e,mediaName:t,mode:n,viewOnce:s}),[w]=fe("high-size-medias",ae),j=w?60*_m:16*_m;return o.jsx(we,{onCancel:v,onAction:l,action:"Salvar",actionProps:{disabled:g,icon:o.jsx(en,{})},description:o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[o.jsx(ce,{htmlFor:"mediaName",className:"max-sm:hidden",children:"Nome"}),o.jsx($e,{required:!0,className:"bg-background text-base",id:"mediaName",placeholder:"Nome da mídia",...m,errorMessage:!m.value.trim()&&"Campo obrigatório."})]}),o.jsxs("div",{className:"flex items-center space-x-2 text-base",children:[o.jsx(gt,{id:"as-view-once",...b}),o.jsxs(ce,{htmlFor:"as-view-once",children:["Enviar mídia como"," ",o.jsx("span",{className:"text-primary",children:"visualização única"})]})]}),o.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[o.jsx(ce,{htmlFor:"mediaCaption",className:"max-sm:hidden",children:"Legenda da mídia"}),o.jsx(qm,{className:"bg-background text-base",id:"mediaCaption",placeholder:"Legenda da mídia",rows:7,...p})]}),o.jsx(sz,{maxSize:j,actionName:n==="create"?"inserir":"alterar",fileName:i,hasMedia:f,onRemoveUploaded:d,onSelectMedia:u,base64:a,errorMessage:n==="create"&&!f&&"Campo obrigatório"})]}),onOpenChange:c,title:h,trigger:r,cancel:"Cancelar"})}function _d({size:e}){return o.jsx(sy,{trigger:o.jsx(X,{size:e,icon:o.jsx(tn,{weight:"bold"}),children:"Adicionar"})})}const az=function({media:e}){return o.jsxs(xe,{children:[o.jsx(ye,{asChild:!0,children:o.jsx("div",{children:o.jsx(sy,{mode:"edit",itemId:e==null?void 0:e.id,mediaName:e==null?void 0:e.name,viewOnce:e==null?void 0:e.asViewOnce,trigger:o.jsx(X,{onClick:t=>t.stopPropagation(),icon:o.jsx(Wt,{size:24}),variant:"action",size:"action"})},`edit_${e==null?void 0:e.id}`)})}),o.jsx(ve,{children:"Editar"})]})},oy=y.memo(az,(e,t)=>e.media.id===t.media.id&&e.media.name===t.media.name);function ay({media:e}){const t=GA(new sn);return o.jsxs(xe,{children:[o.jsx(ye,{asChild:!0,children:o.jsx(X,{onClick:n=>{n.stopPropagation(),t(e==null?void 0:e.id),ie({title:`Mídia "${e==null?void 0:e.name}" ${e!=null&&e.isFavorite?"desmarcada":"marcada"} como favorita com sucesso.`})},icon:o.jsx(Yr,{size:24,weight:e!=null&&e.isFavorite?"fill":"regular"}),variant:"action",size:"action"})}),o.jsx(ve,{children:"Favoritar"})]})}const iz=function({media:e,className:t,isSelected:n}){const r=HA(new sn);return o.jsx(Nr,{cardBgColor:J(n?"bg-item-media/5":"bg-card"),className:J(n&&"rounded-sm ring-1 ring-item-media",t),onClick:()=>{r(e.id)},actions:o.jsxs(o.Fragment,{children:[o.jsx(oy,{media:e}),o.jsx(ay,{media:e})]}),title:e.name})},lz=y.memo(iz,(e,t)=>e.media.id===t.media.id&&e.media.name===t.media.name&&e.media.isFavorite===t.media.isFavorite&&e.isSelected===t.isSelected);function cz(){const e=new sn,t=UA(e),n=BA(e),{filterTerm:r,filteredMediaList:s,selectedMediaId:a}=Ze.useDashboardMediaList(),{listRef:i}=ss(s.length);return o.jsxs("div",{className:"flex w-full min-w-[300px] flex-1 flex-col overflow-y-auto max-md:h-[calc(100vh_-_300px)] lg:h-full",children:[o.jsxs("div",{className:"sticky top-0 z-[2] flex gap-5  pb-5 pt-4",children:[o.jsx(Xr,{className:"flex-1",onSearch:t,storeSearchTerm:r}),o.jsx(_d,{})]}),s.length>0?o.jsx(Bn,{className:"h-full",children:o.jsx(Hn,{className:"pb-0",ref:i,onDragEnd:l=>{l.destination&&n({destinationIndex:l.destination.index,sourceIndex:l.source.index})},droppableId:"media-list",bgColor:"bg-item-media-light/70 zv-dark:bg-item-media-light/15",children:s.map((l,c)=>o.jsx(jr,{className:"p-0.5",color:"ring-item-media",draggableId:l.id,index:c,customHandle:!0,customHandleColor:"text-item-media",children:o.jsx(lz,{media:l,className:"w-full",isSelected:a===l.id},l.id)},l.id))})}):o.jsx(hr,{description:o.jsxs("p",{className:"text-center text-2xl",children:["Nenhuma mídia encontrada",o.jsx("br",{}),"Tente alterar a busca"]}),iconClasses:"text-item-media/70"})]})}function dz({media:e}){const t=$A(new sn,new St,new Ee),n=wr(new Be);return o.jsxs(xe,{children:[o.jsx(ye,{asChild:!0,children:o.jsx("div",{children:o.jsx(we,{className:"md:w-fit",actionVariant:"actionDestructive",actionProps:{childrenVariant:"no-dark"},onAction:()=>{t(e==null?void 0:e.id).then(()=>{n({optionKey:"medias",optionIdToRemove:e.id})}).then(()=>{ie({title:`Mídia "${e==null?void 0:e.name}" excluída com sucesso.`})},r=>{r instanceof Error&&he({title:"Atenção",description:o.jsxs("div",{className:"flex flex-col gap-1",children:[`Não foi possível excluir a mídia "${e==null?void 0:e.name}":`,o.jsx("p",{children:" "}),r.message.split(`
`).map((s,a)=>o.jsx("pre",{className:"min-h-[1ch] whitespace-pre-wrap font-sans text-sm",children:s},a))]}),duration:5e3})})},action:"Excluir",cancel:"Cancelar",description:o.jsx("div",{children:o.jsxs("div",{className:"mb-3 text-center",children:[o.jsxs("span",{children:["Tem certeza que deseja excluir a mídia"," ",o.jsxs("span",{className:"break-all font-bold",children:["“",e==null?void 0:e.name,"”"]}),"?"]}),o.jsx("br",{}),o.jsx("span",{children:"Essa ação é irreversível."})]})}),title:o.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[o.jsx(xt,{size:32}),o.jsx("p",{children:"Excluir mídia"})]}),trigger:o.jsx(X,{icon:o.jsx(yt,{size:24}),variant:"actionDestructive",childrenVariant:"no-dark",size:"action"})})})}),o.jsx(ve,{className:"bg-destructive text-destructive-foreground",children:"Excluir"})]})}function uz({media:e}){return o.jsxs(xe,{children:[o.jsx(ye,{asChild:!0,children:o.jsx("a",{download:e==null?void 0:e.name,href:e==null?void 0:e.data,target:"_blank",rel:"noopener noreferrer",children:o.jsx(X,{icon:o.jsx(es,{size:24}),variant:"action",size:"action"})})}),o.jsx(ve,{children:"Baixar"})]})}function fz(){const[e]=fe("dashboard-media-help-video",ae);return o.jsxs("div",{className:"flex w-[416px] flex-col justify-center gap-6 py-4 text-center ",children:[o.jsx("img",{src:"./media.svg",alt:"Imagem indicativa de que não há mídias cadastrados",className:"m-auto w-[280px]"}),o.jsxs("div",{className:"flex w-[416px] flex-col items-center gap-6 text-base",children:[o.jsxs("p",{children:[o.jsx("span",{children:"Selecione uma mídia para visualizar ou clique em "}),o.jsx(_d,{size:"sm"}),o.jsx("span",{children:" para criar uma nova mídia."})]}),(e==null?void 0:e.enabled)&&o.jsx("p",{children:"Dúvidas?"})]}),o.jsx("div",{className:"flex justify-center gap-6",children:(e==null?void 0:e.enabled)&&o.jsx(Ct,{tutorial:e})})]})}function mz(){const e=Ze.useGetMediaList(),{dummyTrigger:t}=Ze.useGetSelectedMedia(),n=bo(new sn),{selectedMediaId:r}=Ze.useGetSelectedMedia(),[s,a]=y.useState(null);return y.useEffect(()=>{const i=e.find(c=>c.id===r);a(c=>({id:(i==null?void 0:i.id)??"",isFavorite:(i==null?void 0:i.isFavorite)??!1,name:(i==null?void 0:i.name)??"",asViewOnce:(i==null?void 0:i.asViewOnce)??!1,caption:(c==null?void 0:c.id)===(i==null?void 0:i.id)?(c==null?void 0:c.caption)??"":"",data:(c==null?void 0:c.id)===(i==null?void 0:i.id)?(c==null?void 0:c.data)??"":""}));async function l(){const c=await n(r);c&&a(d=>({id:(d==null?void 0:d.id)??"",isFavorite:(d==null?void 0:d.isFavorite)??!1,name:(d==null?void 0:d.name)??"",asViewOnce:(d==null?void 0:d.asViewOnce)??!1,caption:c.caption??"",data:c.data===(d==null?void 0:d.data)?d.data:c.data}))}l()},[r,t]),o.jsx("div",{className:ze("flex h-fit w-1/2 min-w-[300px] flex-1 rounded-lg bg-card shadow-sm lg:min-w-[500px]",!r&&"justify-center"),children:r.trim()!==""?o.jsx(Qr,{actions:s&&o.jsxs(o.Fragment,{children:[o.jsx(dz,{media:s}),o.jsx(uz,{media:s}),o.jsx(oy,{media:s}),o.jsx(ay,{media:s})]}),body:s&&o.jsxs("div",{children:[s.asViewOnce&&o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(fc,{size:20,weight:"duotone",className:"text-primary"}),"Enviando mídia como visualização única"]}),o.jsxs(xe,{children:[o.jsx(ye,{asChild:!0,children:o.jsxs("div",{className:"mb-2 h-full space-y-1 rounded-md bg-background/50 p-2 text-muted-foreground",children:[o.jsx(nt,{variant:"outline",children:"Texto da legenda: "}),s.caption.split(`
`).map((i,l)=>o.jsx("pre",{className:"min-h-[1ch] whitespace-pre-wrap break-all font-sans",children:i},l))]})}),o.jsx(ve,{asChild:!0,children:o.jsxs("div",{className:"flex items-center gap-2",children:["Clique no botão",o.jsx("div",{className:"rounded-full p-1 ring-1 ring-primary-foreground",children:o.jsx(Wt,{size:20})}),"para editar"]})})]}),o.jsx(oo,{className:"flex justify-center",data:s.data}),o.jsx("br",{})]}),title:s==null?void 0:s.name}):o.jsx(fz,{})})}function pz(){const[e]=fe("dashboard-media-help-video",ae);return o.jsxs("div",{className:"flex flex-col justify-center gap-6 p-8 text-center",children:[o.jsx("img",{src:"./media.svg",alt:"Imagem indicativa de que não há mídias cadastradas",className:"m-auto w-[280px]"}),o.jsxs("div",{children:[o.jsx("p",{children:"Ainda não há nenhuma mídia cadastrada aqui."}),o.jsx("p",{children:"Que tal adicionar a sua primeira mídia?"})]}),o.jsxs("div",{className:"flex justify-center gap-6",children:[(e==null?void 0:e.enabled)&&o.jsx(Ct,{tutorial:e}),o.jsx(_d,{})]})]})}function hz(){return Ze.useGetHasMedias()?o.jsx("div",{className:"flex h-full justify-center overflow-auto px-1 md:p-8 md:px-3",children:o.jsxs("div",{className:"relative flex h-full w-full max-w-[1400px] gap-5 max-md:flex-wrap",children:[o.jsx(cz,{}),o.jsx(mz,{})]})}):o.jsx(pz,{})}const gz=({itemId:e,textMessageName:t,mode:n})=>{const[r,s]=y.useState(t),[a,i]=y.useState(""),l=new on,c=new Be,d=f8(l),u=l9(l),f=wo(l),m=yn(c),p=zn(c);y.useEffect(()=>{t!==r&&s(t)},[t]);const g={value:a,onChange:j=>i(j.target.value)},h=()=>{n==="edit"?s(t):(s(""),i(""))};return{dataHandler:g,handleModalAction:async()=>{if(n==="create"&&a){const{textMessage:j}=await d({name:r.trim(),base64:a});await m({optionKey:"messages",optionToAdd:{id:j.id,name:j.name,size:await De(j,{itemData:j.data})}}),ie({title:`Mensagem "${r.trim()}" adicionada com sucesso.`}),h()}else if(n==="edit"&&e){const{textMessage:j}=await u({id:e,base64:a,name:r.trim()});await p({optionKey:"messages",optionToUpdate:{id:j.id,name:j.name,size:await De(j,{itemData:j.data})}}),ie({title:`Mensagem "${r.trim()}" atualizada com sucesso.`})}},handleOpenChange:async j=>{if(j&&n==="edit"&&e){const N=await f(e);N&&i(N.data)}},nameHandler:{value:r,onChange:j=>s(j.target.value)},notReady:r.trim()===""||!a||a.trim()==="",title:n==="create"?"Adicionar mensagem":"Editar mensagem",clearAllState:h}};function iy({itemId:e,textMessageName:t="",mode:n="create",trigger:r}){const{dataHandler:s,handleModalAction:a,handleOpenChange:i,nameHandler:l,notReady:c,title:d,clearAllState:u}=gz({itemId:e,textMessageName:t,mode:n});return o.jsx(we,{onCancel:u,onAction:a,action:"Salvar",actionProps:{disabled:c,icon:o.jsx(en,{})},description:o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[o.jsx(ce,{htmlFor:"textMessageName",className:"max-sm:hidden",children:"Nome"}),o.jsx($e,{required:!0,className:"bg-background text-base",id:"textMessageName",placeholder:"Nome da mensagem",ref:Vn,...l,errorMessage:!l.value.trim()&&"Campo obrigatório"})]}),o.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[o.jsx(ce,{htmlFor:"textMessageData",className:"max-sm:hidden",children:"Texto"}),o.jsx(qm,{required:!0,className:"bg-background text-base",id:"textMessageData",placeholder:"Texto da mensagem",rows:7,...s,errorMessage:!s.value.trim()&&"Campo obrigatório"})]})]}),onOpenChange:i,title:d,trigger:r,cancel:"Cancelar"})}const xz=function({textMessage:e}){return o.jsxs(xe,{children:[o.jsx(ye,{asChild:!0,children:o.jsx("div",{children:o.jsx(iy,{mode:"edit",itemId:e==null?void 0:e.id,textMessageName:e==null?void 0:e.name,trigger:o.jsx(X,{onClick:t=>t.stopPropagation(),icon:o.jsx(Wt,{size:24}),variant:"action",size:"action"})},`edit_${e==null?void 0:e.id}`)})}),o.jsx(ve,{children:"Editar"})]})},ly=y.memo(xz,(e,t)=>e.textMessage.id===t.textMessage.id&&e.textMessage.name===t.textMessage.name);function cy({textMessage:e}){const t=a9(new on);return o.jsxs(xe,{children:[o.jsx(ye,{asChild:!0,children:o.jsx(X,{onClick:n=>{n.stopPropagation(),t(e==null?void 0:e.id),ie({title:`Mensagem "${e==null?void 0:e.name}" ${e!=null&&e.isFavorite?"desmarcada":"marcada"} como favorita com sucesso.`})},icon:o.jsx(Yr,{size:24,weight:e!=null&&e.isFavorite?"fill":"regular"}),variant:"action",size:"action"})}),o.jsx(ve,{children:"Favoritar"})]})}const yz=function({textMessage:e,className:t,isSelected:n}){const r=n9(new on);return o.jsx(Nr,{cardBgColor:J(n?"bg-item-message/5":"bg-card"),className:J(n&&"rounded-sm ring-1 ring-item-message",t),onClick:()=>r(e.id),actions:o.jsxs(o.Fragment,{children:[o.jsx(ly,{textMessage:e}),o.jsx(cy,{textMessage:e})]}),subtitle:"",title:e.name})},vz=y.memo(yz,(e,t)=>e.textMessage.id===t.textMessage.id&&e.textMessage.name===t.textMessage.name&&e.textMessage.isFavorite===t.textMessage.isFavorite&&e.isSelected===t.isSelected);function Pd({size:e}){return o.jsx(iy,{trigger:o.jsx(X,{size:e,icon:o.jsx(tn,{weight:"bold"}),children:"Adicionar"})})}function bz(){const e=new on,t=s9(e),n=e9(e),{filterTerm:r,filteredTextMessageList:s,selectedTextMessageId:a}=Ue.useDashboardTextMessageList(),{listRef:i}=ss(s.length);return o.jsxs("div",{className:"flex w-full min-w-[300px] flex-1 flex-col overflow-y-auto max-md:h-[calc(100vh_-_300px)] lg:h-full",children:[o.jsxs("div",{className:"sticky top-0 z-[2] flex gap-5  pb-5 pt-4",children:[o.jsx(Xr,{className:"flex-1",onSearch:t,storeSearchTerm:r}),o.jsx(Pd,{})]}),s.length>0?o.jsx(Bn,{className:"h-full",children:o.jsx(Hn,{className:"pb-0",ref:i,onDragEnd:l=>{l.destination&&n({destinationIndex:l.destination.index,sourceIndex:l.source.index})},droppableId:"textMessage-list",bgColor:"bg-item-message-light/70 zv-dark:bg-item-message-light/10",children:s.map((l,c)=>o.jsx(jr,{className:"p-0.5",color:"ring-item-message",draggableId:l.id,index:c,customHandle:!0,customHandleColor:"text-item-message",children:o.jsx(vz,{textMessage:l,className:"w-full",isSelected:a===l.id},l.id)},l.id))})}):o.jsx(hr,{description:o.jsxs("p",{className:"text-center text-2xl",children:["Nenhuma mensagem encontrada",o.jsx("br",{}),"Tente alterar a busca"]}),iconClasses:"text-item-message/70"})]})}function wz(){const[e]=fe("dashboard-message-help-video",ae);return o.jsxs("div",{className:"flex flex-col justify-center gap-6 p-8 text-center",children:[o.jsx("img",{src:"./textMessage.svg",alt:"Imagem indicativa de que não há mensagens cadastradas",className:"m-auto w-[280px]"}),o.jsxs("div",{children:[o.jsx("p",{children:"Ainda não há nenhuma mensagem cadastrada aqui."}),o.jsx("p",{children:"Que tal adicionar a sua primeira mensagem?"})]}),o.jsxs("div",{className:"flex justify-center gap-6",children:[(e==null?void 0:e.enabled)&&o.jsx(Ct,{tutorial:e}),o.jsx(Pd,{})]})]})}function jz({textMessage:e}){return o.jsxs(xe,{children:[o.jsx(ye,{asChild:!0,children:o.jsx(X,{icon:o.jsx(xp,{size:24}),variant:"action",size:"action",onClick:async()=>{await navigator.clipboard.writeText(`${e.name}

${e.data}`),ie({title:`Mensagem "${e.name.trim()}" copiada com sucesso para a área de transferência.`})}})}),o.jsx(ve,{children:"Copiar"})]})}function Nz({textMessage:e}){const t=XA(new on,new St,new Ee),n=wr(new Be);return o.jsxs(xe,{children:[o.jsx(ye,{asChild:!0,children:o.jsx("div",{children:o.jsx(we,{className:"md:w-fit",actionVariant:"actionDestructive",actionProps:{childrenVariant:"no-dark"},onAction:()=>{t(e==null?void 0:e.id).then(()=>{n({optionKey:"messages",optionIdToRemove:e.id})}).then(()=>{ie({title:`Mensagem "${e==null?void 0:e.name}" excluída com sucesso.`})},r=>{r instanceof Error&&he({title:"Atenção",description:o.jsxs("div",{className:"flex flex-col gap-1",children:[`Não foi possível excluir a mensagem "${e==null?void 0:e.name}":`,o.jsx("p",{children:" "}),r.message.split(`
`).map((s,a)=>o.jsx("pre",{className:"min-h-[1ch] whitespace-pre-wrap font-sans text-sm",children:s},a))]}),duration:5e3})})},action:"Excluir",cancel:"Cancelar",description:o.jsx("div",{children:o.jsxs("div",{className:"mb-3 text-center",children:[o.jsxs("span",{children:["Tem certeza que deseja excluir a mensagem"," ",o.jsxs("span",{className:"break-all font-bold",children:["“",e==null?void 0:e.name,"”"]}),"?"]}),o.jsx("br",{}),o.jsx("span",{children:"Essa ação é irreversível."})]})}),title:o.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[o.jsx(xt,{size:32}),o.jsx("p",{children:"Excluir mensagem"})]}),trigger:o.jsx(X,{icon:o.jsx(yt,{size:24}),variant:"actionDestructive",childrenVariant:"no-dark",size:"action"})})})}),o.jsx(ve,{className:"bg-destructive text-destructive-foreground",children:"Excluir"})]})}function Ez(){const[e]=fe("dashboard-message-help-video",ae);return o.jsxs("div",{className:"flex w-[416px] flex-col justify-center gap-6 py-4 text-center ",children:[o.jsx("img",{src:"./textMessage.svg",alt:"Imagem indicativa de que não há mensagens cadastradas",className:"m-auto w-[280px]"}),o.jsxs("div",{className:"flex w-[416px] flex-col items-center gap-6 text-base",children:[o.jsxs("p",{children:[o.jsx("span",{children:"Selecione uma mensagem para visualizar ou clique em "}),o.jsx(Pd,{size:"sm"}),o.jsx("span",{children:" para criar uma nova mensagem."})]}),(e==null?void 0:e.enabled)&&o.jsx("p",{children:"Dúvidas?"})]}),o.jsx("div",{className:"flex justify-center gap-6",children:(e==null?void 0:e.enabled)&&o.jsx(Ct,{tutorial:e})})]})}function Sz(){const{selectedTextMessageId:e}=Ue.useGetSelectedTextMessage(),t=Ue.useGetTextMessageList(),{dummyTrigger:n}=Ue.useGetSelectedTextMessage(),r=wo(new on),[s,a]=y.useState(null);return y.useEffect(()=>{const i=t.find(c=>c.id===e);a(c=>({id:(i==null?void 0:i.id)??"",isFavorite:(i==null?void 0:i.isFavorite)??!1,name:(i==null?void 0:i.name)??"",data:(c==null?void 0:c.id)===(i==null?void 0:i.id)?(c==null?void 0:c.data)??"":""}));async function l(){const c=await r(e);c&&a(d=>({id:(d==null?void 0:d.id)??"",isFavorite:(d==null?void 0:d.isFavorite)??!1,name:(d==null?void 0:d.name)??"",data:c.data===(d==null?void 0:d.data)?d.data:c.data}))}l()},[e,n]),o.jsx("div",{className:ze("flex h-fit w-1/2 min-w-[300px] flex-1 rounded-lg bg-card shadow-sm lg:min-w-[500px]",!e&&"justify-center"),children:e?o.jsx(Qr,{actions:s&&o.jsxs(o.Fragment,{children:[o.jsx(Nz,{textMessage:s}),o.jsx(jz,{textMessage:s}),o.jsx(ly,{textMessage:s}),o.jsx(cy,{textMessage:s})]}),body:s&&o.jsx("div",{children:o.jsxs(xe,{children:[o.jsx(ye,{asChild:!0,children:o.jsxs("div",{className:"h-full space-y-1 bg-background/50 p-2 text-muted-foreground",children:[o.jsx(nt,{variant:"outline",children:"Texto da mensagem: "}),s.data.split(`
`).map((i,l)=>o.jsx("pre",{className:"min-h-[1ch] whitespace-pre-wrap break-all font-sans",children:i},l))]})}),o.jsx(ve,{asChild:!0,children:o.jsxs("div",{className:"flex items-center gap-2",children:["Clique no botão",o.jsx("div",{className:"rounded-full p-1 ring-1 ring-primary-foreground",children:o.jsx(Wt,{size:20})}),"para editar"]})})]})}),title:s==null?void 0:s.name}):o.jsx(Ez,{})})}function Cz(){return Ue.useGetHasTextMessages()?o.jsx("div",{className:"flex h-full justify-center overflow-auto px-1 md:p-8 md:px-3",children:o.jsxs("div",{className:"relative flex h-full w-full max-w-[1400px] gap-5 max-md:flex-wrap",children:[o.jsx(bz,{}),o.jsx(Sz,{})]})}):o.jsx(wz,{})}function dy({trigger:e}){const t=G9(new jo);return o.jsxs(xe,{children:[o.jsx(ye,{asChild:!0,children:o.jsx(X,{onClick:n=>{n.stopPropagation(),t(e.id),ie({title:`Gatilho "${e==null?void 0:e.name}" ${e!=null&&e.isFavorite?"desmarcado":"marcado"} como favorito com sucesso.`})},icon:o.jsx(Yr,{size:24,weight:e!=null&&e.isFavorite?"fill":"regular"}),variant:"action",size:"action"})}),o.jsx(ve,{children:"Favoritar"})]})}const Iz=function({trigger:e,className:t,isSelected:n}){const r=new jo,s=B9(r),a=U9(r);return o.jsx(Nr,{cardBgColor:J(n?"bg-item-trigger/5":"bg-card"),className:J(!e.isEnabled&&"opacity-40",n&&"rounded-sm ring-1 ring-item-trigger",t),onClick:()=>s(e.id),actions:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(gt,{checked:e.isEnabled,onClick:i=>{i.stopPropagation(),a(e.id)}}),o.jsx(dy,{trigger:e})]}),subtitle:o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(xe,{children:[o.jsx(ye,{children:o.jsx(pt,{icon:o.jsx(uo,{size:16}),iconColor:"text-item-funnel",slashed:!e.funnelId})}),o.jsx(ve,{children:e.funnelId?"Vinculado a um funil":"Não vinculado a um funil"})]}),o.jsxs(xe,{children:[o.jsx(ye,{children:o.jsx(pt,{icon:o.jsx(jc,{size:16}),iconColor:"text-secondary",slashed:!e.sendToGroups})}),o.jsx(ve,{children:e.sendToGroups?"Enviando para grupos":"Não enviando para grupos"})]}),o.jsxs(xe,{children:[o.jsx(ye,{asChild:!0,children:o.jsx(pt,{icon:o.jsx(dn,{size:16}),iconColor:"text-item-trigger",slashed:!e.sendToContacts})}),o.jsx(ve,{children:e.sendToContacts?"Enviando para contatos salvos":"Não enviando para contatos salvos"})]}),o.jsxs(xe,{children:[o.jsx(ye,{asChild:!0,children:o.jsx(pt,{icon:o.jsx(Ic,{size:16}),iconColor:"text-accent-foreground",slashed:!e.isCaseSensitive})}),o.jsx(ve,{children:e.isCaseSensitive?"Não ignorando maiúsculas e minúsculas":"Ignorando maiúsculas e minúsculas"})]})]}),title:e.name})},Az=y.memo(Iz,(e,t)=>e.trigger.id===t.trigger.id&&e.trigger.name===t.trigger.name&&e.trigger.isCaseSensitive===t.trigger.isCaseSensitive&&e.trigger.isEnabled===t.trigger.isEnabled&&e.trigger.funnelId===t.trigger.funnelId&&e.trigger.sendToContacts===t.trigger.sendToContacts&&e.trigger.sendToGroups===t.trigger.sendToGroups&&e.trigger.keywordRules.length===t.trigger.keywordRules.length&&e.trigger.millisecondsBeforeSend===t.trigger.millisecondsBeforeSend&&e.trigger.isFavorite===t.trigger.isFavorite&&e.isSelected===t.isSelected);function Pm({onKeywordsChange:e,onTypeChange:t,value:n,ruleTypes:r,onRemoveCondition:s}){return o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx("div",{children:o.jsxs(Wn,{value:n.type,onValueChange:a=>t(a),children:[o.jsxs("div",{className:"grid grid-cols-[65%_1fr] items-center gap-2",children:[o.jsx(bn,{className:"whitespace-pre-wrap break-all bg-background p-4",value:"equals",children:o.jsx(is,{placeholder:"Selecione um item"})}),o.jsx(X,{className:"h-auto p-1.5",variant:"actionDestructive",size:"sm",childrenVariant:"no-dark",onClick:s,children:"Remover condição"})]}),o.jsx(wn,{className:"z-[101] max-h-[40dvh] w-[562px]",children:o.jsx("div",{className:"divide-y",children:Array.from(r).map(([a,i])=>o.jsx(Le,{value:a,className:"whitespace-pre-wrap break-all",children:i},a))})})]})}),o.jsx("p",{className:"-my-0.5 rounded-full bg-secondary text-center text-secondary-foreground",children:"Para mais de uma palavra-chave aperte ⏎ ENTER"}),o.jsx(p2,{values:n.keywords,changeValue:a=>e(a)})]})}const Lm=new Map([["equals","Se a mensagem for igual a (alguma):"],["contains","Se a mensagem contém (alguma):"],["startsWith","Se a mensagem começa com (alguma):"],["notContains","Se a mensagem não contém (nenhuma):"]]);function Dz({handler:e}){const t=e.value,n=t.length,r=n>0,s=n-1;return r?t.map((a,i)=>o.jsxs("div",{children:[o.jsx(Pm,{onRemoveCondition:()=>{const l=t.filter(c=>c.id!==a.id);return e.onChange(l)},value:a,ruleTypes:new Map(Array.from(Lm).filter(([l])=>!(n>1&&l==="equals"))),onKeywordsChange:l=>{const c=t.map(d=>d.id===a.id?{...d,keywords:l}:d);return e.onChange(c)},onTypeChange:l=>{const c=t.map(d=>d.id===a.id?{...d,type:l}:d);return e.onChange(c)}}),i<s&&o.jsx(_r,{label:"E",labelWeight:"bold",rootSpacing:"xs"})]},a.id)):o.jsx(Pm,{ruleTypes:Lm,value:{id:Tn(),keywords:[],type:"contains"},onKeywordsChange:a=>{e.onChange([{id:Tn(),keywords:a,type:"contains"}])},onTypeChange:a=>{e.onChange([{id:Tn(),keywords:[],type:a}])}})}function Mz({handler:e}){return o.jsxs("div",{children:[o.jsx(ce,{htmlFor:"triggerName",className:"max-sm:hidden",children:"Nome"}),o.jsx($e,{required:!0,className:"bg-background text-base",id:"triggerName",placeholder:"Título do gatilho",ref:Vn,...e,errorMessage:!e.value.trim()&&"Campo obrigatório"})]})}function kz({keywordRulesHandler:e,nameHandler:t}){var s;const n=e.value.length===0||e.value.length===1&&e.value[0].keywords.length===0,r=e.value.length;return o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx(Mz,{handler:t}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(pt,{icon:o.jsx(za,{size:16}),iconColor:"text-item-trigger",slashed:n}),o.jsxs("p",{className:"text-sm font-bold",children:["Condições de disparo (",r,")"]})]}),o.jsx(Bn,{className:"h-80 rounded-md bg-main-background px-3 py-2.5 ring-1 ring-primary-foreground",children:o.jsx(Dz,{handler:e})})]}),((s=e.value[0])==null?void 0:s.type)!=="equals"&&r<5&&o.jsx(X,{disabled:n,icon:o.jsx(tn,{}),onClick:()=>e.onChange([...e.value,{id:Tn(),keywords:[],type:"contains"}]),children:"Adicionar outra condição"})]})}function uy({handler:e,withSwitch:t=!0}){const n=t?ce:"div";return o.jsxs("div",{className:"flex items-center space-x-2 text-base",children:[t&&o.jsx(gt,{id:"case-sensitive",...e}),o.jsx(n,{htmlFor:t?"case-sensitive":void 0,children:o.jsxs("span",{className:"flex items-center gap-2 text-primary",children:[o.jsx(pt,{icon:o.jsx(Ic,{size:16}),iconColor:"text-accent-foreground",slashed:!e.checked}),o.jsx("span",{children:e.checked?"Não ignorando maiúsculas e minúsculas":"Ignorando maiúsculas e minúsculas"})]})})]})}function Oz({minutesHandler:e,secondsHandler:t}){return o.jsxs("div",{className:"flex items-baseline justify-start gap-6 max-sm:items-center",children:[o.jsxs(ce,{htmlFor:"delay-min",className:"flex w-48 flex-wrap gap-x-1.5 text-base",children:["Enviando após"," ",o.jsx("span",{className:"font-bold text-primary",children:`${e.value} min e ${t.value}s`})]}),o.jsx(st,{...e,hint:"Minutos"}),o.jsx(st,{...t,hint:"Segundos"})]})}function fy({handler:e,withSwitch:t=!0}){const n=t?ce:"div";return o.jsxs("div",{className:"flex items-center space-x-2 text-base",children:[t&&o.jsx(gt,{id:"send-to-contacts",...e}),o.jsx(n,{htmlFor:t?"send-to-contacts":void 0,children:o.jsxs("span",{className:"flex items-center gap-2 text-primary",children:[o.jsx(pt,{icon:o.jsx(dn,{size:16}),iconColor:"text-item-trigger",slashed:!e.checked}),o.jsx("span",{children:e.checked?"Enviando para contatos salvos":"Não enviando para contatos salvos"})]})})]})}function my({handler:e,withSwitch:t=!0}){const n=t?ce:"div";return o.jsxs("div",{className:"flex items-center space-x-2 text-base",children:[t&&o.jsx(gt,{id:"send-to-groups",...e}),o.jsx(n,{htmlFor:t?"send-to-groups":void 0,children:o.jsxs("span",{className:"flex items-center gap-2 text-primary",children:[o.jsx(pt,{icon:o.jsx(jc,{size:16}),iconColor:"text-secondary",slashed:!e.checked}),o.jsx("span",{children:e.checked?"Enviando para grupos":"Não enviando para grupos"})]})})]})}function Tz({caseSensitiveHandler:e,funnelIdHandler:t,minutesHandler:n,secondsHandler:r,sendToContactsHandler:s,sendToGroupsHandler:a,webhookHandler:i}){const[l]=fe("trigger-webhooks",ae);return o.jsxs(o.Fragment,{children:[o.jsx(vg,{handler:t}),o.jsx(Oz,{minutesHandler:n,secondsHandler:r}),o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx(ce,{className:"max-sm:hidden",children:"Opções"}),o.jsx(my,{handler:a}),o.jsx(fy,{handler:s}),o.jsx(uy,{handler:e})]}),l&&o.jsxs("div",{className:"grid w-full items-center gap-1.5",children:[o.jsx(ce,{htmlFor:"trigger-webhook",className:"max-sm:hidden",children:"Webhook"}),o.jsx($e,{beforeIcon:o.jsx(Ha,{className:"h-4 w-4",size:24}),...i,className:"bg-background text-base",id:"trigger-webhook"})]})]})}function py({caseSensitive:e,delayMinutes:t=0,delaySeconds:n=0,funnelId:r,itemId:s,keywordRules:a,mode:i="create",sendToContacts:l,sendToGroups:c,trigger:d,triggerName:u="",triggerWebhook:f=""}){const{caseSensitiveHandler:m,closeOnAction:p,closeOnCancel:g,delayMinutesHandler:h,delaySecondsHandler:v,funnelIdHandler:b,handleModalAction:w,handleModalCancel:j,handleOpenChange:N,isLastStep:S,keywordRulesHandler:E,nameHandler:I,notReady:A,sendToContactsHandler:M,sendToGroupsHandler:O,step:L,title:$,webhookHandler:P}=Y9({caseSensitive:e,delayMinutes:t,delaySeconds:n,funnelId:r,itemId:s,keywordRules:a,mode:i,sendToContacts:l,sendToGroups:c,triggerName:u,triggerWebhook:f}),C=[o.jsx(kz,{keywordRulesHandler:E,nameHandler:I},"step-1"),o.jsx(Tz,{caseSensitiveHandler:m,funnelIdHandler:b,minutesHandler:h,secondsHandler:v,sendToContactsHandler:M,sendToGroupsHandler:O,webhookHandler:P},"step-2")];return o.jsx(we,{closeOnAction:p,closeOnCancel:g,onAction:w,action:S?"Salvar":"Próximo",actionProps:{disabled:A,icon:S?o.jsx(en,{}):o.jsx(Va,{})},description:o.jsx("div",{className:"flex min-h-80 !gap-4",children:C[L]}),onOpenChange:N,title:$,trigger:d,cancel:S?"Anterior":"Cancelar",onCancel:j})}function Ld({size:e}){return o.jsx(py,{keywordRules:[],mode:"create",trigger:o.jsx(X,{size:e,icon:o.jsx(tn,{weight:"bold"}),children:"Adicionar"})})}function Fz(){const e=new jo,t=H9(e),n=R9(e),{authError:r,isPremium:s}=rt.useGetAuthData(),{filterTerm:a,filteredTriggerList:i,selectedTriggerId:l}=zt.useDashboardTriggerList(),{listRef:c}=ss(i.length),d=!s||r;return o.jsxs("div",{className:"flex w-full min-w-[300px] flex-1 flex-col overflow-y-auto max-md:h-[calc(100vh_-_300px)] lg:h-full",children:[o.jsxs("div",{className:"sticky top-0 z-[2] flex gap-5  pb-5 pt-4",children:[o.jsx(Xr,{className:"flex-1",onSearch:t,storeSearchTerm:a}),o.jsx(Ld,{})]}),i.length>0?o.jsx(Bn,{className:J(d?"h-[calc(100vh_-_450px)] md:h-[calc(100vh_-_315px)]":"h-full"),children:o.jsx(Hn,{className:"pb-0",ref:c,onDragEnd:u=>{u.destination&&n({destinationIndex:u.destination.index,sourceIndex:u.source.index})},droppableId:"trigger-list",bgColor:"bg-item-trigger-light/70",children:i.map((u,f)=>o.jsx(jr,{className:"p-0.5",color:"ring-item-trigger",draggableId:u.id,index:f,customHandle:!0,customHandleColor:"text-item-trigger",children:o.jsx(Az,{trigger:u,className:"w-full",isSelected:l===u.id},u.id)},u.id))})}):o.jsx(hr,{description:o.jsxs("p",{className:"text-center text-2xl",children:["Nenhum gatilho encontrado",o.jsx("br",{}),"Tente alterar a busca"]}),iconClasses:"text-item-trigger/70"})]})}function _z(){const[e]=fe("dashboard-trigger-help-video",ae);return o.jsxs("div",{className:"flex flex-col justify-center gap-6 p-8 text-center md:overflow-y-auto",children:[o.jsx("img",{src:"./trigger.svg",alt:"Imagem indicativa de que não há gatilhos cadastrados",className:"m-auto w-[280px]"}),o.jsxs("div",{children:[o.jsx("p",{children:"Ainda não há nenhum gatilho cadastrado aqui."}),o.jsx("p",{children:"Que tal adicionar o seu primeiro gatilho?"})]}),o.jsxs("div",{className:"flex justify-center gap-6",children:[(e==null?void 0:e.enabled)&&o.jsx(Ct,{tutorial:e}),o.jsx(Ld,{})]}),o.jsx("div",{className:"flex justify-center",children:o.jsx(gr,{type:"single",collapsible:!0,className:"w-full min-w-[300px] rounded-md bg-card p-0 text-foreground md:max-w-[500px] ",children:o.jsxs(xr,{value:"important",children:[o.jsx(yr,{className:"px-4 py-3 ",children:o.jsxs("div",{className:"flex items-center gap-4 ",children:[o.jsx(ao,{size:24,weight:"thin"}),o.jsx("span",{className:"text-sm font-bold no-underline",children:"O que é um gatilho?"})]})}),o.jsx(vr,{className:" flex max-h-[30vh] flex-col gap-4 overflow-y-auto px-4",children:o.jsxs("section",{className:"rounded-md p-4",children:[o.jsx("h1",{className:"text-start text-sm font-bold text-foreground",children:"Sobre a funcionalidade"}),o.jsx("p",{className:"text-start text-sm font-light",children:'Gatilhos são palavras-chave que você pode criar para que o funil seja enviado automaticamente para o contato. Por exemplo: Caso você coloque "Oi" como palavra-chave de um funil, todo contato que te enviar "Oi" receberá esse funil de forma automática, sem que seja necessário clicar para enviar.'}),o.jsx("p",{className:" mt-2 text-start font-light underline",children:"Obs: Para que os gatilhos funcionem é necessário que o web whatsapp esteja aberto na tela do aparelho."})]})})]})})})]})}function Pz({trigger:e}){const t=L9(new jo),n=wr(new Be);return o.jsxs(xe,{children:[o.jsx(ye,{asChild:!0,children:o.jsx("div",{children:o.jsx(we,{className:"md:w-fit",actionVariant:"actionDestructive",actionProps:{childrenVariant:"no-dark"},onAction:()=>{t(e==null?void 0:e.id).then(()=>{n({optionKey:"triggers",optionIdToRemove:e.id})}).then(()=>{ie({title:"Sucesso",description:`Gatilho "${e==null?void 0:e.name}" excluído com sucesso.`})},r=>{r instanceof Error&&he({title:"Atenção",description:o.jsxs("div",{className:"flex flex-col gap-1",children:[`Não foi possível excluir o gatilho "${e==null?void 0:e.name}":`,o.jsx("p",{children:" "}),r.message.split(`
`).map((s,a)=>o.jsx("pre",{className:"min-h-[1ch] whitespace-pre-wrap font-sans text-sm",children:s},a))]}),duration:5e3})})},action:"Excluir",cancel:"Cancelar",description:o.jsx("div",{children:o.jsxs("div",{className:"mb-3 text-center",children:[o.jsxs("span",{children:["Tem certeza que deseja excluir o gatilho"," ",o.jsxs("span",{className:"break-all font-bold",children:["“",e==null?void 0:e.name,"”"]}),"?"]}),o.jsx("br",{}),o.jsx("span",{children:"Essa ação é irreversível."})]})}),title:o.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[o.jsx(xt,{size:32}),o.jsx("p",{children:"Excluir gatilho"})]}),trigger:o.jsx(X,{icon:o.jsx(yt,{size:24}),variant:"actionDestructive",childrenVariant:"no-dark",size:"action"})})})}),o.jsx(ve,{className:"bg-destructive text-destructive-foreground",children:"Excluir"})]})}const Lz=function({trigger:e}){const{minutes:t,seconds:n}=_t.fromMillisecondsToMinutes(e.millisecondsBeforeSend);return o.jsxs(xe,{children:[o.jsx(ye,{asChild:!0,children:o.jsx("div",{children:o.jsx(py,{keywordRules:e.keywordRules,caseSensitive:e.isCaseSensitive,delayMinutes:t,delaySeconds:n,funnelId:e.funnelId,sendToContacts:e.sendToContacts,sendToGroups:e.sendToGroups,mode:"edit",itemId:e.id,triggerName:e.name,triggerWebhook:e.webhook,trigger:o.jsx(X,{onClick:r=>r.stopPropagation(),icon:o.jsx(Wt,{size:24}),variant:"action",size:"action"})},`edit_${e.id}`)})}),o.jsx(ve,{children:"Editar"})]})},$z=y.memo(Lz,(e,t)=>e.trigger.id===t.trigger.id);function Rz({funnel:e}){const{minutes:t,seconds:n}=_t.fromMillisecondsToMinutes((e==null?void 0:e.itemsSequence.map(l=>l.delayBeforeSend).reduce((l,c)=>l+c,0))??0),{audioCount:r,documentCount:s,mediaCount:a,textMessageCount:i}=K2((e==null?void 0:e.itemsSequence)??[]);return o.jsxs("div",{className:"mb-3 flex flex-col gap-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(pt,{icon:o.jsx(uo,{size:16}),iconColor:"text-item-funnel",slashed:!e}),o.jsx("p",{className:"text-sm font-bold",children:"Enviando o seguinte funil"})]}),e?o.jsx("div",{className:"flex w-full items-center rounded-md bg-background px-6 py-3 shadow-lg transition-all hover:no-underline",children:o.jsx(gr,{type:"single",collapsible:!0,asChild:!0,className:"w-full border-none",children:o.jsxs(xr,{value:e.id,children:[o.jsx(yr,{className:"py-0 pr-4 hover:no-underline",triggerIconClasses:"inline-flex items-center w-10 h-10 p-2 justify-center rounded-full bg-action text-sm font-medium text-action-foreground shadow-sm transition-colors hover:bg-primary/80 hover:text-primary-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 zv-dark:disabled:bg-status-neutral/30",children:o.jsx(Nr,{cardSpacing:"p-1",cardBgColor:"bg-background",className:"flex-1",noShadow:!0,subtitle:o.jsxs("span",{className:"flex flex-wrap items-center gap-2",children:[o.jsx(bc,{size:16})," ",o.jsxs("span",{children:[t," min e ",n,"s"]})," ",o.jsxs("div",{className:"flex gap-4",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(pn,{size:16})," ",r]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(Ia,{size:16})," ",a]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx($n,{size:16})," ",i]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(Ht,{size:16})," ",s]})]})]}),title:e.name})}),o.jsx(vr,{className:"flex flex-col gap-2 pb-0 pt-2",children:o.jsx(yg,{itemsSequence:e.itemsSequence})})]})})}):o.jsx("div",{className:"flex items-center gap-2 text-base",children:o.jsx("span",{children:"Nenhum funil associado"})})]})}function Vz({delay:e,isCaseSensitive:t,sendToContacts:n,sendToGroups:r}){const{minutes:s,seconds:a}=_t.fromMillisecondsToMinutes(e??0);return o.jsxs("div",{className:"flex gap-12",children:[o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx("p",{className:"text-sm font-bold",children:"Atraso antes de enviar"}),`${s} min e ${a} seg`]}),o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx("p",{className:"text-sm font-bold",children:"Demais regras e excessões"}),o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx(my,{withSwitch:!1,handler:{checked:r,onCheckedChange:()=>null}}),o.jsx(fy,{withSwitch:!1,handler:{checked:n,onCheckedChange:()=>null}}),o.jsx(uy,{withSwitch:!1,handler:{checked:t,onCheckedChange:()=>null}})]})]})]})}function Bz({rules:e}){return o.jsxs("div",{className:"mb-3 flex flex-col gap-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(pt,{icon:o.jsx(za,{size:16}),iconColor:"text-item-trigger",slashed:e.length===0}),o.jsx("p",{className:"text-sm font-bold",children:"Condições de disparo"})]}),e.length>0?o.jsx("ul",{className:"flex flex-col gap-4 rounded-md bg-background p-4 shadow-lg transition-all",children:e.map((t,n)=>{let r=n===0?"Se a mensagem ":"E a mensagem ";switch(t.type){case"contains":r+="contém";break;case"equals":r+="for igual a";break;case"startsWith":r+="começa com";break;case"notContains":r+="não contém";break}return o.jsxs("li",{className:"flex flex-col gap-2",children:[o.jsx("p",{className:"text-sm font-bold",children:r}),o.jsx("div",{className:"flex flex-wrap gap-2",children:t.keywords.map((s,a)=>o.jsxs("div",{className:"flex items-center gap-2 font-bold text-primary",children:[o.jsx(nt,{children:s}),a<t.keywords.length-1&&o.jsx("span",{children:"OU"})]},s))})]},t.id)})}):o.jsx("div",{className:"flex items-center gap-2 text-base",children:o.jsx("span",{children:"Nenhuma regra cadastrada"})})]})}function zz(){const[e]=fe("dashboard-trigger-help-video",ae);return o.jsxs("div",{className:"flex w-[416px] flex-col justify-center gap-6 py-4 text-center ",children:[o.jsx("img",{src:"./trigger.svg",alt:"Imagem indicativa de que não há gatilhos cadastrados",className:"m-auto w-[280px]"}),o.jsxs("div",{className:"flex w-[416px] flex-col items-center gap-6 text-base",children:[o.jsxs("p",{children:[o.jsx("span",{children:"Selecione um gatilho para visualizar ou clique em "}),o.jsx(Ld,{size:"sm"}),o.jsx("span",{children:" para criar um novo gatilho."})]}),(e==null?void 0:e.enabled)&&o.jsx("p",{children:"Dúvidas?"})]}),o.jsx("div",{className:"flex justify-center gap-6",children:(e==null?void 0:e.enabled)&&o.jsx(Ct,{tutorial:e})})]})}function Hz(){const{selectedTriggerId:e}=zt.useGetSelectedTrigger(),[t,n]=y.useState(null),[r,s]=y.useState(null),[a]=fe("trigger-webhooks",ae),{dummyTrigger:i}=zt.useGetSelectedTrigger();return y.useEffect(()=>{e&&(async()=>{const c=await zt.findById(e),d=await Ot.findById((c==null?void 0:c.funnelId)??"");s(c),n(d)})()},[e,i]),o.jsx("div",{className:ze("flex h-fit w-1/2 flex-1 rounded-lg bg-card shadow-sm lg:min-w-[500px]",!e&&"justify-center"),children:e?o.jsx(Qr,{actions:r&&o.jsxs(o.Fragment,{children:[o.jsx(Pz,{trigger:r}),o.jsx($z,{trigger:r}),o.jsx(dy,{trigger:r})]}),body:r&&o.jsxs("div",{children:[o.jsx(Bz,{rules:r.keywordRules}),o.jsx(Rz,{funnel:t}),o.jsx(Vz,{delay:r.millisecondsBeforeSend,isCaseSensitive:r.isCaseSensitive,sendToContacts:r.sendToContacts,sendToGroups:r.sendToGroups}),a&&o.jsxs("div",{className:"mb-3 flex flex-col gap-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(pt,{icon:o.jsx(Ha,{size:16}),iconColor:"text-item-media",slashed:!r.webhook}),o.jsx("p",{className:"text-sm font-bold",children:"Webhook"})]}),o.jsx("div",{className:"flex min-h-14 flex-col justify-center gap-4 rounded-md bg-background p-4 shadow-lg transition-all",children:r.webhook?o.jsx(nt,{children:r.webhook}):o.jsx("div",{children:"Sem webhook cadastrado"})})]})]}),title:r==null?void 0:r.name}):o.jsx(zz,{})})}function Zz(){const e=zt.useGetHasTriggers();return o.jsxs(o.Fragment,{children:[o.jsx(os,{}),e?o.jsx("div",{className:"flex h-full justify-center overflow-auto px-1 md:p-8 md:px-3",children:o.jsxs("div",{className:"relative flex h-full w-full max-w-[1400px] gap-5 max-md:flex-wrap",children:[o.jsx(Fz,{}),o.jsx(Hz,{})]})}):o.jsx(_z,{})]})}function Uz(){return o.jsxs("div",{className:"flex flex-col justify-center gap-6 text-center",children:[o.jsx("div",{className:"text-red-500",children:"NOT FOUND"}),o.jsx(X,{onClick:()=>hn.setRoute("/home"),children:"Go to home"})]})}const hy={"/audios":o.jsx(CI,{}),"/backups":o.jsx(a7,{}),"/documents":o.jsx(k7,{}),"/funnels":o.jsx(BB,{}),"/home":o.jsx(ez,{}),"/login":o.jsx(tz,{}),"/medias":o.jsx(hz,{}),"/messages":o.jsx(Cz,{}),"/not-found":o.jsx(Uz,{}),"/triggers":o.jsx(Zz,{}),"/flows":o.jsx(CB,{})},Wz={"/audios":o.jsx(pn,{size:32,className:"min-w-max text-item-audio"}),"/backups":o.jsx(gp,{size:32,className:"min-w-max text-accent-foreground"}),"/documents":o.jsx(Ht,{size:32,className:"min-w-max text-item-document"}),"/funnels":o.jsx(uo,{size:32,className:"min-w-max text-item-funnel"}),"/home":o.jsx(vp,{size:32,className:"min-w-max text-accent-foreground"}),"/login":null,"/medias":o.jsx($s,{size:32,className:"min-w-max text-item-media"}),"/messages":o.jsx($n,{size:32,className:"min-w-max text-item-message"}),"/not-found":null,"/triggers":o.jsx(Gm,{size:32,className:"min-w-max text-item-trigger"}),"/flows":o.jsx(Um,{size:32,className:"min-w-max text-item-trigger"})};function Gz(){const{isBusy:e}=fo();return e&&o.jsx("div",{className:"absolute z-[999999] h-screen w-screen bg-black/70"})}const qz=pr("m-2 flex max-w-72 flex-col gap-4 rounded-md shadow-lg bg-background/50 text-card-foreground hover:scale-105 transition-all border border-solid border-transparent",{variants:{variant:{default:"hover:border-gray-300 hover:shadow-2xl hover:shadow-gray-300",basic:"hover:border-item-trigger hover:shadow-2xl hover:shadow-item-trigger/50",premium:"hover:border-item-message hover:shadow-2xl hover:shadow-item-message/50",enterprise:"hover:border-primary hover:shadow-2xl hover:shadow-primary/50"}},defaultVariants:{variant:"default"}}),Kz=pr("rounded-t-sm border-b p-2",{variants:{variant:{default:"bg-gray-800 text-background",basic:"!bg-item-trigger/50",premium:"!bg-item-message/50",enterprise:"!bg-primary/50"}},defaultVariants:{variant:"default"}});function Yz({data:{price:e,title:t,discountPercent:n,maxInstallments:r,redirectUrl:s,peremissions:a},containerClassName:i,headerClassName:l,variant:c="default"}){function d(){window.open(s,"_blank")}const u=e.to.value+e.to.cents/100,f=r&&`ou em até ${r}x de ${(u/r).toFixed(2)}`;return o.jsxs("div",{className:qz({variant:c,className:i}),children:[o.jsxs("header",{className:Kz({variant:c,className:l}),children:[o.jsx("h1",{className:"text-xl font-bold uppercase",children:t}),n&&o.jsxs("p",{className:"w-fit rounded-md px-1 py-0.5 text-xs font-semibold uppercase tracking-tighter",children:[n,"% de desconto"]})]}),o.jsxs("main",{className:"flex flex-col gap-6 px-3",children:[o.jsxs("div",{className:"text-xs leading-4",children:[o.jsxs("p",{children:["De ",o.jsxs("span",{className:"line-through",children:["R$ ",e.from]})," por"," "]}),o.jsxs("h2",{className:"text-3xl font-bold tracking-tighter",children:["R$ ",e.to.value,o.jsxs("span",{className:"text-xs",children:[", ",e.to.cents," / mês"]})]}),f&&o.jsx("p",{className:"text-sm font-semibold",children:f}),o.jsx("span",{className:"opacity-85",children:"economize R$ 78,50"})]}),o.jsx(X,{onClick:d,type:"button",variant:"default",size:"lg",className:"w-full rounded-sm text-xs font-bold uppercase",children:"Assinar"})]}),o.jsx("footer",{className:"px-3",children:o.jsx("ul",{className:"divide-y divide-card-foreground/20",children:a==null?void 0:a.map((m,p)=>o.jsxs("li",{className:"flex items-center gap-2 border-t border-solid border-t-card-foreground/20 p-2 text-sm first:border-t-transparent",children:[o.jsx(hp,{weight:"bold",size:16,className:"min-w-4"})," ",m]},p))})})]})}const Xz={type:"basic",price:{to:{value:220,cents:90},from:299},title:"Plano básico",discountPercent:26,maxInstallments:12,redirectUrl:"/",peremissions:["Áudios ilimitados","Mídias ilimitados","Documentos ilimitados","Textos ilimitados",o.jsxs("p",{children:["Aprimoramentos básicos ",o.jsx("span",{className:"text-sm",children:"(não rolar a tela)"})]},"basic-apr"),o.jsx("p",{children:"Fluxos (15 envios por dia)"},"basic-flow"),"Funis","Gatilhos"]},Jz={type:"premium",price:{to:{value:220,cents:90},from:299},title:"Plano Premium",discountPercent:26,maxInstallments:12,redirectUrl:"/",peremissions:["Áudios ilimitados","Mídias ilimitados","Documentos ilimitados","Textos ilimitados",o.jsxs("p",{children:["Aprimoramentos avançados"," ",o.jsx("span",{className:"text-sm",children:"(não rolar a tela, contador de chats)"})]},"basic-apr"),o.jsx("p",{children:"Fluxos ilimitados"},"basic-flow"),"Funis","Gatilhos","Agendamento de mensagens","Disparo em massa","Salvar contatos (Zapsaver)","Etiquetas"]},Qz={type:"enterprise",price:{to:{value:220,cents:90},from:299},title:"Plano Empresarial",discountPercent:26,maxInstallments:12,redirectUrl:"/",peremissions:["Áudios ilimitados","Mídias ilimitados","Documentos ilimitados","Textos ilimitados",o.jsxs("p",{children:["Aprimoramentos avançados"," ",o.jsx("span",{className:"text-sm",children:"(não rolar a tela, contador de chats)"})]},"basic-apr"),o.jsx("p",{children:"Fluxos ilimitado"},"basic-flow"),"Funis","Gatilhos","Agendamento de mensagens","Disparo em massa","Salvar contatos (Zapsaver)","Etiquetas","Suporte preferencial","Onboarding","Treinamento"]},eH=[Xz,Jz,Qz];function tH(){const{handleCloseModal:e,openModalState:t}=cg();return o.jsx(o.Fragment,{children:o.jsx(Pr,{className:"max-h-[90vh] max-w-5xl",open:t,action:null,description:o.jsxs("div",{children:[o.jsxs("header",{children:[o.jsx("h1",{className:"text-xl font-bold text-foreground",children:"Seu plano não pode utilizar esta funcionalidade"}),o.jsx("p",{children:"Para poder utilizar esta funcionalidade, é necessário que você compre um outro plano com a função desejada."})]}),o.jsx("main",{className:"flex flex-wrap justify-center gap-1",children:eH.map(n=>o.jsx(Yz,{data:n,variant:n.type},n.title+n.type))})]}),title:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(xt,{size:32,className:"text-status-caution"}),"Aviso"]}),cancel:"Fechar",onCancel:()=>{e()}})})}function nH(){const e=u1(new yo);return o.jsx(we,{action:"Sim, tenho certeza",actionProps:{icon:o.jsx(xt,{size:24}),childrenVariant:"no-dark",onClick:e},actionVariant:"actionDestructive",cancel:"Cancelar",description:o.jsx("div",{children:"Sua chave será removida, mas seus itens e configurações permanecerão NESSE COMPUTADOR. Caso precise transferir, faça um backup antes."}),title:"Tem certeza que deseja deslogar?",trigger:o.jsx("li",{className:"flex cursor-pointer items-center",children:o.jsx(X,{variant:"ghost",size:"action",icon:o.jsx(Cc,{size:26})})})})}function rH(e,t,n,r,s){const a=(e-t)/(n-t)*(s-r)+r;return Math.floor(a)}function $m(e){return rH(e,65,90,0,360)}function Rm(e,t){return Math.max(0,Math.min(100,e+t))}function Vm(e,t){return Math.floor((360+e+t)%360)}function sH(e,t){const n=/hsla?\(\s*(\d+),\s*(\d+)%,\s*(\d+)%/i,r=e.match(n),s=t.match(n);if(!r||!s)throw new Error("Invalid color format");const a=parseFloat(r[3]),i=parseFloat(s[3]);return Math.abs(a-i)>=70}function oH(e,t){let n=$m(Math.min(e.toUpperCase().charCodeAt(0),t.toUpperCase().charCodeAt(0))),r=$m(Math.max(e.toUpperCase().charCodeAt(0),t.toUpperCase().charCodeAt(0))),s=50,a=50,i=`hsl(${n},  100%,  ${s}%)`,l=`hsl(${r},  100%,  ${a}%)`;for(;!sH(i,l);)n=Vm(n,6),r=Vm(r,-6),s=Rm(s,10),a=Rm(a,-10),i=`hsl(${n},  100%, ${s}%)`,l=`hsl(${r},  100%, ${a}%)`;return[i,l]}function aH(){const e=rt.useGetUserName(),t=rt.useGetPhoneNumber(),n=rt.useGetUserProfilePic(),r=Pe.useGetOption("theme")==="dark",s=(e==null?void 0:e.split(" ").splice(0,2).map(l=>l[0]).join(""))??"ZV";let[a,i]=["hsl(243,  38%, 93%)","hsl(243,  35%, 56%)"];try{const[l,c]=oH(s[0]??"Z",s[1]??"V");a=l,i=c}catch(l){console.warn(l)}return o.jsxs("li",{className:"flex w-full items-center justify-end gap-4 overflow-hidden",children:[o.jsxs("section",{className:"flex w-full flex-col text-sm md:ms-1",children:[o.jsx("p",{className:"overflow-hidden text-end max-sm:truncate",children:e??"Não logado"}),o.jsx("p",{className:"m-0 text-end text-muted-foreground blur hover:blur-none",children:e?t:null})]}),o.jsxs(m8,{className:J(e&&!n&&"border-2 border-solid"),style:{borderColor:r?a:i},children:[o.jsx(p8,{src:(e&&n)??"",className:"w-11"}),o.jsx(h8,{className:"font-bold",style:{backgroundColor:r?i:a,color:r?a:i},children:e?s:o.jsx(Ep,{size:32})})]})]})}function iH({closeParentModal:e}){const t=so(new Jr,ae,Nc),n=hn.setRoute,[r,s]=y.useState(!1),{setIsBusy:a}=fo(),i=()=>s(!1);return o.jsxs(o.Fragment,{children:[o.jsx(Pr,{onCancel:i,onSecondaryAction:()=>{n("/backups"),i(),e()},secondaryAction:"Fazer backup",secondaryActionProps:{childrenVariant:"no-dark"},open:r,className:"md:w-fit",action:"Limpar ZapVoice Crack",actionProps:{variant:"actionDestructive",childrenVariant:"no-dark"},description:o.jsx("div",{children:o.jsxs("div",{children:["Tem certeza que deseja"," ",o.jsx("span",{className:"text-item-document",children:"limpar"})," o ZapVoice Crack?",o.jsx("br",{}),"Esta ação não poderá ser desfeita."," ",o.jsx("span",{className:"text-item-document",children:"Todos os seus itens atuais serão removidos."})," ",o.jsx("br",{}),o.jsx("br",{}),"Em caso de dúvida, por favor faça um backup antes de prosseguir."]})}),title:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Lr,{size:32,className:"text-status-caution zv-dark:text-status-caution-foreground"}),"Confirmação de limpeza do ZapVoice Crack"]}),onAction:async()=>{a(!0);const l=mt.loading("Limpando ZapVoice Crack... não mude, recarregue ou feche a página.",{duration:1/0});i(),e();try{t.trackEvent("misc:clear_all_data"),await ap({awaitAfter:5e3}),n("/home"),ie({id:l,title:"Limpeza realizada com sucesso",duration:4e3})}catch(c){let d="";c instanceof Error?d=c.message:d=JSON.stringify(c),t.trackException("exception:clear_all_data",{exc_message:d,fatal:!1}),le({id:l,title:"Falha ao realizar a limpeza",description:d,duration:4e3})}finally{a(!1)}},cancel:"Cancelar"}),o.jsx(X,{icon:o.jsx(fp,{size:24}),variant:"actionDestructive",childrenVariant:"no-dark",className:"w-full rounded-md",size:"lg",title:"Limpar o ZapVoice Crack",onClick:()=>s(!0),children:"Limpar ZapVoice Crack"})]})}function fs({checked:e,label:t,onSelect:n}){return o.jsxs(tr,{className:"cursor-pointer space-x-2",onSelect:n,children:[o.jsx(gt,{checked:e}),o.jsx(ce,{className:"cursor-pointer",children:t})]})}function lH(){const e=g8(new br),t=Pe.useGetOption("askToSendFunnels"),n=async r=>{r.preventDefault(),e(!t)};return o.jsx(fs,{onSelect:n,checked:t,label:"Perguntar ao enviar funis"})}function cH(){const e=x8(new br),t=Pe.useGetOption("askToSendSingleItem"),n=async r=>{r.preventDefault(),e(!t)};return o.jsx(fs,{onSelect:n,checked:t,label:"Perguntar ao enviar itens únicos"})}function dH(){const e=op(new br),t=Pe.useGetOption("theme")==="dark",n=async r=>{r.preventDefault(),e(!t)};return o.jsx(fs,{onSelect:n,checked:t,label:"Modo escuro"})}function uH(){const e=Pe.useGetOption("hideItemsBar"),t=y8(new br),n=async r=>{r.preventDefault(),t(!e)};return o.jsx(fs,{onSelect:n,checked:e,label:"Ocultar barra de itens"})}function fH(){const e=Pe.useGetOption("showOnlyFavoritesOnItemsBar"),t=v8(new br),n=async r=>{r.preventDefault(),t(!e)};return o.jsx(fs,{onSelect:n,checked:e,label:"Mostrar apenas favoritos na barra de itens"})}function mH(){const e=b8(new br),t=Pe.useGetOption("askToSendFlows"),n=async r=>{r.preventDefault(),e(!t)};return o.jsx(fs,{onSelect:n,checked:t,label:"Perguntar ao enviar fluxos"})}function pH(){const e=u1(new yo),[t,n]=y.useState(!1);return o.jsx("li",{className:"flex cursor-pointer items-center",children:o.jsxs(w8,{open:t,onOpenChange:n,modal:!1,children:[o.jsx(j8,{asChild:!0,children:o.jsx(X,{variant:"ghost",size:"action",icon:o.jsx(ot,{size:26})})}),o.jsxs(N8,{className:"border-transparent shadow-primary/10 max-md:max-w-[90vw]",collisionPadding:10,children:[o.jsx("a",{href:`${Ar("oRHdwNnOv8SYwBnL6FGc29WajVmLj9WbuImc")}`,target:"_blank",rel:"noopener noreferrer",children:o.jsxs(tr,{className:"cursor-pointer space-x-2 pb-0",children:[o.jsx("span",{children:"Abrir gerenciador de chaves"}),o.jsx(cv,{size:18,className:"mb-1"})]})}),o.jsx("a",{href:`${Ar("oRHdwNnOv8SYwBnL6FGc29WajVmLj9WbuImc")}/dashboard/chaves`,target:"_blank",rel:"noopener noreferrer",children:o.jsx(tr,{className:"cursor-pointer space-x-2 py-0 ps-3 text-xs",children:"Gerencie suas chaves"})}),o.jsx("a",{href:`${Ar("oRHdwNnOv8SYwBnL6FGc29WajVmLj9WbuImc")}/dashboard/backup-fixer`,target:"_blank",rel:"noopener noreferrer",children:o.jsx(tr,{className:"cursor-pointer space-x-2 py-0 ps-3 text-xs",children:"Corrija backups"})}),o.jsx("a",{href:`${Ar("oRHdwNnOv8SYwBnL6FGc29WajVmLj9WbuImc")}/dashboard/converter`,target:"_blank",rel:"noopener noreferrer",children:o.jsx(tr,{className:"cursor-pointer space-x-2 py-0 ps-3 text-xs",children:"Converta tipo de áudios"})}),o.jsx(Cr,{}),o.jsx(Do,{className:"italic text-primary-200",children:"Opções"}),o.jsxs(E8,{children:[o.jsx(Cr,{}),o.jsx(Do,{className:"text-xs font-normal",children:"Envio dos ítens"}),o.jsx(cH,{}),o.jsx(lH,{}),o.jsx(mH,{}),o.jsx(Cr,{}),o.jsx(Do,{className:"text-xs font-normal",children:"Barra de acesso rápido aos ítens"}),o.jsx(uH,{}),o.jsx(fH,{}),o.jsx(Cr,{}),o.jsx(Do,{className:"text-xs font-normal",children:"Aparência"}),o.jsx(dH,{}),o.jsx(Cr,{className:"md:hidden"}),o.jsx(tr,{className:"p-0 md:hidden",children:o.jsx(we,{action:"Sim, tenho certeza",actionProps:{childrenVariant:"no-dark",icon:o.jsx(xt,{size:24}),onClick:e},actionVariant:"actionDestructive",cancel:"Cancelar",description:o.jsx("div",{children:"Sua chave será removida, mas seus itens e configurações permanecerão NESSE COMPUTADOR. Caso precise transferir, faça um backup antes."}),title:"Tem certeza que deseja deslogar?",trigger:o.jsxs("div",{className:"flex w-full cursor-pointer items-center justify-center space-x-2 bg-destructive/5 p-2 text-destructive",children:[o.jsx(Cc,{size:18}),o.jsx("span",{children:"Sair do dashboard"})]})})}),o.jsx(Cr,{}),o.jsx(tr,{onClick:r=>r.preventDefault(),children:o.jsx(gr,{type:"single",collapsible:!0,className:"w-full",children:o.jsxs(xr,{value:"advanced-options",className:"border-none",children:[o.jsx(yr,{className:"py-2 hover:no-underline",children:"Avançado"}),o.jsx(vr,{className:"p-0",children:o.jsx(iH,{closeParentModal:()=>n(!1)})})]})})})]})]})]})})}function hH({toggleMobileSidebar:e}){const t=hn.useGetCurrentRoute();return o.jsxs("div",{className:"flex justify-between border-b-[1px] border-border p-3 md:px-8 md:py-7",children:[o.jsx(X,{className:"xl:hidden",variant:"ghost",size:"action",icon:o.jsx(S8,{size:26}),onClick:e}),o.jsx("h1",{className:"text-lg text-foreground max-md:hidden md:text-4xl",children:t.name}),o.jsxs("ul",{className:"flex w-full justify-end gap-1 overflow-hidden md:gap-5",children:[o.jsx(aH,{}),o.jsx(pH,{}),o.jsx("div",{className:"max-md:hidden",children:o.jsx(nH,{})})]})]})}class gH{constructor(){pe(this,"routerStore",hn)}getCurrentRoute(){return this.routerStore.useGetCurrentRoute()}setRoute(...t){return this.routerStore.setRoute(...t)}}function xH({currentRoute:e,isCollapsedMobile:t=!1,toggleMobileSidebar:n}){const r=new gH,[s]=fe("flow",ae),a=Object.entries(cp).filter(([f])=>f!=="/login").filter(([f])=>f==="/flows"?s:f!=="/flows"),[i,l]=y.useState(!1),c=sp();function d(){l(!i)}const u=f=>{e.path==="/flows"&&f==="/flows"||e.path==="/flows"&&f!=="/flows"&&dt.getIsDraftSelectedFlow()&&!window.confirm('Tem certeza que deseja trocar de página? É possível que as alterações feitas não sejam salvas. Clique no botão amarelo "Publicar alterações" para salvar.')||(r.setRoute(f),n())};return o.jsxs("aside",{className:J("max-xl:absolute max-xl:z-[60]","relative flex h-full flex-col items-center gap-0 bg-card shadow-md","overflow-y-auto overflow-x-hidden",i&&"w-20",!i&&"w-64",!t&&"max-xl:-left-64",t&&"max-xl:left-0"),children:[o.jsx(X,{className:"absolute right-2 top-2 xl:hidden",variant:"ghost",size:"action",icon:o.jsx(wc,{size:26}),onClick:n}),o.jsx("img",{src:"./SmallLogo.svg",alt:"Small Logo ZapVoice Crack",title:"Small Logo ZapVoice Crack",className:ze("min-h-[69px] w-10 transition-all duration-300",!i&&"invisible absolute scale-0 opacity-0")}),o.jsx("img",{src:"./Logo.svg",alt:"Logo ZapVoice Crack",title:"Logo ZapVoice Crack",className:ze("min-h-[69px] w-36 transition-all duration-300",i&&"invisible absolute scale-0 opacity-0")}),o.jsx(nt,{className:"my-1",variant:"default",size:"sm",children:i?`v.${c}`:`versão: ${c}`}),o.jsx("ul",{className:"flex h-full w-full flex-col gap-2",children:a.map(([f,m])=>o.jsxs("li",{onClick:()=>u(f),onKeyUp:p=>{(p.key==="Enter"||p.key===" ")&&u(f)},className:ze("flex cursor-pointer select-none items-center gap-6 px-5 py-4 text-xl font-bold text-card-foreground last:mt-auto",m.path===e.path&&`border-l-[3px] ${m.colors}`),children:[Wz[m.path],o.jsx("span",{className:ze(m.textColor,i&&"-translate-x-64 opacity-0 [transition:opacity_100ms,_transform_500ms]",!i&&"relative flex translate-x-0 opacity-100 [transition:opacity_500ms,_transform_250ms]"),children:m.name})]},m.name))}),o.jsx(X,{className:"h-14 w-full rounded-none max-lg:hidden",variant:"ghost",onClick:()=>d(),iconClasses:J("transform transition-all duration-300",i&&"rotate-180 "),icon:o.jsx(mp,{size:32})})]})}function yH({route:e}){const[t,n]=y.useState(!1),{keyId:r,managerId:s,ownerId:a}=rt.useGetAuthData(),i=Sp.useGetExportOptions();function l(){n(!t)}return y.useEffect(()=>{(async()=>{await new Jr().setTrackerUserProperties({keyId:r,managerId:s,userId:a})})()},[r,s,a]),o.jsx(C8,{children:o.jsxs(lA,{children:[o.jsx(tH,{}),o.jsx(Gz,{}),o.jsx(xH,{currentRoute:e,isCollapsedMobile:t,toggleMobileSidebar:l}),o.jsxs("div",{className:J("flex flex-1 flex-col"),children:[o.jsx(hH,{toggleMobileSidebar:l}),o.jsx(n7,{exportOptions:i,children:hy[e.path]})]})]})})}function vH(){const e=rt.useGetAuthData(),t=Pe.useGetOption("theme")==="dark",[n]=fe("flow",ae),r=hn.useGetCurrentRoute(),s=hn.useSetRoute();return document.body.classList.toggle("zv-dark",t),y.useEffect(()=>{!e.isLoggedIn&&r.path!=="/login"&&s("/login"),e.isLoggedIn&&r.path==="/login"&&s("/home"),r.path==="/flows"&&(n||s("/home"))},[e.isLoggedIn,r.path,s,n]),o.jsx(K8,{children:o.jsx("div",{className:J("relative flex h-screen min-h-full flex-row bg-background font-sans text-foreground zv-dark:bg-main-background"),children:e.isLoggedIn?o.jsx(yH,{route:r}):hy["/login"]})})}function bH(){return o.jsxs("div",{className:"zv_scope",children:[o.jsx(vH,{}),o.jsx(I8,{closeButton:!0})]})}dv.createRoot(document.getElementById("root")).render(o.jsx(x.StrictMode,{children:o.jsx(bH,{})}));
